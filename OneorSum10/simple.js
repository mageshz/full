function removeClass(e){$(e).removeClass("error_field"),$(e).hasClass("loginError")&&$(e).removeClass("loginError")}function onclickforlogin(){window.location.href="/oauth2callback"}function onclickOfFacebookLogin(){window.location.href="/facebookOauthCallback"}function validate(e){var t=e.email,i=e.password;if(t&&i){var s=/^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,4}$/,n=s.test(t);return!!n||($("#statusMessage").html("Please check your email"),$("#voice-box").fadeIn().delay(2e3).fadeOut(),$("#email").addClass("loginError"),!1)}return""==t||null==t||"null"==t?($("#statusMessage").html("Please check your username"),$("#voice-box").fadeIn().delay(2e3).fadeOut(),$("#email").addClass("loginError")):""!=i&&null!=i&&"null"!=i||($("#statusMessage").html("Please check your password"),$("#voice-box").fadeIn().delay(2e3).fadeOut(),$("#password").addClass("loginError")),!1}function loginProceed(e){$("#statusMessage").html("Logging you in..."),$("#voice-box").fadeIn().delay(2e3).fadeOut(),$.ajax({type:"POST",url:"/validateAppLoginDet",async:!0,data:{user_details:JSON.stringify(e)},success:function(t){"no_account"===t.msg?($("#statusMessage").html("Your account doesn't exist, please Sign Up!"),$("#voice-box").fadeIn().delay(2e3).fadeOut(),$("#email").addClass("loginError")):"permission_denied"===t.msg?($("#statusMessage").html("Your account doesn't exist, please request to join!"),$("#voice-box").fadeIn().delay(2e3).fadeOut()):"password_incorrect"===t.msg?($("#statusMessage").html("Incorrect password!"),$("#voice-box").fadeIn().delay(2e3).fadeOut(),$("#password").addClass("loginError")):"error_setting_session"===t.msg?($("#statusMessage").html("Oops!Something went wrong please try after sometime!"),$("#voice-box").fadeIn().delay(2e3).fadeOut()):("landing"===e.from,window.location.href=t.msg)}})}function signUp(e){var t=$("#firstName").val().trim(),i=$("#lastName").val().trim(),s=$("#username").val(),n=$("#password").val(),a=$("#subdomain").val(),o=$("#plan").val();if(isValid(t)===!1)return showStatusMessage("Please enter a valid first name!"),addErrorClass("firstName"),!1;if(isValid(i)===!1)return showStatusMessage("Please enter a valid last name!"),addErrorClass("lastName"),!1;if(isValidEmail(s)===!1)return showStatusMessage("Please enter a valid email address!"),addErrorClass("username"),!1;if(isValid(n)===!1)return showStatusMessage("Please set a password!"),addErrorClass("password"),!1;if(isValidPassword(n)===!1)return addErrorClass("password"),!1;if(/^[a-zA-Z0-9- ]*$/.test(a)===!1)return showStatusMessage("Please remove the special characters!"),addErrorClass("subdomain"),!1;var r={};r.email=s.toLowerCase(),r.password=n,r.firstName=t,r.lastName=i,r.userName=s.toLowerCase(),r.plan_type=o,r.subDomain=a,isExists(r,e)}function isExists(e,t){$("#statusMessage").html("Processing please wait.."),$("#voice-box").fadeIn();window.location.pathname,window.location;console.log("going to signup service");var i={};i.user=e,i.from=t,$.ajax({type:"POST",url:"/create/signup",data:{data:JSON.stringify(i)},success:function(e){var i=e.data;"success"===e.status?($("#statusMessage").fadeOut(),i.authorizeAccess?($("#signuppoup").find(".modal-title").html("One more simple step to verify your account!"),$("#signuppoup").find(".verify-authorization").show().siblings().hide(),$("#signuppoup").find(".modal-header .close").hide(),$(".landingpage_hold").find(".signup-btn").hide(),$(".landingpage_hold").find(".univ-login").hide()):i.directAccess?window.location=window.location.href:i.requested&&"Landing"===t?(univLanding.alertPopup(e.msg),$(".landingpage_hold").find(".signup-btn").hide(),$(".landingpage_hold").find(".univ-login").hide()):window.location=i.page):"failure"===e.status&&showStatusMessage(e.msg)}})}function bkClass(){}function $BK(e){return"string"==typeof e&&(e=document.getElementById(e)),e&&!e.appendTo?bkExtend(e,bkElement.prototype):e}function __(e){return e}if(function(e,t){function i(t,i){var n,a,o,r=t.nodeName.toLowerCase();return"area"===r?(n=t.parentNode,a=n.name,!(!t.href||!a||"map"!==n.nodeName.toLowerCase())&&(o=e("img[usemap=#"+a+"]")[0],!!o&&s(o))):(/input|select|textarea|button|object/.test(r)?!t.disabled:"a"===r?t.href||i:i)&&s(t)}function s(t){return e.expr.filters.visible(t)&&!e(t).parents().addBack().filter(function(){return"hidden"===e.css(this,"visibility")}).length}var n=0,a=/^ui-id-\d+$/;e.ui=e.ui||{},e.extend(e.ui,{version:"1.10.4",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),e.fn.extend({focus:function(t){return function(i,s){return"number"==typeof i?this.each(function(){var t=this;setTimeout(function(){e(t).focus(),s&&s.call(t)},i)}):t.apply(this,arguments)}}(e.fn.focus),scrollParent:function(){var t;return t=e.ui.ie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(e.css(this,"position"))&&/(auto|scroll)/.test(e.css(this,"overflow")+e.css(this,"overflow-y")+e.css(this,"overflow-x"))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test(e.css(this,"overflow")+e.css(this,"overflow-y")+e.css(this,"overflow-x"))}).eq(0),/fixed/.test(this.css("position"))||!t.length?e(document):t},zIndex:function(i){if(i!==t)return this.css("zIndex",i);if(this.length)for(var s,n,a=e(this[0]);a.length&&a[0]!==document;){if(s=a.css("position"),("absolute"===s||"relative"===s||"fixed"===s)&&(n=parseInt(a.css("zIndex"),10),!isNaN(n)&&0!==n))return n;a=a.parent()}return 0},uniqueId:function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++n)})},removeUniqueId:function(){return this.each(function(){a.test(this.id)&&e(this).removeAttr("id")})}}),e.extend(e.expr[":"],{data:e.expr.createPseudo?e.expr.createPseudo(function(t){return function(i){return!!e.data(i,t)}}):function(t,i,s){return!!e.data(t,s[3])},focusable:function(t){return i(t,!isNaN(e.attr(t,"tabindex")))},tabbable:function(t){var s=e.attr(t,"tabindex"),n=isNaN(s);return(n||s>=0)&&i(t,!n)}}),e("<a>").outerWidth(1).jquery||e.each(["Width","Height"],function(i,s){function n(t,i,s,n){return e.each(a,function(){i-=parseFloat(e.css(t,"padding"+this))||0,s&&(i-=parseFloat(e.css(t,"border"+this+"Width"))||0),n&&(i-=parseFloat(e.css(t,"margin"+this))||0)}),i}var a="Width"===s?["Left","Right"]:["Top","Bottom"],o=s.toLowerCase(),r={innerWidth:e.fn.innerWidth,innerHeight:e.fn.innerHeight,outerWidth:e.fn.outerWidth,outerHeight:e.fn.outerHeight};e.fn["inner"+s]=function(i){return i===t?r["inner"+s].call(this):this.each(function(){e(this).css(o,n(this,i)+"px")})},e.fn["outer"+s]=function(t,i){return"number"!=typeof t?r["outer"+s].call(this,t):this.each(function(){e(this).css(o,n(this,t,!0,i)+"px")})}}),e.fn.addBack||(e.fn.addBack=function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}),e("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(e.fn.removeData=function(t){return function(i){return arguments.length?t.call(this,e.camelCase(i)):t.call(this)}}(e.fn.removeData)),e.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase()),e.support.selectstart="onselectstart"in document.createElement("div"),e.fn.extend({disableSelection:function(){return this.bind((e.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(e){e.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),e.extend(e.ui,{plugin:{add:function(t,i,s){var n,a=e.ui[t].prototype;for(n in s)a.plugins[n]=a.plugins[n]||[],a.plugins[n].push([i,s[n]])},call:function(e,t,i){var s,n=e.plugins[t];if(n&&e.element[0].parentNode&&11!==e.element[0].parentNode.nodeType)for(s=0;s<n.length;s++)e.options[n[s][0]]&&n[s][1].apply(e.element,i)}},hasScroll:function(t,i){if("hidden"===e(t).css("overflow"))return!1;var s=i&&"left"===i?"scrollLeft":"scrollTop",n=!1;return t[s]>0||(t[s]=1,n=t[s]>0,t[s]=0,n)}})}(jQuery),function(e,t){var i=0,s=Array.prototype.slice,n=e.cleanData;e.cleanData=function(t){for(var i,s=0;null!=(i=t[s]);s++)try{e(i).triggerHandler("remove")}catch(e){}n(t)},e.widget=function(t,i,s){var n,a,o,r,l={},d=t.split(".")[0];t=t.split(".")[1],n=d+"-"+t,s||(s=i,i=e.Widget),e.expr[":"][n.toLowerCase()]=function(t){return!!e.data(t,n)},e[d]=e[d]||{},a=e[d][t],o=e[d][t]=function(e,t){return this._createWidget?void(arguments.length&&this._createWidget(e,t)):new o(e,t)},e.extend(o,a,{version:s.version,_proto:e.extend({},s),_childConstructors:[]}),r=new i,r.options=e.widget.extend({},r.options),e.each(s,function(t,s){return e.isFunction(s)?void(l[t]=function(){var e=function(){return i.prototype[t].apply(this,arguments)},n=function(e){return i.prototype[t].apply(this,e)};return function(){var t,i=this._super,a=this._superApply;return this._super=e,this._superApply=n,t=s.apply(this,arguments),this._super=i,this._superApply=a,t}}()):void(l[t]=s)}),o.prototype=e.widget.extend(r,{widgetEventPrefix:a?r.widgetEventPrefix||t:t},l,{constructor:o,namespace:d,widgetName:t,widgetFullName:n}),a?(e.each(a._childConstructors,function(t,i){var s=i.prototype;e.widget(s.namespace+"."+s.widgetName,o,i._proto)}),delete a._childConstructors):i._childConstructors.push(o),e.widget.bridge(t,o)},e.widget.extend=function(i){for(var n,a,o=s.call(arguments,1),r=0,l=o.length;r<l;r++)for(n in o[r])a=o[r][n],o[r].hasOwnProperty(n)&&a!==t&&(e.isPlainObject(a)?i[n]=e.isPlainObject(i[n])?e.widget.extend({},i[n],a):e.widget.extend({},a):i[n]=a);return i},e.widget.bridge=function(i,n){var a=n.prototype.widgetFullName||i;e.fn[i]=function(o){var r="string"==typeof o,l=s.call(arguments,1),d=this;return o=!r&&l.length?e.widget.extend.apply(null,[o].concat(l)):o,r?this.each(function(){var s,n=e.data(this,a);return n?e.isFunction(n[o])&&"_"!==o.charAt(0)?(s=n[o].apply(n,l),s!==n&&s!==t?(d=s&&s.jquery?d.pushStack(s.get()):s,!1):void 0):e.error("no such method '"+o+"' for "+i+" widget instance"):e.error("cannot call methods on "+i+" prior to initialization; attempted to call method '"+o+"'")}):this.each(function(){var t=e.data(this,a);t?t.option(o||{})._init():e.data(this,a,new n(o,this))}),d}},e.Widget=function(){},e.Widget._childConstructors=[],e.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(t,s){s=e(s||this.defaultElement||this)[0],this.element=e(s),this.uuid=i++,this.eventNamespace="."+this.widgetName+this.uuid,this.options=e.widget.extend({},this.options,this._getCreateOptions(),t),this.bindings=e(),this.hoverable=e(),this.focusable=e(),s!==this&&(e.data(s,this.widgetFullName,this),this._on(!0,this.element,{remove:function(e){e.target===s&&this.destroy()}}),this.document=e(s.style?s.ownerDocument:s.document||s),this.window=e(this.document[0].defaultView||this.document[0].parentWindow)),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:e.noop,_getCreateEventData:e.noop,_create:e.noop,_init:e.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(e.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:e.noop,widget:function(){return this.element},option:function(i,s){var n,a,o,r=i;if(0===arguments.length)return e.widget.extend({},this.options);if("string"==typeof i)if(r={},n=i.split("."),i=n.shift(),n.length){for(a=r[i]=e.widget.extend({},this.options[i]),o=0;o<n.length-1;o++)a[n[o]]=a[n[o]]||{},a=a[n[o]];if(i=n.pop(),1===arguments.length)return a[i]===t?null:a[i];a[i]=s}else{if(1===arguments.length)return this.options[i]===t?null:this.options[i];r[i]=s}return this._setOptions(r),this},_setOptions:function(e){var t;for(t in e)this._setOption(t,e[t]);return this},_setOption:function(e,t){return this.options[e]=t,"disabled"===e&&(this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!t).attr("aria-disabled",t),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_on:function(t,i,s){var n,a=this;"boolean"!=typeof t&&(s=i,i=t,t=!1),s?(i=n=e(i),this.bindings=this.bindings.add(i)):(s=i,i=this.element,n=this.widget()),e.each(s,function(s,o){function r(){if(t||a.options.disabled!==!0&&!e(this).hasClass("ui-state-disabled"))return("string"==typeof o?a[o]:o).apply(a,arguments)}"string"!=typeof o&&(r.guid=o.guid=o.guid||r.guid||e.guid++);var l=s.match(/^(\w+)\s*(.*)$/),d=l[1]+a.eventNamespace,c=l[2];c?n.delegate(c,d,r):i.bind(d,r)})},_off:function(e,t){t=(t||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,e.unbind(t).undelegate(t)},_delay:function(e,t){function i(){return("string"==typeof e?s[e]:e).apply(s,arguments)}var s=this;return setTimeout(i,t||0)},_hoverable:function(t){this.hoverable=this.hoverable.add(t),this._on(t,{mouseenter:function(t){e(t.currentTarget).addClass("ui-state-hover")},mouseleave:function(t){e(t.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(t){this.focusable=this.focusable.add(t),this._on(t,{focusin:function(t){e(t.currentTarget).addClass("ui-state-focus")},focusout:function(t){e(t.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(t,i,s){var n,a,o=this.options[t];if(s=s||{},i=e.Event(i),i.type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),i.target=this.element[0],a=i.originalEvent)for(n in a)n in i||(i[n]=a[n]);return this.element.trigger(i,s),!(e.isFunction(o)&&o.apply(this.element[0],[i].concat(s))===!1||i.isDefaultPrevented())}},e.each({show:"fadeIn",hide:"fadeOut"},function(t,i){e.Widget.prototype["_"+t]=function(s,n,a){"string"==typeof n&&(n={effect:n});var o,r=n?n===!0||"number"==typeof n?i:n.effect||i:t;n=n||{},"number"==typeof n&&(n={duration:n}),o=!e.isEmptyObject(n),n.complete=a,n.delay&&s.delay(n.delay),o&&e.effects&&e.effects.effect[r]?s[t](n):r!==t&&s[r]?s[r](n.duration,n.easing,a):s.queue(function(i){e(this)[t](),a&&a.call(s[0]),i()})}})}(jQuery),function(e,t){var i=!1;e(document).mouseup(function(){i=!1}),e.widget("ui.mouse",{version:"1.10.4",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var t=this;this.element.bind("mousedown."+this.widgetName,function(e){return t._mouseDown(e)}).bind("click."+this.widgetName,function(i){if(!0===e.data(i.target,t.widgetName+".preventClickEvent"))return e.removeData(i.target,t.widgetName+".preventClickEvent"),i.stopImmediatePropagation(),!1}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&e(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(t){if(!i){this._mouseStarted&&this._mouseUp(t),this._mouseDownEvent=t;var s=this,n=1===t.which,a=!("string"!=typeof this.options.cancel||!t.target.nodeName)&&e(t.target).closest(this.options.cancel).length;return!(n&&!a&&this._mouseCapture(t))||(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){s.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=this._mouseStart(t)!==!1,!this._mouseStarted)?(t.preventDefault(),!0):(!0===e.data(t.target,this.widgetName+".preventClickEvent")&&e.removeData(t.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(e){return s._mouseMove(e)},this._mouseUpDelegate=function(e){return s._mouseUp(e)},e(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),t.preventDefault(),i=!0,!0))}},_mouseMove:function(t){return e.ui.ie&&(!document.documentMode||document.documentMode<9)&&!t.button?this._mouseUp(t):this._mouseStarted?(this._mouseDrag(t),t.preventDefault()):(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,t)!==!1,this._mouseStarted?this._mouseDrag(t):this._mouseUp(t)),!this._mouseStarted)},_mouseUp:function(t){return e(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,t.target===this._mouseDownEvent.target&&e.data(t.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(t)),!1},_mouseDistanceMet:function(e){return Math.max(Math.abs(this._mouseDownEvent.pageX-e.pageX),Math.abs(this._mouseDownEvent.pageY-e.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}})}(jQuery),function(e,t){function i(e,t,i){return[parseFloat(e[0])*(p.test(e[0])?t/100:1),parseFloat(e[1])*(p.test(e[1])?i/100:1)]}function s(t,i){return parseInt(e.css(t,i),10)||0}function n(t){var i=t[0];return 9===i.nodeType?{width:t.width(),height:t.height(),offset:{top:0,left:0}}:e.isWindow(i)?{width:t.width(),height:t.height(),offset:{top:t.scrollTop(),left:t.scrollLeft()}}:i.preventDefault?{width:0,height:0,offset:{top:i.pageY,left:i.pageX}}:{width:t.outerWidth(),height:t.outerHeight(),offset:t.offset()}}e.ui=e.ui||{};var a,o=Math.max,r=Math.abs,l=Math.round,d=/left|center|right/,c=/top|center|bottom/,h=/[\+\-]\d+(\.[\d]+)?%?/,u=/^\w+/,p=/%$/,f=e.fn.position;e.position={scrollbarWidth:function(){if(a!==t)return a;var i,s,n=e("<div style='display:block;position:absolute;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),o=n.children()[0];return e("body").append(n),i=o.offsetWidth,n.css("overflow","scroll"),s=o.offsetWidth,i===s&&(s=n[0].clientWidth),n.remove(),a=i-s},getScrollInfo:function(t){var i=t.isWindow||t.isDocument?"":t.element.css("overflow-x"),s=t.isWindow||t.isDocument?"":t.element.css("overflow-y"),n="scroll"===i||"auto"===i&&t.width<t.element[0].scrollWidth,a="scroll"===s||"auto"===s&&t.height<t.element[0].scrollHeight;return{width:a?e.position.scrollbarWidth():0,height:n?e.position.scrollbarWidth():0}},getWithinInfo:function(t){var i=e(t||window),s=e.isWindow(i[0]),n=!!i[0]&&9===i[0].nodeType;return{element:i,isWindow:s,isDocument:n,offset:i.offset()||{left:0,top:0},scrollLeft:i.scrollLeft(),scrollTop:i.scrollTop(),width:s?i.width():i.outerWidth(),height:s?i.height():i.outerHeight()}}},e.fn.position=function(t){if(!t||!t.of)return f.apply(this,arguments);t=e.extend({},t);var a,p,m,g,v,b,y=e(t.of),_=e.position.getWithinInfo(t.within),w=e.position.getScrollInfo(_),x=(t.collision||"flip").split(" "),C={};return b=n(y),y[0].preventDefault&&(t.at="left top"),p=b.width,m=b.height,g=b.offset,v=e.extend({},g),e.each(["my","at"],function(){var e,i,s=(t[this]||"").split(" ");1===s.length&&(s=d.test(s[0])?s.concat(["center"]):c.test(s[0])?["center"].concat(s):["center","center"]),s[0]=d.test(s[0])?s[0]:"center",s[1]=c.test(s[1])?s[1]:"center",e=h.exec(s[0]),i=h.exec(s[1]),C[this]=[e?e[0]:0,i?i[0]:0],t[this]=[u.exec(s[0])[0],u.exec(s[1])[0]]}),1===x.length&&(x[1]=x[0]),"right"===t.at[0]?v.left+=p:"center"===t.at[0]&&(v.left+=p/2),"bottom"===t.at[1]?v.top+=m:"center"===t.at[1]&&(v.top+=m/2),a=i(C.at,p,m),v.left+=a[0],v.top+=a[1],this.each(function(){var n,d,c=e(this),h=c.outerWidth(),u=c.outerHeight(),f=s(this,"marginLeft"),b=s(this,"marginTop"),k=h+f+s(this,"marginRight")+w.width,S=u+b+s(this,"marginBottom")+w.height,D=e.extend({},v),T=i(C.my,c.outerWidth(),c.outerHeight());"right"===t.my[0]?D.left-=h:"center"===t.my[0]&&(D.left-=h/2),"bottom"===t.my[1]?D.top-=u:"center"===t.my[1]&&(D.top-=u/2),D.left+=T[0],D.top+=T[1],e.support.offsetFractions||(D.left=l(D.left),D.top=l(D.top)),n={marginLeft:f,marginTop:b},e.each(["left","top"],function(i,s){e.ui.position[x[i]]&&e.ui.position[x[i]][s](D,{targetWidth:p,targetHeight:m,elemWidth:h,elemHeight:u,collisionPosition:n,collisionWidth:k,collisionHeight:S,offset:[a[0]+T[0],a[1]+T[1]],my:t.my,at:t.at,within:_,elem:c})}),t.using&&(d=function(e){var i=g.left-D.left,s=i+p-h,n=g.top-D.top,a=n+m-u,l={target:{element:y,left:g.left,top:g.top,width:p,height:m},element:{element:c,left:D.left,top:D.top,width:h,height:u},horizontal:s<0?"left":i>0?"right":"center",vertical:a<0?"top":n>0?"bottom":"middle"};p<h&&r(i+s)<p&&(l.horizontal="center"),m<u&&r(n+a)<m&&(l.vertical="middle"),o(r(i),r(s))>o(r(n),r(a))?l.important="horizontal":l.important="vertical",t.using.call(this,e,l)}),c.offset(e.extend(D,{using:d}))})},e.ui.position={fit:{left:function(e,t){var i,s=t.within,n=s.isWindow?s.scrollLeft:s.offset.left,a=s.width,r=e.left-t.collisionPosition.marginLeft,l=n-r,d=r+t.collisionWidth-a-n;t.collisionWidth>a?l>0&&d<=0?(i=e.left+l+t.collisionWidth-a-n,e.left+=l-i):d>0&&l<=0?e.left=n:l>d?e.left=n+a-t.collisionWidth:e.left=n:l>0?e.left+=l:d>0?e.left-=d:e.left=o(e.left-r,e.left)},top:function(e,t){var i,s=t.within,n=s.isWindow?s.scrollTop:s.offset.top,a=t.within.height,r=e.top-t.collisionPosition.marginTop,l=n-r,d=r+t.collisionHeight-a-n;t.collisionHeight>a?l>0&&d<=0?(i=e.top+l+t.collisionHeight-a-n,e.top+=l-i):d>0&&l<=0?e.top=n:l>d?e.top=n+a-t.collisionHeight:e.top=n:l>0?e.top+=l:d>0?e.top-=d:e.top=o(e.top-r,e.top)}},flip:{left:function(e,t){var i,s,n=t.within,a=n.offset.left+n.scrollLeft,o=n.width,l=n.isWindow?n.scrollLeft:n.offset.left,d=e.left-t.collisionPosition.marginLeft,c=d-l,h=d+t.collisionWidth-o-l,u="left"===t.my[0]?-t.elemWidth:"right"===t.my[0]?t.elemWidth:0,p="left"===t.at[0]?t.targetWidth:"right"===t.at[0]?-t.targetWidth:0,f=-2*t.offset[0];c<0?(i=e.left+u+p+f+t.collisionWidth-o-a,(i<0||i<r(c))&&(e.left+=u+p+f)):h>0&&(s=e.left-t.collisionPosition.marginLeft+u+p+f-l,(s>0||r(s)<h)&&(e.left+=u+p+f))},top:function(e,t){var i,s,n=t.within,a=n.offset.top+n.scrollTop,o=n.height,l=n.isWindow?n.scrollTop:n.offset.top,d=e.top-t.collisionPosition.marginTop,c=d-l,h=d+t.collisionHeight-o-l,u="top"===t.my[1],p=u?-t.elemHeight:"bottom"===t.my[1]?t.elemHeight:0,f="top"===t.at[1]?t.targetHeight:"bottom"===t.at[1]?-t.targetHeight:0,m=-2*t.offset[1];c<0?(s=e.top+p+f+m+t.collisionHeight-o-a,e.top+p+f+m>c&&(s<0||s<r(c))&&(e.top+=p+f+m)):h>0&&(i=e.top-t.collisionPosition.marginTop+p+f+m-l,e.top+p+f+m>h&&(i>0||r(i)<h)&&(e.top+=p+f+m))}},flipfit:{left:function(){e.ui.position.flip.left.apply(this,arguments),e.ui.position.fit.left.apply(this,arguments)},top:function(){e.ui.position.flip.top.apply(this,arguments),e.ui.position.fit.top.apply(this,arguments)}}},function(){var t,i,s,n,a,o=document.getElementsByTagName("body")[0],r=document.createElement("div");t=document.createElement(o?"div":"body"),s={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"},o&&e.extend(s,{position:"absolute",left:"-1000px",top:"-1000px"});for(a in s)t.style[a]=s[a];t.appendChild(r),i=o||document.documentElement,i.insertBefore(t,i.firstChild),r.style.cssText="position: absolute; left: 10.7432222px;",n=e(r).offset().left,e.support.offsetFractions=n>10&&n<11,t.innerHTML="",i.removeChild(t)}()}(jQuery),function(e,t){var i=0,s={},n={};s.height=s.paddingTop=s.paddingBottom=s.borderTopWidth=s.borderBottomWidth="hide",n.height=n.paddingTop=n.paddingBottom=n.borderTopWidth=n.borderBottomWidth="show",e.widget("ui.accordion",{version:"1.10.4",options:{active:0,animate:{},collapsible:!1,event:"click",header:"> li > :first-child,> :not(li):even",heightStyle:"auto",icons:{activeHeader:"ui-icon-triangle-1-s",header:"ui-icon-triangle-1-e"},activate:null,beforeActivate:null},_create:function(){var t=this.options;this.prevShow=this.prevHide=e(),this.element.addClass("ui-accordion ui-widget ui-helper-reset").attr("role","tablist"),t.collapsible||t.active!==!1&&null!=t.active||(t.active=0),this._processPanels(),t.active<0&&(t.active+=this.headers.length),this._refresh()},_getCreateEventData:function(){return{header:this.active,panel:this.active.length?this.active.next():e(),content:this.active.length?this.active.next():e()}},_createIcons:function(){var t=this.options.icons;t&&(e("<span>").addClass("ui-accordion-header-icon ui-icon "+t.header).prependTo(this.headers),this.active.children(".ui-accordion-header-icon").removeClass(t.header).addClass(t.activeHeader),this.headers.addClass("ui-accordion-icons"))},_destroyIcons:function(){this.headers.removeClass("ui-accordion-icons").children(".ui-accordion-header-icon").remove()},_destroy:function(){var e;this.element.removeClass("ui-accordion ui-widget ui-helper-reset").removeAttr("role"),this.headers.removeClass("ui-accordion-header ui-accordion-header-active ui-helper-reset ui-state-default ui-corner-all ui-state-active ui-state-disabled ui-corner-top").removeAttr("role").removeAttr("aria-expanded").removeAttr("aria-selected").removeAttr("aria-controls").removeAttr("tabIndex").each(function(){/^ui-accordion/.test(this.id)&&this.removeAttribute("id")}),this._destroyIcons(),e=this.headers.next().css("display","").removeAttr("role").removeAttr("aria-hidden").removeAttr("aria-labelledby").removeClass("ui-helper-reset ui-widget-content ui-corner-bottom ui-accordion-content ui-accordion-content-active ui-state-disabled").each(function(){/^ui-accordion/.test(this.id)&&this.removeAttribute("id")}),"content"!==this.options.heightStyle&&e.css("height","")},_setOption:function(e,t){return"active"===e?void this._activate(t):("event"===e&&(this.options.event&&this._off(this.headers,this.options.event),this._setupEvents(t)),this._super(e,t),"collapsible"!==e||t||this.options.active!==!1||this._activate(0),"icons"===e&&(this._destroyIcons(),t&&this._createIcons()),void("disabled"===e&&this.headers.add(this.headers.next()).toggleClass("ui-state-disabled",!!t)))},_keydown:function(t){if(!t.altKey&&!t.ctrlKey){var i=e.ui.keyCode,s=this.headers.length,n=this.headers.index(t.target),a=!1;switch(t.keyCode){case i.RIGHT:case i.DOWN:a=this.headers[(n+1)%s];break;case i.LEFT:case i.UP:a=this.headers[(n-1+s)%s];break;case i.SPACE:case i.ENTER:this._eventHandler(t);break;case i.HOME:a=this.headers[0];break;case i.END:a=this.headers[s-1]}a&&(e(t.target).attr("tabIndex",-1),e(a).attr("tabIndex",0),a.focus(),t.preventDefault())}},_panelKeyDown:function(t){t.keyCode===e.ui.keyCode.UP&&t.ctrlKey&&e(t.currentTarget).prev().focus()},refresh:function(){var t=this.options;this._processPanels(),t.active===!1&&t.collapsible===!0||!this.headers.length?(t.active=!1,this.active=e()):t.active===!1?this._activate(0):this.active.length&&!e.contains(this.element[0],this.active[0])?this.headers.length===this.headers.find(".ui-state-disabled").length?(t.active=!1,this.active=e()):this._activate(Math.max(0,t.active-1)):t.active=this.headers.index(this.active),this._destroyIcons(),this._refresh()},_processPanels:function(){this.headers=this.element.find(this.options.header).addClass("ui-accordion-header ui-helper-reset ui-state-default ui-corner-all"),this.headers.next().addClass("ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom").filter(":not(.ui-accordion-content-active)").hide()},_refresh:function(){var t,s=this.options,n=s.heightStyle,a=this.element.parent(),o=this.accordionId="ui-accordion-"+(this.element.attr("id")||++i);this.active=this._findActive(s.active).addClass("ui-accordion-header-active ui-state-active ui-corner-top").removeClass("ui-corner-all"),this.active.next().addClass("ui-accordion-content-active").show(),this.headers.attr("role","tab").each(function(t){var i=e(this),s=i.attr("id"),n=i.next(),a=n.attr("id");s||(s=o+"-header-"+t,i.attr("id",s)),a||(a=o+"-panel-"+t,n.attr("id",a)),i.attr("aria-controls",a),n.attr("aria-labelledby",s)}).next().attr("role","tabpanel"),this.headers.not(this.active).attr({"aria-selected":"false","aria-expanded":"false",tabIndex:-1}).next().attr({"aria-hidden":"true"}).hide(),this.active.length?this.active.attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0}).next().attr({"aria-hidden":"false"}):this.headers.eq(0).attr("tabIndex",0),this._createIcons(),this._setupEvents(s.event),"fill"===n?(t=a.height(),this.element.siblings(":visible").each(function(){var i=e(this),s=i.css("position");"absolute"!==s&&"fixed"!==s&&(t-=i.outerHeight(!0))}),this.headers.each(function(){t-=e(this).outerHeight(!0)}),this.headers.next().each(function(){e(this).height(Math.max(0,t-e(this).innerHeight()+e(this).height()))}).css("overflow","auto")):"auto"===n&&(t=0,this.headers.next().each(function(){t=Math.max(t,e(this).css("height","").height())}).height(t))},_activate:function(t){var i=this._findActive(t)[0];i!==this.active[0]&&(i=i||this.active[0],this._eventHandler({target:i,currentTarget:i,preventDefault:e.noop}))},_findActive:function(t){return"number"==typeof t?this.headers.eq(t):e()},_setupEvents:function(t){var i={keydown:"_keydown"};t&&e.each(t.split(" "),function(e,t){i[t]="_eventHandler"}),this._off(this.headers.add(this.headers.next())),this._on(this.headers,i),this._on(this.headers.next(),{keydown:"_panelKeyDown"}),this._hoverable(this.headers),this._focusable(this.headers)},_eventHandler:function(t){var i=this.options,s=this.active,n=e(t.currentTarget),a=n[0]===s[0],o=a&&i.collapsible,r=o?e():n.next(),l=s.next(),d={oldHeader:s,oldPanel:l,newHeader:o?e():n,newPanel:r};t.preventDefault(),a&&!i.collapsible||this._trigger("beforeActivate",t,d)===!1||(i.active=!o&&this.headers.index(n),this.active=a?e():n,this._toggle(d),s.removeClass("ui-accordion-header-active ui-state-active"),i.icons&&s.children(".ui-accordion-header-icon").removeClass(i.icons.activeHeader).addClass(i.icons.header),a||(n.removeClass("ui-corner-all").addClass("ui-accordion-header-active ui-state-active ui-corner-top"),i.icons&&n.children(".ui-accordion-header-icon").removeClass(i.icons.header).addClass(i.icons.activeHeader),n.next().addClass("ui-accordion-content-active")))},_toggle:function(t){var i=t.newPanel,s=this.prevShow.length?this.prevShow:t.oldPanel;this.prevShow.add(this.prevHide).stop(!0,!0),this.prevShow=i,this.prevHide=s,this.options.animate?this._animate(i,s,t):(s.hide(),i.show(),this._toggleComplete(t)),s.attr({"aria-hidden":"true"}),s.prev().attr("aria-selected","false"),i.length&&s.length?s.prev().attr({tabIndex:-1,"aria-expanded":"false"}):i.length&&this.headers.filter(function(){return 0===e(this).attr("tabIndex")}).attr("tabIndex",-1),i.attr("aria-hidden","false").prev().attr({"aria-selected":"true",tabIndex:0,"aria-expanded":"true"})},_animate:function(e,t,i){var a,o,r,l=this,d=0,c=e.length&&(!t.length||e.index()<t.index()),h=this.options.animate||{},u=c&&h.down||h,p=function(){l._toggleComplete(i)};return"number"==typeof u&&(r=u),"string"==typeof u&&(o=u),o=o||u.easing||h.easing,r=r||u.duration||h.duration,t.length?e.length?(a=e.show().outerHeight(),t.animate(s,{duration:r,easing:o,step:function(e,t){t.now=Math.round(e)}}),void e.hide().animate(n,{duration:r,easing:o,complete:p,step:function(e,i){i.now=Math.round(e),"height"!==i.prop?d+=i.now:"content"!==l.options.heightStyle&&(i.now=Math.round(a-t.outerHeight()-d),d=0)}})):t.animate(s,r,o,p):e.animate(n,r,o,p)},_toggleComplete:function(e){var t=e.oldPanel;t.removeClass("ui-accordion-content-active").prev().removeClass("ui-corner-top").addClass("ui-corner-all"),t.length&&(t.parent()[0].className=t.parent()[0].className),this._trigger("activate",null,e)}})}(jQuery),function(e,t){e.widget("ui.autocomplete",{version:"1.10.4",defaultElement:"<input>",options:{appendTo:null,autoFocus:!1,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null,change:null,close:null,focus:null,open:null,response:null,search:null,select:null},requestIndex:0,pending:0,_create:function(){var t,i,s,n=this.element[0].nodeName.toLowerCase(),a="textarea"===n,o="input"===n;
this.isMultiLine=!!a||!o&&this.element.prop("isContentEditable"),this.valueMethod=this.element[a||o?"val":"text"],this.isNewMenu=!0,this.element.addClass("ui-autocomplete-input").attr("autocomplete","off"),this._on(this.element,{keydown:function(n){if(this.element.prop("readOnly"))return t=!0,s=!0,void(i=!0);t=!1,s=!1,i=!1;var a=e.ui.keyCode;switch(n.keyCode){case a.PAGE_UP:t=!0,this._move("previousPage",n);break;case a.PAGE_DOWN:t=!0,this._move("nextPage",n);break;case a.UP:t=!0,this._keyEvent("previous",n);break;case a.DOWN:t=!0,this._keyEvent("next",n);break;case a.ENTER:case a.NUMPAD_ENTER:this.menu.active&&(t=!0,n.preventDefault(),this.menu.select(n));break;case a.TAB:this.menu.active&&this.menu.select(n);break;case a.ESCAPE:this.menu.element.is(":visible")&&(this._value(this.term),this.close(n),n.preventDefault());break;default:i=!0,this._searchTimeout(n)}},keypress:function(s){if(t)return t=!1,void(this.isMultiLine&&!this.menu.element.is(":visible")||s.preventDefault());if(!i){var n=e.ui.keyCode;switch(s.keyCode){case n.PAGE_UP:this._move("previousPage",s);break;case n.PAGE_DOWN:this._move("nextPage",s);break;case n.UP:this._keyEvent("previous",s);break;case n.DOWN:this._keyEvent("next",s)}}},input:function(e){return s?(s=!1,void e.preventDefault()):void this._searchTimeout(e)},focus:function(){this.selectedItem=null,this.previous=this._value()},blur:function(e){return this.cancelBlur?void delete this.cancelBlur:(clearTimeout(this.searching),this.close(e),void this._change(e))}}),this._initSource(),this.menu=e("<ul>").addClass("ui-autocomplete ui-front").appendTo(this._appendTo()).menu({role:null}).hide().data("ui-menu"),this._on(this.menu.element,{mousedown:function(t){t.preventDefault(),this.cancelBlur=!0,this._delay(function(){delete this.cancelBlur});var i=this.menu.element[0];e(t.target).closest(".ui-menu-item").length||this._delay(function(){var t=this;this.document.one("mousedown",function(s){s.target===t.element[0]||s.target===i||e.contains(i,s.target)||t.close()})})},menufocus:function(t,i){if(this.isNewMenu&&(this.isNewMenu=!1,t.originalEvent&&/^mouse/.test(t.originalEvent.type)))return this.menu.blur(),void this.document.one("mousemove",function(){e(t.target).trigger(t.originalEvent)});var s=i.item.data("ui-autocomplete-item");!1!==this._trigger("focus",t,{item:s})?t.originalEvent&&/^key/.test(t.originalEvent.type)&&this._value(s.value):this.liveRegion.text(s.value)},menuselect:function(e,t){var i=t.item.data("ui-autocomplete-item"),s=this.previous;this.element[0]!==this.document[0].activeElement&&(this.element.focus(),this.previous=s,this._delay(function(){this.previous=s,this.selectedItem=i})),!1!==this._trigger("select",e,{item:i})&&this._value(i.value),this.term=this._value(),this.close(e),this.selectedItem=i}}),this.liveRegion=e("<span>",{role:"status","aria-live":"polite"}).addClass("ui-helper-hidden-accessible").insertBefore(this.element),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_destroy:function(){clearTimeout(this.searching),this.element.removeClass("ui-autocomplete-input").removeAttr("autocomplete"),this.menu.element.remove(),this.liveRegion.remove()},_setOption:function(e,t){this._super(e,t),"source"===e&&this._initSource(),"appendTo"===e&&this.menu.element.appendTo(this._appendTo()),"disabled"===e&&t&&this.xhr&&this.xhr.abort()},_appendTo:function(){var t=this.options.appendTo;return t&&(t=t.jquery||t.nodeType?e(t):this.document.find(t).eq(0)),t||(t=this.element.closest(".ui-front")),t.length||(t=this.document[0].body),t},_initSource:function(){var t,i,s=this;e.isArray(this.options.source)?(t=this.options.source,this.source=function(i,s){s(e.ui.autocomplete.filter(t,i.term))}):"string"==typeof this.options.source?(i=this.options.source,this.source=function(t,n){s.xhr&&s.xhr.abort(),s.xhr=e.ajax({url:i,data:t,dataType:"json",success:function(e){n(e)},error:function(){n([])}})}):this.source=this.options.source},_searchTimeout:function(e){clearTimeout(this.searching),this.searching=this._delay(function(){this.term!==this._value()&&(this.selectedItem=null,this.search(null,e))},this.options.delay)},search:function(e,t){return e=null!=e?e:this._value(),this.term=this._value(),e.length<this.options.minLength?this.close(t):this._trigger("search",t)!==!1?this._search(e):void 0},_search:function(e){this.pending++,this.element.addClass("ui-autocomplete-loading"),this.cancelSearch=!1,this.source({term:e},this._response())},_response:function(){var t=++this.requestIndex;return e.proxy(function(e){t===this.requestIndex&&this.__response(e),this.pending--,this.pending||this.element.removeClass("ui-autocomplete-loading")},this)},__response:function(e){e&&(e=this._normalize(e)),this._trigger("response",null,{content:e}),!this.options.disabled&&e&&e.length&&!this.cancelSearch?(this._suggest(e),this._trigger("open")):this._close()},close:function(e){this.cancelSearch=!0,this._close(e)},_close:function(e){this.menu.element.is(":visible")&&(this.menu.element.hide(),this.menu.blur(),this.isNewMenu=!0,this._trigger("close",e))},_change:function(e){this.previous!==this._value()&&this._trigger("change",e,{item:this.selectedItem})},_normalize:function(t){return t.length&&t[0].label&&t[0].value?t:e.map(t,function(t){return"string"==typeof t?{label:t,value:t}:e.extend({label:t.label||t.value,value:t.value||t.label},t)})},_suggest:function(t){var i=this.menu.element.empty();this._renderMenu(i,t),this.isNewMenu=!0,this.menu.refresh(),i.show(),this._resizeMenu(),i.position(e.extend({of:this.element},this.options.position)),this.options.autoFocus&&this.menu.next()},_resizeMenu:function(){var e=this.menu.element;e.outerWidth(Math.max(e.width("").outerWidth()+1,this.element.outerWidth()))},_renderMenu:function(t,i){var s=this;e.each(i,function(e,i){s._renderItemData(t,i)})},_renderItemData:function(e,t){return this._renderItem(e,t).data("ui-autocomplete-item",t)},_renderItem:function(t,i){return e("<li>").append(e("<a>").text(i.label)).appendTo(t)},_move:function(e,t){return this.menu.element.is(":visible")?this.menu.isFirstItem()&&/^previous/.test(e)||this.menu.isLastItem()&&/^next/.test(e)?(this._value(this.term),void this.menu.blur()):void this.menu[e](t):void this.search(null,t)},widget:function(){return this.menu.element},_value:function(){return this.valueMethod.apply(this.element,arguments)},_keyEvent:function(e,t){this.isMultiLine&&!this.menu.element.is(":visible")||(this._move(e,t),t.preventDefault())}}),e.extend(e.ui.autocomplete,{escapeRegex:function(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")},filter:function(t,i){var s=new RegExp(e.ui.autocomplete.escapeRegex(i),"i");return e.grep(t,function(e){return s.test(e.label||e.value||e)})}}),e.widget("ui.autocomplete",e.ui.autocomplete,{options:{messages:{noResults:"No search results.",results:function(e){return e+(e>1?" results are":" result is")+" available, use up and down arrow keys to navigate."}}},__response:function(e){var t;this._superApply(arguments),this.options.disabled||this.cancelSearch||(t=e&&e.length?this.options.messages.results(e.length):this.options.messages.noResults,this.liveRegion.text(t))}})}(jQuery),function(e,t){var i,s="ui-button ui-widget ui-state-default ui-corner-all",n="ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only",a=function(){var t=e(this);setTimeout(function(){t.find(":ui-button").button("refresh")},1)},o=function(t){var i=t.name,s=t.form,n=e([]);return i&&(i=i.replace(/'/g,"\\'"),n=s?e(s).find("[name='"+i+"']"):e("[name='"+i+"']",t.ownerDocument).filter(function(){return!this.form})),n};e.widget("ui.button",{version:"1.10.4",defaultElement:"<button>",options:{disabled:null,text:!0,label:null,icons:{primary:null,secondary:null}},_create:function(){this.element.closest("form").unbind("reset"+this.eventNamespace).bind("reset"+this.eventNamespace,a),"boolean"!=typeof this.options.disabled?this.options.disabled=!!this.element.prop("disabled"):this.element.prop("disabled",this.options.disabled),this._determineButtonType(),this.hasTitle=!!this.buttonElement.attr("title");var t=this,n=this.options,r="checkbox"===this.type||"radio"===this.type,l=r?"":"ui-state-active";null===n.label&&(n.label="input"===this.type?this.buttonElement.val():this.buttonElement.html()),this._hoverable(this.buttonElement),this.buttonElement.addClass(s).attr("role","button").bind("mouseenter"+this.eventNamespace,function(){n.disabled||this===i&&e(this).addClass("ui-state-active")}).bind("mouseleave"+this.eventNamespace,function(){n.disabled||e(this).removeClass(l)}).bind("click"+this.eventNamespace,function(e){n.disabled&&(e.preventDefault(),e.stopImmediatePropagation())}),this._on({focus:function(){this.buttonElement.addClass("ui-state-focus")},blur:function(){this.buttonElement.removeClass("ui-state-focus")}}),r&&this.element.bind("change"+this.eventNamespace,function(){t.refresh()}),"checkbox"===this.type?this.buttonElement.bind("click"+this.eventNamespace,function(){if(n.disabled)return!1}):"radio"===this.type?this.buttonElement.bind("click"+this.eventNamespace,function(){if(n.disabled)return!1;e(this).addClass("ui-state-active"),t.buttonElement.attr("aria-pressed","true");var i=t.element[0];o(i).not(i).map(function(){return e(this).button("widget")[0]}).removeClass("ui-state-active").attr("aria-pressed","false")}):(this.buttonElement.bind("mousedown"+this.eventNamespace,function(){return!n.disabled&&(e(this).addClass("ui-state-active"),i=this,void t.document.one("mouseup",function(){i=null}))}).bind("mouseup"+this.eventNamespace,function(){return!n.disabled&&void e(this).removeClass("ui-state-active")}).bind("keydown"+this.eventNamespace,function(t){return!n.disabled&&void(t.keyCode!==e.ui.keyCode.SPACE&&t.keyCode!==e.ui.keyCode.ENTER||e(this).addClass("ui-state-active"))}).bind("keyup"+this.eventNamespace+" blur"+this.eventNamespace,function(){e(this).removeClass("ui-state-active")}),this.buttonElement.is("a")&&this.buttonElement.keyup(function(t){t.keyCode===e.ui.keyCode.SPACE&&e(this).click()})),this._setOption("disabled",n.disabled),this._resetButton()},_determineButtonType:function(){var e,t,i;this.element.is("[type=checkbox]")?this.type="checkbox":this.element.is("[type=radio]")?this.type="radio":this.element.is("input")?this.type="input":this.type="button","checkbox"===this.type||"radio"===this.type?(e=this.element.parents().last(),t="label[for='"+this.element.attr("id")+"']",this.buttonElement=e.find(t),this.buttonElement.length||(e=e.length?e.siblings():this.element.siblings(),this.buttonElement=e.filter(t),this.buttonElement.length||(this.buttonElement=e.find(t))),this.element.addClass("ui-helper-hidden-accessible"),i=this.element.is(":checked"),i&&this.buttonElement.addClass("ui-state-active"),this.buttonElement.prop("aria-pressed",i)):this.buttonElement=this.element},widget:function(){return this.buttonElement},_destroy:function(){this.element.removeClass("ui-helper-hidden-accessible"),this.buttonElement.removeClass(s+" ui-state-active "+n).removeAttr("role").removeAttr("aria-pressed").html(this.buttonElement.find(".ui-button-text").html()),this.hasTitle||this.buttonElement.removeAttr("title")},_setOption:function(e,t){return this._super(e,t),"disabled"===e?(this.element.prop("disabled",!!t),void(t&&this.buttonElement.removeClass("ui-state-focus"))):void this._resetButton()},refresh:function(){var t=this.element.is("input, button")?this.element.is(":disabled"):this.element.hasClass("ui-button-disabled");t!==this.options.disabled&&this._setOption("disabled",t),"radio"===this.type?o(this.element[0]).each(function(){e(this).is(":checked")?e(this).button("widget").addClass("ui-state-active").attr("aria-pressed","true"):e(this).button("widget").removeClass("ui-state-active").attr("aria-pressed","false")}):"checkbox"===this.type&&(this.element.is(":checked")?this.buttonElement.addClass("ui-state-active").attr("aria-pressed","true"):this.buttonElement.removeClass("ui-state-active").attr("aria-pressed","false"))},_resetButton:function(){if("input"===this.type)return void(this.options.label&&this.element.val(this.options.label));var t=this.buttonElement.removeClass(n),i=e("<span></span>",this.document[0]).addClass("ui-button-text").html(this.options.label).appendTo(t.empty()).text(),s=this.options.icons,a=s.primary&&s.secondary,o=[];s.primary||s.secondary?(this.options.text&&o.push("ui-button-text-icon"+(a?"s":s.primary?"-primary":"-secondary")),s.primary&&t.prepend("<span class='ui-button-icon-primary ui-icon "+s.primary+"'></span>"),s.secondary&&t.append("<span class='ui-button-icon-secondary ui-icon "+s.secondary+"'></span>"),this.options.text||(o.push(a?"ui-button-icons-only":"ui-button-icon-only"),this.hasTitle||t.attr("title",e.trim(i)))):o.push("ui-button-text-only"),t.addClass(o.join(" "))}}),e.widget("ui.buttonset",{version:"1.10.4",options:{items:"button, input[type=button], input[type=submit], input[type=reset], input[type=checkbox], input[type=radio], a, :data(ui-button)"},_create:function(){this.element.addClass("ui-buttonset")},_init:function(){this.refresh()},_setOption:function(e,t){"disabled"===e&&this.buttons.button("option",e,t),this._super(e,t)},refresh:function(){var t="rtl"===this.element.css("direction");this.buttons=this.element.find(this.options.items).filter(":ui-button").button("refresh").end().not(":ui-button").button().end().map(function(){return e(this).button("widget")[0]}).removeClass("ui-corner-all ui-corner-left ui-corner-right").filter(":first").addClass(t?"ui-corner-right":"ui-corner-left").end().filter(":last").addClass(t?"ui-corner-left":"ui-corner-right").end().end()},_destroy:function(){this.element.removeClass("ui-buttonset"),this.buttons.map(function(){return e(this).button("widget")[0]}).removeClass("ui-corner-left ui-corner-right").end().button("destroy")}})}(jQuery),function(e,t){function i(){this._curInst=null,this._keyEvent=!1,this._disabledInputs=[],this._datepickerShowing=!1,this._inDialog=!1,this._mainDivId="ui-datepicker-div",this._inlineClass="ui-datepicker-inline",this._appendClass="ui-datepicker-append",this._triggerClass="ui-datepicker-trigger",this._dialogClass="ui-datepicker-dialog",this._disableClass="ui-datepicker-disabled",this._unselectableClass="ui-datepicker-unselectable",this._currentClass="ui-datepicker-current-day",this._dayOverClass="ui-datepicker-days-cell-over",this.regional=[],this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:!1,hideIfNoPrevNext:!1,navigationAsDateFormat:!1,gotoCurrent:!1,changeMonth:!1,changeYear:!1,yearRange:"c-10:c+10",showOtherMonths:!1,selectOtherMonths:!1,showWeek:!1,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:!0,showButtonPanel:!1,autoSize:!1,disabled:!1},e.extend(this._defaults,this.regional[""]),this.dpDiv=s(e("<div id='"+this._mainDivId+"' class='ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>"))}function s(t){var i="button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";return t.delegate(i,"mouseout",function(){e(this).removeClass("ui-state-hover"),this.className.indexOf("ui-datepicker-prev")!==-1&&e(this).removeClass("ui-datepicker-prev-hover"),this.className.indexOf("ui-datepicker-next")!==-1&&e(this).removeClass("ui-datepicker-next-hover")}).delegate(i,"mouseover",function(){e.datepicker._isDisabledDatepicker(a.inline?t.parent()[0]:a.input[0])||(e(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"),e(this).addClass("ui-state-hover"),this.className.indexOf("ui-datepicker-prev")!==-1&&e(this).addClass("ui-datepicker-prev-hover"),this.className.indexOf("ui-datepicker-next")!==-1&&e(this).addClass("ui-datepicker-next-hover"))})}function n(t,i){e.extend(t,i);for(var s in i)null==i[s]&&(t[s]=i[s]);return t}e.extend(e.ui,{datepicker:{version:"1.10.4"}});var a,o="datepicker";e.extend(i.prototype,{markerClassName:"hasDatepicker",maxRows:4,_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(e){return n(this._defaults,e||{}),this},_attachDatepicker:function(t,i){var s,n,a;s=t.nodeName.toLowerCase(),n="div"===s||"span"===s,t.id||(this.uuid+=1,t.id="dp"+this.uuid),a=this._newInst(e(t),n),a.settings=e.extend({},i||{}),"input"===s?this._connectDatepicker(t,a):n&&this._inlineDatepicker(t,a)},_newInst:function(t,i){var n=t[0].id.replace(/([^A-Za-z0-9_\-])/g,"\\\\$1");return{id:n,input:t,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:i,dpDiv:i?s(e("<div class='"+this._inlineClass+" ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>")):this.dpDiv}},_connectDatepicker:function(t,i){var s=e(t);i.append=e([]),i.trigger=e([]),s.hasClass(this.markerClassName)||(this._attachments(s,i),s.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).keyup(this._doKeyUp),this._autoSize(i),e.data(t,o,i),i.settings.disabled&&this._disableDatepicker(t))},_attachments:function(t,i){var s,n,a,o=this._get(i,"appendText"),r=this._get(i,"isRTL");i.append&&i.append.remove(),o&&(i.append=e("<span class='"+this._appendClass+"'>"+o+"</span>"),t[r?"before":"after"](i.append)),t.unbind("focus",this._showDatepicker),i.trigger&&i.trigger.remove(),s=this._get(i,"showOn"),"focus"!==s&&"both"!==s||t.focus(this._showDatepicker),"button"!==s&&"both"!==s||(n=this._get(i,"buttonText"),a=this._get(i,"buttonImage"),i.trigger=e(this._get(i,"buttonImageOnly")?e("<img/>").addClass(this._triggerClass).attr({src:a,alt:n,title:n}):e("<button type='button'></button>").addClass(this._triggerClass).html(a?e("<img/>").attr({src:a,alt:n,title:n}):n)),t[r?"before":"after"](i.trigger),i.trigger.click(function(){return e.datepicker._datepickerShowing&&e.datepicker._lastInput===t[0]?e.datepicker._hideDatepicker():e.datepicker._datepickerShowing&&e.datepicker._lastInput!==t[0]?(e.datepicker._hideDatepicker(),e.datepicker._showDatepicker(t[0])):e.datepicker._showDatepicker(t[0]),!1}))},_autoSize:function(e){if(this._get(e,"autoSize")&&!e.inline){var t,i,s,n,a=new Date(2009,11,20),o=this._get(e,"dateFormat");o.match(/[DM]/)&&(t=function(e){for(i=0,s=0,n=0;n<e.length;n++)e[n].length>i&&(i=e[n].length,s=n);return s},a.setMonth(t(this._get(e,o.match(/MM/)?"monthNames":"monthNamesShort"))),a.setDate(t(this._get(e,o.match(/DD/)?"dayNames":"dayNamesShort"))+20-a.getDay())),e.input.attr("size",this._formatDate(e,a).length)}},_inlineDatepicker:function(t,i){var s=e(t);s.hasClass(this.markerClassName)||(s.addClass(this.markerClassName).append(i.dpDiv),e.data(t,o,i),this._setDate(i,this._getDefaultDate(i),!0),this._updateDatepicker(i),this._updateAlternate(i),i.settings.disabled&&this._disableDatepicker(t),i.dpDiv.css("display","block"))},_dialogDatepicker:function(t,i,s,a,r){var l,d,c,h,u,p=this._dialogInst;return p||(this.uuid+=1,l="dp"+this.uuid,this._dialogInput=e("<input type='text' id='"+l+"' style='position: absolute; top: -100px; width: 0px;'/>"),this._dialogInput.keydown(this._doKeyDown),e("body").append(this._dialogInput),p=this._dialogInst=this._newInst(this._dialogInput,!1),p.settings={},e.data(this._dialogInput[0],o,p)),n(p.settings,a||{}),i=i&&i.constructor===Date?this._formatDate(p,i):i,this._dialogInput.val(i),this._pos=r?r.length?r:[r.pageX,r.pageY]:null,this._pos||(d=document.documentElement.clientWidth,c=document.documentElement.clientHeight,h=document.documentElement.scrollLeft||document.body.scrollLeft,u=document.documentElement.scrollTop||document.body.scrollTop,this._pos=[d/2-100+h,c/2-150+u]),this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px"),p.settings.onSelect=s,this._inDialog=!0,this.dpDiv.addClass(this._dialogClass),this._showDatepicker(this._dialogInput[0]),e.blockUI&&e.blockUI(this.dpDiv),e.data(this._dialogInput[0],o,p),this},_destroyDatepicker:function(t){var i,s=e(t),n=e.data(t,o);s.hasClass(this.markerClassName)&&(i=t.nodeName.toLowerCase(),e.removeData(t,o),"input"===i?(n.append.remove(),n.trigger.remove(),s.removeClass(this.markerClassName).unbind("focus",this._showDatepicker).unbind("keydown",this._doKeyDown).unbind("keypress",this._doKeyPress).unbind("keyup",this._doKeyUp)):"div"!==i&&"span"!==i||s.removeClass(this.markerClassName).empty())},_enableDatepicker:function(t){var i,s,n=e(t),a=e.data(t,o);n.hasClass(this.markerClassName)&&(i=t.nodeName.toLowerCase(),"input"===i?(t.disabled=!1,a.trigger.filter("button").each(function(){this.disabled=!1}).end().filter("img").css({opacity:"1.0",cursor:""})):"div"!==i&&"span"!==i||(s=n.children("."+this._inlineClass),s.children().removeClass("ui-state-disabled"),s.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!1)),this._disabledInputs=e.map(this._disabledInputs,function(e){return e===t?null:e}))},_disableDatepicker:function(t){var i,s,n=e(t),a=e.data(t,o);n.hasClass(this.markerClassName)&&(i=t.nodeName.toLowerCase(),"input"===i?(t.disabled=!0,a.trigger.filter("button").each(function(){this.disabled=!0}).end().filter("img").css({opacity:"0.5",cursor:"default"})):"div"!==i&&"span"!==i||(s=n.children("."+this._inlineClass),s.children().addClass("ui-state-disabled"),s.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!0)),this._disabledInputs=e.map(this._disabledInputs,function(e){return e===t?null:e}),this._disabledInputs[this._disabledInputs.length]=t)},_isDisabledDatepicker:function(e){if(!e)return!1;for(var t=0;t<this._disabledInputs.length;t++)if(this._disabledInputs[t]===e)return!0;return!1},_getInst:function(t){try{return e.data(t,o)}catch(e){throw"Missing instance data for this datepicker"}},_optionDatepicker:function(i,s,a){var o,r,l,d,c=this._getInst(i);return 2===arguments.length&&"string"==typeof s?"defaults"===s?e.extend({},e.datepicker._defaults):c?"all"===s?e.extend({},c.settings):this._get(c,s):null:(o=s||{},"string"==typeof s&&(o={},o[s]=a),void(c&&(this._curInst===c&&this._hideDatepicker(),r=this._getDateDatepicker(i,!0),l=this._getMinMaxDate(c,"min"),d=this._getMinMaxDate(c,"max"),n(c.settings,o),null!==l&&o.dateFormat!==t&&o.minDate===t&&(c.settings.minDate=this._formatDate(c,l)),null!==d&&o.dateFormat!==t&&o.maxDate===t&&(c.settings.maxDate=this._formatDate(c,d)),"disabled"in o&&(o.disabled?this._disableDatepicker(i):this._enableDatepicker(i)),this._attachments(e(i),c),this._autoSize(c),this._setDate(c,r),this._updateAlternate(c),this._updateDatepicker(c))))},_changeDatepicker:function(e,t,i){this._optionDatepicker(e,t,i)},_refreshDatepicker:function(e){var t=this._getInst(e);t&&this._updateDatepicker(t)},_setDateDatepicker:function(e,t){var i=this._getInst(e);i&&(this._setDate(i,t),this._updateDatepicker(i),this._updateAlternate(i))},_getDateDatepicker:function(e,t){var i=this._getInst(e);return i&&!i.inline&&this._setDateFromField(i,t),i?this._getDate(i):null},_doKeyDown:function(t){var i,s,n,a=e.datepicker._getInst(t.target),o=!0,r=a.dpDiv.is(".ui-datepicker-rtl");if(a._keyEvent=!0,e.datepicker._datepickerShowing)switch(t.keyCode){case 9:e.datepicker._hideDatepicker(),o=!1;break;case 13:return n=e("td."+e.datepicker._dayOverClass+":not(."+e.datepicker._currentClass+")",a.dpDiv),n[0]&&e.datepicker._selectDay(t.target,a.selectedMonth,a.selectedYear,n[0]),i=e.datepicker._get(a,"onSelect"),i?(s=e.datepicker._formatDate(a),i.apply(a.input?a.input[0]:null,[s,a])):e.datepicker._hideDatepicker(),!1;case 27:e.datepicker._hideDatepicker();break;case 33:e.datepicker._adjustDate(t.target,t.ctrlKey?-e.datepicker._get(a,"stepBigMonths"):-e.datepicker._get(a,"stepMonths"),"M");break;case 34:e.datepicker._adjustDate(t.target,t.ctrlKey?+e.datepicker._get(a,"stepBigMonths"):+e.datepicker._get(a,"stepMonths"),"M");break;case 35:(t.ctrlKey||t.metaKey)&&e.datepicker._clearDate(t.target),o=t.ctrlKey||t.metaKey;break;case 36:(t.ctrlKey||t.metaKey)&&e.datepicker._gotoToday(t.target),o=t.ctrlKey||t.metaKey;break;case 37:(t.ctrlKey||t.metaKey)&&e.datepicker._adjustDate(t.target,r?1:-1,"D"),o=t.ctrlKey||t.metaKey,t.originalEvent.altKey&&e.datepicker._adjustDate(t.target,t.ctrlKey?-e.datepicker._get(a,"stepBigMonths"):-e.datepicker._get(a,"stepMonths"),"M");break;case 38:(t.ctrlKey||t.metaKey)&&e.datepicker._adjustDate(t.target,-7,"D"),o=t.ctrlKey||t.metaKey;break;case 39:(t.ctrlKey||t.metaKey)&&e.datepicker._adjustDate(t.target,r?-1:1,"D"),o=t.ctrlKey||t.metaKey,t.originalEvent.altKey&&e.datepicker._adjustDate(t.target,t.ctrlKey?+e.datepicker._get(a,"stepBigMonths"):+e.datepicker._get(a,"stepMonths"),"M");break;case 40:(t.ctrlKey||t.metaKey)&&e.datepicker._adjustDate(t.target,7,"D"),o=t.ctrlKey||t.metaKey;break;default:o=!1}else 36===t.keyCode&&t.ctrlKey?e.datepicker._showDatepicker(this):o=!1;o&&(t.preventDefault(),t.stopPropagation())},_doKeyPress:function(t){var i,s,n=e.datepicker._getInst(t.target);if(e.datepicker._get(n,"constrainInput"))return i=e.datepicker._possibleChars(e.datepicker._get(n,"dateFormat")),s=String.fromCharCode(null==t.charCode?t.keyCode:t.charCode),t.ctrlKey||t.metaKey||s<" "||!i||i.indexOf(s)>-1},_doKeyUp:function(t){var i,s=e.datepicker._getInst(t.target);if(s.input.val()!==s.lastVal)try{i=e.datepicker.parseDate(e.datepicker._get(s,"dateFormat"),s.input?s.input.val():null,e.datepicker._getFormatConfig(s)),i&&(e.datepicker._setDateFromField(s),e.datepicker._updateAlternate(s),e.datepicker._updateDatepicker(s))}catch(e){}return!0},_showDatepicker:function(t){if(t=t.target||t,"input"!==t.nodeName.toLowerCase()&&(t=e("input",t.parentNode)[0]),!e.datepicker._isDisabledDatepicker(t)&&e.datepicker._lastInput!==t){var i,s,a,o,r,l,d;i=e.datepicker._getInst(t),e.datepicker._curInst&&e.datepicker._curInst!==i&&(e.datepicker._curInst.dpDiv.stop(!0,!0),i&&e.datepicker._datepickerShowing&&e.datepicker._hideDatepicker(e.datepicker._curInst.input[0])),s=e.datepicker._get(i,"beforeShow"),a=s?s.apply(t,[t,i]):{},a!==!1&&(n(i.settings,a),i.lastVal=null,e.datepicker._lastInput=t,e.datepicker._setDateFromField(i),e.datepicker._inDialog&&(t.value=""),e.datepicker._pos||(e.datepicker._pos=e.datepicker._findPos(t),e.datepicker._pos[1]+=t.offsetHeight),o=!1,e(t).parents().each(function(){return o|="fixed"===e(this).css("position"),!o}),r={left:e.datepicker._pos[0],top:e.datepicker._pos[1]},e.datepicker._pos=null,i.dpDiv.empty(),i.dpDiv.css({position:"absolute",display:"block",top:"-1000px"}),e.datepicker._updateDatepicker(i),r=e.datepicker._checkOffset(i,r,o),i.dpDiv.css({position:e.datepicker._inDialog&&e.blockUI?"static":o?"fixed":"absolute",display:"none",left:r.left+"px",top:r.top+"px"}),i.inline||(l=e.datepicker._get(i,"showAnim"),d=e.datepicker._get(i,"duration"),i.dpDiv.zIndex(e(t).zIndex()+1),e.datepicker._datepickerShowing=!0,e.effects&&e.effects.effect[l]?i.dpDiv.show(l,e.datepicker._get(i,"showOptions"),d):i.dpDiv[l||"show"](l?d:null),e.datepicker._shouldFocusInput(i)&&i.input.focus(),e.datepicker._curInst=i))}},_updateDatepicker:function(t){this.maxRows=4,a=t,t.dpDiv.empty().append(this._generateHTML(t)),this._attachHandlers(t),t.dpDiv.find("."+this._dayOverClass+" a").mouseover();var i,s=this._getNumberOfMonths(t),n=s[1],o=17;t.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width(""),n>1&&t.dpDiv.addClass("ui-datepicker-multi-"+n).css("width",o*n+"em"),t.dpDiv[(1!==s[0]||1!==s[1]?"add":"remove")+"Class"]("ui-datepicker-multi"),t.dpDiv[(this._get(t,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl"),t===e.datepicker._curInst&&e.datepicker._datepickerShowing&&e.datepicker._shouldFocusInput(t)&&t.input.focus(),t.yearshtml&&(i=t.yearshtml,setTimeout(function(){i===t.yearshtml&&t.yearshtml&&t.dpDiv.find("select.ui-datepicker-year:first").replaceWith(t.yearshtml),i=t.yearshtml=null},0))},_shouldFocusInput:function(e){return e.input&&e.input.is(":visible")&&!e.input.is(":disabled")&&!e.input.is(":focus")},_checkOffset:function(t,i,s){var n=t.dpDiv.outerWidth(),a=t.dpDiv.outerHeight(),o=t.input?t.input.outerWidth():0,r=t.input?t.input.outerHeight():0,l=document.documentElement.clientWidth+(s?0:e(document).scrollLeft()),d=document.documentElement.clientHeight+(s?0:e(document).scrollTop());return i.left-=this._get(t,"isRTL")?n-o:0,i.left-=s&&i.left===t.input.offset().left?e(document).scrollLeft():0,i.top-=s&&i.top===t.input.offset().top+r?e(document).scrollTop():0,i.left-=Math.min(i.left,i.left+n>l&&l>n?Math.abs(i.left+n-l):0),i.top-=Math.min(i.top,i.top+a>d&&d>a?Math.abs(a+r):0),i},_findPos:function(t){for(var i,s=this._getInst(t),n=this._get(s,"isRTL");t&&("hidden"===t.type||1!==t.nodeType||e.expr.filters.hidden(t));)t=t[n?"previousSibling":"nextSibling"];return i=e(t).offset(),[i.left,i.top]},_hideDatepicker:function(t){var i,s,n,a,r=this._curInst;!r||t&&r!==e.data(t,o)||this._datepickerShowing&&(i=this._get(r,"showAnim"),s=this._get(r,"duration"),n=function(){e.datepicker._tidyDialog(r)},e.effects&&(e.effects.effect[i]||e.effects[i])?r.dpDiv.hide(i,e.datepicker._get(r,"showOptions"),s,n):r.dpDiv["slideDown"===i?"slideUp":"fadeIn"===i?"fadeOut":"hide"](i?s:null,n),i||n(),this._datepickerShowing=!1,a=this._get(r,"onClose"),a&&a.apply(r.input?r.input[0]:null,[r.input?r.input.val():"",r]),this._lastInput=null,this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),e.blockUI&&(e.unblockUI(),e("body").append(this.dpDiv))),this._inDialog=!1)},_tidyDialog:function(e){e.dpDiv.removeClass(this._dialogClass).unbind(".ui-datepicker-calendar")},_checkExternalClick:function(t){if(e.datepicker._curInst){var i=e(t.target),s=e.datepicker._getInst(i[0]);(i[0].id===e.datepicker._mainDivId||0!==i.parents("#"+e.datepicker._mainDivId).length||i.hasClass(e.datepicker.markerClassName)||i.closest("."+e.datepicker._triggerClass).length||!e.datepicker._datepickerShowing||e.datepicker._inDialog&&e.blockUI)&&(!i.hasClass(e.datepicker.markerClassName)||e.datepicker._curInst===s)||e.datepicker._hideDatepicker()}},_adjustDate:function(t,i,s){var n=e(t),a=this._getInst(n[0]);this._isDisabledDatepicker(n[0])||(this._adjustInstDate(a,i+("M"===s?this._get(a,"showCurrentAtPos"):0),s),this._updateDatepicker(a))},_gotoToday:function(t){var i,s=e(t),n=this._getInst(s[0]);this._get(n,"gotoCurrent")&&n.currentDay?(n.selectedDay=n.currentDay,n.drawMonth=n.selectedMonth=n.currentMonth,n.drawYear=n.selectedYear=n.currentYear):(i=new Date,n.selectedDay=i.getDate(),n.drawMonth=n.selectedMonth=i.getMonth(),n.drawYear=n.selectedYear=i.getFullYear()),this._notifyChange(n),this._adjustDate(s)},_selectMonthYear:function(t,i,s){var n=e(t),a=this._getInst(n[0]);a["selected"+("M"===s?"Month":"Year")]=a["draw"+("M"===s?"Month":"Year")]=parseInt(i.options[i.selectedIndex].value,10),this._notifyChange(a),this._adjustDate(n)},_selectDay:function(t,i,s,n){var a,o=e(t);e(n).hasClass(this._unselectableClass)||this._isDisabledDatepicker(o[0])||(a=this._getInst(o[0]),a.selectedDay=a.currentDay=e("a",n).html(),a.selectedMonth=a.currentMonth=i,a.selectedYear=a.currentYear=s,this._selectDate(t,this._formatDate(a,a.currentDay,a.currentMonth,a.currentYear)))},_clearDate:function(t){var i=e(t);this._selectDate(i,"")},_selectDate:function(t,i){var s,n=e(t),a=this._getInst(n[0]);i=null!=i?i:this._formatDate(a),
a.input&&a.input.val(i),this._updateAlternate(a),s=this._get(a,"onSelect"),s?s.apply(a.input?a.input[0]:null,[i,a]):a.input&&a.input.trigger("change"),a.inline?this._updateDatepicker(a):(this._hideDatepicker(),this._lastInput=a.input[0],"object"!=typeof a.input[0]&&a.input.focus(),this._lastInput=null)},_updateAlternate:function(t){var i,s,n,a=this._get(t,"altField");a&&(i=this._get(t,"altFormat")||this._get(t,"dateFormat"),s=this._getDate(t),n=this.formatDate(i,s,this._getFormatConfig(t)),e(a).each(function(){e(this).val(n)}))},noWeekends:function(e){var t=e.getDay();return[t>0&&t<6,""]},iso8601Week:function(e){var t,i=new Date(e.getTime());return i.setDate(i.getDate()+4-(i.getDay()||7)),t=i.getTime(),i.setMonth(0),i.setDate(1),Math.floor(Math.round((t-i)/864e5)/7)+1},parseDate:function(t,i,s){if(null==t||null==i)throw"Invalid arguments";if(i="object"==typeof i?i.toString():i+"",""===i)return null;var n,a,o,r,l=0,d=(s?s.shortYearCutoff:null)||this._defaults.shortYearCutoff,c="string"!=typeof d?d:(new Date).getFullYear()%100+parseInt(d,10),h=(s?s.dayNamesShort:null)||this._defaults.dayNamesShort,u=(s?s.dayNames:null)||this._defaults.dayNames,p=(s?s.monthNamesShort:null)||this._defaults.monthNamesShort,f=(s?s.monthNames:null)||this._defaults.monthNames,m=-1,g=-1,v=-1,b=-1,y=!1,_=function(e){var i=n+1<t.length&&t.charAt(n+1)===e;return i&&n++,i},w=function(e){var t=_(e),s="@"===e?14:"!"===e?20:"y"===e&&t?4:"o"===e?3:2,n=new RegExp("^\\d{1,"+s+"}"),a=i.substring(l).match(n);if(!a)throw"Missing number at position "+l;return l+=a[0].length,parseInt(a[0],10)},x=function(t,s,n){var a=-1,o=e.map(_(t)?n:s,function(e,t){return[[t,e]]}).sort(function(e,t){return-(e[1].length-t[1].length)});if(e.each(o,function(e,t){var s=t[1];if(i.substr(l,s.length).toLowerCase()===s.toLowerCase())return a=t[0],l+=s.length,!1}),a!==-1)return a+1;throw"Unknown name at position "+l},C=function(){if(i.charAt(l)!==t.charAt(n))throw"Unexpected literal at position "+l;l++};for(n=0;n<t.length;n++)if(y)"'"!==t.charAt(n)||_("'")?C():y=!1;else switch(t.charAt(n)){case"d":v=w("d");break;case"D":x("D",h,u);break;case"o":b=w("o");break;case"m":g=w("m");break;case"M":g=x("M",p,f);break;case"y":m=w("y");break;case"@":r=new Date(w("@")),m=r.getFullYear(),g=r.getMonth()+1,v=r.getDate();break;case"!":r=new Date((w("!")-this._ticksTo1970)/1e4),m=r.getFullYear(),g=r.getMonth()+1,v=r.getDate();break;case"'":_("'")?C():y=!0;break;default:C()}if(l<i.length&&(o=i.substr(l),!/^\s+/.test(o)))throw"Extra/unparsed characters found in date: "+o;if(m===-1?m=(new Date).getFullYear():m<100&&(m+=(new Date).getFullYear()-(new Date).getFullYear()%100+(m<=c?0:-100)),b>-1)for(g=1,v=b;;){if(a=this._getDaysInMonth(m,g-1),v<=a)break;g++,v-=a}if(r=this._daylightSavingAdjust(new Date(m,g-1,v)),r.getFullYear()!==m||r.getMonth()+1!==g||r.getDate()!==v)throw"Invalid date";return r},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:24*(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925))*60*60*1e7,formatDate:function(e,t,i){if(!t)return"";var s,n=(i?i.dayNamesShort:null)||this._defaults.dayNamesShort,a=(i?i.dayNames:null)||this._defaults.dayNames,o=(i?i.monthNamesShort:null)||this._defaults.monthNamesShort,r=(i?i.monthNames:null)||this._defaults.monthNames,l=function(t){var i=s+1<e.length&&e.charAt(s+1)===t;return i&&s++,i},d=function(e,t,i){var s=""+t;if(l(e))for(;s.length<i;)s="0"+s;return s},c=function(e,t,i,s){return l(e)?s[t]:i[t]},h="",u=!1;if(t)for(s=0;s<e.length;s++)if(u)"'"!==e.charAt(s)||l("'")?h+=e.charAt(s):u=!1;else switch(e.charAt(s)){case"d":h+=d("d",t.getDate(),2);break;case"D":h+=c("D",t.getDay(),n,a);break;case"o":h+=d("o",Math.round((new Date(t.getFullYear(),t.getMonth(),t.getDate()).getTime()-new Date(t.getFullYear(),0,0).getTime())/864e5),3);break;case"m":h+=d("m",t.getMonth()+1,2);break;case"M":h+=c("M",t.getMonth(),o,r);break;case"y":h+=l("y")?t.getFullYear():(t.getYear()%100<10?"0":"")+t.getYear()%100;break;case"@":h+=t.getTime();break;case"!":h+=1e4*t.getTime()+this._ticksTo1970;break;case"'":l("'")?h+="'":u=!0;break;default:h+=e.charAt(s)}return h},_possibleChars:function(e){var t,i="",s=!1,n=function(i){var s=t+1<e.length&&e.charAt(t+1)===i;return s&&t++,s};for(t=0;t<e.length;t++)if(s)"'"!==e.charAt(t)||n("'")?i+=e.charAt(t):s=!1;else switch(e.charAt(t)){case"d":case"m":case"y":case"@":i+="0123456789";break;case"D":case"M":return null;case"'":n("'")?i+="'":s=!0;break;default:i+=e.charAt(t)}return i},_get:function(e,i){return e.settings[i]!==t?e.settings[i]:this._defaults[i]},_setDateFromField:function(e,t){if(e.input.val()!==e.lastVal){var i=this._get(e,"dateFormat"),s=e.lastVal=e.input?e.input.val():null,n=this._getDefaultDate(e),a=n,o=this._getFormatConfig(e);try{a=this.parseDate(i,s,o)||n}catch(e){s=t?"":s}e.selectedDay=a.getDate(),e.drawMonth=e.selectedMonth=a.getMonth(),e.drawYear=e.selectedYear=a.getFullYear(),e.currentDay=s?a.getDate():0,e.currentMonth=s?a.getMonth():0,e.currentYear=s?a.getFullYear():0,this._adjustInstDate(e)}},_getDefaultDate:function(e){return this._restrictMinMax(e,this._determineDate(e,this._get(e,"defaultDate"),new Date))},_determineDate:function(t,i,s){var n=function(e){var t=new Date;return t.setDate(t.getDate()+e),t},a=function(i){try{return e.datepicker.parseDate(e.datepicker._get(t,"dateFormat"),i,e.datepicker._getFormatConfig(t))}catch(e){}for(var s=(i.toLowerCase().match(/^c/)?e.datepicker._getDate(t):null)||new Date,n=s.getFullYear(),a=s.getMonth(),o=s.getDate(),r=/([+\-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,l=r.exec(i);l;){switch(l[2]||"d"){case"d":case"D":o+=parseInt(l[1],10);break;case"w":case"W":o+=7*parseInt(l[1],10);break;case"m":case"M":a+=parseInt(l[1],10),o=Math.min(o,e.datepicker._getDaysInMonth(n,a));break;case"y":case"Y":n+=parseInt(l[1],10),o=Math.min(o,e.datepicker._getDaysInMonth(n,a))}l=r.exec(i)}return new Date(n,a,o)},o=null==i||""===i?s:"string"==typeof i?a(i):"number"==typeof i?isNaN(i)?s:n(i):new Date(i.getTime());return o=o&&"Invalid Date"===o.toString()?s:o,o&&(o.setHours(0),o.setMinutes(0),o.setSeconds(0),o.setMilliseconds(0)),this._daylightSavingAdjust(o)},_daylightSavingAdjust:function(e){return e?(e.setHours(e.getHours()>12?e.getHours()+2:0),e):null},_setDate:function(e,t,i){var s=!t,n=e.selectedMonth,a=e.selectedYear,o=this._restrictMinMax(e,this._determineDate(e,t,new Date));e.selectedDay=e.currentDay=o.getDate(),e.drawMonth=e.selectedMonth=e.currentMonth=o.getMonth(),e.drawYear=e.selectedYear=e.currentYear=o.getFullYear(),n===e.selectedMonth&&a===e.selectedYear||i||this._notifyChange(e),this._adjustInstDate(e),e.input&&e.input.val(s?"":this._formatDate(e))},_getDate:function(e){var t=!e.currentYear||e.input&&""===e.input.val()?null:this._daylightSavingAdjust(new Date(e.currentYear,e.currentMonth,e.currentDay));return t},_attachHandlers:function(t){var i=this._get(t,"stepMonths"),s="#"+t.id.replace(/\\\\/g,"\\");t.dpDiv.find("[data-handler]").map(function(){var t={prev:function(){e.datepicker._adjustDate(s,-i,"M")},next:function(){e.datepicker._adjustDate(s,+i,"M")},hide:function(){e.datepicker._hideDatepicker()},today:function(){e.datepicker._gotoToday(s)},selectDay:function(){return e.datepicker._selectDay(s,+this.getAttribute("data-month"),+this.getAttribute("data-year"),this),!1},selectMonth:function(){return e.datepicker._selectMonthYear(s,this,"M"),!1},selectYear:function(){return e.datepicker._selectMonthYear(s,this,"Y"),!1}};e(this).bind(this.getAttribute("data-event"),t[this.getAttribute("data-handler")])})},_generateHTML:function(e){var t,i,s,n,a,o,r,l,d,c,h,u,p,f,m,g,v,b,y,_,w,x,C,k,S,D,T,O,A,M,E,I,$,N,P,H,L,j,F,U=new Date,R=this._daylightSavingAdjust(new Date(U.getFullYear(),U.getMonth(),U.getDate())),z=this._get(e,"isRTL"),q=this._get(e,"showButtonPanel"),B=this._get(e,"hideIfNoPrevNext"),W=this._get(e,"navigationAsDateFormat"),Y=this._getNumberOfMonths(e),V=this._get(e,"showCurrentAtPos"),K=this._get(e,"stepMonths"),G=1!==Y[0]||1!==Y[1],J=this._daylightSavingAdjust(e.currentDay?new Date(e.currentYear,e.currentMonth,e.currentDay):new Date(9999,9,9)),Q=this._getMinMaxDate(e,"min"),X=this._getMinMaxDate(e,"max"),Z=e.drawMonth-V,ee=e.drawYear;if(Z<0&&(Z+=12,ee--),X)for(t=this._daylightSavingAdjust(new Date(X.getFullYear(),X.getMonth()-Y[0]*Y[1]+1,X.getDate())),t=Q&&t<Q?Q:t;this._daylightSavingAdjust(new Date(ee,Z,1))>t;)Z--,Z<0&&(Z=11,ee--);for(e.drawMonth=Z,e.drawYear=ee,i=this._get(e,"prevText"),i=W?this.formatDate(i,this._daylightSavingAdjust(new Date(ee,Z-K,1)),this._getFormatConfig(e)):i,s=this._canAdjustMonth(e,-1,ee,Z)?"<a class='ui-datepicker-prev ui-corner-all' data-handler='prev' data-event='click' title='"+i+"'><span class='ui-icon ui-icon-circle-triangle-"+(z?"e":"w")+"'>"+i+"</span></a>":B?"":"<a class='ui-datepicker-prev ui-corner-all ui-state-disabled' title='"+i+"'><span class='ui-icon ui-icon-circle-triangle-"+(z?"e":"w")+"'>"+i+"</span></a>",n=this._get(e,"nextText"),n=W?this.formatDate(n,this._daylightSavingAdjust(new Date(ee,Z+K,1)),this._getFormatConfig(e)):n,a=this._canAdjustMonth(e,1,ee,Z)?"<a class='ui-datepicker-next ui-corner-all' data-handler='next' data-event='click' title='"+n+"'><span class='ui-icon ui-icon-circle-triangle-"+(z?"w":"e")+"'>"+n+"</span></a>":B?"":"<a class='ui-datepicker-next ui-corner-all ui-state-disabled' title='"+n+"'><span class='ui-icon ui-icon-circle-triangle-"+(z?"w":"e")+"'>"+n+"</span></a>",o=this._get(e,"currentText"),r=this._get(e,"gotoCurrent")&&e.currentDay?J:R,o=W?this.formatDate(o,r,this._getFormatConfig(e)):o,l=e.inline?"":"<button type='button' class='ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all' data-handler='hide' data-event='click'>"+this._get(e,"closeText")+"</button>",d=q?"<div class='ui-datepicker-buttonpane ui-widget-content'>"+(z?l:"")+(this._isInRange(e,r)?"<button type='button' class='ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all' data-handler='today' data-event='click'>"+o+"</button>":"")+(z?"":l)+"</div>":"",c=parseInt(this._get(e,"firstDay"),10),c=isNaN(c)?0:c,h=this._get(e,"showWeek"),u=this._get(e,"dayNames"),p=this._get(e,"dayNamesMin"),f=this._get(e,"monthNames"),m=this._get(e,"monthNamesShort"),g=this._get(e,"beforeShowDay"),v=this._get(e,"showOtherMonths"),b=this._get(e,"selectOtherMonths"),y=this._getDefaultDate(e),_="",x=0;x<Y[0];x++){for(C="",this.maxRows=4,k=0;k<Y[1];k++){if(S=this._daylightSavingAdjust(new Date(ee,Z,e.selectedDay)),D=" ui-corner-all",T="",G){if(T+="<div class='ui-datepicker-group",Y[1]>1)switch(k){case 0:T+=" ui-datepicker-group-first",D=" ui-corner-"+(z?"right":"left");break;case Y[1]-1:T+=" ui-datepicker-group-last",D=" ui-corner-"+(z?"left":"right");break;default:T+=" ui-datepicker-group-middle",D=""}T+="'>"}for(T+="<div class='ui-datepicker-header ui-widget-header ui-helper-clearfix"+D+"'>"+(/all|left/.test(D)&&0===x?z?a:s:"")+(/all|right/.test(D)&&0===x?z?s:a:"")+this._generateMonthYearHeader(e,Z,ee,Q,X,x>0||k>0,f,m)+"</div><table class='ui-datepicker-calendar'><thead><tr>",O=h?"<th class='ui-datepicker-week-col'>"+this._get(e,"weekHeader")+"</th>":"",w=0;w<7;w++)A=(w+c)%7,O+="<th"+((w+c+6)%7>=5?" class='ui-datepicker-week-end'":"")+"><span title='"+u[A]+"'>"+p[A]+"</span></th>";for(T+=O+"</tr></thead><tbody>",M=this._getDaysInMonth(ee,Z),ee===e.selectedYear&&Z===e.selectedMonth&&(e.selectedDay=Math.min(e.selectedDay,M)),E=(this._getFirstDayOfMonth(ee,Z)-c+7)%7,I=Math.ceil((E+M)/7),$=G&&this.maxRows>I?this.maxRows:I,this.maxRows=$,N=this._daylightSavingAdjust(new Date(ee,Z,1-E)),P=0;P<$;P++){for(T+="<tr>",H=h?"<td class='ui-datepicker-week-col'>"+this._get(e,"calculateWeek")(N)+"</td>":"",w=0;w<7;w++)L=g?g.apply(e.input?e.input[0]:null,[N]):[!0,""],j=N.getMonth()!==Z,F=j&&!b||!L[0]||Q&&N<Q||X&&N>X,H+="<td class='"+((w+c+6)%7>=5?" ui-datepicker-week-end":"")+(j?" ui-datepicker-other-month":"")+(N.getTime()===S.getTime()&&Z===e.selectedMonth&&e._keyEvent||y.getTime()===N.getTime()&&y.getTime()===S.getTime()?" "+this._dayOverClass:"")+(F?" "+this._unselectableClass+" ui-state-disabled":"")+(j&&!v?"":" "+L[1]+(N.getTime()===J.getTime()?" "+this._currentClass:"")+(N.getTime()===R.getTime()?" ui-datepicker-today":""))+"'"+(j&&!v||!L[2]?"":" title='"+L[2].replace(/'/g,"&#39;")+"'")+(F?"":" data-handler='selectDay' data-event='click' data-month='"+N.getMonth()+"' data-year='"+N.getFullYear()+"'")+">"+(j&&!v?"&#xa0;":F?"<span class='ui-state-default'>"+N.getDate()+"</span>":"<a class='ui-state-default"+(N.getTime()===R.getTime()?" ui-state-highlight":"")+(N.getTime()===J.getTime()?" ui-state-active":"")+(j?" ui-priority-secondary":"")+"' href='#'>"+N.getDate()+"</a>")+"</td>",N.setDate(N.getDate()+1),N=this._daylightSavingAdjust(N);T+=H+"</tr>"}Z++,Z>11&&(Z=0,ee++),T+="</tbody></table>"+(G?"</div>"+(Y[0]>0&&k===Y[1]-1?"<div class='ui-datepicker-row-break'></div>":""):""),C+=T}_+=C}return _+=d,e._keyEvent=!1,_},_generateMonthYearHeader:function(e,t,i,s,n,a,o,r){var l,d,c,h,u,p,f,m,g=this._get(e,"changeMonth"),v=this._get(e,"changeYear"),b=this._get(e,"showMonthAfterYear"),y="<div class='ui-datepicker-title'>",_="";if(a||!g)_+="<span class='ui-datepicker-month'>"+o[t]+"</span>";else{for(l=s&&s.getFullYear()===i,d=n&&n.getFullYear()===i,_+="<select class='ui-datepicker-month' data-handler='selectMonth' data-event='change'>",c=0;c<12;c++)(!l||c>=s.getMonth())&&(!d||c<=n.getMonth())&&(_+="<option value='"+c+"'"+(c===t?" selected='selected'":"")+">"+r[c]+"</option>");_+="</select>"}if(b||(y+=_+(!a&&g&&v?"":"&#xa0;")),!e.yearshtml)if(e.yearshtml="",a||!v)y+="<span class='ui-datepicker-year'>"+i+"</span>";else{for(h=this._get(e,"yearRange").split(":"),u=(new Date).getFullYear(),p=function(e){var t=e.match(/c[+\-].*/)?i+parseInt(e.substring(1),10):e.match(/[+\-].*/)?u+parseInt(e,10):parseInt(e,10);return isNaN(t)?u:t},f=p(h[0]),m=Math.max(f,p(h[1]||"")),f=s?Math.max(f,s.getFullYear()):f,m=n?Math.min(m,n.getFullYear()):m,e.yearshtml+="<select class='ui-datepicker-year' data-handler='selectYear' data-event='change'>";f<=m;f++)e.yearshtml+="<option value='"+f+"'"+(f===i?" selected='selected'":"")+">"+f+"</option>";e.yearshtml+="</select>",y+=e.yearshtml,e.yearshtml=null}return y+=this._get(e,"yearSuffix"),b&&(y+=(!a&&g&&v?"":"&#xa0;")+_),y+="</div>"},_adjustInstDate:function(e,t,i){var s=e.drawYear+("Y"===i?t:0),n=e.drawMonth+("M"===i?t:0),a=Math.min(e.selectedDay,this._getDaysInMonth(s,n))+("D"===i?t:0),o=this._restrictMinMax(e,this._daylightSavingAdjust(new Date(s,n,a)));e.selectedDay=o.getDate(),e.drawMonth=e.selectedMonth=o.getMonth(),e.drawYear=e.selectedYear=o.getFullYear(),"M"!==i&&"Y"!==i||this._notifyChange(e)},_restrictMinMax:function(e,t){var i=this._getMinMaxDate(e,"min"),s=this._getMinMaxDate(e,"max"),n=i&&t<i?i:t;return s&&n>s?s:n},_notifyChange:function(e){var t=this._get(e,"onChangeMonthYear");t&&t.apply(e.input?e.input[0]:null,[e.selectedYear,e.selectedMonth+1,e])},_getNumberOfMonths:function(e){var t=this._get(e,"numberOfMonths");return null==t?[1,1]:"number"==typeof t?[1,t]:t},_getMinMaxDate:function(e,t){return this._determineDate(e,this._get(e,t+"Date"),null)},_getDaysInMonth:function(e,t){return 32-this._daylightSavingAdjust(new Date(e,t,32)).getDate()},_getFirstDayOfMonth:function(e,t){return new Date(e,t,1).getDay()},_canAdjustMonth:function(e,t,i,s){var n=this._getNumberOfMonths(e),a=this._daylightSavingAdjust(new Date(i,s+(t<0?t:n[0]*n[1]),1));return t<0&&a.setDate(this._getDaysInMonth(a.getFullYear(),a.getMonth())),this._isInRange(e,a)},_isInRange:function(e,t){var i,s,n=this._getMinMaxDate(e,"min"),a=this._getMinMaxDate(e,"max"),o=null,r=null,l=this._get(e,"yearRange");return l&&(i=l.split(":"),s=(new Date).getFullYear(),o=parseInt(i[0],10),r=parseInt(i[1],10),i[0].match(/[+\-].*/)&&(o+=s),i[1].match(/[+\-].*/)&&(r+=s)),(!n||t.getTime()>=n.getTime())&&(!a||t.getTime()<=a.getTime())&&(!o||t.getFullYear()>=o)&&(!r||t.getFullYear()<=r)},_getFormatConfig:function(e){var t=this._get(e,"shortYearCutoff");return t="string"!=typeof t?t:(new Date).getFullYear()%100+parseInt(t,10),{shortYearCutoff:t,dayNamesShort:this._get(e,"dayNamesShort"),dayNames:this._get(e,"dayNames"),monthNamesShort:this._get(e,"monthNamesShort"),monthNames:this._get(e,"monthNames")}},_formatDate:function(e,t,i,s){t||(e.currentDay=e.selectedDay,e.currentMonth=e.selectedMonth,e.currentYear=e.selectedYear);var n=t?"object"==typeof t?t:this._daylightSavingAdjust(new Date(s,i,t)):this._daylightSavingAdjust(new Date(e.currentYear,e.currentMonth,e.currentDay));return this.formatDate(this._get(e,"dateFormat"),n,this._getFormatConfig(e))}}),e.fn.datepicker=function(t){if(!this.length)return this;e.datepicker.initialized||(e(document).mousedown(e.datepicker._checkExternalClick),e.datepicker.initialized=!0),0===e("#"+e.datepicker._mainDivId).length&&e("body").append(e.datepicker.dpDiv);var i=Array.prototype.slice.call(arguments,1);return"string"!=typeof t||"isDisabled"!==t&&"getDate"!==t&&"widget"!==t?"option"===t&&2===arguments.length&&"string"==typeof arguments[1]?e.datepicker["_"+t+"Datepicker"].apply(e.datepicker,[this[0]].concat(i)):this.each(function(){"string"==typeof t?e.datepicker["_"+t+"Datepicker"].apply(e.datepicker,[this].concat(i)):e.datepicker._attachDatepicker(this,t)}):e.datepicker["_"+t+"Datepicker"].apply(e.datepicker,[this[0]].concat(i))},e.datepicker=new i,e.datepicker.initialized=!1,e.datepicker.uuid=(new Date).getTime(),e.datepicker.version="1.10.4"}(jQuery),function(e,t){var i={buttons:!0,height:!0,maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0,width:!0},s={maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0};e.widget("ui.dialog",{version:"1.10.4",options:{appendTo:"body",autoOpen:!0,buttons:[],closeOnEscape:!0,closeText:"close",dialogClass:"",draggable:!0,hide:null,height:"auto",maxHeight:null,maxWidth:null,minHeight:150,minWidth:150,modal:!1,position:{my:"center",at:"center",of:window,collision:"fit",using:function(t){var i=e(this).css(t).offset().top;i<0&&e(this).css("top",t.top-i)}},resizable:!0,show:null,title:null,width:300,beforeClose:null,close:null,drag:null,dragStart:null,dragStop:null,focus:null,open:null,resize:null,resizeStart:null,resizeStop:null},_create:function(){this.originalCss={display:this.element[0].style.display,width:this.element[0].style.width,minHeight:this.element[0].style.minHeight,maxHeight:this.element[0].style.maxHeight,height:this.element[0].style.height},this.originalPosition={parent:this.element.parent(),index:this.element.parent().children().index(this.element)},this.originalTitle=this.element.attr("title"),this.options.title=this.options.title||this.originalTitle,this._createWrapper(),this.element.show().removeAttr("title").addClass("ui-dialog-content ui-widget-content").appendTo(this.uiDialog),this._createTitlebar(),this._createButtonPane(),this.options.draggable&&e.fn.draggable&&this._makeDraggable(),this.options.resizable&&e.fn.resizable&&this._makeResizable(),this._isOpen=!1},_init:function(){this.options.autoOpen&&this.open()},_appendTo:function(){var t=this.options.appendTo;return t&&(t.jquery||t.nodeType)?e(t):this.document.find(t||"body").eq(0)},_destroy:function(){var e,t=this.originalPosition;this._destroyOverlay(),this.element.removeUniqueId().removeClass("ui-dialog-content ui-widget-content").css(this.originalCss).detach(),this.uiDialog.stop(!0,!0).remove(),this.originalTitle&&this.element.attr("title",this.originalTitle),e=t.parent.children().eq(t.index),e.length&&e[0]!==this.element[0]?e.before(this.element):t.parent.append(this.element)},widget:function(){return this.uiDialog},disable:e.noop,enable:e.noop,close:function(t){var i,s=this;if(this._isOpen&&this._trigger("beforeClose",t)!==!1){if(this._isOpen=!1,this._destroyOverlay(),!this.opener.filter(":focusable").focus().length)try{i=this.document[0].activeElement,i&&"body"!==i.nodeName.toLowerCase()&&e(i).blur()}catch(e){}this._hide(this.uiDialog,this.options.hide,function(){s._trigger("close",t)})}},isOpen:function(){return this._isOpen},moveToTop:function(){this._moveToTop()},_moveToTop:function(e,t){var i=!!this.uiDialog.nextAll(":visible").insertBefore(this.uiDialog).length;return i&&!t&&this._trigger("focus",e),i},open:function(){var t=this;return this._isOpen?void(this._moveToTop()&&this._focusTabbable()):(this._isOpen=!0,this.opener=e(this.document[0].activeElement),this._size(),this._position(),this._createOverlay(),this._moveToTop(null,!0),this._show(this.uiDialog,this.options.show,function(){t._focusTabbable(),t._trigger("focus")}),void this._trigger("open"))},_focusTabbable:function(){var e=this.element.find("[autofocus]");e.length||(e=this.element.find(":tabbable")),e.length||(e=this.uiDialogButtonPane.find(":tabbable")),e.length||(e=this.uiDialogTitlebarClose.filter(":tabbable")),e.length||(e=this.uiDialog),e.eq(0).focus()},_keepFocus:function(t){function i(){var t=this.document[0].activeElement,i=this.uiDialog[0]===t||e.contains(this.uiDialog[0],t);i||this._focusTabbable()}t.preventDefault(),i.call(this),this._delay(i)},_createWrapper:function(){this.uiDialog=e("<div>").addClass("ui-dialog ui-widget ui-widget-content ui-corner-all ui-front "+this.options.dialogClass).hide().attr({tabIndex:-1,role:"dialog"}).appendTo(this._appendTo()),this._on(this.uiDialog,{keydown:function(t){if(this.options.closeOnEscape&&!t.isDefaultPrevented()&&t.keyCode&&t.keyCode===e.ui.keyCode.ESCAPE)return t.preventDefault(),void this.close(t);if(t.keyCode===e.ui.keyCode.TAB){var i=this.uiDialog.find(":tabbable"),s=i.filter(":first"),n=i.filter(":last");t.target!==n[0]&&t.target!==this.uiDialog[0]||t.shiftKey?t.target!==s[0]&&t.target!==this.uiDialog[0]||!t.shiftKey||(n.focus(1),t.preventDefault()):(s.focus(1),t.preventDefault())}},mousedown:function(e){this._moveToTop(e)&&this._focusTabbable()}}),this.element.find("[aria-describedby]").length||this.uiDialog.attr({"aria-describedby":this.element.uniqueId().attr("id")})},_createTitlebar:function(){var t;this.uiDialogTitlebar=e("<div>").addClass("ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix").prependTo(this.uiDialog),this._on(this.uiDialogTitlebar,{mousedown:function(t){e(t.target).closest(".ui-dialog-titlebar-close")||this.uiDialog.focus()}}),this.uiDialogTitlebarClose=e("<button type='button'></button>").button({label:this.options.closeText,icons:{primary:"ui-icon-closethick"},text:!1}).addClass("ui-dialog-titlebar-close").appendTo(this.uiDialogTitlebar),this._on(this.uiDialogTitlebarClose,{click:function(e){e.preventDefault(),this.close(e)}}),t=e("<span>").uniqueId().addClass("ui-dialog-title").prependTo(this.uiDialogTitlebar),this._title(t),this.uiDialog.attr({"aria-labelledby":t.attr("id")})},_title:function(e){this.options.title||e.html("&#160;"),e.text(this.options.title)},_createButtonPane:function(){this.uiDialogButtonPane=e("<div>").addClass("ui-dialog-buttonpane ui-widget-content ui-helper-clearfix"),this.uiButtonSet=e("<div>").addClass("ui-dialog-buttonset").appendTo(this.uiDialogButtonPane),this._createButtons()},_createButtons:function(){var t=this,i=this.options.buttons;return this.uiDialogButtonPane.remove(),this.uiButtonSet.empty(),e.isEmptyObject(i)||e.isArray(i)&&!i.length?void this.uiDialog.removeClass("ui-dialog-buttons"):(e.each(i,function(i,s){var n,a;s=e.isFunction(s)?{click:s,text:i}:s,s=e.extend({type:"button"},s),n=s.click,s.click=function(){n.apply(t.element[0],arguments)},a={icons:s.icons,text:s.showText},delete s.icons,delete s.showText,e("<button></button>",s).button(a).appendTo(t.uiButtonSet)}),this.uiDialog.addClass("ui-dialog-buttons"),void this.uiDialogButtonPane.appendTo(this.uiDialog))},_makeDraggable:function(){function t(e){return{position:e.position,offset:e.offset}}var i=this,s=this.options;this.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",handle:".ui-dialog-titlebar",containment:"document",start:function(s,n){e(this).addClass("ui-dialog-dragging"),i._blockFrames(),i._trigger("dragStart",s,t(n))},drag:function(e,s){i._trigger("drag",e,t(s))},stop:function(n,a){s.position=[a.position.left-i.document.scrollLeft(),a.position.top-i.document.scrollTop()],e(this).removeClass("ui-dialog-dragging"),i._unblockFrames(),i._trigger("dragStop",n,t(a))}})},_makeResizable:function(){function t(e){return{originalPosition:e.originalPosition,originalSize:e.originalSize,position:e.position,size:e.size}}var i=this,s=this.options,n=s.resizable,a=this.uiDialog.css("position"),o="string"==typeof n?n:"n,e,s,w,se,sw,ne,nw";this.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:this.element,maxWidth:s.maxWidth,maxHeight:s.maxHeight,minWidth:s.minWidth,minHeight:this._minHeight(),handles:o,start:function(s,n){e(this).addClass("ui-dialog-resizing"),i._blockFrames(),i._trigger("resizeStart",s,t(n))},resize:function(e,s){i._trigger("resize",e,t(s))},stop:function(n,a){s.height=e(this).height(),s.width=e(this).width(),e(this).removeClass("ui-dialog-resizing"),i._unblockFrames(),i._trigger("resizeStop",n,t(a))}}).css("position",a)},_minHeight:function(){var e=this.options;return"auto"===e.height?e.minHeight:Math.min(e.minHeight,e.height)},_position:function(){var e=this.uiDialog.is(":visible");e||this.uiDialog.show(),this.uiDialog.position(this.options.position),e||this.uiDialog.hide()},_setOptions:function(t){var n=this,a=!1,o={};e.each(t,function(e,t){n._setOption(e,t),e in i&&(a=!0),e in s&&(o[e]=t)}),a&&(this._size(),this._position()),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option",o)},_setOption:function(e,t){var i,s,n=this.uiDialog;"dialogClass"===e&&n.removeClass(this.options.dialogClass).addClass(t),"disabled"!==e&&(this._super(e,t),"appendTo"===e&&this.uiDialog.appendTo(this._appendTo()),"buttons"===e&&this._createButtons(),"closeText"===e&&this.uiDialogTitlebarClose.button({label:""+t}),"draggable"===e&&(i=n.is(":data(ui-draggable)"),i&&!t&&n.draggable("destroy"),!i&&t&&this._makeDraggable()),"position"===e&&this._position(),"resizable"===e&&(s=n.is(":data(ui-resizable)"),s&&!t&&n.resizable("destroy"),s&&"string"==typeof t&&n.resizable("option","handles",t),s||t===!1||this._makeResizable()),"title"===e&&this._title(this.uiDialogTitlebar.find(".ui-dialog-title")))},_size:function(){var e,t,i,s=this.options;this.element.show().css({width:"auto",minHeight:0,maxHeight:"none",height:0}),s.minWidth>s.width&&(s.width=s.minWidth),e=this.uiDialog.css({height:"auto",width:s.width}).outerHeight(),t=Math.max(0,s.minHeight-e),i="number"==typeof s.maxHeight?Math.max(0,s.maxHeight-e):"none","auto"===s.height?this.element.css({minHeight:t,maxHeight:i,height:"auto"}):this.element.height(Math.max(0,s.height-e)),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option","minHeight",this._minHeight())},_blockFrames:function(){this.iframeBlocks=this.document.find("iframe").map(function(){var t=e(this);return e("<div>").css({position:"absolute",width:t.outerWidth(),height:t.outerHeight()}).appendTo(t.parent()).offset(t.offset())[0]})},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_allowInteraction:function(t){return!!e(t.target).closest(".ui-dialog").length||!!e(t.target).closest(".ui-datepicker").length},_createOverlay:function(){if(this.options.modal){var t=this,i=this.widgetFullName;e.ui.dialog.overlayInstances||this._delay(function(){e.ui.dialog.overlayInstances&&this.document.bind("focusin.dialog",function(s){t._allowInteraction(s)||(s.preventDefault(),e(".ui-dialog:visible:last .ui-dialog-content").data(i)._focusTabbable())})}),this.overlay=e("<div>").addClass("ui-widget-overlay ui-front").appendTo(this._appendTo()),this._on(this.overlay,{mousedown:"_keepFocus"}),e.ui.dialog.overlayInstances++}},_destroyOverlay:function(){this.options.modal&&this.overlay&&(e.ui.dialog.overlayInstances--,e.ui.dialog.overlayInstances||this.document.unbind("focusin.dialog"),this.overlay.remove(),this.overlay=null)}}),e.ui.dialog.overlayInstances=0,e.uiBackCompat!==!1&&e.widget("ui.dialog",e.ui.dialog,{_position:function(){var t,i=this.options.position,s=[],n=[0,0];i?(("string"==typeof i||"object"==typeof i&&"0"in i)&&(s=i.split?i.split(" "):[i[0],i[1]],1===s.length&&(s[1]=s[0]),e.each(["left","top"],function(e,t){+s[e]===s[e]&&(n[e]=s[e],s[e]=t)}),i={my:s[0]+(n[0]<0?n[0]:"+"+n[0])+" "+s[1]+(n[1]<0?n[1]:"+"+n[1]),at:s.join(" ")}),i=e.extend({},e.ui.dialog.prototype.options.position,i)):i=e.ui.dialog.prototype.options.position,t=this.uiDialog.is(":visible"),t||this.uiDialog.show(),this.uiDialog.position(i),t||this.uiDialog.hide()}})}(jQuery),function(e,t){e.widget("ui.draggable",e.ui.mouse,{version:"1.10.4",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1,drag:null,start:null,stop:null},_create:function(){"original"!==this.options.helper||/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative"),this.options.addClasses&&this.element.addClass("ui-draggable"),this.options.disabled&&this.element.addClass("ui-draggable-disabled"),this._mouseInit()},_destroy:function(){this.element.removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),this._mouseDestroy()},_mouseCapture:function(t){var i=this.options;return!(this.helper||i.disabled||e(t.target).closest(".ui-resizable-handle").length>0)&&(this.handle=this._getHandle(t),!!this.handle&&(e(i.iframeFix===!0?"iframe":i.iframeFix).each(function(){e("<div class='ui-draggable-iframeFix' style='background: #fff;'></div>").css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1e3}).css(e(this).offset()).appendTo("body")}),!0))},_mouseStart:function(t){var i=this.options;return this.helper=this._createHelper(t),this.helper.addClass("ui-draggable-dragging"),this._cacheHelperProportions(),e.ui.ddmanager&&(e.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(),this.offsetParent=this.helper.offsetParent(),this.offsetParentCssPosition=this.offsetParent.css("position"),this.offset=this.positionAbs=this.element.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},this.offset.scroll=!1,e.extend(this.offset,{click:{left:t.pageX-this.offset.left,top:t.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.originalPosition=this.position=this._generatePosition(t),this.originalPageX=t.pageX,this.originalPageY=t.pageY,i.cursorAt&&this._adjustOffsetFromHelper(i.cursorAt),this._setContainment(),this._trigger("start",t)===!1?(this._clear(),!1):(this._cacheHelperProportions(),e.ui.ddmanager&&!i.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t),this._mouseDrag(t,!0),e.ui.ddmanager&&e.ui.ddmanager.dragStart(this,t),!0)},_mouseDrag:function(t,i){if("fixed"===this.offsetParentCssPosition&&(this.offset.parent=this._getParentOffset()),this.position=this._generatePosition(t),this.positionAbs=this._convertPositionTo("absolute"),!i){var s=this._uiHash();if(this._trigger("drag",t,s)===!1)return this._mouseUp({}),!1;this.position=s.position}return this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px"),e.ui.ddmanager&&e.ui.ddmanager.drag(this,t),!1},_mouseStop:function(t){var i=this,s=!1;return e.ui.ddmanager&&!this.options.dropBehaviour&&(s=e.ui.ddmanager.drop(this,t)),this.dropped&&(s=this.dropped,this.dropped=!1),!("original"===this.options.helper&&!e.contains(this.element[0].ownerDocument,this.element[0]))&&("invalid"===this.options.revert&&!s||"valid"===this.options.revert&&s||this.options.revert===!0||e.isFunction(this.options.revert)&&this.options.revert.call(this.element,s)?e(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){
i._trigger("stop",t)!==!1&&i._clear()}):this._trigger("stop",t)!==!1&&this._clear(),!1)},_mouseUp:function(t){return e("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)}),e.ui.ddmanager&&e.ui.ddmanager.dragStop(this,t),e.ui.mouse.prototype._mouseUp.call(this,t)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear(),this},_getHandle:function(t){return!this.options.handle||!!e(t.target).closest(this.element.find(this.options.handle)).length},_createHelper:function(t){var i=this.options,s=e.isFunction(i.helper)?e(i.helper.apply(this.element[0],[t])):"clone"===i.helper?this.element.clone().removeAttr("id"):this.element;return s.parents("body").length||s.appendTo("parent"===i.appendTo?this.element[0].parentNode:i.appendTo),s[0]===this.element[0]||/(fixed|absolute)/.test(s.css("position"))||s.css("position","absolute"),s},_adjustOffsetFromHelper:function(t){"string"==typeof t&&(t=t.split(" ")),e.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_getParentOffset:function(){var t=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===document.body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&e.ui.ie)&&(t={top:0,left:0}),{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"===this.cssPosition){var e=this.element.position();return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:e.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t,i,s,n=this.options;return n.containment?"window"===n.containment?void(this.containment=[e(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,e(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,e(window).scrollLeft()+e(window).width()-this.helperProportions.width-this.margins.left,e(window).scrollTop()+(e(window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]):"document"===n.containment?void(this.containment=[0,0,e(document).width()-this.helperProportions.width-this.margins.left,(e(document).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]):n.containment.constructor===Array?void(this.containment=n.containment):("parent"===n.containment&&(n.containment=this.helper[0].parentNode),i=e(n.containment),s=i[0],void(s&&(t="hidden"!==i.css("overflow"),this.containment=[(parseInt(i.css("borderLeftWidth"),10)||0)+(parseInt(i.css("paddingLeft"),10)||0),(parseInt(i.css("borderTopWidth"),10)||0)+(parseInt(i.css("paddingTop"),10)||0),(t?Math.max(s.scrollWidth,s.offsetWidth):s.offsetWidth)-(parseInt(i.css("borderRightWidth"),10)||0)-(parseInt(i.css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(t?Math.max(s.scrollHeight,s.offsetHeight):s.offsetHeight)-(parseInt(i.css("borderBottomWidth"),10)||0)-(parseInt(i.css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relative_container=i))):void(this.containment=null)},_convertPositionTo:function(t,i){i||(i=this.position);var s="absolute"===t?1:-1,n="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent;return this.offset.scroll||(this.offset.scroll={top:n.scrollTop(),left:n.scrollLeft()}),{top:i.top+this.offset.relative.top*s+this.offset.parent.top*s-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():this.offset.scroll.top)*s,left:i.left+this.offset.relative.left*s+this.offset.parent.left*s-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():this.offset.scroll.left)*s}},_generatePosition:function(t){var i,s,n,a,o=this.options,r="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,l=t.pageX,d=t.pageY;return this.offset.scroll||(this.offset.scroll={top:r.scrollTop(),left:r.scrollLeft()}),this.originalPosition&&(this.containment&&(this.relative_container?(s=this.relative_container.offset(),i=[this.containment[0]+s.left,this.containment[1]+s.top,this.containment[2]+s.left,this.containment[3]+s.top]):i=this.containment,t.pageX-this.offset.click.left<i[0]&&(l=i[0]+this.offset.click.left),t.pageY-this.offset.click.top<i[1]&&(d=i[1]+this.offset.click.top),t.pageX-this.offset.click.left>i[2]&&(l=i[2]+this.offset.click.left),t.pageY-this.offset.click.top>i[3]&&(d=i[3]+this.offset.click.top)),o.grid&&(n=o.grid[1]?this.originalPageY+Math.round((d-this.originalPageY)/o.grid[1])*o.grid[1]:this.originalPageY,d=i?n-this.offset.click.top>=i[1]||n-this.offset.click.top>i[3]?n:n-this.offset.click.top>=i[1]?n-o.grid[1]:n+o.grid[1]:n,a=o.grid[0]?this.originalPageX+Math.round((l-this.originalPageX)/o.grid[0])*o.grid[0]:this.originalPageX,l=i?a-this.offset.click.left>=i[0]||a-this.offset.click.left>i[2]?a:a-this.offset.click.left>=i[0]?a-o.grid[0]:a+o.grid[0]:a)),{top:d-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():this.offset.scroll.top),left:l-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():this.offset.scroll.left)}},_clear:function(){this.helper.removeClass("ui-draggable-dragging"),this.helper[0]===this.element[0]||this.cancelHelperRemoval||this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1},_trigger:function(t,i,s){return s=s||this._uiHash(),e.ui.plugin.call(this,t,[i,s]),"drag"===t&&(this.positionAbs=this._convertPositionTo("absolute")),e.Widget.prototype._trigger.call(this,t,i,s)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),e.ui.plugin.add("draggable","connectToSortable",{start:function(t,i){var s=e(this).data("ui-draggable"),n=s.options,a=e.extend({},i,{item:s.element});s.sortables=[],e(n.connectToSortable).each(function(){var i=e.data(this,"ui-sortable");i&&!i.options.disabled&&(s.sortables.push({instance:i,shouldRevert:i.options.revert}),i.refreshPositions(),i._trigger("activate",t,a))})},stop:function(t,i){var s=e(this).data("ui-draggable"),n=e.extend({},i,{item:s.element});e.each(s.sortables,function(){this.instance.isOver?(this.instance.isOver=0,s.cancelHelperRemoval=!0,this.instance.cancelHelperRemoval=!1,this.shouldRevert&&(this.instance.options.revert=this.shouldRevert),this.instance._mouseStop(t),this.instance.options.helper=this.instance.options._helper,"original"===s.options.helper&&this.instance.currentItem.css({top:"auto",left:"auto"})):(this.instance.cancelHelperRemoval=!1,this.instance._trigger("deactivate",t,n))})},drag:function(t,i){var s=e(this).data("ui-draggable"),n=this;e.each(s.sortables,function(){var a=!1,o=this;this.instance.positionAbs=s.positionAbs,this.instance.helperProportions=s.helperProportions,this.instance.offset.click=s.offset.click,this.instance._intersectsWith(this.instance.containerCache)&&(a=!0,e.each(s.sortables,function(){return this.instance.positionAbs=s.positionAbs,this.instance.helperProportions=s.helperProportions,this.instance.offset.click=s.offset.click,this!==o&&this.instance._intersectsWith(this.instance.containerCache)&&e.contains(o.instance.element[0],this.instance.element[0])&&(a=!1),a})),a?(this.instance.isOver||(this.instance.isOver=1,this.instance.currentItem=e(n).clone().removeAttr("id").appendTo(this.instance.element).data("ui-sortable-item",!0),this.instance.options._helper=this.instance.options.helper,this.instance.options.helper=function(){return i.helper[0]},t.target=this.instance.currentItem[0],this.instance._mouseCapture(t,!0),this.instance._mouseStart(t,!0,!0),this.instance.offset.click.top=s.offset.click.top,this.instance.offset.click.left=s.offset.click.left,this.instance.offset.parent.left-=s.offset.parent.left-this.instance.offset.parent.left,this.instance.offset.parent.top-=s.offset.parent.top-this.instance.offset.parent.top,s._trigger("toSortable",t),s.dropped=this.instance.element,s.currentItem=s.element,this.instance.fromOutside=s),this.instance.currentItem&&this.instance._mouseDrag(t)):this.instance.isOver&&(this.instance.isOver=0,this.instance.cancelHelperRemoval=!0,this.instance.options.revert=!1,this.instance._trigger("out",t,this.instance._uiHash(this.instance)),this.instance._mouseStop(t,!0),this.instance.options.helper=this.instance.options._helper,this.instance.currentItem.remove(),this.instance.placeholder&&this.instance.placeholder.remove(),s._trigger("fromSortable",t),s.dropped=!1)})}}),e.ui.plugin.add("draggable","cursor",{start:function(){var t=e("body"),i=e(this).data("ui-draggable").options;t.css("cursor")&&(i._cursor=t.css("cursor")),t.css("cursor",i.cursor)},stop:function(){var t=e(this).data("ui-draggable").options;t._cursor&&e("body").css("cursor",t._cursor)}}),e.ui.plugin.add("draggable","opacity",{start:function(t,i){var s=e(i.helper),n=e(this).data("ui-draggable").options;s.css("opacity")&&(n._opacity=s.css("opacity")),s.css("opacity",n.opacity)},stop:function(t,i){var s=e(this).data("ui-draggable").options;s._opacity&&e(i.helper).css("opacity",s._opacity)}}),e.ui.plugin.add("draggable","scroll",{start:function(){var t=e(this).data("ui-draggable");t.scrollParent[0]!==document&&"HTML"!==t.scrollParent[0].tagName&&(t.overflowOffset=t.scrollParent.offset())},drag:function(t){var i=e(this).data("ui-draggable"),s=i.options,n=!1;i.scrollParent[0]!==document&&"HTML"!==i.scrollParent[0].tagName?(s.axis&&"x"===s.axis||(i.overflowOffset.top+i.scrollParent[0].offsetHeight-t.pageY<s.scrollSensitivity?i.scrollParent[0].scrollTop=n=i.scrollParent[0].scrollTop+s.scrollSpeed:t.pageY-i.overflowOffset.top<s.scrollSensitivity&&(i.scrollParent[0].scrollTop=n=i.scrollParent[0].scrollTop-s.scrollSpeed)),s.axis&&"y"===s.axis||(i.overflowOffset.left+i.scrollParent[0].offsetWidth-t.pageX<s.scrollSensitivity?i.scrollParent[0].scrollLeft=n=i.scrollParent[0].scrollLeft+s.scrollSpeed:t.pageX-i.overflowOffset.left<s.scrollSensitivity&&(i.scrollParent[0].scrollLeft=n=i.scrollParent[0].scrollLeft-s.scrollSpeed))):(s.axis&&"x"===s.axis||(t.pageY-e(document).scrollTop()<s.scrollSensitivity?n=e(document).scrollTop(e(document).scrollTop()-s.scrollSpeed):e(window).height()-(t.pageY-e(document).scrollTop())<s.scrollSensitivity&&(n=e(document).scrollTop(e(document).scrollTop()+s.scrollSpeed))),s.axis&&"y"===s.axis||(t.pageX-e(document).scrollLeft()<s.scrollSensitivity?n=e(document).scrollLeft(e(document).scrollLeft()-s.scrollSpeed):e(window).width()-(t.pageX-e(document).scrollLeft())<s.scrollSensitivity&&(n=e(document).scrollLeft(e(document).scrollLeft()+s.scrollSpeed)))),n!==!1&&e.ui.ddmanager&&!s.dropBehaviour&&e.ui.ddmanager.prepareOffsets(i,t)}}),e.ui.plugin.add("draggable","snap",{start:function(){var t=e(this).data("ui-draggable"),i=t.options;t.snapElements=[],e(i.snap.constructor!==String?i.snap.items||":data(ui-draggable)":i.snap).each(function(){var i=e(this),s=i.offset();this!==t.element[0]&&t.snapElements.push({item:this,width:i.outerWidth(),height:i.outerHeight(),top:s.top,left:s.left})})},drag:function(t,i){var s,n,a,o,r,l,d,c,h,u,p=e(this).data("ui-draggable"),f=p.options,m=f.snapTolerance,g=i.offset.left,v=g+p.helperProportions.width,b=i.offset.top,y=b+p.helperProportions.height;for(h=p.snapElements.length-1;h>=0;h--)r=p.snapElements[h].left,l=r+p.snapElements[h].width,d=p.snapElements[h].top,c=d+p.snapElements[h].height,v<r-m||g>l+m||y<d-m||b>c+m||!e.contains(p.snapElements[h].item.ownerDocument,p.snapElements[h].item)?(p.snapElements[h].snapping&&p.options.snap.release&&p.options.snap.release.call(p.element,t,e.extend(p._uiHash(),{snapItem:p.snapElements[h].item})),p.snapElements[h].snapping=!1):("inner"!==f.snapMode&&(s=Math.abs(d-y)<=m,n=Math.abs(c-b)<=m,a=Math.abs(r-v)<=m,o=Math.abs(l-g)<=m,s&&(i.position.top=p._convertPositionTo("relative",{top:d-p.helperProportions.height,left:0}).top-p.margins.top),n&&(i.position.top=p._convertPositionTo("relative",{top:c,left:0}).top-p.margins.top),a&&(i.position.left=p._convertPositionTo("relative",{top:0,left:r-p.helperProportions.width}).left-p.margins.left),o&&(i.position.left=p._convertPositionTo("relative",{top:0,left:l}).left-p.margins.left)),u=s||n||a||o,"outer"!==f.snapMode&&(s=Math.abs(d-b)<=m,n=Math.abs(c-y)<=m,a=Math.abs(r-g)<=m,o=Math.abs(l-v)<=m,s&&(i.position.top=p._convertPositionTo("relative",{top:d,left:0}).top-p.margins.top),n&&(i.position.top=p._convertPositionTo("relative",{top:c-p.helperProportions.height,left:0}).top-p.margins.top),a&&(i.position.left=p._convertPositionTo("relative",{top:0,left:r}).left-p.margins.left),o&&(i.position.left=p._convertPositionTo("relative",{top:0,left:l-p.helperProportions.width}).left-p.margins.left)),!p.snapElements[h].snapping&&(s||n||a||o||u)&&p.options.snap.snap&&p.options.snap.snap.call(p.element,t,e.extend(p._uiHash(),{snapItem:p.snapElements[h].item})),p.snapElements[h].snapping=s||n||a||o||u)}}),e.ui.plugin.add("draggable","stack",{start:function(){var t,i=this.data("ui-draggable").options,s=e.makeArray(e(i.stack)).sort(function(t,i){return(parseInt(e(t).css("zIndex"),10)||0)-(parseInt(e(i).css("zIndex"),10)||0)});s.length&&(t=parseInt(e(s[0]).css("zIndex"),10)||0,e(s).each(function(i){e(this).css("zIndex",t+i)}),this.css("zIndex",t+s.length))}}),e.ui.plugin.add("draggable","zIndex",{start:function(t,i){var s=e(i.helper),n=e(this).data("ui-draggable").options;s.css("zIndex")&&(n._zIndex=s.css("zIndex")),s.css("zIndex",n.zIndex)},stop:function(t,i){var s=e(this).data("ui-draggable").options;s._zIndex&&e(i.helper).css("zIndex",s._zIndex)}})}(jQuery),function(e,t){function i(e,t,i){return e>t&&e<t+i}e.widget("ui.droppable",{version:"1.10.4",widgetEventPrefix:"drop",options:{accept:"*",activeClass:!1,addClasses:!0,greedy:!1,hoverClass:!1,scope:"default",tolerance:"intersect",activate:null,deactivate:null,drop:null,out:null,over:null},_create:function(){var t,i=this.options,s=i.accept;this.isover=!1,this.isout=!0,this.accept=e.isFunction(s)?s:function(e){return e.is(s)},this.proportions=function(){return arguments.length?void(t=arguments[0]):t?t:t={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight}},e.ui.ddmanager.droppables[i.scope]=e.ui.ddmanager.droppables[i.scope]||[],e.ui.ddmanager.droppables[i.scope].push(this),i.addClasses&&this.element.addClass("ui-droppable")},_destroy:function(){for(var t=0,i=e.ui.ddmanager.droppables[this.options.scope];t<i.length;t++)i[t]===this&&i.splice(t,1);this.element.removeClass("ui-droppable ui-droppable-disabled")},_setOption:function(t,i){"accept"===t&&(this.accept=e.isFunction(i)?i:function(e){return e.is(i)}),e.Widget.prototype._setOption.apply(this,arguments)},_activate:function(t){var i=e.ui.ddmanager.current;this.options.activeClass&&this.element.addClass(this.options.activeClass),i&&this._trigger("activate",t,this.ui(i))},_deactivate:function(t){var i=e.ui.ddmanager.current;this.options.activeClass&&this.element.removeClass(this.options.activeClass),i&&this._trigger("deactivate",t,this.ui(i))},_over:function(t){var i=e.ui.ddmanager.current;i&&(i.currentItem||i.element)[0]!==this.element[0]&&this.accept.call(this.element[0],i.currentItem||i.element)&&(this.options.hoverClass&&this.element.addClass(this.options.hoverClass),this._trigger("over",t,this.ui(i)))},_out:function(t){var i=e.ui.ddmanager.current;i&&(i.currentItem||i.element)[0]!==this.element[0]&&this.accept.call(this.element[0],i.currentItem||i.element)&&(this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("out",t,this.ui(i)))},_drop:function(t,i){var s=i||e.ui.ddmanager.current,n=!1;return!(!s||(s.currentItem||s.element)[0]===this.element[0])&&(this.element.find(":data(ui-droppable)").not(".ui-draggable-dragging").each(function(){var t=e.data(this,"ui-droppable");if(t.options.greedy&&!t.options.disabled&&t.options.scope===s.options.scope&&t.accept.call(t.element[0],s.currentItem||s.element)&&e.ui.intersect(s,e.extend(t,{offset:t.element.offset()}),t.options.tolerance))return n=!0,!1}),!n&&(!!this.accept.call(this.element[0],s.currentItem||s.element)&&(this.options.activeClass&&this.element.removeClass(this.options.activeClass),this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("drop",t,this.ui(s)),this.element)))},ui:function(e){return{draggable:e.currentItem||e.element,helper:e.helper,position:e.position,offset:e.positionAbs}}}),e.ui.intersect=function(e,t,s){if(!t.offset)return!1;var n,a,o=(e.positionAbs||e.position.absolute).left,r=(e.positionAbs||e.position.absolute).top,l=o+e.helperProportions.width,d=r+e.helperProportions.height,c=t.offset.left,h=t.offset.top,u=c+t.proportions().width,p=h+t.proportions().height;switch(s){case"fit":return c<=o&&l<=u&&h<=r&&d<=p;case"intersect":return c<o+e.helperProportions.width/2&&l-e.helperProportions.width/2<u&&h<r+e.helperProportions.height/2&&d-e.helperProportions.height/2<p;case"pointer":return n=(e.positionAbs||e.position.absolute).left+(e.clickOffset||e.offset.click).left,a=(e.positionAbs||e.position.absolute).top+(e.clickOffset||e.offset.click).top,i(a,h,t.proportions().height)&&i(n,c,t.proportions().width);case"touch":return(r>=h&&r<=p||d>=h&&d<=p||r<h&&d>p)&&(o>=c&&o<=u||l>=c&&l<=u||o<c&&l>u);default:return!1}},e.ui.ddmanager={current:null,droppables:{default:[]},prepareOffsets:function(t,i){var s,n,a=e.ui.ddmanager.droppables[t.options.scope]||[],o=i?i.type:null,r=(t.currentItem||t.element).find(":data(ui-droppable)").addBack();e:for(s=0;s<a.length;s++)if(!(a[s].options.disabled||t&&!a[s].accept.call(a[s].element[0],t.currentItem||t.element))){for(n=0;n<r.length;n++)if(r[n]===a[s].element[0]){a[s].proportions().height=0;continue e}a[s].visible="none"!==a[s].element.css("display"),a[s].visible&&("mousedown"===o&&a[s]._activate.call(a[s],i),a[s].offset=a[s].element.offset(),a[s].proportions({width:a[s].element[0].offsetWidth,height:a[s].element[0].offsetHeight}))}},drop:function(t,i){var s=!1;return e.each((e.ui.ddmanager.droppables[t.options.scope]||[]).slice(),function(){this.options&&(!this.options.disabled&&this.visible&&e.ui.intersect(t,this,this.options.tolerance)&&(s=this._drop.call(this,i)||s),!this.options.disabled&&this.visible&&this.accept.call(this.element[0],t.currentItem||t.element)&&(this.isout=!0,this.isover=!1,this._deactivate.call(this,i)))}),s},dragStart:function(t,i){t.element.parentsUntil("body").bind("scroll.droppable",function(){t.options.refreshPositions||e.ui.ddmanager.prepareOffsets(t,i)})},drag:function(t,i){t.options.refreshPositions&&e.ui.ddmanager.prepareOffsets(t,i),e.each(e.ui.ddmanager.droppables[t.options.scope]||[],function(){if(!this.options.disabled&&!this.greedyChild&&this.visible){var s,n,a,o=e.ui.intersect(t,this,this.options.tolerance),r=!o&&this.isover?"isout":o&&!this.isover?"isover":null;r&&(this.options.greedy&&(n=this.options.scope,a=this.element.parents(":data(ui-droppable)").filter(function(){return e.data(this,"ui-droppable").options.scope===n}),a.length&&(s=e.data(a[0],"ui-droppable"),s.greedyChild="isover"===r)),s&&"isover"===r&&(s.isover=!1,s.isout=!0,s._out.call(s,i)),this[r]=!0,this["isout"===r?"isover":"isout"]=!1,this["isover"===r?"_over":"_out"].call(this,i),s&&"isout"===r&&(s.isout=!1,s.isover=!0,s._over.call(s,i)))}})},dragStop:function(t,i){t.element.parentsUntil("body").unbind("scroll.droppable"),t.options.refreshPositions||e.ui.ddmanager.prepareOffsets(t,i)}}}(jQuery),function(e,t){var i="ui-effects-";e.effects={effect:{}},function(e,t){function i(e,t,i){var s=h[t.type]||{};return null==e?i||!t.def?null:t.def:(e=s.floor?~~e:parseFloat(e),isNaN(e)?t.def:s.mod?(e+s.mod)%s.mod:0>e?0:s.max<e?s.max:e)}function s(t){var i=d(),s=i._rgba=[];return t=t.toLowerCase(),f(l,function(e,n){var a,o=n.re.exec(t),r=o&&n.parse(o),l=n.space||"rgba";if(r)return a=i[l](r),i[c[l].cache]=a[c[l].cache],s=i._rgba=a._rgba,!1}),s.length?("0,0,0,0"===s.join()&&e.extend(s,a.transparent),i):a[t]}function n(e,t,i){return i=(i+1)%1,6*i<1?e+(t-e)*i*6:2*i<1?t:3*i<2?e+(t-e)*(2/3-i)*6:e}var a,o="backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor",r=/^([\-+])=\s*(\d+\.?\d*)/,l=[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(e){return[e[1],e[2],e[3],e[4]]}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(e){return[2.55*e[1],2.55*e[2],2.55*e[3],e[4]]}},{re:/#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})/,parse:function(e){return[parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16)]}},{re:/#([a-f0-9])([a-f0-9])([a-f0-9])/,parse:function(e){return[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16)]}},{re:/hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,space:"hsla",parse:function(e){return[e[1],e[2]/100,e[3]/100,e[4]]}}],d=e.Color=function(t,i,s,n){return new e.Color.fn.parse(t,i,s,n)},c={rgba:{props:{red:{idx:0,type:"byte"},green:{idx:1,type:"byte"},blue:{idx:2,type:"byte"}}},hsla:{props:{hue:{idx:0,type:"degrees"},saturation:{idx:1,type:"percent"},lightness:{idx:2,type:"percent"}}}},h={byte:{floor:!0,max:255},percent:{max:1},degrees:{mod:360,floor:!0}},u=d.support={},p=e("<p>")[0],f=e.each;p.style.cssText="background-color:rgba(1,1,1,.5)",u.rgba=p.style.backgroundColor.indexOf("rgba")>-1,f(c,function(e,t){t.cache="_"+e,t.props.alpha={idx:3,type:"percent",def:1}}),d.fn=e.extend(d.prototype,{parse:function(n,o,r,l){if(n===t)return this._rgba=[null,null,null,null],this;(n.jquery||n.nodeType)&&(n=e(n).css(o),o=t);var h=this,u=e.type(n),p=this._rgba=[];return o!==t&&(n=[n,o,r,l],u="array"),"string"===u?this.parse(s(n)||a._default):"array"===u?(f(c.rgba.props,function(e,t){p[t.idx]=i(n[t.idx],t)}),this):"object"===u?(n instanceof d?f(c,function(e,t){n[t.cache]&&(h[t.cache]=n[t.cache].slice())}):f(c,function(t,s){var a=s.cache;f(s.props,function(e,t){if(!h[a]&&s.to){if("alpha"===e||null==n[e])return;h[a]=s.to(h._rgba)}h[a][t.idx]=i(n[e],t,!0)}),h[a]&&e.inArray(null,h[a].slice(0,3))<0&&(h[a][3]=1,s.from&&(h._rgba=s.from(h[a])))}),this):void 0},is:function(e){var t=d(e),i=!0,s=this;return f(c,function(e,n){var a,o=t[n.cache];return o&&(a=s[n.cache]||n.to&&n.to(s._rgba)||[],f(n.props,function(e,t){if(null!=o[t.idx])return i=o[t.idx]===a[t.idx]})),i}),i},_space:function(){var e=[],t=this;return f(c,function(i,s){t[s.cache]&&e.push(i)}),e.pop()},transition:function(e,t){var s=d(e),n=s._space(),a=c[n],o=0===this.alpha()?d("transparent"):this,r=o[a.cache]||a.to(o._rgba),l=r.slice();return s=s[a.cache],f(a.props,function(e,n){var a=n.idx,o=r[a],d=s[a],c=h[n.type]||{};null!==d&&(null===o?l[a]=d:(c.mod&&(d-o>c.mod/2?o+=c.mod:o-d>c.mod/2&&(o-=c.mod)),l[a]=i((d-o)*t+o,n)))}),this[n](l)},blend:function(t){if(1===this._rgba[3])return this;var i=this._rgba.slice(),s=i.pop(),n=d(t)._rgba;return d(e.map(i,function(e,t){return(1-s)*n[t]+s*e}))},toRgbaString:function(){var t="rgba(",i=e.map(this._rgba,function(e,t){return null==e?t>2?1:0:e});return 1===i[3]&&(i.pop(),t="rgb("),t+i.join()+")"},toHslaString:function(){var t="hsla(",i=e.map(this.hsla(),function(e,t){return null==e&&(e=t>2?1:0),t&&t<3&&(e=Math.round(100*e)+"%"),e});return 1===i[3]&&(i.pop(),t="hsl("),t+i.join()+")"},toHexString:function(t){var i=this._rgba.slice(),s=i.pop();return t&&i.push(~~(255*s)),"#"+e.map(i,function(e){return e=(e||0).toString(16),1===e.length?"0"+e:e}).join("")},toString:function(){return 0===this._rgba[3]?"transparent":this.toRgbaString()}}),d.fn.parse.prototype=d.fn,c.hsla.to=function(e){if(null==e[0]||null==e[1]||null==e[2])return[null,null,null,e[3]];var t,i,s=e[0]/255,n=e[1]/255,a=e[2]/255,o=e[3],r=Math.max(s,n,a),l=Math.min(s,n,a),d=r-l,c=r+l,h=.5*c;return t=l===r?0:s===r?60*(n-a)/d+360:n===r?60*(a-s)/d+120:60*(s-n)/d+240,i=0===d?0:h<=.5?d/c:d/(2-c),[Math.round(t)%360,i,h,null==o?1:o]},c.hsla.from=function(e){if(null==e[0]||null==e[1]||null==e[2])return[null,null,null,e[3]];var t=e[0]/360,i=e[1],s=e[2],a=e[3],o=s<=.5?s*(1+i):s+i-s*i,r=2*s-o;return[Math.round(255*n(r,o,t+1/3)),Math.round(255*n(r,o,t)),Math.round(255*n(r,o,t-1/3)),a]},f(c,function(s,n){var a=n.props,o=n.cache,l=n.to,c=n.from;d.fn[s]=function(s){if(l&&!this[o]&&(this[o]=l(this._rgba)),s===t)return this[o].slice();var n,r=e.type(s),h="array"===r||"object"===r?s:arguments,u=this[o].slice();return f(a,function(e,t){var s=h["object"===r?e:t.idx];null==s&&(s=u[t.idx]),u[t.idx]=i(s,t)}),c?(n=d(c(u)),n[o]=u,n):d(u)},f(a,function(t,i){d.fn[t]||(d.fn[t]=function(n){var a,o=e.type(n),l="alpha"===t?this._hsla?"hsla":"rgba":s,d=this[l](),c=d[i.idx];return"undefined"===o?c:("function"===o&&(n=n.call(this,c),o=e.type(n)),null==n&&i.empty?this:("string"===o&&(a=r.exec(n),a&&(n=c+parseFloat(a[2])*("+"===a[1]?1:-1))),d[i.idx]=n,this[l](d)))})})}),d.hook=function(t){var i=t.split(" ");f(i,function(t,i){e.cssHooks[i]={set:function(t,n){var a,o,r="";if("transparent"!==n&&("string"!==e.type(n)||(a=s(n)))){if(n=d(a||n),!u.rgba&&1!==n._rgba[3]){for(o="backgroundColor"===i?t.parentNode:t;(""===r||"transparent"===r)&&o&&o.style;)try{r=e.css(o,"backgroundColor"),o=o.parentNode}catch(e){}n=n.blend(r&&"transparent"!==r?r:"_default")}n=n.toRgbaString()}try{t.style[i]=n}catch(e){}}},e.fx.step[i]=function(t){t.colorInit||(t.start=d(t.elem,i),t.end=d(t.end),t.colorInit=!0),e.cssHooks[i].set(t.elem,t.start.transition(t.end,t.pos))}})},d.hook(o),e.cssHooks.borderColor={expand:function(e){var t={};return f(["Top","Right","Bottom","Left"],function(i,s){t["border"+s+"Color"]=e}),t}},a=e.Color.names={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00",transparent:[null,null,null,0],_default:"#ffffff"}}(jQuery),function(){function i(t){var i,s,n=t.ownerDocument.defaultView?t.ownerDocument.defaultView.getComputedStyle(t,null):t.currentStyle,a={};if(n&&n.length&&n[0]&&n[n[0]])for(s=n.length;s--;)i=n[s],"string"==typeof n[i]&&(a[e.camelCase(i)]=n[i]);else for(i in n)"string"==typeof n[i]&&(a[i]=n[i]);return a}function s(t,i){var s,n,o={};for(s in i)n=i[s],t[s]!==n&&(a[s]||!e.fx.step[s]&&isNaN(parseFloat(n))||(o[s]=n));return o}var n=["add","remove","toggle"],a={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};e.each(["borderLeftStyle","borderRightStyle","borderBottomStyle","borderTopStyle"],function(t,i){e.fx.step[i]=function(e){("none"!==e.end&&!e.setAttr||1===e.pos&&!e.setAttr)&&(jQuery.style(e.elem,i,e.end),e.setAttr=!0)}}),e.fn.addBack||(e.fn.addBack=function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}),e.effects.animateClass=function(t,a,o,r){var l=e.speed(a,o,r);return this.queue(function(){var a,o=e(this),r=o.attr("class")||"",d=l.children?o.find("*").addBack():o;d=d.map(function(){var t=e(this);return{el:t,start:i(this)}}),a=function(){e.each(n,function(e,i){t[i]&&o[i+"Class"](t[i])})},a(),d=d.map(function(){return this.end=i(this.el[0]),this.diff=s(this.start,this.end),this}),o.attr("class",r),d=d.map(function(){var t=this,i=e.Deferred(),s=e.extend({},l,{queue:!1,complete:function(){i.resolve(t)}});return this.el.animate(this.diff,s),i.promise()}),e.when.apply(e,d.get()).done(function(){a(),e.each(arguments,function(){var t=this.el;e.each(this.diff,function(e){t.css(e,"")})}),l.complete.call(o[0])})})},e.fn.extend({addClass:function(t){return function(i,s,n,a){return s?e.effects.animateClass.call(this,{add:i},s,n,a):t.apply(this,arguments)}}(e.fn.addClass),removeClass:function(t){return function(i,s,n,a){return arguments.length>1?e.effects.animateClass.call(this,{remove:i},s,n,a):t.apply(this,arguments)}}(e.fn.removeClass),toggleClass:function(i){return function(s,n,a,o,r){return"boolean"==typeof n||n===t?a?e.effects.animateClass.call(this,n?{add:s}:{remove:s},a,o,r):i.apply(this,arguments):e.effects.animateClass.call(this,{toggle:s},n,a,o)}}(e.fn.toggleClass),switchClass:function(t,i,s,n,a){return e.effects.animateClass.call(this,{add:i,remove:t},s,n,a)}})}(),function(){function s(t,i,s,n){return e.isPlainObject(t)&&(i=t,t=t.effect),t={effect:t},null==i&&(i={}),e.isFunction(i)&&(n=i,s=null,i={}),("number"==typeof i||e.fx.speeds[i])&&(n=s,s=i,i={}),e.isFunction(s)&&(n=s,s=null),i&&e.extend(t,i),s=s||i.duration,t.duration=e.fx.off?0:"number"==typeof s?s:s in e.fx.speeds?e.fx.speeds[s]:e.fx.speeds._default,t.complete=n||i.complete,t}function n(t){return!(t&&"number"!=typeof t&&!e.fx.speeds[t])||("string"==typeof t&&!e.effects.effect[t]||(!!e.isFunction(t)||"object"==typeof t&&!t.effect))}e.extend(e.effects,{version:"1.10.4",save:function(e,t){for(var s=0;s<t.length;s++)null!==t[s]&&e.data(i+t[s],e[0].style[t[s]])},restore:function(e,s){var n,a;for(a=0;a<s.length;a++)null!==s[a]&&(n=e.data(i+s[a]),n===t&&(n=""),e.css(s[a],n))},setMode:function(e,t){return"toggle"===t&&(t=e.is(":hidden")?"show":"hide"),t},getBaseline:function(e,t){var i,s;switch(e[0]){case"top":i=0;break;case"middle":i=.5;break;case"bottom":i=1;break;default:i=e[0]/t.height}switch(e[1]){case"left":s=0;break;case"center":s=.5;break;case"right":s=1;break;default:s=e[1]/t.width}return{x:s,y:i}},createWrapper:function(t){if(t.parent().is(".ui-effects-wrapper"))return t.parent();var i={width:t.outerWidth(!0),height:t.outerHeight(!0),float:t.css("float")},s=e("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),n={width:t.width(),height:t.height()},a=document.activeElement;try{a.id}catch(e){a=document.body}return t.wrap(s),(t[0]===a||e.contains(t[0],a))&&e(a).focus(),s=t.parent(),"static"===t.css("position")?(s.css({position:"relative"}),t.css({position:"relative"})):(e.extend(i,{position:t.css("position"),zIndex:t.css("z-index")}),e.each(["top","left","bottom","right"],function(e,s){i[s]=t.css(s),isNaN(parseInt(i[s],10))&&(i[s]="auto")}),t.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"})),t.css(n),s.css(i).show()},removeWrapper:function(t){var i=document.activeElement;return t.parent().is(".ui-effects-wrapper")&&(t.parent().replaceWith(t),(t[0]===i||e.contains(t[0],i))&&e(i).focus()),t},setTransition:function(t,i,s,n){return n=n||{},e.each(i,function(e,i){var a=t.cssUnit(i);a[0]>0&&(n[i]=a[0]*s+a[1])}),n}}),e.fn.extend({effect:function(){function t(t){function s(){e.isFunction(a)&&a.call(n[0]),e.isFunction(t)&&t()}var n=e(this),a=i.complete,r=i.mode;(n.is(":hidden")?"hide"===r:"show"===r)?(n[r](),s()):o.call(n[0],i,s)}var i=s.apply(this,arguments),n=i.mode,a=i.queue,o=e.effects.effect[i.effect];return e.fx.off||!o?n?this[n](i.duration,i.complete):this.each(function(){
i.complete&&i.complete.call(this)}):a===!1?this.each(t):this.queue(a||"fx",t)},show:function(e){return function(t){if(n(t))return e.apply(this,arguments);var i=s.apply(this,arguments);return i.mode="show",this.effect.call(this,i)}}(e.fn.show),hide:function(e){return function(t){if(n(t))return e.apply(this,arguments);var i=s.apply(this,arguments);return i.mode="hide",this.effect.call(this,i)}}(e.fn.hide),toggle:function(e){return function(t){if(n(t)||"boolean"==typeof t)return e.apply(this,arguments);var i=s.apply(this,arguments);return i.mode="toggle",this.effect.call(this,i)}}(e.fn.toggle),cssUnit:function(t){var i=this.css(t),s=[];return e.each(["em","px","%","pt"],function(e,t){i.indexOf(t)>0&&(s=[parseFloat(i),t])}),s}})}(),function(){var t={};e.each(["Quad","Cubic","Quart","Quint","Expo"],function(e,i){t[i]=function(t){return Math.pow(t,e+2)}}),e.extend(t,{Sine:function(e){return 1-Math.cos(e*Math.PI/2)},Circ:function(e){return 1-Math.sqrt(1-e*e)},Elastic:function(e){return 0===e||1===e?e:-Math.pow(2,8*(e-1))*Math.sin((80*(e-1)-7.5)*Math.PI/15)},Back:function(e){return e*e*(3*e-2)},Bounce:function(e){for(var t,i=4;e<((t=Math.pow(2,--i))-1)/11;);return 1/Math.pow(4,3-i)-7.5625*Math.pow((3*t-2)/22-e,2)}}),e.each(t,function(t,i){e.easing["easeIn"+t]=i,e.easing["easeOut"+t]=function(e){return 1-i(1-e)},e.easing["easeInOut"+t]=function(e){return e<.5?i(2*e)/2:1-i(e*-2+2)/2}})}()}(jQuery),function(e,t){var i=/up|down|vertical/,s=/up|left|vertical|horizontal/;e.effects.effect.blind=function(t,n){var a,o,r,l=e(this),d=["position","top","bottom","left","right","height","width"],c=e.effects.setMode(l,t.mode||"hide"),h=t.direction||"up",u=i.test(h),p=u?"height":"width",f=u?"top":"left",m=s.test(h),g={},v="show"===c;l.parent().is(".ui-effects-wrapper")?e.effects.save(l.parent(),d):e.effects.save(l,d),l.show(),a=e.effects.createWrapper(l).css({overflow:"hidden"}),o=a[p](),r=parseFloat(a.css(f))||0,g[p]=v?o:0,m||(l.css(u?"bottom":"right",0).css(u?"top":"left","auto").css({position:"absolute"}),g[f]=v?r:o+r),v&&(a.css(p,0),m||a.css(f,r+o)),a.animate(g,{duration:t.duration,easing:t.easing,queue:!1,complete:function(){"hide"===c&&l.hide(),e.effects.restore(l,d),e.effects.removeWrapper(l),n()}})}}(jQuery),function(e,t){e.effects.effect.bounce=function(t,i){var s,n,a,o=e(this),r=["position","top","bottom","left","right","height","width"],l=e.effects.setMode(o,t.mode||"effect"),d="hide"===l,c="show"===l,h=t.direction||"up",u=t.distance,p=t.times||5,f=2*p+(c||d?1:0),m=t.duration/f,g=t.easing,v="up"===h||"down"===h?"top":"left",b="up"===h||"left"===h,y=o.queue(),_=y.length;for((c||d)&&r.push("opacity"),e.effects.save(o,r),o.show(),e.effects.createWrapper(o),u||(u=o["top"===v?"outerHeight":"outerWidth"]()/3),c&&(a={opacity:1},a[v]=0,o.css("opacity",0).css(v,b?2*-u:2*u).animate(a,m,g)),d&&(u/=Math.pow(2,p-1)),a={},a[v]=0,s=0;s<p;s++)n={},n[v]=(b?"-=":"+=")+u,o.animate(n,m,g).animate(a,m,g),u=d?2*u:u/2;d&&(n={opacity:0},n[v]=(b?"-=":"+=")+u,o.animate(n,m,g)),o.queue(function(){d&&o.hide(),e.effects.restore(o,r),e.effects.removeWrapper(o),i()}),_>1&&y.splice.apply(y,[1,0].concat(y.splice(_,f+1))),o.dequeue()}}(jQuery),function(e,t){e.effects.effect.clip=function(t,i){var s,n,a,o=e(this),r=["position","top","bottom","left","right","height","width"],l=e.effects.setMode(o,t.mode||"hide"),d="show"===l,c=t.direction||"vertical",h="vertical"===c,u=h?"height":"width",p=h?"top":"left",f={};e.effects.save(o,r),o.show(),s=e.effects.createWrapper(o).css({overflow:"hidden"}),n="IMG"===o[0].tagName?s:o,a=n[u](),d&&(n.css(u,0),n.css(p,a/2)),f[u]=d?a:0,f[p]=d?0:a/2,n.animate(f,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){d||o.hide(),e.effects.restore(o,r),e.effects.removeWrapper(o),i()}})}}(jQuery),function(e,t){e.effects.effect.drop=function(t,i){var s,n=e(this),a=["position","top","bottom","left","right","opacity","height","width"],o=e.effects.setMode(n,t.mode||"hide"),r="show"===o,l=t.direction||"left",d="up"===l||"down"===l?"top":"left",c="up"===l||"left"===l?"pos":"neg",h={opacity:r?1:0};e.effects.save(n,a),n.show(),e.effects.createWrapper(n),s=t.distance||n["top"===d?"outerHeight":"outerWidth"](!0)/2,r&&n.css("opacity",0).css(d,"pos"===c?-s:s),h[d]=(r?"pos"===c?"+=":"-=":"pos"===c?"-=":"+=")+s,n.animate(h,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){"hide"===o&&n.hide(),e.effects.restore(n,a),e.effects.removeWrapper(n),i()}})}}(jQuery),function(e,t){e.effects.effect.explode=function(t,i){function s(){y.push(this),y.length===h*u&&n()}function n(){p.css({visibility:"visible"}),e(y).remove(),m||p.hide(),i()}var a,o,r,l,d,c,h=t.pieces?Math.round(Math.sqrt(t.pieces)):3,u=h,p=e(this),f=e.effects.setMode(p,t.mode||"hide"),m="show"===f,g=p.show().css("visibility","hidden").offset(),v=Math.ceil(p.outerWidth()/u),b=Math.ceil(p.outerHeight()/h),y=[];for(a=0;a<h;a++)for(l=g.top+a*b,c=a-(h-1)/2,o=0;o<u;o++)r=g.left+o*v,d=o-(u-1)/2,p.clone().appendTo("body").wrap("<div></div>").css({position:"absolute",visibility:"visible",left:-o*v,top:-a*b}).parent().addClass("ui-effects-explode").css({position:"absolute",overflow:"hidden",width:v,height:b,left:r+(m?d*v:0),top:l+(m?c*b:0),opacity:m?0:1}).animate({left:r+(m?0:d*v),top:l+(m?0:c*b),opacity:m?1:0},t.duration||500,t.easing,s)}}(jQuery),function(e,t){e.effects.effect.fade=function(t,i){var s=e(this),n=e.effects.setMode(s,t.mode||"toggle");s.animate({opacity:n},{queue:!1,duration:t.duration,easing:t.easing,complete:i})}}(jQuery),function(e,t){e.effects.effect.fold=function(t,i){var s,n,a=e(this),o=["position","top","bottom","left","right","height","width"],r=e.effects.setMode(a,t.mode||"hide"),l="show"===r,d="hide"===r,c=t.size||15,h=/([0-9]+)%/.exec(c),u=!!t.horizFirst,p=l!==u,f=p?["width","height"]:["height","width"],m=t.duration/2,g={},v={};e.effects.save(a,o),a.show(),s=e.effects.createWrapper(a).css({overflow:"hidden"}),n=p?[s.width(),s.height()]:[s.height(),s.width()],h&&(c=parseInt(h[1],10)/100*n[d?0:1]),l&&s.css(u?{height:0,width:c}:{height:c,width:0}),g[f[0]]=l?n[0]:c,v[f[1]]=l?n[1]:0,s.animate(g,m,t.easing).animate(v,m,t.easing,function(){d&&a.hide(),e.effects.restore(a,o),e.effects.removeWrapper(a),i()})}}(jQuery),function(e,t){e.effects.effect.highlight=function(t,i){var s=e(this),n=["backgroundImage","backgroundColor","opacity"],a=e.effects.setMode(s,t.mode||"show"),o={backgroundColor:s.css("backgroundColor")};"hide"===a&&(o.opacity=0),e.effects.save(s,n),s.show().css({backgroundImage:"none",backgroundColor:t.color||"#ffff99"}).animate(o,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){"hide"===a&&s.hide(),e.effects.restore(s,n),i()}})}}(jQuery),function(e,t){e.effects.effect.pulsate=function(t,i){var s,n=e(this),a=e.effects.setMode(n,t.mode||"show"),o="show"===a,r="hide"===a,l=o||"hide"===a,d=2*(t.times||5)+(l?1:0),c=t.duration/d,h=0,u=n.queue(),p=u.length;for(!o&&n.is(":visible")||(n.css("opacity",0).show(),h=1),s=1;s<d;s++)n.animate({opacity:h},c,t.easing),h=1-h;n.animate({opacity:h},c,t.easing),n.queue(function(){r&&n.hide(),i()}),p>1&&u.splice.apply(u,[1,0].concat(u.splice(p,d+1))),n.dequeue()}}(jQuery),function(e,t){e.effects.effect.puff=function(t,i){var s=e(this),n=e.effects.setMode(s,t.mode||"hide"),a="hide"===n,o=parseInt(t.percent,10)||150,r=o/100,l={height:s.height(),width:s.width(),outerHeight:s.outerHeight(),outerWidth:s.outerWidth()};e.extend(t,{effect:"scale",queue:!1,fade:!0,mode:n,complete:i,percent:a?o:100,from:a?l:{height:l.height*r,width:l.width*r,outerHeight:l.outerHeight*r,outerWidth:l.outerWidth*r}}),s.effect(t)},e.effects.effect.scale=function(t,i){var s=e(this),n=e.extend(!0,{},t),a=e.effects.setMode(s,t.mode||"effect"),o=parseInt(t.percent,10)||(0===parseInt(t.percent,10)?0:"hide"===a?0:100),r=t.direction||"both",l=t.origin,d={height:s.height(),width:s.width(),outerHeight:s.outerHeight(),outerWidth:s.outerWidth()},c={y:"horizontal"!==r?o/100:1,x:"vertical"!==r?o/100:1};n.effect="size",n.queue=!1,n.complete=i,"effect"!==a&&(n.origin=l||["middle","center"],n.restore=!0),n.from=t.from||("show"===a?{height:0,width:0,outerHeight:0,outerWidth:0}:d),n.to={height:d.height*c.y,width:d.width*c.x,outerHeight:d.outerHeight*c.y,outerWidth:d.outerWidth*c.x},n.fade&&("show"===a&&(n.from.opacity=0,n.to.opacity=1),"hide"===a&&(n.from.opacity=1,n.to.opacity=0)),s.effect(n)},e.effects.effect.size=function(t,i){var s,n,a,o=e(this),r=["position","top","bottom","left","right","width","height","overflow","opacity"],l=["position","top","bottom","left","right","overflow","opacity"],d=["width","height","overflow"],c=["fontSize"],h=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"],u=["borderLeftWidth","borderRightWidth","paddingLeft","paddingRight"],p=e.effects.setMode(o,t.mode||"effect"),f=t.restore||"effect"!==p,m=t.scale||"both",g=t.origin||["middle","center"],v=o.css("position"),b=f?r:l,y={height:0,width:0,outerHeight:0,outerWidth:0};"show"===p&&o.show(),s={height:o.height(),width:o.width(),outerHeight:o.outerHeight(),outerWidth:o.outerWidth()},"toggle"===t.mode&&"show"===p?(o.from=t.to||y,o.to=t.from||s):(o.from=t.from||("show"===p?y:s),o.to=t.to||("hide"===p?y:s)),a={from:{y:o.from.height/s.height,x:o.from.width/s.width},to:{y:o.to.height/s.height,x:o.to.width/s.width}},"box"!==m&&"both"!==m||(a.from.y!==a.to.y&&(b=b.concat(h),o.from=e.effects.setTransition(o,h,a.from.y,o.from),o.to=e.effects.setTransition(o,h,a.to.y,o.to)),a.from.x!==a.to.x&&(b=b.concat(u),o.from=e.effects.setTransition(o,u,a.from.x,o.from),o.to=e.effects.setTransition(o,u,a.to.x,o.to))),"content"!==m&&"both"!==m||a.from.y!==a.to.y&&(b=b.concat(c).concat(d),o.from=e.effects.setTransition(o,c,a.from.y,o.from),o.to=e.effects.setTransition(o,c,a.to.y,o.to)),e.effects.save(o,b),o.show(),e.effects.createWrapper(o),o.css("overflow","hidden").css(o.from),g&&(n=e.effects.getBaseline(g,s),o.from.top=(s.outerHeight-o.outerHeight())*n.y,o.from.left=(s.outerWidth-o.outerWidth())*n.x,o.to.top=(s.outerHeight-o.to.outerHeight)*n.y,o.to.left=(s.outerWidth-o.to.outerWidth)*n.x),o.css(o.from),"content"!==m&&"both"!==m||(h=h.concat(["marginTop","marginBottom"]).concat(c),u=u.concat(["marginLeft","marginRight"]),d=r.concat(h).concat(u),o.find("*[width]").each(function(){var i=e(this),s={height:i.height(),width:i.width(),outerHeight:i.outerHeight(),outerWidth:i.outerWidth()};f&&e.effects.save(i,d),i.from={height:s.height*a.from.y,width:s.width*a.from.x,outerHeight:s.outerHeight*a.from.y,outerWidth:s.outerWidth*a.from.x},i.to={height:s.height*a.to.y,width:s.width*a.to.x,outerHeight:s.height*a.to.y,outerWidth:s.width*a.to.x},a.from.y!==a.to.y&&(i.from=e.effects.setTransition(i,h,a.from.y,i.from),i.to=e.effects.setTransition(i,h,a.to.y,i.to)),a.from.x!==a.to.x&&(i.from=e.effects.setTransition(i,u,a.from.x,i.from),i.to=e.effects.setTransition(i,u,a.to.x,i.to)),i.css(i.from),i.animate(i.to,t.duration,t.easing,function(){f&&e.effects.restore(i,d)})})),o.animate(o.to,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){0===o.to.opacity&&o.css("opacity",o.from.opacity),"hide"===p&&o.hide(),e.effects.restore(o,b),f||("static"===v?o.css({position:"relative",top:o.to.top,left:o.to.left}):e.each(["top","left"],function(e,t){o.css(t,function(t,i){var s=parseInt(i,10),n=e?o.to.left:o.to.top;return"auto"===i?n+"px":s+n+"px"})})),e.effects.removeWrapper(o),i()}})}}(jQuery),function(e,t){e.effects.effect.shake=function(t,i){var s,n=e(this),a=["position","top","bottom","left","right","height","width"],o=e.effects.setMode(n,t.mode||"effect"),r=t.direction||"left",l=t.distance||20,d=t.times||3,c=2*d+1,h=Math.round(t.duration/c),u="up"===r||"down"===r?"top":"left",p="up"===r||"left"===r,f={},m={},g={},v=n.queue(),b=v.length;for(e.effects.save(n,a),n.show(),e.effects.createWrapper(n),f[u]=(p?"-=":"+=")+l,m[u]=(p?"+=":"-=")+2*l,g[u]=(p?"-=":"+=")+2*l,n.animate(f,h,t.easing),s=1;s<d;s++)n.animate(m,h,t.easing).animate(g,h,t.easing);n.animate(m,h,t.easing).animate(f,h/2,t.easing).queue(function(){"hide"===o&&n.hide(),e.effects.restore(n,a),e.effects.removeWrapper(n),i()}),b>1&&v.splice.apply(v,[1,0].concat(v.splice(b,c+1))),n.dequeue()}}(jQuery),function(e,t){e.effects.effect.slide=function(t,i){var s,n=e(this),a=["position","top","bottom","left","right","width","height"],o=e.effects.setMode(n,t.mode||"show"),r="show"===o,l=t.direction||"left",d="up"===l||"down"===l?"top":"left",c="up"===l||"left"===l,h={};e.effects.save(n,a),n.show(),s=t.distance||n["top"===d?"outerHeight":"outerWidth"](!0),e.effects.createWrapper(n).css({overflow:"hidden"}),r&&n.css(d,c?isNaN(s)?"-"+s:-s:s),h[d]=(r?c?"+=":"-=":c?"-=":"+=")+s,n.animate(h,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){"hide"===o&&n.hide(),e.effects.restore(n,a),e.effects.removeWrapper(n),i()}})}}(jQuery),function(e,t){e.effects.effect.transfer=function(t,i){var s=e(this),n=e(t.to),a="fixed"===n.css("position"),o=e("body"),r=a?o.scrollTop():0,l=a?o.scrollLeft():0,d=n.offset(),c={top:d.top-r,left:d.left-l,height:n.innerHeight(),width:n.innerWidth()},h=s.offset(),u=e("<div class='ui-effects-transfer'></div>").appendTo(document.body).addClass(t.className).css({top:h.top-r,left:h.left-l,height:s.innerHeight(),width:s.innerWidth(),position:a?"fixed":"absolute"}).animate(c,t.duration,t.easing,function(){u.remove(),i()})}}(jQuery),function(e,t){e.widget("ui.menu",{version:"1.10.4",defaultElement:"<ul>",delay:300,options:{icons:{submenu:"ui-icon-carat-1-e"},menus:"ul",position:{my:"left top",at:"right top"},role:"menu",blur:null,focus:null,select:null},_create:function(){this.activeMenu=this.element,this.mouseHandled=!1,this.element.uniqueId().addClass("ui-menu ui-widget ui-widget-content ui-corner-all").toggleClass("ui-menu-icons",!!this.element.find(".ui-icon").length).attr({role:this.options.role,tabIndex:0}).bind("click"+this.eventNamespace,e.proxy(function(e){this.options.disabled&&e.preventDefault()},this)),this.options.disabled&&this.element.addClass("ui-state-disabled").attr("aria-disabled","true"),this._on({"mousedown .ui-menu-item > a":function(e){e.preventDefault()},"click .ui-state-disabled > a":function(e){e.preventDefault()},"click .ui-menu-item:has(a)":function(t){var i=e(t.target).closest(".ui-menu-item");!this.mouseHandled&&i.not(".ui-state-disabled").length&&(this.select(t),t.isPropagationStopped()||(this.mouseHandled=!0),i.has(".ui-menu").length?this.expand(t):!this.element.is(":focus")&&e(this.document[0].activeElement).closest(".ui-menu").length&&(this.element.trigger("focus",[!0]),this.active&&1===this.active.parents(".ui-menu").length&&clearTimeout(this.timer)))},"mouseenter .ui-menu-item":function(t){var i=e(t.currentTarget);i.siblings().children(".ui-state-active").removeClass("ui-state-active"),this.focus(t,i)},mouseleave:"collapseAll","mouseleave .ui-menu":"collapseAll",focus:function(e,t){var i=this.active||this.element.children(".ui-menu-item").eq(0);t||this.focus(e,i)},blur:function(t){this._delay(function(){e.contains(this.element[0],this.document[0].activeElement)||this.collapseAll(t)})},keydown:"_keydown"}),this.refresh(),this._on(this.document,{click:function(t){e(t.target).closest(".ui-menu").length||this.collapseAll(t),this.mouseHandled=!1}})},_destroy:function(){this.element.removeAttr("aria-activedescendant").find(".ui-menu").addBack().removeClass("ui-menu ui-widget ui-widget-content ui-corner-all ui-menu-icons").removeAttr("role").removeAttr("tabIndex").removeAttr("aria-labelledby").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr("aria-disabled").removeUniqueId().show(),this.element.find(".ui-menu-item").removeClass("ui-menu-item").removeAttr("role").removeAttr("aria-disabled").children("a").removeUniqueId().removeClass("ui-corner-all ui-state-hover").removeAttr("tabIndex").removeAttr("role").removeAttr("aria-haspopup").children().each(function(){var t=e(this);t.data("ui-menu-submenu-carat")&&t.remove()}),this.element.find(".ui-menu-divider").removeClass("ui-menu-divider ui-widget-content")},_keydown:function(t){function i(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}var s,n,a,o,r,l=!0;switch(t.keyCode){case e.ui.keyCode.PAGE_UP:this.previousPage(t);break;case e.ui.keyCode.PAGE_DOWN:this.nextPage(t);break;case e.ui.keyCode.HOME:this._move("first","first",t);break;case e.ui.keyCode.END:this._move("last","last",t);break;case e.ui.keyCode.UP:this.previous(t);break;case e.ui.keyCode.DOWN:this.next(t);break;case e.ui.keyCode.LEFT:this.collapse(t);break;case e.ui.keyCode.RIGHT:this.active&&!this.active.is(".ui-state-disabled")&&this.expand(t);break;case e.ui.keyCode.ENTER:case e.ui.keyCode.SPACE:this._activate(t);break;case e.ui.keyCode.ESCAPE:this.collapse(t);break;default:l=!1,n=this.previousFilter||"",a=String.fromCharCode(t.keyCode),o=!1,clearTimeout(this.filterTimer),a===n?o=!0:a=n+a,r=new RegExp("^"+i(a),"i"),s=this.activeMenu.children(".ui-menu-item").filter(function(){return r.test(e(this).children("a").text())}),s=o&&s.index(this.active.next())!==-1?this.active.nextAll(".ui-menu-item"):s,s.length||(a=String.fromCharCode(t.keyCode),r=new RegExp("^"+i(a),"i"),s=this.activeMenu.children(".ui-menu-item").filter(function(){return r.test(e(this).children("a").text())})),s.length?(this.focus(t,s),s.length>1?(this.previousFilter=a,this.filterTimer=this._delay(function(){delete this.previousFilter},1e3)):delete this.previousFilter):delete this.previousFilter}l&&t.preventDefault()},_activate:function(e){this.active.is(".ui-state-disabled")||(this.active.children("a[aria-haspopup='true']").length?this.expand(e):this.select(e))},refresh:function(){var t,i=this.options.icons.submenu,s=this.element.find(this.options.menus);this.element.toggleClass("ui-menu-icons",!!this.element.find(".ui-icon").length),s.filter(":not(.ui-menu)").addClass("ui-menu ui-widget ui-widget-content ui-corner-all").hide().attr({role:this.options.role,"aria-hidden":"true","aria-expanded":"false"}).each(function(){var t=e(this),s=t.prev("a"),n=e("<span>").addClass("ui-menu-icon ui-icon "+i).data("ui-menu-submenu-carat",!0);s.attr("aria-haspopup","true").prepend(n),t.attr("aria-labelledby",s.attr("id"))}),t=s.add(this.element),t.children(":not(.ui-menu-item):has(a)").addClass("ui-menu-item").attr("role","presentation").children("a").uniqueId().addClass("ui-corner-all").attr({tabIndex:-1,role:this._itemRole()}),t.children(":not(.ui-menu-item)").each(function(){var t=e(this);/[^\-\u2014\u2013\s]/.test(t.text())||t.addClass("ui-widget-content ui-menu-divider")}),t.children(".ui-state-disabled").attr("aria-disabled","true"),this.active&&!e.contains(this.element[0],this.active[0])&&this.blur()},_itemRole:function(){return{menu:"menuitem",listbox:"option"}[this.options.role]},_setOption:function(e,t){"icons"===e&&this.element.find(".ui-menu-icon").removeClass(this.options.icons.submenu).addClass(t.submenu),this._super(e,t)},focus:function(e,t){var i,s;this.blur(e,e&&"focus"===e.type),this._scrollIntoView(t),this.active=t.first(),s=this.active.children("a").addClass("ui-state-focus"),this.options.role&&this.element.attr("aria-activedescendant",s.attr("id")),this.active.parent().closest(".ui-menu-item").children("a:first").addClass("ui-state-active"),e&&"keydown"===e.type?this._close():this.timer=this._delay(function(){this._close()},this.delay),i=t.children(".ui-menu"),i.length&&e&&/^mouse/.test(e.type)&&this._startOpening(i),this.activeMenu=t.parent(),this._trigger("focus",e,{item:t})},_scrollIntoView:function(t){var i,s,n,a,o,r;this._hasScroll()&&(i=parseFloat(e.css(this.activeMenu[0],"borderTopWidth"))||0,s=parseFloat(e.css(this.activeMenu[0],"paddingTop"))||0,n=t.offset().top-this.activeMenu.offset().top-i-s,a=this.activeMenu.scrollTop(),o=this.activeMenu.height(),r=t.height(),n<0?this.activeMenu.scrollTop(a+n):n+r>o&&this.activeMenu.scrollTop(a+n-o+r))},blur:function(e,t){t||clearTimeout(this.timer),this.active&&(this.active.children("a").removeClass("ui-state-focus"),this.active=null,this._trigger("blur",e,{item:this.active}))},_startOpening:function(e){clearTimeout(this.timer),"true"===e.attr("aria-hidden")&&(this.timer=this._delay(function(){this._close(),this._open(e)},this.delay))},_open:function(t){var i=e.extend({of:this.active},this.options.position);clearTimeout(this.timer),this.element.find(".ui-menu").not(t.parents(".ui-menu")).hide().attr("aria-hidden","true"),t.show().removeAttr("aria-hidden").attr("aria-expanded","true").position(i)},collapseAll:function(t,i){clearTimeout(this.timer),this.timer=this._delay(function(){var s=i?this.element:e(t&&t.target).closest(this.element.find(".ui-menu"));s.length||(s=this.element),this._close(s),this.blur(t),this.activeMenu=s},this.delay)},_close:function(e){e||(e=this.active?this.active.parent():this.element),e.find(".ui-menu").hide().attr("aria-hidden","true").attr("aria-expanded","false").end().find("a.ui-state-active").removeClass("ui-state-active")},collapse:function(e){var t=this.active&&this.active.parent().closest(".ui-menu-item",this.element);t&&t.length&&(this._close(),this.focus(e,t))},expand:function(e){var t=this.active&&this.active.children(".ui-menu ").children(".ui-menu-item").first();t&&t.length&&(this._open(t.parent()),this._delay(function(){this.focus(e,t)}))},next:function(e){this._move("next","first",e)},previous:function(e){this._move("prev","last",e)},isFirstItem:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},isLastItem:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},_move:function(e,t,i){var s;this.active&&(s="first"===e||"last"===e?this.active["first"===e?"prevAll":"nextAll"](".ui-menu-item").eq(-1):this.active[e+"All"](".ui-menu-item").eq(0)),s&&s.length&&this.active||(s=this.activeMenu.children(".ui-menu-item")[t]()),this.focus(i,s)},nextPage:function(t){var i,s,n;return this.active?void(this.isLastItem()||(this._hasScroll()?(s=this.active.offset().top,n=this.element.height(),this.active.nextAll(".ui-menu-item").each(function(){return i=e(this),i.offset().top-s-n<0}),this.focus(t,i)):this.focus(t,this.activeMenu.children(".ui-menu-item")[this.active?"last":"first"]()))):void this.next(t)},previousPage:function(t){var i,s,n;return this.active?void(this.isFirstItem()||(this._hasScroll()?(s=this.active.offset().top,n=this.element.height(),this.active.prevAll(".ui-menu-item").each(function(){return i=e(this),i.offset().top-s+n>0}),this.focus(t,i)):this.focus(t,this.activeMenu.children(".ui-menu-item").first()))):void this.next(t)},_hasScroll:function(){return this.element.outerHeight()<this.element.prop("scrollHeight")},select:function(t){this.active=this.active||e(t.target).closest(".ui-menu-item");var i={item:this.active};this.active.has(".ui-menu").length||this.collapseAll(t,!0),this._trigger("select",t,i)}})}(jQuery),function(e,t){e.widget("ui.progressbar",{version:"1.10.4",options:{max:100,value:0,change:null,complete:null},min:0,_create:function(){this.oldValue=this.options.value=this._constrainedValue(),this.element.addClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").attr({role:"progressbar","aria-valuemin":this.min}),this.valueDiv=e("<div class='ui-progressbar-value ui-widget-header ui-corner-left'></div>").appendTo(this.element),this._refreshValue()},_destroy:function(){this.element.removeClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow"),this.valueDiv.remove()},value:function(e){return e===t?this.options.value:(this.options.value=this._constrainedValue(e),void this._refreshValue())},_constrainedValue:function(e){return e===t&&(e=this.options.value),this.indeterminate=e===!1,"number"!=typeof e&&(e=0),!this.indeterminate&&Math.min(this.options.max,Math.max(this.min,e))},_setOptions:function(e){var t=e.value;delete e.value,this._super(e),this.options.value=this._constrainedValue(t),this._refreshValue()},_setOption:function(e,t){"max"===e&&(t=Math.max(this.min,t)),this._super(e,t)},_percentage:function(){return this.indeterminate?100:100*(this.options.value-this.min)/(this.options.max-this.min)},_refreshValue:function(){var t=this.options.value,i=this._percentage();this.valueDiv.toggle(this.indeterminate||t>this.min).toggleClass("ui-corner-right",t===this.options.max).width(i.toFixed(0)+"%"),this.element.toggleClass("ui-progressbar-indeterminate",this.indeterminate),this.indeterminate?(this.element.removeAttr("aria-valuenow"),this.overlayDiv||(this.overlayDiv=e("<div class='ui-progressbar-overlay'></div>").appendTo(this.valueDiv))):(this.element.attr({"aria-valuemax":this.options.max,"aria-valuenow":t}),this.overlayDiv&&(this.overlayDiv.remove(),this.overlayDiv=null)),this.oldValue!==t&&(this.oldValue=t,this._trigger("change")),t===this.options.max&&this._trigger("complete")}})}(jQuery),function(e,t){function i(e){return parseInt(e,10)||0}function s(e){return!isNaN(parseInt(e,10))}e.widget("ui.resizable",e.ui.mouse,{version:"1.10.4",widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:90,resize:null,start:null,stop:null},_create:function(){var t,i,s,n,a,o=this,r=this.options;if(this.element.addClass("ui-resizable"),e.extend(this,{_aspectRatio:!!r.aspectRatio,aspectRatio:r.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:r.helper||r.ghost||r.animate?r.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i)&&(this.element.wrap(e("<div class='ui-wrapper' style='overflow: hidden;'></div>").css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("ui-resizable",this.element.data("ui-resizable")),this.elementIsWrapper=!0,this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")}),this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0}),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css({margin:this.originalElement.css("margin")}),this._proportionallyResize()),this.handles=r.handles||(e(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se"),this.handles.constructor===String)for("all"===this.handles&&(this.handles="n,e,s,w,se,sw,ne,nw"),t=this.handles.split(","),this.handles={},i=0;i<t.length;i++)s=e.trim(t[i]),a="ui-resizable-"+s,n=e("<div class='ui-resizable-handle "+a+"'></div>"),n.css({zIndex:r.zIndex}),"se"===s&&n.addClass("ui-icon ui-icon-gripsmall-diagonal-se"),this.handles[s]=".ui-resizable-"+s,this.element.append(n);this._renderAxis=function(t){var i,s,n,a;t=t||this.element;for(i in this.handles)this.handles[i].constructor===String&&(this.handles[i]=e(this.handles[i],this.element).show()),this.elementIsWrapper&&this.originalElement[0].nodeName.match(/textarea|input|select|button/i)&&(s=e(this.handles[i],this.element),a=/sw|ne|nw|se|n|s/.test(i)?s.outerHeight():s.outerWidth(),n=["padding",/ne|nw|n/.test(i)?"Top":/se|sw|s/.test(i)?"Bottom":/^e$/.test(i)?"Right":"Left"].join(""),t.css(n,a),this._proportionallyResize()),e(this.handles[i]).length},this._renderAxis(this.element),this._handles=e(".ui-resizable-handle",this.element).disableSelection(),this._handles.mouseover(function(){o.resizing||(this.className&&(n=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)),o.axis=n&&n[1]?n[1]:"se")}),r.autoHide&&(this._handles.hide(),e(this.element).addClass("ui-resizable-autohide").mouseenter(function(){r.disabled||(e(this).removeClass("ui-resizable-autohide"),o._handles.show())}).mouseleave(function(){r.disabled||o.resizing||(e(this).addClass("ui-resizable-autohide"),o._handles.hide())})),this._mouseInit()},_destroy:function(){this._mouseDestroy();var t,i=function(t){e(t).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").removeData("ui-resizable").unbind(".resizable").find(".ui-resizable-handle").remove()};return this.elementIsWrapper&&(i(this.element),t=this.element,this.originalElement.css({position:t.css("position"),width:t.outerWidth(),height:t.outerHeight(),top:t.css("top"),left:t.css("left")}).insertAfter(t),t.remove()),this.originalElement.css("resize",this.originalResizeStyle),i(this.originalElement),this},_mouseCapture:function(t){var i,s,n=!1;for(i in this.handles)s=e(this.handles[i])[0],(s===t.target||e.contains(s,t.target))&&(n=!0);return!this.options.disabled&&n},_mouseStart:function(t){var s,n,a,o=this.options,r=this.element.position(),l=this.element;return this.resizing=!0,/absolute/.test(l.css("position"))?l.css({position:"absolute",top:l.css("top"),left:l.css("left")}):l.is(".ui-draggable")&&l.css({position:"absolute",top:r.top,left:r.left}),this._renderProxy(),s=i(this.helper.css("left")),n=i(this.helper.css("top")),o.containment&&(s+=e(o.containment).scrollLeft()||0,n+=e(o.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:s,top:n},this.size=this._helper?{width:this.helper.width(),height:this.helper.height()}:{width:l.width(),height:l.height()},this.originalSize=this._helper?{width:l.outerWidth(),height:l.outerHeight()}:{width:l.width(),height:l.height()},this.originalPosition={left:s,top:n},this.sizeDiff={width:l.outerWidth()-l.width(),height:l.outerHeight()-l.height()},this.originalMousePosition={left:t.pageX,top:t.pageY},this.aspectRatio="number"==typeof o.aspectRatio?o.aspectRatio:this.originalSize.width/this.originalSize.height||1,a=e(".ui-resizable-"+this.axis).css("cursor"),e("body").css("cursor","auto"===a?this.axis+"-resize":a),l.addClass("ui-resizable-resizing"),this._propagate("start",t),!0},_mouseDrag:function(t){var i,s=this.helper,n={},a=this.originalMousePosition,o=this.axis,r=this.position.top,l=this.position.left,d=this.size.width,c=this.size.height,h=t.pageX-a.left||0,u=t.pageY-a.top||0,p=this._change[o];return!!p&&(i=p.apply(this,[t,h,u]),this._updateVirtualBoundaries(t.shiftKey),(this._aspectRatio||t.shiftKey)&&(i=this._updateRatio(i,t)),i=this._respectSize(i,t),this._updateCache(i),this._propagate("resize",t),this.position.top!==r&&(n.top=this.position.top+"px"),this.position.left!==l&&(n.left=this.position.left+"px"),this.size.width!==d&&(n.width=this.size.width+"px"),this.size.height!==c&&(n.height=this.size.height+"px"),s.css(n),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),e.isEmptyObject(n)||this._trigger("resize",t,this.ui()),!1)},_mouseStop:function(t){this.resizing=!1;var i,s,n,a,o,r,l,d=this.options,c=this;return this._helper&&(i=this._proportionallyResizeElements,s=i.length&&/textarea/i.test(i[0].nodeName),n=s&&e.ui.hasScroll(i[0],"left")?0:c.sizeDiff.height,a=s?0:c.sizeDiff.width,o={width:c.helper.width()-a,height:c.helper.height()-n},r=parseInt(c.element.css("left"),10)+(c.position.left-c.originalPosition.left)||null,l=parseInt(c.element.css("top"),10)+(c.position.top-c.originalPosition.top)||null,d.animate||this.element.css(e.extend(o,{top:l,left:r})),c.helper.height(c.size.height),c.helper.width(c.size.width),this._helper&&!d.animate&&this._proportionallyResize()),e("body").css("cursor","auto"),this.element.removeClass("ui-resizable-resizing"),this._propagate("stop",t),this._helper&&this.helper.remove(),!1},_updateVirtualBoundaries:function(e){var t,i,n,a,o,r=this.options;o={minWidth:s(r.minWidth)?r.minWidth:0,maxWidth:s(r.maxWidth)?r.maxWidth:1/0,minHeight:s(r.minHeight)?r.minHeight:0,
maxHeight:s(r.maxHeight)?r.maxHeight:1/0},(this._aspectRatio||e)&&(t=o.minHeight*this.aspectRatio,n=o.minWidth/this.aspectRatio,i=o.maxHeight*this.aspectRatio,a=o.maxWidth/this.aspectRatio,t>o.minWidth&&(o.minWidth=t),n>o.minHeight&&(o.minHeight=n),i<o.maxWidth&&(o.maxWidth=i),a<o.maxHeight&&(o.maxHeight=a)),this._vBoundaries=o},_updateCache:function(e){this.offset=this.helper.offset(),s(e.left)&&(this.position.left=e.left),s(e.top)&&(this.position.top=e.top),s(e.height)&&(this.size.height=e.height),s(e.width)&&(this.size.width=e.width)},_updateRatio:function(e){var t=this.position,i=this.size,n=this.axis;return s(e.height)?e.width=e.height*this.aspectRatio:s(e.width)&&(e.height=e.width/this.aspectRatio),"sw"===n&&(e.left=t.left+(i.width-e.width),e.top=null),"nw"===n&&(e.top=t.top+(i.height-e.height),e.left=t.left+(i.width-e.width)),e},_respectSize:function(e){var t=this._vBoundaries,i=this.axis,n=s(e.width)&&t.maxWidth&&t.maxWidth<e.width,a=s(e.height)&&t.maxHeight&&t.maxHeight<e.height,o=s(e.width)&&t.minWidth&&t.minWidth>e.width,r=s(e.height)&&t.minHeight&&t.minHeight>e.height,l=this.originalPosition.left+this.originalSize.width,d=this.position.top+this.size.height,c=/sw|nw|w/.test(i),h=/nw|ne|n/.test(i);return o&&(e.width=t.minWidth),r&&(e.height=t.minHeight),n&&(e.width=t.maxWidth),a&&(e.height=t.maxHeight),o&&c&&(e.left=l-t.minWidth),n&&c&&(e.left=l-t.maxWidth),r&&h&&(e.top=d-t.minHeight),a&&h&&(e.top=d-t.maxHeight),e.width||e.height||e.left||!e.top?e.width||e.height||e.top||!e.left||(e.left=null):e.top=null,e},_proportionallyResize:function(){if(this._proportionallyResizeElements.length){var e,t,i,s,n,a=this.helper||this.element;for(e=0;e<this._proportionallyResizeElements.length;e++){if(n=this._proportionallyResizeElements[e],!this.borderDif)for(this.borderDif=[],i=[n.css("borderTopWidth"),n.css("borderRightWidth"),n.css("borderBottomWidth"),n.css("borderLeftWidth")],s=[n.css("paddingTop"),n.css("paddingRight"),n.css("paddingBottom"),n.css("paddingLeft")],t=0;t<i.length;t++)this.borderDif[t]=(parseInt(i[t],10)||0)+(parseInt(s[t],10)||0);n.css({height:a.height()-this.borderDif[0]-this.borderDif[2]||0,width:a.width()-this.borderDif[1]-this.borderDif[3]||0})}}},_renderProxy:function(){var t=this.element,i=this.options;this.elementOffset=t.offset(),this._helper?(this.helper=this.helper||e("<div style='overflow:hidden;'></div>"),this.helper.addClass(this._helper).css({width:this.element.outerWidth()-1,height:this.element.outerHeight()-1,position:"absolute",left:this.elementOffset.left+"px",top:this.elementOffset.top+"px",zIndex:++i.zIndex}),this.helper.appendTo("body").disableSelection()):this.helper=this.element},_change:{e:function(e,t){return{width:this.originalSize.width+t}},w:function(e,t){var i=this.originalSize,s=this.originalPosition;return{left:s.left+t,width:i.width-t}},n:function(e,t,i){var s=this.originalSize,n=this.originalPosition;return{top:n.top+i,height:s.height-i}},s:function(e,t,i){return{height:this.originalSize.height+i}},se:function(t,i,s){return e.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[t,i,s]))},sw:function(t,i,s){return e.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[t,i,s]))},ne:function(t,i,s){return e.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[t,i,s]))},nw:function(t,i,s){return e.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[t,i,s]))}},_propagate:function(t,i){e.ui.plugin.call(this,t,[i,this.ui()]),"resize"!==t&&this._trigger(t,i,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}}),e.ui.plugin.add("resizable","animate",{stop:function(t){var i=e(this).data("ui-resizable"),s=i.options,n=i._proportionallyResizeElements,a=n.length&&/textarea/i.test(n[0].nodeName),o=a&&e.ui.hasScroll(n[0],"left")?0:i.sizeDiff.height,r=a?0:i.sizeDiff.width,l={width:i.size.width-r,height:i.size.height-o},d=parseInt(i.element.css("left"),10)+(i.position.left-i.originalPosition.left)||null,c=parseInt(i.element.css("top"),10)+(i.position.top-i.originalPosition.top)||null;i.element.animate(e.extend(l,c&&d?{top:c,left:d}:{}),{duration:s.animateDuration,easing:s.animateEasing,step:function(){var s={width:parseInt(i.element.css("width"),10),height:parseInt(i.element.css("height"),10),top:parseInt(i.element.css("top"),10),left:parseInt(i.element.css("left"),10)};n&&n.length&&e(n[0]).css({width:s.width,height:s.height}),i._updateCache(s),i._propagate("resize",t)}})}}),e.ui.plugin.add("resizable","containment",{start:function(){var t,s,n,a,o,r,l,d=e(this).data("ui-resizable"),c=d.options,h=d.element,u=c.containment,p=u instanceof e?u.get(0):/parent/.test(u)?h.parent().get(0):u;p&&(d.containerElement=e(p),/document/.test(u)||u===document?(d.containerOffset={left:0,top:0},d.containerPosition={left:0,top:0},d.parentData={element:e(document),left:0,top:0,width:e(document).width(),height:e(document).height()||document.body.parentNode.scrollHeight}):(t=e(p),s=[],e(["Top","Right","Left","Bottom"]).each(function(e,n){s[e]=i(t.css("padding"+n))}),d.containerOffset=t.offset(),d.containerPosition=t.position(),d.containerSize={height:t.innerHeight()-s[3],width:t.innerWidth()-s[1]},n=d.containerOffset,a=d.containerSize.height,o=d.containerSize.width,r=e.ui.hasScroll(p,"left")?p.scrollWidth:o,l=e.ui.hasScroll(p)?p.scrollHeight:a,d.parentData={element:p,left:n.left,top:n.top,width:r,height:l}))},resize:function(t){var i,s,n,a,o=e(this).data("ui-resizable"),r=o.options,l=o.containerOffset,d=o.position,c=o._aspectRatio||t.shiftKey,h={top:0,left:0},u=o.containerElement;u[0]!==document&&/static/.test(u.css("position"))&&(h=l),d.left<(o._helper?l.left:0)&&(o.size.width=o.size.width+(o._helper?o.position.left-l.left:o.position.left-h.left),c&&(o.size.height=o.size.width/o.aspectRatio),o.position.left=r.helper?l.left:0),d.top<(o._helper?l.top:0)&&(o.size.height=o.size.height+(o._helper?o.position.top-l.top:o.position.top),c&&(o.size.width=o.size.height*o.aspectRatio),o.position.top=o._helper?l.top:0),o.offset.left=o.parentData.left+o.position.left,o.offset.top=o.parentData.top+o.position.top,i=Math.abs((o._helper?o.offset.left-h.left:o.offset.left-h.left)+o.sizeDiff.width),s=Math.abs((o._helper?o.offset.top-h.top:o.offset.top-l.top)+o.sizeDiff.height),n=o.containerElement.get(0)===o.element.parent().get(0),a=/relative|absolute/.test(o.containerElement.css("position")),n&&a&&(i-=Math.abs(o.parentData.left)),i+o.size.width>=o.parentData.width&&(o.size.width=o.parentData.width-i,c&&(o.size.height=o.size.width/o.aspectRatio)),s+o.size.height>=o.parentData.height&&(o.size.height=o.parentData.height-s,c&&(o.size.width=o.size.height*o.aspectRatio))},stop:function(){var t=e(this).data("ui-resizable"),i=t.options,s=t.containerOffset,n=t.containerPosition,a=t.containerElement,o=e(t.helper),r=o.offset(),l=o.outerWidth()-t.sizeDiff.width,d=o.outerHeight()-t.sizeDiff.height;t._helper&&!i.animate&&/relative/.test(a.css("position"))&&e(this).css({left:r.left-n.left-s.left,width:l,height:d}),t._helper&&!i.animate&&/static/.test(a.css("position"))&&e(this).css({left:r.left-n.left-s.left,width:l,height:d})}}),e.ui.plugin.add("resizable","alsoResize",{start:function(){var t=e(this).data("ui-resizable"),i=t.options,s=function(t){e(t).each(function(){var t=e(this);t.data("ui-resizable-alsoresize",{width:parseInt(t.width(),10),height:parseInt(t.height(),10),left:parseInt(t.css("left"),10),top:parseInt(t.css("top"),10)})})};"object"!=typeof i.alsoResize||i.alsoResize.parentNode?s(i.alsoResize):i.alsoResize.length?(i.alsoResize=i.alsoResize[0],s(i.alsoResize)):e.each(i.alsoResize,function(e){s(e)})},resize:function(t,i){var s=e(this).data("ui-resizable"),n=s.options,a=s.originalSize,o=s.originalPosition,r={height:s.size.height-a.height||0,width:s.size.width-a.width||0,top:s.position.top-o.top||0,left:s.position.left-o.left||0},l=function(t,s){e(t).each(function(){var t=e(this),n=e(this).data("ui-resizable-alsoresize"),a={},o=s&&s.length?s:t.parents(i.originalElement[0]).length?["width","height"]:["width","height","top","left"];e.each(o,function(e,t){var i=(n[t]||0)+(r[t]||0);i&&i>=0&&(a[t]=i||null)}),t.css(a)})};"object"!=typeof n.alsoResize||n.alsoResize.nodeType?l(n.alsoResize):e.each(n.alsoResize,function(e,t){l(e,t)})},stop:function(){e(this).removeData("resizable-alsoresize")}}),e.ui.plugin.add("resizable","ghost",{start:function(){var t=e(this).data("ui-resizable"),i=t.options,s=t.size;t.ghost=t.originalElement.clone(),t.ghost.css({opacity:.25,display:"block",position:"relative",height:s.height,width:s.width,margin:0,left:0,top:0}).addClass("ui-resizable-ghost").addClass("string"==typeof i.ghost?i.ghost:""),t.ghost.appendTo(t.helper)},resize:function(){var t=e(this).data("ui-resizable");t.ghost&&t.ghost.css({position:"relative",height:t.size.height,width:t.size.width})},stop:function(){var t=e(this).data("ui-resizable");t.ghost&&t.helper&&t.helper.get(0).removeChild(t.ghost.get(0))}}),e.ui.plugin.add("resizable","grid",{resize:function(){var t=e(this).data("ui-resizable"),i=t.options,s=t.size,n=t.originalSize,a=t.originalPosition,o=t.axis,r="number"==typeof i.grid?[i.grid,i.grid]:i.grid,l=r[0]||1,d=r[1]||1,c=Math.round((s.width-n.width)/l)*l,h=Math.round((s.height-n.height)/d)*d,u=n.width+c,p=n.height+h,f=i.maxWidth&&i.maxWidth<u,m=i.maxHeight&&i.maxHeight<p,g=i.minWidth&&i.minWidth>u,v=i.minHeight&&i.minHeight>p;i.grid=r,g&&(u+=l),v&&(p+=d),f&&(u-=l),m&&(p-=d),/^(se|s|e)$/.test(o)?(t.size.width=u,t.size.height=p):/^(ne)$/.test(o)?(t.size.width=u,t.size.height=p,t.position.top=a.top-h):/^(sw)$/.test(o)?(t.size.width=u,t.size.height=p,t.position.left=a.left-c):(p-d>0?(t.size.height=p,t.position.top=a.top-h):(t.size.height=d,t.position.top=a.top+n.height-d),u-l>0?(t.size.width=u,t.position.left=a.left-c):(t.size.width=l,t.position.left=a.left+n.width-l))}})}(jQuery),function(e,t){e.widget("ui.selectable",e.ui.mouse,{version:"1.10.4",options:{appendTo:"body",autoRefresh:!0,distance:0,filter:"*",tolerance:"touch",selected:null,selecting:null,start:null,stop:null,unselected:null,unselecting:null},_create:function(){var t,i=this;this.element.addClass("ui-selectable"),this.dragged=!1,this.refresh=function(){t=e(i.options.filter,i.element[0]),t.addClass("ui-selectee"),t.each(function(){var t=e(this),i=t.offset();e.data(this,"selectable-item",{element:this,$element:t,left:i.left,top:i.top,right:i.left+t.outerWidth(),bottom:i.top+t.outerHeight(),startselected:!1,selected:t.hasClass("ui-selected"),selecting:t.hasClass("ui-selecting"),unselecting:t.hasClass("ui-unselecting")})})},this.refresh(),this.selectees=t.addClass("ui-selectee"),this._mouseInit(),this.helper=e("<div class='ui-selectable-helper'></div>")},_destroy:function(){this.selectees.removeClass("ui-selectee").removeData("selectable-item"),this.element.removeClass("ui-selectable ui-selectable-disabled"),this._mouseDestroy()},_mouseStart:function(t){var i=this,s=this.options;this.opos=[t.pageX,t.pageY],this.options.disabled||(this.selectees=e(s.filter,this.element[0]),this._trigger("start",t),e(s.appendTo).append(this.helper),this.helper.css({left:t.pageX,top:t.pageY,width:0,height:0}),s.autoRefresh&&this.refresh(),this.selectees.filter(".ui-selected").each(function(){var s=e.data(this,"selectable-item");s.startselected=!0,t.metaKey||t.ctrlKey||(s.$element.removeClass("ui-selected"),s.selected=!1,s.$element.addClass("ui-unselecting"),s.unselecting=!0,i._trigger("unselecting",t,{unselecting:s.element}))}),e(t.target).parents().addBack().each(function(){var s,n=e.data(this,"selectable-item");if(n)return s=!t.metaKey&&!t.ctrlKey||!n.$element.hasClass("ui-selected"),n.$element.removeClass(s?"ui-unselecting":"ui-selected").addClass(s?"ui-selecting":"ui-unselecting"),n.unselecting=!s,n.selecting=s,n.selected=s,s?i._trigger("selecting",t,{selecting:n.element}):i._trigger("unselecting",t,{unselecting:n.element}),!1}))},_mouseDrag:function(t){if(this.dragged=!0,!this.options.disabled){var i,s=this,n=this.options,a=this.opos[0],o=this.opos[1],r=t.pageX,l=t.pageY;return a>r&&(i=r,r=a,a=i),o>l&&(i=l,l=o,o=i),this.helper.css({left:a,top:o,width:r-a,height:l-o}),this.selectees.each(function(){var i=e.data(this,"selectable-item"),d=!1;i&&i.element!==s.element[0]&&("touch"===n.tolerance?d=!(i.left>r||i.right<a||i.top>l||i.bottom<o):"fit"===n.tolerance&&(d=i.left>a&&i.right<r&&i.top>o&&i.bottom<l),d?(i.selected&&(i.$element.removeClass("ui-selected"),i.selected=!1),i.unselecting&&(i.$element.removeClass("ui-unselecting"),i.unselecting=!1),i.selecting||(i.$element.addClass("ui-selecting"),i.selecting=!0,s._trigger("selecting",t,{selecting:i.element}))):(i.selecting&&((t.metaKey||t.ctrlKey)&&i.startselected?(i.$element.removeClass("ui-selecting"),i.selecting=!1,i.$element.addClass("ui-selected"),i.selected=!0):(i.$element.removeClass("ui-selecting"),i.selecting=!1,i.startselected&&(i.$element.addClass("ui-unselecting"),i.unselecting=!0),s._trigger("unselecting",t,{unselecting:i.element}))),i.selected&&(t.metaKey||t.ctrlKey||i.startselected||(i.$element.removeClass("ui-selected"),i.selected=!1,i.$element.addClass("ui-unselecting"),i.unselecting=!0,s._trigger("unselecting",t,{unselecting:i.element})))))}),!1}},_mouseStop:function(t){var i=this;return this.dragged=!1,e(".ui-unselecting",this.element[0]).each(function(){var s=e.data(this,"selectable-item");s.$element.removeClass("ui-unselecting"),s.unselecting=!1,s.startselected=!1,i._trigger("unselected",t,{unselected:s.element})}),e(".ui-selecting",this.element[0]).each(function(){var s=e.data(this,"selectable-item");s.$element.removeClass("ui-selecting").addClass("ui-selected"),s.selecting=!1,s.selected=!0,s.startselected=!0,i._trigger("selected",t,{selected:s.element})}),this._trigger("stop",t),this.helper.remove(),!1}})}(jQuery),function(e,t){var i=5;e.widget("ui.slider",e.ui.mouse,{version:"1.10.4",widgetEventPrefix:"slide",options:{animate:!1,distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null,change:null,slide:null,start:null,stop:null},_create:function(){this._keySliding=!1,this._mouseSliding=!1,this._animateOff=!0,this._handleIndex=null,this._detectOrientation(),this._mouseInit(),this.element.addClass("ui-slider ui-slider-"+this.orientation+" ui-widget ui-widget-content ui-corner-all"),this._refresh(),this._setOption("disabled",this.options.disabled),this._animateOff=!1},_refresh:function(){this._createRange(),this._createHandles(),this._setupEvents(),this._refreshValue()},_createHandles:function(){var t,i,s=this.options,n=this.element.find(".ui-slider-handle").addClass("ui-state-default ui-corner-all"),a="<a class='ui-slider-handle ui-state-default ui-corner-all' href='#'></a>",o=[];for(i=s.values&&s.values.length||1,n.length>i&&(n.slice(i).remove(),n=n.slice(0,i)),t=n.length;t<i;t++)o.push(a);this.handles=n.add(e(o.join("")).appendTo(this.element)),this.handle=this.handles.eq(0),this.handles.each(function(t){e(this).data("ui-slider-handle-index",t)})},_createRange:function(){var t=this.options,i="";t.range?(t.range===!0&&(t.values?t.values.length&&2!==t.values.length?t.values=[t.values[0],t.values[0]]:e.isArray(t.values)&&(t.values=t.values.slice(0)):t.values=[this._valueMin(),this._valueMin()]),this.range&&this.range.length?this.range.removeClass("ui-slider-range-min ui-slider-range-max").css({left:"",bottom:""}):(this.range=e("<div></div>").appendTo(this.element),i="ui-slider-range ui-widget-header ui-corner-all"),this.range.addClass(i+("min"===t.range||"max"===t.range?" ui-slider-range-"+t.range:""))):(this.range&&this.range.remove(),this.range=null)},_setupEvents:function(){var e=this.handles.add(this.range).filter("a");this._off(e),this._on(e,this._handleEvents),this._hoverable(e),this._focusable(e)},_destroy:function(){this.handles.remove(),this.range&&this.range.remove(),this.element.removeClass("ui-slider ui-slider-horizontal ui-slider-vertical ui-widget ui-widget-content ui-corner-all"),this._mouseDestroy()},_mouseCapture:function(t){var i,s,n,a,o,r,l,d,c=this,h=this.options;return!h.disabled&&(this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()},this.elementOffset=this.element.offset(),i={x:t.pageX,y:t.pageY},s=this._normValueFromMouse(i),n=this._valueMax()-this._valueMin()+1,this.handles.each(function(t){var i=Math.abs(s-c.values(t));(n>i||n===i&&(t===c._lastChangedValue||c.values(t)===h.min))&&(n=i,a=e(this),o=t)}),r=this._start(t,o),r!==!1&&(this._mouseSliding=!0,this._handleIndex=o,a.addClass("ui-state-active").focus(),l=a.offset(),d=!e(t.target).parents().addBack().is(".ui-slider-handle"),this._clickOffset=d?{left:0,top:0}:{left:t.pageX-l.left-a.width()/2,top:t.pageY-l.top-a.height()/2-(parseInt(a.css("borderTopWidth"),10)||0)-(parseInt(a.css("borderBottomWidth"),10)||0)+(parseInt(a.css("marginTop"),10)||0)},this.handles.hasClass("ui-state-hover")||this._slide(t,o,s),this._animateOff=!0,!0))},_mouseStart:function(){return!0},_mouseDrag:function(e){var t={x:e.pageX,y:e.pageY},i=this._normValueFromMouse(t);return this._slide(e,this._handleIndex,i),!1},_mouseStop:function(e){return this.handles.removeClass("ui-state-active"),this._mouseSliding=!1,this._stop(e,this._handleIndex),this._change(e,this._handleIndex),this._handleIndex=null,this._clickOffset=null,this._animateOff=!1,!1},_detectOrientation:function(){this.orientation="vertical"===this.options.orientation?"vertical":"horizontal"},_normValueFromMouse:function(e){var t,i,s,n,a;return"horizontal"===this.orientation?(t=this.elementSize.width,i=e.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)):(t=this.elementSize.height,i=e.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)),s=i/t,s>1&&(s=1),s<0&&(s=0),"vertical"===this.orientation&&(s=1-s),n=this._valueMax()-this._valueMin(),a=this._valueMin()+s*n,this._trimAlignValue(a)},_start:function(e,t){var i={handle:this.handles[t],value:this.value()};return this.options.values&&this.options.values.length&&(i.value=this.values(t),i.values=this.values()),this._trigger("start",e,i)},_slide:function(e,t,i){var s,n,a;this.options.values&&this.options.values.length?(s=this.values(t?0:1),2===this.options.values.length&&this.options.range===!0&&(0===t&&i>s||1===t&&i<s)&&(i=s),i!==this.values(t)&&(n=this.values(),n[t]=i,a=this._trigger("slide",e,{handle:this.handles[t],value:i,values:n}),s=this.values(t?0:1),a!==!1&&this.values(t,i))):i!==this.value()&&(a=this._trigger("slide",e,{handle:this.handles[t],value:i}),a!==!1&&this.value(i))},_stop:function(e,t){var i={handle:this.handles[t],value:this.value()};this.options.values&&this.options.values.length&&(i.value=this.values(t),i.values=this.values()),this._trigger("stop",e,i)},_change:function(e,t){if(!this._keySliding&&!this._mouseSliding){var i={handle:this.handles[t],value:this.value()};this.options.values&&this.options.values.length&&(i.value=this.values(t),i.values=this.values()),this._lastChangedValue=t,this._trigger("change",e,i)}},value:function(e){return arguments.length?(this.options.value=this._trimAlignValue(e),this._refreshValue(),void this._change(null,0)):this._value()},values:function(t,i){var s,n,a;if(arguments.length>1)return this.options.values[t]=this._trimAlignValue(i),this._refreshValue(),void this._change(null,t);if(!arguments.length)return this._values();if(!e.isArray(arguments[0]))return this.options.values&&this.options.values.length?this._values(t):this.value();for(s=this.options.values,n=arguments[0],a=0;a<s.length;a+=1)s[a]=this._trimAlignValue(n[a]),this._change(null,a);this._refreshValue()},_setOption:function(t,i){var s,n=0;switch("range"===t&&this.options.range===!0&&("min"===i?(this.options.value=this._values(0),this.options.values=null):"max"===i&&(this.options.value=this._values(this.options.values.length-1),this.options.values=null)),e.isArray(this.options.values)&&(n=this.options.values.length),e.Widget.prototype._setOption.apply(this,arguments),t){case"orientation":this._detectOrientation(),this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-"+this.orientation),this._refreshValue();break;case"value":this._animateOff=!0,this._refreshValue(),this._change(null,0),this._animateOff=!1;break;case"values":for(this._animateOff=!0,this._refreshValue(),s=0;s<n;s+=1)this._change(null,s);this._animateOff=!1;break;case"min":case"max":this._animateOff=!0,this._refreshValue(),this._animateOff=!1;break;case"range":this._animateOff=!0,this._refresh(),this._animateOff=!1}},_value:function(){var e=this.options.value;return e=this._trimAlignValue(e)},_values:function(e){var t,i,s;if(arguments.length)return t=this.options.values[e],t=this._trimAlignValue(t);if(this.options.values&&this.options.values.length){for(i=this.options.values.slice(),s=0;s<i.length;s+=1)i[s]=this._trimAlignValue(i[s]);return i}return[]},_trimAlignValue:function(e){if(e<=this._valueMin())return this._valueMin();if(e>=this._valueMax())return this._valueMax();var t=this.options.step>0?this.options.step:1,i=(e-this._valueMin())%t,s=e-i;return 2*Math.abs(i)>=t&&(s+=i>0?t:-t),parseFloat(s.toFixed(5))},_valueMin:function(){return this.options.min},_valueMax:function(){return this.options.max},_refreshValue:function(){var t,i,s,n,a,o=this.options.range,r=this.options,l=this,d=!this._animateOff&&r.animate,c={};this.options.values&&this.options.values.length?this.handles.each(function(s){i=(l.values(s)-l._valueMin())/(l._valueMax()-l._valueMin())*100,c["horizontal"===l.orientation?"left":"bottom"]=i+"%",e(this).stop(1,1)[d?"animate":"css"](c,r.animate),l.options.range===!0&&("horizontal"===l.orientation?(0===s&&l.range.stop(1,1)[d?"animate":"css"]({left:i+"%"},r.animate),1===s&&l.range[d?"animate":"css"]({width:i-t+"%"},{queue:!1,duration:r.animate})):(0===s&&l.range.stop(1,1)[d?"animate":"css"]({bottom:i+"%"},r.animate),1===s&&l.range[d?"animate":"css"]({height:i-t+"%"},{queue:!1,duration:r.animate}))),t=i}):(s=this.value(),n=this._valueMin(),a=this._valueMax(),i=a!==n?(s-n)/(a-n)*100:0,c["horizontal"===this.orientation?"left":"bottom"]=i+"%",this.handle.stop(1,1)[d?"animate":"css"](c,r.animate),"min"===o&&"horizontal"===this.orientation&&this.range.stop(1,1)[d?"animate":"css"]({width:i+"%"},r.animate),"max"===o&&"horizontal"===this.orientation&&this.range[d?"animate":"css"]({width:100-i+"%"},{queue:!1,duration:r.animate}),"min"===o&&"vertical"===this.orientation&&this.range.stop(1,1)[d?"animate":"css"]({height:i+"%"},r.animate),"max"===o&&"vertical"===this.orientation&&this.range[d?"animate":"css"]({height:100-i+"%"},{queue:!1,duration:r.animate}))},_handleEvents:{keydown:function(t){var s,n,a,o,r=e(t.target).data("ui-slider-handle-index");switch(t.keyCode){case e.ui.keyCode.HOME:case e.ui.keyCode.END:case e.ui.keyCode.PAGE_UP:case e.ui.keyCode.PAGE_DOWN:case e.ui.keyCode.UP:case e.ui.keyCode.RIGHT:case e.ui.keyCode.DOWN:case e.ui.keyCode.LEFT:if(t.preventDefault(),!this._keySliding&&(this._keySliding=!0,e(t.target).addClass("ui-state-active"),s=this._start(t,r),s===!1))return}switch(o=this.options.step,n=a=this.options.values&&this.options.values.length?this.values(r):this.value(),t.keyCode){case e.ui.keyCode.HOME:a=this._valueMin();break;case e.ui.keyCode.END:a=this._valueMax();break;case e.ui.keyCode.PAGE_UP:a=this._trimAlignValue(n+(this._valueMax()-this._valueMin())/i);break;case e.ui.keyCode.PAGE_DOWN:a=this._trimAlignValue(n-(this._valueMax()-this._valueMin())/i);break;case e.ui.keyCode.UP:case e.ui.keyCode.RIGHT:if(n===this._valueMax())return;a=this._trimAlignValue(n+o);break;case e.ui.keyCode.DOWN:case e.ui.keyCode.LEFT:if(n===this._valueMin())return;a=this._trimAlignValue(n-o)}this._slide(t,r,a)},click:function(e){e.preventDefault()},keyup:function(t){var i=e(t.target).data("ui-slider-handle-index");this._keySliding&&(this._keySliding=!1,this._stop(t,i),this._change(t,i),e(t.target).removeClass("ui-state-active"))}}})}(jQuery),function(e,t){function i(e,t,i){return e>t&&e<t+i}function s(e){return/left|right/.test(e.css("float"))||/inline|table-cell/.test(e.css("display"))}e.widget("ui.sortable",e.ui.mouse,{version:"1.10.4",widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3,activate:null,beforeStop:null,change:null,deactivate:null,out:null,over:null,receive:null,remove:null,sort:null,start:null,stop:null,update:null},_create:function(){var e=this.options;this.containerCache={},this.element.addClass("ui-sortable"),this.refresh(),this.floating=!!this.items.length&&("x"===e.axis||s(this.items[0].item)),this.offset=this.element.offset(),this._mouseInit(),this.ready=!0},_destroy:function(){this.element.removeClass("ui-sortable ui-sortable-disabled"),this._mouseDestroy();for(var e=this.items.length-1;e>=0;e--)this.items[e].item.removeData(this.widgetName+"-item");return this},_setOption:function(t,i){"disabled"===t?(this.options[t]=i,this.widget().toggleClass("ui-sortable-disabled",!!i)):e.Widget.prototype._setOption.apply(this,arguments)},_mouseCapture:function(t,i){var s=null,n=!1,a=this;return!this.reverting&&(!this.options.disabled&&"static"!==this.options.type&&(this._refreshItems(t),e(t.target).parents().each(function(){if(e.data(this,a.widgetName+"-item")===a)return s=e(this),!1}),e.data(t.target,a.widgetName+"-item")===a&&(s=e(t.target)),!!s&&(!(this.options.handle&&!i&&(e(this.options.handle,s).find("*").addBack().each(function(){this===t.target&&(n=!0)}),!n))&&(this.currentItem=s,this._removeCurrentsFromItems(),!0))))},_mouseStart:function(t,i,s){var n,a,o=this.options;if(this.currentContainer=this,this.refreshPositions(),this.helper=this._createHelper(t),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},e.extend(this.offset,{click:{left:t.pageX-this.offset.left,top:t.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),this.originalPosition=this._generatePosition(t),this.originalPageX=t.pageX,this.originalPageY=t.pageY,o.cursorAt&&this._adjustOffsetFromHelper(o.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!==this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),o.containment&&this._setContainment(),o.cursor&&"auto"!==o.cursor&&(a=this.document.find("body"),this.storedCursor=a.css("cursor"),a.css("cursor",o.cursor),this.storedStylesheet=e("<style>*{ cursor: "+o.cursor+" !important; }</style>").appendTo(a)),o.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",o.opacity)),o.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",o.zIndex)),this.scrollParent[0]!==document&&"HTML"!==this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",t,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions(),!s)for(n=this.containers.length-1;n>=0;n--)this.containers[n]._trigger("activate",t,this._uiHash(this));return e.ui.ddmanager&&(e.ui.ddmanager.current=this),e.ui.ddmanager&&!o.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t),this.dragging=!0,this.helper.addClass("ui-sortable-helper"),this._mouseDrag(t),!0},_mouseDrag:function(t){var i,s,n,a,o=this.options,r=!1;for(this.position=this._generatePosition(t),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs),this.options.scroll&&(this.scrollParent[0]!==document&&"HTML"!==this.scrollParent[0].tagName?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-t.pageY<o.scrollSensitivity?this.scrollParent[0].scrollTop=r=this.scrollParent[0].scrollTop+o.scrollSpeed:t.pageY-this.overflowOffset.top<o.scrollSensitivity&&(this.scrollParent[0].scrollTop=r=this.scrollParent[0].scrollTop-o.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-t.pageX<o.scrollSensitivity?this.scrollParent[0].scrollLeft=r=this.scrollParent[0].scrollLeft+o.scrollSpeed:t.pageX-this.overflowOffset.left<o.scrollSensitivity&&(this.scrollParent[0].scrollLeft=r=this.scrollParent[0].scrollLeft-o.scrollSpeed)):(t.pageY-e(document).scrollTop()<o.scrollSensitivity?r=e(document).scrollTop(e(document).scrollTop()-o.scrollSpeed):e(window).height()-(t.pageY-e(document).scrollTop())<o.scrollSensitivity&&(r=e(document).scrollTop(e(document).scrollTop()+o.scrollSpeed)),t.pageX-e(document).scrollLeft()<o.scrollSensitivity?r=e(document).scrollLeft(e(document).scrollLeft()-o.scrollSpeed):e(window).width()-(t.pageX-e(document).scrollLeft())<o.scrollSensitivity&&(r=e(document).scrollLeft(e(document).scrollLeft()+o.scrollSpeed))),r!==!1&&e.ui.ddmanager&&!o.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t)),this.positionAbs=this._convertPositionTo("absolute"),this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px"),i=this.items.length-1;i>=0;i--)if(s=this.items[i],n=s.item[0],a=this._intersectsWithPointer(s),a&&s.instance===this.currentContainer&&!(n===this.currentItem[0]||this.placeholder[1===a?"next":"prev"]()[0]===n||e.contains(this.placeholder[0],n)||"semi-dynamic"===this.options.type&&e.contains(this.element[0],n))){if(this.direction=1===a?"down":"up","pointer"!==this.options.tolerance&&!this._intersectsWithSides(s))break;this._rearrange(t,s),this._trigger("change",t,this._uiHash());break}return this._contactContainers(t),e.ui.ddmanager&&e.ui.ddmanager.drag(this,t),this._trigger("sort",t,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(t,i){if(t){if(e.ui.ddmanager&&!this.options.dropBehaviour&&e.ui.ddmanager.drop(this,t),this.options.revert){var s=this,n=this.placeholder.offset(),a=this.options.axis,o={};a&&"x"!==a||(o.left=n.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]===document.body?0:this.offsetParent[0].scrollLeft)),a&&"y"!==a||(o.top=n.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]===document.body?0:this.offsetParent[0].scrollTop)),this.reverting=!0,e(this.helper).animate(o,parseInt(this.options.revert,10)||500,function(){s._clear(t)})}else this._clear(t,i);return!1}},cancel:function(){if(this.dragging){this._mouseUp({target:null}),"original"===this.options.helper?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):this.currentItem.show();for(var t=this.containers.length-1;t>=0;t--)this.containers[t]._trigger("deactivate",null,this._uiHash(this)),this.containers[t].containerCache.over&&(this.containers[t]._trigger("out",null,this._uiHash(this)),this.containers[t].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),"original"!==this.options.helper&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),e.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?e(this.domPosition.prev).after(this.currentItem):e(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(t){var i=this._getItemsAsjQuery(t&&t.connected),s=[];return t=t||{},e(i).each(function(){var i=(e(t.item||this).attr(t.attribute||"id")||"").match(t.expression||/(.+)[\-=_](.+)/);i&&s.push((t.key||i[1]+"[]")+"="+(t.key&&t.expression?i[1]:i[2]))}),!s.length&&t.key&&s.push(t.key+"="),s.join("&")},toArray:function(t){
var i=this._getItemsAsjQuery(t&&t.connected),s=[];return t=t||{},i.each(function(){s.push(e(t.item||this).attr(t.attribute||"id")||"")}),s},_intersectsWith:function(e){var t=this.positionAbs.left,i=t+this.helperProportions.width,s=this.positionAbs.top,n=s+this.helperProportions.height,a=e.left,o=a+e.width,r=e.top,l=r+e.height,d=this.offset.click.top,c=this.offset.click.left,h="x"===this.options.axis||s+d>r&&s+d<l,u="y"===this.options.axis||t+c>a&&t+c<o,p=h&&u;return"pointer"===this.options.tolerance||this.options.forcePointerForContainers||"pointer"!==this.options.tolerance&&this.helperProportions[this.floating?"width":"height"]>e[this.floating?"width":"height"]?p:a<t+this.helperProportions.width/2&&i-this.helperProportions.width/2<o&&r<s+this.helperProportions.height/2&&n-this.helperProportions.height/2<l},_intersectsWithPointer:function(e){var t="x"===this.options.axis||i(this.positionAbs.top+this.offset.click.top,e.top,e.height),s="y"===this.options.axis||i(this.positionAbs.left+this.offset.click.left,e.left,e.width),n=t&&s,a=this._getDragVerticalDirection(),o=this._getDragHorizontalDirection();return!!n&&(this.floating?o&&"right"===o||"down"===a?2:1:a&&("down"===a?2:1))},_intersectsWithSides:function(e){var t=i(this.positionAbs.top+this.offset.click.top,e.top+e.height/2,e.height),s=i(this.positionAbs.left+this.offset.click.left,e.left+e.width/2,e.width),n=this._getDragVerticalDirection(),a=this._getDragHorizontalDirection();return this.floating&&a?"right"===a&&s||"left"===a&&!s:n&&("down"===n&&t||"up"===n&&!t)},_getDragVerticalDirection:function(){var e=this.positionAbs.top-this.lastPositionAbs.top;return 0!==e&&(e>0?"down":"up")},_getDragHorizontalDirection:function(){var e=this.positionAbs.left-this.lastPositionAbs.left;return 0!==e&&(e>0?"right":"left")},refresh:function(e){return this._refreshItems(e),this.refreshPositions(),this},_connectWith:function(){var e=this.options;return e.connectWith.constructor===String?[e.connectWith]:e.connectWith},_getItemsAsjQuery:function(t){function i(){r.push(this)}var s,n,a,o,r=[],l=[],d=this._connectWith();if(d&&t)for(s=d.length-1;s>=0;s--)for(a=e(d[s]),n=a.length-1;n>=0;n--)o=e.data(a[n],this.widgetFullName),o&&o!==this&&!o.options.disabled&&l.push([e.isFunction(o.options.items)?o.options.items.call(o.element):e(o.options.items,o.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),o]);for(l.push([e.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):e(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]),s=l.length-1;s>=0;s--)l[s][0].each(i);return e(r)},_removeCurrentsFromItems:function(){var t=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=e.grep(this.items,function(e){for(var i=0;i<t.length;i++)if(t[i]===e.item[0])return!1;return!0})},_refreshItems:function(t){this.items=[],this.containers=[this];var i,s,n,a,o,r,l,d,c=this.items,h=[[e.isFunction(this.options.items)?this.options.items.call(this.element[0],t,{item:this.currentItem}):e(this.options.items,this.element),this]],u=this._connectWith();if(u&&this.ready)for(i=u.length-1;i>=0;i--)for(n=e(u[i]),s=n.length-1;s>=0;s--)a=e.data(n[s],this.widgetFullName),a&&a!==this&&!a.options.disabled&&(h.push([e.isFunction(a.options.items)?a.options.items.call(a.element[0],t,{item:this.currentItem}):e(a.options.items,a.element),a]),this.containers.push(a));for(i=h.length-1;i>=0;i--)for(o=h[i][1],r=h[i][0],s=0,d=r.length;s<d;s++)l=e(r[s]),l.data(this.widgetName+"-item",o),c.push({item:l,instance:o,width:0,height:0,left:0,top:0})},refreshPositions:function(t){this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset());var i,s,n,a;for(i=this.items.length-1;i>=0;i--)s=this.items[i],s.instance!==this.currentContainer&&this.currentContainer&&s.item[0]!==this.currentItem[0]||(n=this.options.toleranceElement?e(this.options.toleranceElement,s.item):s.item,t||(s.width=n.outerWidth(),s.height=n.outerHeight()),a=n.offset(),s.left=a.left,s.top=a.top);if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(i=this.containers.length-1;i>=0;i--)a=this.containers[i].element.offset(),this.containers[i].containerCache.left=a.left,this.containers[i].containerCache.top=a.top,this.containers[i].containerCache.width=this.containers[i].element.outerWidth(),this.containers[i].containerCache.height=this.containers[i].element.outerHeight();return this},_createPlaceholder:function(t){t=t||this;var i,s=t.options;s.placeholder&&s.placeholder.constructor!==String||(i=s.placeholder,s.placeholder={element:function(){var s=t.currentItem[0].nodeName.toLowerCase(),n=e("<"+s+">",t.document[0]).addClass(i||t.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper");return"tr"===s?t.currentItem.children().each(function(){e("<td>&#160;</td>",t.document[0]).attr("colspan",e(this).attr("colspan")||1).appendTo(n)}):"img"===s&&n.attr("src",t.currentItem.attr("src")),i||n.css("visibility","hidden"),n},update:function(e,n){i&&!s.forcePlaceholderSize||(n.height()||n.height(t.currentItem.innerHeight()-parseInt(t.currentItem.css("paddingTop")||0,10)-parseInt(t.currentItem.css("paddingBottom")||0,10)),n.width()||n.width(t.currentItem.innerWidth()-parseInt(t.currentItem.css("paddingLeft")||0,10)-parseInt(t.currentItem.css("paddingRight")||0,10)))}}),t.placeholder=e(s.placeholder.element.call(t.element,t.currentItem)),t.currentItem.after(t.placeholder),s.placeholder.update(t,t.placeholder)},_contactContainers:function(t){var n,a,o,r,l,d,c,h,u,p,f=null,m=null;for(n=this.containers.length-1;n>=0;n--)if(!e.contains(this.currentItem[0],this.containers[n].element[0]))if(this._intersectsWith(this.containers[n].containerCache)){if(f&&e.contains(this.containers[n].element[0],f.element[0]))continue;f=this.containers[n],m=n}else this.containers[n].containerCache.over&&(this.containers[n]._trigger("out",t,this._uiHash(this)),this.containers[n].containerCache.over=0);if(f)if(1===this.containers.length)this.containers[m].containerCache.over||(this.containers[m]._trigger("over",t,this._uiHash(this)),this.containers[m].containerCache.over=1);else{for(o=1e4,r=null,p=f.floating||s(this.currentItem),l=p?"left":"top",d=p?"width":"height",c=this.positionAbs[l]+this.offset.click[l],a=this.items.length-1;a>=0;a--)e.contains(this.containers[m].element[0],this.items[a].item[0])&&this.items[a].item[0]!==this.currentItem[0]&&(p&&!i(this.positionAbs.top+this.offset.click.top,this.items[a].top,this.items[a].height)||(h=this.items[a].item.offset()[l],u=!1,Math.abs(h-c)>Math.abs(h+this.items[a][d]-c)&&(u=!0,h+=this.items[a][d]),Math.abs(h-c)<o&&(o=Math.abs(h-c),r=this.items[a],this.direction=u?"up":"down")));if(!r&&!this.options.dropOnEmpty)return;if(this.currentContainer===this.containers[m])return;r?this._rearrange(t,r,null,!0):this._rearrange(t,null,this.containers[m].element,!0),this._trigger("change",t,this._uiHash()),this.containers[m]._trigger("change",t,this._uiHash(this)),this.currentContainer=this.containers[m],this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[m]._trigger("over",t,this._uiHash(this)),this.containers[m].containerCache.over=1}},_createHelper:function(t){var i=this.options,s=e.isFunction(i.helper)?e(i.helper.apply(this.element[0],[t,this.currentItem])):"clone"===i.helper?this.currentItem.clone():this.currentItem;return s.parents("body").length||e("parent"!==i.appendTo?i.appendTo:this.currentItem[0].parentNode)[0].appendChild(s[0]),s[0]===this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),s[0].style.width&&!i.forceHelperSize||s.width(this.currentItem.width()),s[0].style.height&&!i.forceHelperSize||s.height(this.currentItem.height()),s},_adjustOffsetFromHelper:function(t){"string"==typeof t&&(t=t.split(" ")),e.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var t=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===document.body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&e.ui.ie)&&(t={top:0,left:0}),{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"===this.cssPosition){var e=this.currentItem.position();return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:e.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t,i,s,n=this.options;"parent"===n.containment&&(n.containment=this.helper[0].parentNode),"document"!==n.containment&&"window"!==n.containment||(this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,e("document"===n.containment?document:window).width()-this.helperProportions.width-this.margins.left,(e("document"===n.containment?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),/^(document|window|parent)$/.test(n.containment)||(t=e(n.containment)[0],i=e(n.containment).offset(),s="hidden"!==e(t).css("overflow"),this.containment=[i.left+(parseInt(e(t).css("borderLeftWidth"),10)||0)+(parseInt(e(t).css("paddingLeft"),10)||0)-this.margins.left,i.top+(parseInt(e(t).css("borderTopWidth"),10)||0)+(parseInt(e(t).css("paddingTop"),10)||0)-this.margins.top,i.left+(s?Math.max(t.scrollWidth,t.offsetWidth):t.offsetWidth)-(parseInt(e(t).css("borderLeftWidth"),10)||0)-(parseInt(e(t).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,i.top+(s?Math.max(t.scrollHeight,t.offsetHeight):t.offsetHeight)-(parseInt(e(t).css("borderTopWidth"),10)||0)-(parseInt(e(t).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top])},_convertPositionTo:function(t,i){i||(i=this.position);var s="absolute"===t?1:-1,n="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,a=/(html|body)/i.test(n[0].tagName);return{top:i.top+this.offset.relative.top*s+this.offset.parent.top*s-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():a?0:n.scrollTop())*s,left:i.left+this.offset.relative.left*s+this.offset.parent.left*s-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():a?0:n.scrollLeft())*s}},_generatePosition:function(t){var i,s,n=this.options,a=t.pageX,o=t.pageY,r="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,l=/(html|body)/i.test(r[0].tagName);return"relative"!==this.cssPosition||this.scrollParent[0]!==document&&this.scrollParent[0]!==this.offsetParent[0]||(this.offset.relative=this._getRelativeOffset()),this.originalPosition&&(this.containment&&(t.pageX-this.offset.click.left<this.containment[0]&&(a=this.containment[0]+this.offset.click.left),t.pageY-this.offset.click.top<this.containment[1]&&(o=this.containment[1]+this.offset.click.top),t.pageX-this.offset.click.left>this.containment[2]&&(a=this.containment[2]+this.offset.click.left),t.pageY-this.offset.click.top>this.containment[3]&&(o=this.containment[3]+this.offset.click.top)),n.grid&&(i=this.originalPageY+Math.round((o-this.originalPageY)/n.grid[1])*n.grid[1],o=this.containment?i-this.offset.click.top>=this.containment[1]&&i-this.offset.click.top<=this.containment[3]?i:i-this.offset.click.top>=this.containment[1]?i-n.grid[1]:i+n.grid[1]:i,s=this.originalPageX+Math.round((a-this.originalPageX)/n.grid[0])*n.grid[0],a=this.containment?s-this.offset.click.left>=this.containment[0]&&s-this.offset.click.left<=this.containment[2]?s:s-this.offset.click.left>=this.containment[0]?s-n.grid[0]:s+n.grid[0]:s)),{top:o-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():l?0:r.scrollTop()),left:a-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():l?0:r.scrollLeft())}},_rearrange:function(e,t,i,s){i?i[0].appendChild(this.placeholder[0]):t.item[0].parentNode.insertBefore(this.placeholder[0],"down"===this.direction?t.item[0]:t.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var n=this.counter;this._delay(function(){n===this.counter&&this.refreshPositions(!s)})},_clear:function(e,t){function i(e,t,i){return function(s){i._trigger(e,s,t._uiHash(t))}}this.reverting=!1;var s,n=[];if(!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null,this.helper[0]===this.currentItem[0]){for(s in this._storedCSS)"auto"!==this._storedCSS[s]&&"static"!==this._storedCSS[s]||(this._storedCSS[s]="");this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else this.currentItem.show();for(this.fromOutside&&!t&&n.push(function(e){this._trigger("receive",e,this._uiHash(this.fromOutside))}),!this.fromOutside&&this.domPosition.prev===this.currentItem.prev().not(".ui-sortable-helper")[0]&&this.domPosition.parent===this.currentItem.parent()[0]||t||n.push(function(e){this._trigger("update",e,this._uiHash())}),this!==this.currentContainer&&(t||(n.push(function(e){this._trigger("remove",e,this._uiHash())}),n.push(function(e){return function(t){e._trigger("receive",t,this._uiHash(this))}}.call(this,this.currentContainer)),n.push(function(e){return function(t){e._trigger("update",t,this._uiHash(this))}}.call(this,this.currentContainer)))),s=this.containers.length-1;s>=0;s--)t||n.push(i("deactivate",this,this.containers[s])),this.containers[s].containerCache.over&&(n.push(i("out",this,this.containers[s])),this.containers[s].containerCache.over=0);if(this.storedCursor&&(this.document.find("body").css("cursor",this.storedCursor),this.storedStylesheet.remove()),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex","auto"===this._storedZIndex?"":this._storedZIndex),this.dragging=!1,this.cancelHelperRemoval){if(!t){for(this._trigger("beforeStop",e,this._uiHash()),s=0;s<n.length;s++)n[s].call(this,e);this._trigger("stop",e,this._uiHash())}return this.fromOutside=!1,!1}if(t||this._trigger("beforeStop",e,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.helper[0]!==this.currentItem[0]&&this.helper.remove(),this.helper=null,!t){for(s=0;s<n.length;s++)n[s].call(this,e);this._trigger("stop",e,this._uiHash())}return this.fromOutside=!1,!0},_trigger:function(){e.Widget.prototype._trigger.apply(this,arguments)===!1&&this.cancel()},_uiHash:function(t){var i=t||this;return{helper:i.helper,placeholder:i.placeholder||e([]),position:i.position,originalPosition:i.originalPosition,offset:i.positionAbs,item:i.currentItem,sender:t?t.element:null}}})}(jQuery),function(e){function t(e){return function(){var t=this.element.val();e.apply(this,arguments),this._refresh(),t!==this.element.val()&&this._trigger("change")}}e.widget("ui.spinner",{version:"1.10.4",defaultElement:"<input>",widgetEventPrefix:"spin",options:{culture:null,icons:{down:"ui-icon-triangle-1-s",up:"ui-icon-triangle-1-n"},incremental:!0,max:null,min:null,numberFormat:null,page:10,step:1,change:null,spin:null,start:null,stop:null},_create:function(){this._setOption("max",this.options.max),this._setOption("min",this.options.min),this._setOption("step",this.options.step),""!==this.value()&&this._value(this.element.val(),!0),this._draw(),this._on(this._events),this._refresh(),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_getCreateOptions:function(){var t={},i=this.element;return e.each(["min","max","step"],function(e,s){var n=i.attr(s);void 0!==n&&n.length&&(t[s]=n)}),t},_events:{keydown:function(e){this._start(e)&&this._keydown(e)&&e.preventDefault()},keyup:"_stop",focus:function(){this.previous=this.element.val()},blur:function(e){return this.cancelBlur?void delete this.cancelBlur:(this._stop(),this._refresh(),void(this.previous!==this.element.val()&&this._trigger("change",e)))},mousewheel:function(e,t){if(t){if(!this.spinning&&!this._start(e))return!1;this._spin((t>0?1:-1)*this.options.step,e),clearTimeout(this.mousewheelTimer),this.mousewheelTimer=this._delay(function(){this.spinning&&this._stop(e)},100),e.preventDefault()}},"mousedown .ui-spinner-button":function(t){function i(){var e=this.element[0]===this.document[0].activeElement;e||(this.element.focus(),this.previous=s,this._delay(function(){this.previous=s}))}var s;s=this.element[0]===this.document[0].activeElement?this.previous:this.element.val(),t.preventDefault(),i.call(this),this.cancelBlur=!0,this._delay(function(){delete this.cancelBlur,i.call(this)}),this._start(t)!==!1&&this._repeat(null,e(t.currentTarget).hasClass("ui-spinner-up")?1:-1,t)},"mouseup .ui-spinner-button":"_stop","mouseenter .ui-spinner-button":function(t){if(e(t.currentTarget).hasClass("ui-state-active"))return this._start(t)!==!1&&void this._repeat(null,e(t.currentTarget).hasClass("ui-spinner-up")?1:-1,t)},"mouseleave .ui-spinner-button":"_stop"},_draw:function(){var e=this.uiSpinner=this.element.addClass("ui-spinner-input").attr("autocomplete","off").wrap(this._uiSpinnerHtml()).parent().append(this._buttonHtml());this.element.attr("role","spinbutton"),this.buttons=e.find(".ui-spinner-button").attr("tabIndex",-1).button().removeClass("ui-corner-all"),this.buttons.height()>Math.ceil(.5*e.height())&&e.height()>0&&e.height(e.height()),this.options.disabled&&this.disable()},_keydown:function(t){var i=this.options,s=e.ui.keyCode;switch(t.keyCode){case s.UP:return this._repeat(null,1,t),!0;case s.DOWN:return this._repeat(null,-1,t),!0;case s.PAGE_UP:return this._repeat(null,i.page,t),!0;case s.PAGE_DOWN:return this._repeat(null,-i.page,t),!0}return!1},_uiSpinnerHtml:function(){return"<span class='ui-spinner ui-widget ui-widget-content ui-corner-all'></span>"},_buttonHtml:function(){return"<a class='ui-spinner-button ui-spinner-up ui-corner-tr'><span class='ui-icon "+this.options.icons.up+"'>&#9650;</span></a><a class='ui-spinner-button ui-spinner-down ui-corner-br'><span class='ui-icon "+this.options.icons.down+"'>&#9660;</span></a>"},_start:function(e){return!(!this.spinning&&this._trigger("start",e)===!1)&&(this.counter||(this.counter=1),this.spinning=!0,!0)},_repeat:function(e,t,i){e=e||500,clearTimeout(this.timer),this.timer=this._delay(function(){this._repeat(40,t,i)},e),this._spin(t*this.options.step,i)},_spin:function(e,t){var i=this.value()||0;this.counter||(this.counter=1),i=this._adjustValue(i+e*this._increment(this.counter)),this.spinning&&this._trigger("spin",t,{value:i})===!1||(this._value(i),this.counter++)},_increment:function(t){var i=this.options.incremental;return i?e.isFunction(i)?i(t):Math.floor(t*t*t/5e4-t*t/500+17*t/200+1):1},_precision:function(){var e=this._precisionOf(this.options.step);return null!==this.options.min&&(e=Math.max(e,this._precisionOf(this.options.min))),e},_precisionOf:function(e){var t=e.toString(),i=t.indexOf(".");return i===-1?0:t.length-i-1},_adjustValue:function(e){var t,i,s=this.options;return t=null!==s.min?s.min:0,i=e-t,i=Math.round(i/s.step)*s.step,e=t+i,e=parseFloat(e.toFixed(this._precision())),null!==s.max&&e>s.max?s.max:null!==s.min&&e<s.min?s.min:e},_stop:function(e){this.spinning&&(clearTimeout(this.timer),clearTimeout(this.mousewheelTimer),this.counter=0,this.spinning=!1,this._trigger("stop",e))},_setOption:function(e,t){if("culture"===e||"numberFormat"===e){var i=this._parse(this.element.val());return this.options[e]=t,void this.element.val(this._format(i))}"max"!==e&&"min"!==e&&"step"!==e||"string"==typeof t&&(t=this._parse(t)),"icons"===e&&(this.buttons.first().find(".ui-icon").removeClass(this.options.icons.up).addClass(t.up),this.buttons.last().find(".ui-icon").removeClass(this.options.icons.down).addClass(t.down)),this._super(e,t),"disabled"===e&&(t?(this.element.prop("disabled",!0),this.buttons.button("disable")):(this.element.prop("disabled",!1),this.buttons.button("enable")))},_setOptions:t(function(e){this._super(e),this._value(this.element.val())}),_parse:function(e){return"string"==typeof e&&""!==e&&(e=window.Globalize&&this.options.numberFormat?Globalize.parseFloat(e,10,this.options.culture):+e),""===e||isNaN(e)?null:e},_format:function(e){return""===e?"":window.Globalize&&this.options.numberFormat?Globalize.format(e,this.options.numberFormat,this.options.culture):e},_refresh:function(){this.element.attr({"aria-valuemin":this.options.min,"aria-valuemax":this.options.max,"aria-valuenow":this._parse(this.element.val())})},_value:function(e,t){var i;""!==e&&(i=this._parse(e),null!==i&&(t||(i=this._adjustValue(i)),e=this._format(i))),this.element.val(e),this._refresh()},_destroy:function(){this.element.removeClass("ui-spinner-input").prop("disabled",!1).removeAttr("autocomplete").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow"),this.uiSpinner.replaceWith(this.element)},stepUp:t(function(e){this._stepUp(e)}),_stepUp:function(e){this._start()&&(this._spin((e||1)*this.options.step),this._stop())},stepDown:t(function(e){this._stepDown(e)}),_stepDown:function(e){this._start()&&(this._spin((e||1)*-this.options.step),this._stop())},pageUp:t(function(e){this._stepUp((e||1)*this.options.page)}),pageDown:t(function(e){this._stepDown((e||1)*this.options.page)}),value:function(e){return arguments.length?void t(this._value).call(this,e):this._parse(this.element.val())},widget:function(){return this.uiSpinner}})}(jQuery),function(e,t){function i(){return++n}function s(e){return e=e.cloneNode(!1),e.hash.length>1&&decodeURIComponent(e.href.replace(a,""))===decodeURIComponent(location.href.replace(a,""))}var n=0,a=/#.*$/;e.widget("ui.tabs",{version:"1.10.4",delay:300,options:{active:null,collapsible:!1,event:"click",heightStyle:"content",hide:null,show:null,activate:null,beforeActivate:null,beforeLoad:null,load:null},_create:function(){var t=this,i=this.options;this.running=!1,this.element.addClass("ui-tabs ui-widget ui-widget-content ui-corner-all").toggleClass("ui-tabs-collapsible",i.collapsible).delegate(".ui-tabs-nav > li","mousedown"+this.eventNamespace,function(t){e(this).is(".ui-state-disabled")&&t.preventDefault()}).delegate(".ui-tabs-anchor","focus"+this.eventNamespace,function(){e(this).closest("li").is(".ui-state-disabled")&&this.blur()}),this._processTabs(),i.active=this._initialActive(),e.isArray(i.disabled)&&(i.disabled=e.unique(i.disabled.concat(e.map(this.tabs.filter(".ui-state-disabled"),function(e){return t.tabs.index(e)}))).sort()),this.options.active!==!1&&this.anchors.length?this.active=this._findActive(i.active):this.active=e(),this._refresh(),this.active.length&&this.load(i.active)},_initialActive:function(){var t=this.options.active,i=this.options.collapsible,s=location.hash.substring(1);return null===t&&(s&&this.tabs.each(function(i,n){if(e(n).attr("aria-controls")===s)return t=i,!1}),null===t&&(t=this.tabs.index(this.tabs.filter(".ui-tabs-active"))),null!==t&&t!==-1||(t=!!this.tabs.length&&0)),t!==!1&&(t=this.tabs.index(this.tabs.eq(t)),t===-1&&(t=!i&&0)),!i&&t===!1&&this.anchors.length&&(t=0),t},_getCreateEventData:function(){return{tab:this.active,panel:this.active.length?this._getPanelForTab(this.active):e()}},_tabKeydown:function(t){var i=e(this.document[0].activeElement).closest("li"),s=this.tabs.index(i),n=!0;if(!this._handlePageNav(t)){switch(t.keyCode){case e.ui.keyCode.RIGHT:case e.ui.keyCode.DOWN:s++;break;case e.ui.keyCode.UP:case e.ui.keyCode.LEFT:n=!1,s--;break;case e.ui.keyCode.END:s=this.anchors.length-1;break;case e.ui.keyCode.HOME:s=0;break;case e.ui.keyCode.SPACE:return t.preventDefault(),clearTimeout(this.activating),void this._activate(s);case e.ui.keyCode.ENTER:return t.preventDefault(),clearTimeout(this.activating),void this._activate(s!==this.options.active&&s);default:return}t.preventDefault(),clearTimeout(this.activating),s=this._focusNextTab(s,n),t.ctrlKey||(i.attr("aria-selected","false"),this.tabs.eq(s).attr("aria-selected","true"),this.activating=this._delay(function(){this.option("active",s)},this.delay))}},_panelKeydown:function(t){this._handlePageNav(t)||t.ctrlKey&&t.keyCode===e.ui.keyCode.UP&&(t.preventDefault(),this.active.focus())},_handlePageNav:function(t){return t.altKey&&t.keyCode===e.ui.keyCode.PAGE_UP?(this._activate(this._focusNextTab(this.options.active-1,!1)),!0):t.altKey&&t.keyCode===e.ui.keyCode.PAGE_DOWN?(this._activate(this._focusNextTab(this.options.active+1,!0)),!0):void 0},_findNextTab:function(t,i){function s(){return t>n&&(t=0),t<0&&(t=n),t}for(var n=this.tabs.length-1;e.inArray(s(),this.options.disabled)!==-1;)t=i?t+1:t-1;return t},_focusNextTab:function(e,t){return e=this._findNextTab(e,t),this.tabs.eq(e).focus(),e},_setOption:function(e,t){return"active"===e?void this._activate(t):"disabled"===e?void this._setupDisabled(t):(this._super(e,t),"collapsible"===e&&(this.element.toggleClass("ui-tabs-collapsible",t),t||this.options.active!==!1||this._activate(0)),"event"===e&&this._setupEvents(t),void("heightStyle"===e&&this._setupHeightStyle(t)))},_tabId:function(e){return e.attr("aria-controls")||"ui-tabs-"+i()},_sanitizeSelector:function(e){return e?e.replace(/[!"$%&'()*+,.\/:;<=>?@\[\]\^`{|}~]/g,"\\$&"):""},refresh:function(){var t=this.options,i=this.tablist.children(":has(a[href])");t.disabled=e.map(i.filter(".ui-state-disabled"),function(e){return i.index(e)}),this._processTabs(),t.active!==!1&&this.anchors.length?this.active.length&&!e.contains(this.tablist[0],this.active[0])?this.tabs.length===t.disabled.length?(t.active=!1,this.active=e()):this._activate(this._findNextTab(Math.max(0,t.active-1),!1)):t.active=this.tabs.index(this.active):(t.active=!1,this.active=e()),this._refresh()},_refresh:function(){this._setupDisabled(this.options.disabled),this._setupEvents(this.options.event),this._setupHeightStyle(this.options.heightStyle),this.tabs.not(this.active).attr({"aria-selected":"false",tabIndex:-1}),this.panels.not(this._getPanelForTab(this.active)).hide().attr({"aria-expanded":"false","aria-hidden":"true"}),this.active.length?(this.active.addClass("ui-tabs-active ui-state-active").attr({"aria-selected":"true",tabIndex:0}),this._getPanelForTab(this.active).show().attr({"aria-expanded":"true","aria-hidden":"false"})):this.tabs.eq(0).attr("tabIndex",0)},_processTabs:function(){var t=this;this.tablist=this._getList().addClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").attr("role","tablist"),this.tabs=this.tablist.find("> li:has(a[href])").addClass("ui-state-default ui-corner-top").attr({role:"tab",tabIndex:-1}),this.anchors=this.tabs.map(function(){return e("a",this)[0]}).addClass("ui-tabs-anchor").attr({role:"presentation",tabIndex:-1}),this.panels=e(),this.anchors.each(function(i,n){var a,o,r,l=e(n).uniqueId().attr("id"),d=e(n).closest("li"),c=d.attr("aria-controls");s(n)?(a=n.hash,o=t.element.find(t._sanitizeSelector(a))):(r=t._tabId(d),a="#"+r,o=t.element.find(a),o.length||(o=t._createPanel(r),o.insertAfter(t.panels[i-1]||t.tablist)),o.attr("aria-live","polite")),o.length&&(t.panels=t.panels.add(o)),c&&d.data("ui-tabs-aria-controls",c),d.attr({"aria-controls":a.substring(1),"aria-labelledby":l}),o.attr("aria-labelledby",l)}),this.panels.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").attr("role","tabpanel")},_getList:function(){return this.tablist||this.element.find("ol,ul").eq(0)},_createPanel:function(t){return e("<div>").attr("id",t).addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").data("ui-tabs-destroy",!0)},_setupDisabled:function(t){e.isArray(t)&&(t.length?t.length===this.anchors.length&&(t=!0):t=!1);for(var i,s=0;i=this.tabs[s];s++)t===!0||e.inArray(s,t)!==-1?e(i).addClass("ui-state-disabled").attr("aria-disabled","true"):e(i).removeClass("ui-state-disabled").removeAttr("aria-disabled");this.options.disabled=t},_setupEvents:function(t){var i={click:function(e){e.preventDefault()}};t&&e.each(t.split(" "),function(e,t){i[t]="_eventHandler"}),this._off(this.anchors.add(this.tabs).add(this.panels)),this._on(this.anchors,i),this._on(this.tabs,{keydown:"_tabKeydown"}),this._on(this.panels,{keydown:"_panelKeydown"}),this._focusable(this.tabs),this._hoverable(this.tabs)},_setupHeightStyle:function(t){var i,s=this.element.parent();"fill"===t?(i=s.height(),i-=this.element.outerHeight()-this.element.height(),this.element.siblings(":visible").each(function(){var t=e(this),s=t.css("position");"absolute"!==s&&"fixed"!==s&&(i-=t.outerHeight(!0))}),this.element.children().not(this.panels).each(function(){i-=e(this).outerHeight(!0)}),this.panels.each(function(){e(this).height(Math.max(0,i-e(this).innerHeight()+e(this).height()))}).css("overflow","auto")):"auto"===t&&(i=0,this.panels.each(function(){i=Math.max(i,e(this).height("").height())}).height(i))},_eventHandler:function(t){var i=this.options,s=this.active,n=e(t.currentTarget),a=n.closest("li"),o=a[0]===s[0],r=o&&i.collapsible,l=r?e():this._getPanelForTab(a),d=s.length?this._getPanelForTab(s):e(),c={oldTab:s,oldPanel:d,newTab:r?e():a,newPanel:l};t.preventDefault(),a.hasClass("ui-state-disabled")||a.hasClass("ui-tabs-loading")||this.running||o&&!i.collapsible||this._trigger("beforeActivate",t,c)===!1||(i.active=!r&&this.tabs.index(a),this.active=o?e():a,this.xhr&&this.xhr.abort(),d.length||l.length||e.error("jQuery UI Tabs: Mismatching fragment identifier."),l.length&&this.load(this.tabs.index(a),t),this._toggle(t,c))},_toggle:function(t,i){function s(){a.running=!1,a._trigger("activate",t,i)}function n(){i.newTab.closest("li").addClass("ui-tabs-active ui-state-active"),o.length&&a.options.show?a._show(o,a.options.show,s):(o.show(),s())}var a=this,o=i.newPanel,r=i.oldPanel;this.running=!0,r.length&&this.options.hide?this._hide(r,this.options.hide,function(){i.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),n()}):(i.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),r.hide(),n()),r.attr({"aria-expanded":"false","aria-hidden":"true"}),i.oldTab.attr("aria-selected","false"),o.length&&r.length?i.oldTab.attr("tabIndex",-1):o.length&&this.tabs.filter(function(){return 0===e(this).attr("tabIndex")}).attr("tabIndex",-1),o.attr({"aria-expanded":"true","aria-hidden":"false"}),i.newTab.attr({"aria-selected":"true",tabIndex:0})},_activate:function(t){var i,s=this._findActive(t);s[0]!==this.active[0]&&(s.length||(s=this.active),i=s.find(".ui-tabs-anchor")[0],this._eventHandler({target:i,currentTarget:i,preventDefault:e.noop}))},_findActive:function(t){return t===!1?e():this.tabs.eq(t)},_getIndex:function(e){return"string"==typeof e&&(e=this.anchors.index(this.anchors.filter("[href$='"+e+"']"))),e},_destroy:function(){this.xhr&&this.xhr.abort(),this.element.removeClass("ui-tabs ui-widget ui-widget-content ui-corner-all ui-tabs-collapsible"),this.tablist.removeClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").removeAttr("role"),
this.anchors.removeClass("ui-tabs-anchor").removeAttr("role").removeAttr("tabIndex").removeUniqueId(),this.tabs.add(this.panels).each(function(){e.data(this,"ui-tabs-destroy")?e(this).remove():e(this).removeClass("ui-state-default ui-state-active ui-state-disabled ui-corner-top ui-corner-bottom ui-widget-content ui-tabs-active ui-tabs-panel").removeAttr("tabIndex").removeAttr("aria-live").removeAttr("aria-busy").removeAttr("aria-selected").removeAttr("aria-labelledby").removeAttr("aria-hidden").removeAttr("aria-expanded").removeAttr("role")}),this.tabs.each(function(){var t=e(this),i=t.data("ui-tabs-aria-controls");i?t.attr("aria-controls",i).removeData("ui-tabs-aria-controls"):t.removeAttr("aria-controls")}),this.panels.show(),"content"!==this.options.heightStyle&&this.panels.css("height","")},enable:function(i){var s=this.options.disabled;s!==!1&&(i===t?s=!1:(i=this._getIndex(i),s=e.isArray(s)?e.map(s,function(e){return e!==i?e:null}):e.map(this.tabs,function(e,t){return t!==i?t:null})),this._setupDisabled(s))},disable:function(i){var s=this.options.disabled;if(s!==!0){if(i===t)s=!0;else{if(i=this._getIndex(i),e.inArray(i,s)!==-1)return;s=e.isArray(s)?e.merge([i],s).sort():[i]}this._setupDisabled(s)}},load:function(t,i){t=this._getIndex(t);var n=this,a=this.tabs.eq(t),o=a.find(".ui-tabs-anchor"),r=this._getPanelForTab(a),l={tab:a,panel:r};s(o[0])||(this.xhr=e.ajax(this._ajaxSettings(o,i,l)),this.xhr&&"canceled"!==this.xhr.statusText&&(a.addClass("ui-tabs-loading"),r.attr("aria-busy","true"),this.xhr.success(function(e){setTimeout(function(){r.html(e),n._trigger("load",i,l)},1)}).complete(function(e,t){setTimeout(function(){"abort"===t&&n.panels.stop(!1,!0),a.removeClass("ui-tabs-loading"),r.removeAttr("aria-busy"),e===n.xhr&&delete n.xhr},1)})))},_ajaxSettings:function(t,i,s){var n=this;return{url:t.attr("href"),beforeSend:function(t,a){return n._trigger("beforeLoad",i,e.extend({jqXHR:t,ajaxSettings:a},s))}}},_getPanelForTab:function(t){var i=e(t).attr("aria-controls");return this.element.find(this._sanitizeSelector("#"+i))}})}(jQuery),function(e){function t(t,i){var s=(t.attr("aria-describedby")||"").split(/\s+/);s.push(i),t.data("ui-tooltip-id",i).attr("aria-describedby",e.trim(s.join(" ")))}function i(t){var i=t.data("ui-tooltip-id"),s=(t.attr("aria-describedby")||"").split(/\s+/),n=e.inArray(i,s);n!==-1&&s.splice(n,1),t.removeData("ui-tooltip-id"),s=e.trim(s.join(" ")),s?t.attr("aria-describedby",s):t.removeAttr("aria-describedby")}var s=0;e.widget("ui.tooltip",{version:"1.10.4",options:{content:function(){var t=e(this).attr("title")||"";return e("<a>").text(t).html()},hide:!0,items:"[title]:not([disabled])",position:{my:"left top+15",at:"left bottom",collision:"flipfit flip"},show:!0,tooltipClass:null,track:!1,close:null,open:null},_create:function(){this._on({mouseover:"open",focusin:"open"}),this.tooltips={},this.parents={},this.options.disabled&&this._disable()},_setOption:function(t,i){var s=this;return"disabled"===t?(this[i?"_disable":"_enable"](),void(this.options[t]=i)):(this._super(t,i),void("content"===t&&e.each(this.tooltips,function(e,t){s._updateContent(t)})))},_disable:function(){var t=this;e.each(this.tooltips,function(i,s){var n=e.Event("blur");n.target=n.currentTarget=s[0],t.close(n,!0)}),this.element.find(this.options.items).addBack().each(function(){var t=e(this);t.is("[title]")&&t.data("ui-tooltip-title",t.attr("title")).attr("title","")})},_enable:function(){this.element.find(this.options.items).addBack().each(function(){var t=e(this);t.data("ui-tooltip-title")&&t.attr("title",t.data("ui-tooltip-title"))})},open:function(t){var i=this,s=e(t?t.target:this.element).closest(this.options.items);s.length&&!s.data("ui-tooltip-id")&&(s.attr("title")&&s.data("ui-tooltip-title",s.attr("title")),s.data("ui-tooltip-open",!0),t&&"mouseover"===t.type&&s.parents().each(function(){var t,s=e(this);s.data("ui-tooltip-open")&&(t=e.Event("blur"),t.target=t.currentTarget=this,i.close(t,!0)),s.attr("title")&&(s.uniqueId(),i.parents[this.id]={element:this,title:s.attr("title")},s.attr("title",""))}),this._updateContent(s,t))},_updateContent:function(e,t){var i,s=this.options.content,n=this,a=t?t.type:null;return"string"==typeof s?this._open(t,e,s):(i=s.call(e[0],function(i){e.data("ui-tooltip-open")&&n._delay(function(){t&&(t.type=a),this._open(t,e,i)})}),void(i&&this._open(t,e,i)))},_open:function(i,s,n){function a(e){d.of=e,o.is(":hidden")||o.position(d)}var o,r,l,d=e.extend({},this.options.position);if(n){if(o=this._find(s),o.length)return void o.find(".ui-tooltip-content").html(n);s.is("[title]")&&(i&&"mouseover"===i.type?s.attr("title",""):s.removeAttr("title")),o=this._tooltip(s),t(s,o.attr("id")),o.find(".ui-tooltip-content").html(n),this.options.track&&i&&/^mouse/.test(i.type)?(this._on(this.document,{mousemove:a}),a(i)):o.position(e.extend({of:s},this.options.position)),o.hide(),this._show(o,this.options.show),this.options.show&&this.options.show.delay&&(l=this.delayedShow=setInterval(function(){o.is(":visible")&&(a(d.of),clearInterval(l))},e.fx.interval)),this._trigger("open",i,{tooltip:o}),r={keyup:function(t){if(t.keyCode===e.ui.keyCode.ESCAPE){var i=e.Event(t);i.currentTarget=s[0],this.close(i,!0)}},remove:function(){this._removeTooltip(o)}},i&&"mouseover"!==i.type||(r.mouseleave="close"),i&&"focusin"!==i.type||(r.focusout="close"),this._on(!0,s,r)}},close:function(t){var s=this,n=e(t?t.currentTarget:this.element),a=this._find(n);this.closing||(clearInterval(this.delayedShow),n.data("ui-tooltip-title")&&n.attr("title",n.data("ui-tooltip-title")),i(n),a.stop(!0),this._hide(a,this.options.hide,function(){s._removeTooltip(e(this))}),n.removeData("ui-tooltip-open"),this._off(n,"mouseleave focusout keyup"),n[0]!==this.element[0]&&this._off(n,"remove"),this._off(this.document,"mousemove"),t&&"mouseleave"===t.type&&e.each(this.parents,function(t,i){e(i.element).attr("title",i.title),delete s.parents[t]}),this.closing=!0,this._trigger("close",t,{tooltip:a}),this.closing=!1)},_tooltip:function(t){var i="ui-tooltip-"+s++,n=e("<div>").attr({id:i,role:"tooltip"}).addClass("ui-tooltip ui-widget ui-corner-all ui-widget-content "+(this.options.tooltipClass||""));return e("<div>").addClass("ui-tooltip-content").appendTo(n),n.appendTo(this.document[0].body),this.tooltips[i]=t,n},_find:function(t){var i=t.data("ui-tooltip-id");return i?e("#"+i):e()},_removeTooltip:function(e){e.remove(),delete this.tooltips[e.attr("id")]},_destroy:function(){var t=this;e.each(this.tooltips,function(i,s){var n=e.Event("blur");n.target=n.currentTarget=s[0],t.close(n,!0),e("#"+i).remove(),s.data("ui-tooltip-title")&&(s.attr("title",s.data("ui-tooltip-title")),s.removeData("ui-tooltip-title"))})}})}(jQuery),!function(e){"use strict";e(function(){e.support.transition=function(){var e=function(){var e,t=document.createElement("bootstrap"),i={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(e in i)if(void 0!==t.style[e])return i[e]}();return e&&{end:e}}()})}(window.jQuery),!function(e){"use strict";var t='[data-dismiss="alert"]',i=function(i){e(i).on("click",t,this.close)};i.prototype.close=function(t){function i(){s.trigger("closed").remove()}var s,n=e(this),a=n.attr("data-target");a||(a=n.attr("href"),a=a&&a.replace(/.*(?=#[^\s]*$)/,"")),s=e(a),t&&t.preventDefault(),s.length||(s=n.hasClass("alert")?n:n.parent()),s.trigger(t=e.Event("close")),t.isDefaultPrevented()||(s.removeClass("in"),e.support.transition&&s.hasClass("fade")?s.on(e.support.transition.end,i):i())};var s=e.fn.alert;e.fn.alert=function(t){return this.each(function(){var s=e(this),n=s.data("alert");n||s.data("alert",n=new i(this)),"string"==typeof t&&n[t].call(s)})},e.fn.alert.Constructor=i,e.fn.alert.noConflict=function(){return e.fn.alert=s,this},e(document).on("click.alert.data-api",t,i.prototype.close)}(window.jQuery),!function(e){"use strict";var t=function(t,i){this.$element=e(t),this.options=e.extend({},e.fn.button.defaults,i)};t.prototype.setState=function(e){var t="disabled",i=this.$element,s=i.data(),n=i.is("input")?"val":"html";e+="Text",s.resetText||i.data("resetText",i[n]()),i[n](s[e]||this.options[e]),setTimeout(function(){"loadingText"==e?i.addClass(t).attr(t,t):i.removeClass(t).removeAttr(t)},0)},t.prototype.toggle=function(){var e=this.$element.closest('[data-toggle="buttons-radio"]');e&&e.find(".active").removeClass("active"),this.$element.toggleClass("active")};var i=e.fn.button;e.fn.button=function(i){return this.each(function(){var s=e(this),n=s.data("button"),a="object"==typeof i&&i;n||s.data("button",n=new t(this,a)),"toggle"==i?n.toggle():i&&n.setState(i)})},e.fn.button.defaults={loadingText:"loading..."},e.fn.button.Constructor=t,e.fn.button.noConflict=function(){return e.fn.button=i,this},e(document).on("click.button.data-api","[data-toggle^=button]",function(t){var i=e(t.target);i.hasClass("btn")||(i=i.closest(".btn")),i.button("toggle")})}(window.jQuery),!function(e){"use strict";var t=["https://storage.googleapis.com/adaptiveyou-signup/images/Challenges.gif","https://storage.googleapis.com/adaptiveyou-signup/images/Peers.gif","https://storage.googleapis.com/adaptiveyou-signup/images/Landing-Page.gif","https://storage.googleapis.com/adaptiveyou-signup/images/Store.gif"],i=function(t,i){this.$element=e(t),this.$indicators=this.$element.find(".carousel-indicators"),this.options=i,"hover"==this.options.pause&&this.$element.on("mouseenter",e.proxy(this.pause,this)).on("mouseleave",e.proxy(this.cycle,this))};i.prototype={cycle:function(t){return t||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval(e.proxy(this.next,this),this.options.interval)),this},getActiveIndex:function(){return this.$active=this.$element.find(".item.active"),this.$items=this.$active.parent().children(),this.$items.index(this.$active)},to:function(t){var i=this.getActiveIndex(),s=this;if(!(t>this.$items.length-1||t<0))return this.sliding?this.$element.one("slid",function(){s.to(t)}):i==t?this.pause().cycle():this.slide(t>i?"next":"prev",e(this.$items[t]))},pause:function(t){return t||(this.paused=!0),this.$element.find(".next, .prev").length&&e.support.transition.end&&(this.$element.trigger(e.support.transition.end),this.cycle(!0)),clearInterval(this.interval),this.interval=null,this},next:function(){if(!this.sliding)return this.slide("next")},prev:function(){if(!this.sliding)return this.slide("prev")},slide:function(i,s){var n,a=this.$element.find(".item.active"),o=s||a[i](),r=this.interval,l="next"==i?"left":"right",d="next"==i?"first":"last",c=this;if(this.sliding=!0,r&&this.pause(),o=o.length?o:this.$element.find(".item")[d](),n=e.Event("slide",{relatedTarget:o[0],direction:l}),!o.hasClass("active")){if(this.$indicators.length&&(this.$indicators.find(".active").removeClass("active"),this.$element.one("slid",function(){var t=e(c.$indicators.children()[c.getActiveIndex()]);t&&t.addClass("active")})),e.support.transition&&this.$element.hasClass("slide")){if(this.$element.trigger(n),n.isDefaultPrevented())return;o.addClass(i),o[0].offsetWidth,a.addClass(l),o.addClass(l),this.$element.one(e.support.transition.end,function(){o.removeClass([i,l].join(" ")).addClass("active"),a.removeClass(["active",l].join(" ")),c.sliding=!1,setTimeout(function(){c.$element.trigger("slid")},0)})}else{if(this.$element.trigger(n),n.isDefaultPrevented())return;a.removeClass("active"),o.addClass("active"),this.sliding=!1,this.$element.trigger("slid")}return o.find("img").attr("src",""),o.find("img").attr("src",t[o.data("page")]+"?v="+Math.random()),r&&this.cycle(),this}}};var s=e.fn.carousel;e.fn.carousel=function(t){return this.each(function(){var s=e(this),n=s.data("carousel"),a=e.extend({},e.fn.carousel.defaults,"object"==typeof t&&t),o="string"==typeof t?t:a.slide;n||s.data("carousel",n=new i(this,a)),"number"==typeof t?n.to(t):o?n[o]():a.interval&&n.pause().cycle()})},e.fn.carousel.defaults={interval:5e3,pause:"hover"},e.fn.carousel.Constructor=i,e.fn.carousel.noConflict=function(){return e.fn.carousel=s,this},e(document).on("click",".carousel-next, .carousel-back",function(t,i){i=e(this).data(),e(i.source).children(".active")[i.value]().trigger("click")}),e(document).on("click.carousel.data-api","[data-slide], [data-slide-to]",function(t){var i,s,n=e(this),a=e(n.attr("data-target")||(i=n.attr("href"))&&i.replace(/.*(?=#[^\s]+$)/,"")),o=e.extend({},a.data(),n.data());a.carousel(o),(s=n.attr("data-slide-to"))&&a.data("carousel").pause().to(s).cycle(),t.preventDefault()})}(window.jQuery),!function(e){"use strict";var t=function(t,i){this.$element=e(t),this.options=e.extend({},e.fn.collapse.defaults,i),this.options.parent&&(this.$parent=e(this.options.parent)),this.options.toggle&&this.toggle()};t.prototype={constructor:t,dimension:function(){var e=this.$element.hasClass("width");return e?"width":"height"},show:function(){var t,i,s,n;if(!this.transitioning&&!this.$element.hasClass("in")){if(t=this.dimension(),i=e.camelCase(["scroll",t].join("-")),s=this.$parent&&this.$parent.find("> .accordion-group > .in"),s&&s.length){if(n=s.data("collapse"),n&&n.transitioning)return;s.collapse("hide"),n||s.data("collapse",null)}this.$element[t](0),this.transition("addClass",e.Event("show"),"shown"),e.support.transition&&this.$element[t](this.$element[0][i])}},hide:function(){var t;!this.transitioning&&this.$element.hasClass("in")&&(t=this.dimension(),this.reset(this.$element[t]()),this.transition("removeClass",e.Event("hide"),"hidden"),this.$element[t](0))},reset:function(e){var t=this.dimension();return this.$element.removeClass("collapse")[t](e||"auto")[0].offsetWidth,this.$element[null!==e?"addClass":"removeClass"]("collapse"),this},transition:function(t,i,s){var n=this,a=function(){"show"==i.type&&n.reset(),n.transitioning=0,n.$element.trigger(s)};this.$element.trigger(i),i.isDefaultPrevented()||(this.transitioning=1,this.$element[t]("in"),e.support.transition&&this.$element.hasClass("collapse")?this.$element.one(e.support.transition.end,a):a())},toggle:function(){this[this.$element.hasClass("in")?"hide":"show"]()}};var i=e.fn.collapse;e.fn.collapse=function(i){return this.each(function(){var s=e(this),n=s.data("collapse"),a=e.extend({},e.fn.collapse.defaults,s.data(),"object"==typeof i&&i);n||s.data("collapse",n=new t(this,a)),"string"==typeof i&&n[i]()})},e.fn.collapse.defaults={toggle:!0},e.fn.collapse.Constructor=t,e.fn.collapse.noConflict=function(){return e.fn.collapse=i,this},e(document).on("click.collapse.data-api","[data-toggle=collapse]",function(t){var i,s=e(this),n=s.attr("data-target")||t.preventDefault()||(i=s.attr("href"))&&i.replace(/.*(?=#[^\s]+$)/,""),a=e(n).data("collapse")?"toggle":s.data();s[e(n).hasClass("in")?"addClass":"removeClass"]("collapsed"),e(n).collapse(a)})}(window.jQuery),!function(e){"use strict";function t(){e(".dropdown-backdrop").remove(),e(s).each(function(){i(e(this)).removeClass("open")})}function i(t){var i,s=t.attr("data-target");return s||(s=t.attr("href"),s=s&&/#/.test(s)&&s.replace(/.*(?=#[^\s]*$)/,"")),i=s&&e(s),i&&i.length||(i=t.parent()),i}var s="[data-toggle=dropdown]",n=function(t){var i=e(t).on("click.dropdown.data-api",this.toggle);e("html").on("click.dropdown.data-api",function(){i.parent().removeClass("open")})};e("#challenges-holder").mouseleave(function(){e(this).find(".dropdown").removeClass("open")}),n.prototype={constructor:n,toggle:function(s){var n,a,o=e(this);if(!o.is(".disabled, :disabled"))return n=i(o),a=n.hasClass("open"),t(),a||("ontouchstart"in document.documentElement&&e('<div class="dropdown-backdrop"/>').insertBefore(e(this)).on("click",t),e(".dropdown").removeClass("open"),n.addClass("open")),o.focus(),!1},keydown:function(t){var n,a,o,r,l;if(/(38|40|27)/.test(t.keyCode)&&(n=e(this),t.preventDefault(),t.stopPropagation(),!n.is(".disabled, :disabled"))){if(o=i(n),r=o.hasClass("open"),!r||r&&27==t.keyCode)return 27==t.which&&o.find(s).focus(),n.click();a=e("[role=menu] li:not(.divider):visible a",o),a.length&&(l=a.index(a.filter(":focus")),38==t.keyCode&&l>0&&l--,40==t.keyCode&&l<a.length-1&&l++,~l||(l=0),a.eq(l).focus())}}};var a=e.fn.dropdown;e.fn.dropdown=function(t){return this.each(function(){var i=e(this),s=i.data("dropdown");s||i.data("dropdown",s=new n(this)),"string"==typeof t&&s[t].call(i)})},e.fn.dropdown.Constructor=n,e.fn.dropdown.noConflict=function(){return e.fn.dropdown=a,this},e(document).on("click.dropdown.data-api",t).on("click.dropdown.data-api",".dropdown form",function(e){e.stopPropagation()}).on("click.dropdown.data-api",s,n.prototype.toggle).on("keydown.dropdown.data-api",s+", [role=menu]",n.prototype.keydown)}(window.jQuery),!function(e){"use strict";var t=function(t,i){this.options=i,this.$element=e(t).delegate('[data-dismiss="modal"]',"click.dismiss.modal",e.proxy(this.hide,this)),this.options.remote&&this.$element.find(".modal-body").load(this.options.remote)};t.prototype={constructor:t,toggle:function(){return this[this.isShown?"hide":"show"]()},popupScroll:function(t){t?(e("body").css("overflow","hidden"),e("div.modal-container").show()):(e("body").css("overflow","auto"),e("div.modal-container").hide())},show:function(){var t=this,i=e.Event("show");t.popupScroll(!0),this.$element.trigger(i),this.isShown||i.isDefaultPrevented()||(this.isShown=!0,this.escape(),this.backdrop(function(){var i=e.support.transition&&t.$element.hasClass("fade");t.$element.parent().length||t.$element.appendTo(document.body),t.$element.show(),i&&t.$element[0].offsetWidth,t.$element.addClass("in").attr("aria-hidden",!1),t.enforceFocus(),i?t.$element.one(e.support.transition.end,function(){t.$element.focus().trigger("shown")}):t.$element.focus().trigger("shown")}))},hide:function(t){t&&t.preventDefault();t=e.Event("hide"),this.$element.trigger(t),this.isShown&&!t.isDefaultPrevented()&&(this.isShown=!1,this.escape(),e(document).off("focusin.modal"),this.$element.removeClass("in").attr("aria-hidden",!0),e.support.transition&&this.$element.hasClass("fade")?this.hideWithTransition():this.hideModal())},enforceFocus:function(){var t=this;e(document).on("focusin.modal",function(e){t.$element[0]===e.target||t.$element.has(e.target).length||t.$element.focus()})},escape:function(){var e=this;this.isShown&&this.options.keyboard?this.$element.on("keyup.dismiss.modal",function(t){27==t.which&&e.hide()}):this.isShown||this.$element.off("keyup.dismiss.modal")},hideWithTransition:function(){var t=this,i=setTimeout(function(){t.$element.off(e.support.transition.end),t.hideModal()},500);this.$element.one(e.support.transition.end,function(){clearTimeout(i),t.hideModal()})},hideModal:function(){var e=this;this.$element.hide(),this.backdrop(function(){e.removeBackdrop(),e.$element.trigger("hidden"),e.popupScroll(!1)})},removeBackdrop:function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},backdrop:function(t){var i=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var s=e.support.transition&&i;if(this.$backdrop=e('<div class="modal-backdrop '+i+'" />').appendTo(document.body),this.$backdrop.click("static"==this.options.backdrop?e.proxy(this.$element[0].focus,this.$element[0]):e.proxy(this.hide,this)),s&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!t)return;s?this.$backdrop.one(e.support.transition.end,t):t()}else!this.isShown&&this.$backdrop?(this.$backdrop.removeClass("in"),e.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one(e.support.transition.end,t):t()):t&&t()}};var i=e.fn.modal;e.fn.modal=function(i){return this.each(function(){var s=e(this),n=s.data("modal"),a=e.extend({},e.fn.modal.defaults,s.data(),"object"==typeof i&&i);n||s.data("modal",n=new t(this,a)),"string"==typeof i?n[i]():a.show&&n.show()})},e.fn.modal.defaults={backdrop:!0,keyboard:!0,show:!0},e.fn.modal.Constructor=t,e.fn.modal.noConflict=function(){return e.fn.modal=i,this},e(document).on("click.modal.data-api",'[data-toggle="modal"]',function(t){var i=e(this),s=i.attr("href"),n=e(i.attr("data-target")||s&&s.replace(/.*(?=#[^\s]+$)/,"")),a=n.data("modal")?"toggle":e.extend({remote:!/#/.test(s)&&s},n.data(),i.data());t.preventDefault(),n.modal(a).one("hide",function(){i.focus()})})}(window.jQuery),!function(e){"use strict";var t=function(e,t){this.init("tooltip",e,t)};t.prototype={constructor:t,init:function(t,i,s){var n,a,o,r,l;for(this.type=t,this.$element=e(i),this.options=this.getOptions(s),this.enabled=!0,o=this.options.trigger.split(" "),l=o.length;l--;)r=o[l],"click"==r?this.$element.on("click."+this.type,this.options.selector,e.proxy(this.toggle,this)):"manual"!=r&&(n="hover"==r?"mouseenter":"focus",a="hover"==r?"mouseleave":"blur",this.$element.on(n+"."+this.type,this.options.selector,e.proxy(this.enter,this)),this.$element.on(a+"."+this.type,this.options.selector,e.proxy(this.leave,this)));this.options.selector?this._options=e.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},getOptions:function(t){return t=e.extend({},e.fn[this.type].defaults,this.$element.data(),t),t.delay&&"number"==typeof t.delay&&(t.delay={show:t.delay,hide:t.delay}),t},enter:function(t){var i,s=e.fn[this.type].defaults,n={};return this._options&&e.each(this._options,function(e,t){s[e]!=t&&(n[e]=t)},this),i=e(t.currentTarget)[this.type](n).data(this.type),i.options.delay&&i.options.delay.show?(clearTimeout(this.timeout),i.hoverState="in",void(this.timeout=setTimeout(function(){"in"==i.hoverState&&i.show()},i.options.delay.show))):i.show()},leave:function(t){var i=e(t.currentTarget)[this.type](this._options).data(this.type);return this.timeout&&clearTimeout(this.timeout),i.options.delay&&i.options.delay.hide?(i.hoverState="out",void(this.timeout=setTimeout(function(){"out"==i.hoverState&&i.hide()},i.options.delay.hide))):i.hide()},show:function(){var t,i,s,n,a,o,r=e.Event("show");if(this.hasContent()&&this.enabled){if(this.$element.trigger(r),r.isDefaultPrevented())return;switch(t=this.tip(),this.setContent(),this.options.animation&&t.addClass("fade"),a="function"==typeof this.options.placement?this.options.placement.call(this,t[0],this.$element[0]):this.options.placement,t.detach().css({top:0,left:0,display:"block"}),this.options.container?t.appendTo(this.options.container):t.insertAfter(this.$element),i=this.getPosition(),s=t[0].offsetWidth,n=t[0].offsetHeight,a){case"bottom":o={top:i.top+i.height,left:i.left+i.width/2-s/2};break;case"top":o={top:i.top-n,left:i.left+i.width/2-s/2};break;case"left":o={top:i.top+i.height/2-n/2,left:i.left-s};break;case"right":o={top:i.top+i.height/2-n/2,left:i.left+i.width}}this.applyPlacement(o,a),this.$element.trigger("shown")}},applyPlacement:function(e,t){var i,s,n,a,o=this.tip(),r=o[0].offsetWidth,l=o[0].offsetHeight;o.offset(e).addClass(t).addClass("in"),i=o[0].offsetWidth,s=o[0].offsetHeight,"top"==t&&s!=l&&(e.top=e.top+l-s,a=!0),"bottom"==t||"top"==t?(n=0,e.left<0&&(n=e.left*-2,e.left=0,o.offset(e),i=o[0].offsetWidth,s=o[0].offsetHeight),this.replaceArrow(n-r+i,i,"left")):this.replaceArrow(s-l,s,"top"),a&&o.offset(e)},replaceArrow:function(e,t,i){this.arrow().css(i,e?50*(1-e/t)+"%":"")},setContent:function(){var e=this.tip(),t=this.getTitle();e.find(".tooltip-inner")[this.options.html?"html":"text"](t),e.removeClass("fade in top bottom left right")},hide:function(){function t(){var t=setTimeout(function(){i.off(e.support.transition.end).detach()},500);i.one(e.support.transition.end,function(){clearTimeout(t),i.detach()})}var i=this.tip(),s=e.Event("hide");if(this.$element.trigger(s),!s.isDefaultPrevented())return i.removeClass("in"),e.support.transition&&this.$tip.hasClass("fade")?t():i.detach(),this.$element.trigger("hidden"),this},fixTitle:function(){var e=this.$element;(e.attr("title")||"string"!=typeof e.attr("data-original-title"))&&e.attr("data-original-title",e.attr("title")||"").attr("title","")},hasContent:function(){return this.getTitle()},getPosition:function(){var t=this.$element[0];return e.extend({},"function"==typeof t.getBoundingClientRect?t.getBoundingClientRect():{width:t.offsetWidth,height:t.offsetHeight},this.$element.offset())},getTitle:function(){var e,t=this.$element,i=this.options;return e=t.attr("data-original-title")||("function"==typeof i.title?i.title.call(t[0]):i.title)},tip:function(){return this.$tip=this.$tip||e(this.options.template)},arrow:function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},validate:function(){this.$element[0].parentNode||(this.hide(),this.$element=null,this.options=null)},enable:function(){this.enabled=!0},disable:function(){this.enabled=!1},toggleEnabled:function(){this.enabled=!this.enabled},toggle:function(t){var i=t?e(t.currentTarget)[this.type](this._options).data(this.type):this;i.tip().hasClass("in")?i.hide():i.show()},destroy:function(){this.hide().$element.off("."+this.type).removeData(this.type)}};var i=e.fn.tooltip;e.fn.tooltip=function(i){return this.each(function(){var s=e(this),n=s.data("tooltip"),a="object"==typeof i&&i;n||s.data("tooltip",n=new t(this,a)),"string"==typeof i&&n[i]()})},e.fn.tooltip.Constructor=t,e.fn.tooltip.defaults={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1},e.fn.tooltip.noConflict=function(){return e.fn.tooltip=i,this}}(window.jQuery),!function(e){"use strict";var t=function(e,t){this.init("popover",e,t)};t.prototype=e.extend({},e.fn.tooltip.Constructor.prototype,{constructor:t,setContent:function(){var e=this.tip(),t=this.getTitle(),i=this.getContent();e.find(".popover-title")[this.options.html?"html":"text"](t),e.find(".popover-content")[this.options.html?"html":"text"](i),e.removeClass("fade top bottom left right in")},hasContent:function(){return this.getTitle()||this.getContent()},getContent:function(){var e,t=this.$element,i=this.options;return e=("function"==typeof i.content?i.content.call(t[0]):i.content)||t.attr("data-content")},tip:function(){return this.$tip||(this.$tip=e(this.options.template)),this.$tip},destroy:function(){this.hide().$element.off("."+this.type).removeData(this.type)}});var i=e.fn.popover;e.fn.popover=function(i){return this.each(function(){var s=e(this),n=s.data("popover"),a="object"==typeof i&&i;n||s.data("popover",n=new t(this,a)),"string"==typeof i&&n[i]()})},e.fn.popover.Constructor=t,e.fn.popover.defaults=e.extend({},e.fn.tooltip.defaults,{placement:"right",trigger:"click",content:"",template:'<div class="popover"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),e.fn.popover.noConflict=function(){return e.fn.popover=i,this}}(window.jQuery),!function(e){"use strict";function t(t,i){var s,n=e.proxy(this.process,this),a=e(e(t).is("body")?window:t);this.options=e.extend({},e.fn.scrollspy.defaults,i),this.$scrollElement=a.on("scroll.scroll-spy.data-api",n),this.selector=(this.options.target||(s=e(t).attr("href"))&&s.replace(/.*(?=#[^\s]+$)/,"")||"")+" .nav li > a",this.$body=e("body"),this.refresh(),this.process()}t.prototype={constructor:t,refresh:function(){var t,i=this;this.offsets=e([]),this.targets=e([]),t=this.$body.find(this.selector).map(function(){var t=e(this),s=t.data("target")||t.attr("href"),n=/^#\w/.test(s)&&e(s);return n&&n.length&&[[n.position().top+(!e.isWindow(i.$scrollElement.get(0))&&i.$scrollElement.scrollTop()),s]]||null}).sort(function(e,t){return e[0]-t[0]}).each(function(){i.offsets.push(this[0]),i.targets.push(this[1])})},process:function(){var e,t=this.$scrollElement.scrollTop()+this.options.offset,i=this.$scrollElement[0].scrollHeight||this.$body[0].scrollHeight,s=i-this.$scrollElement.height(),n=this.offsets,a=this.targets,o=this.activeTarget;if(t>=s)return o!=(e=a.last()[0])&&this.activate(e);for(e=n.length;e--;)o!=a[e]&&t>=n[e]&&(!n[e+1]||t<=n[e+1])&&this.activate(a[e])},activate:function(t){var i,s;this.activeTarget=t,e(this.selector).parent(".active").removeClass("active"),s=this.selector+'[data-target="'+t+'"],'+this.selector+'[href="'+t+'"]',i=e(s).parent("li").addClass("active"),i.parent(".dropdown-menu").length&&(i=i.closest("li.dropdown").addClass("active")),i.trigger("activate")}};var i=e.fn.scrollspy;e.fn.scrollspy=function(i){return this.each(function(){var s=e(this),n=s.data("scrollspy"),a="object"==typeof i&&i;n||s.data("scrollspy",n=new t(this,a)),"string"==typeof i&&n[i]()})},e.fn.scrollspy.Constructor=t,e.fn.scrollspy.defaults={offset:10},e.fn.scrollspy.noConflict=function(){return e.fn.scrollspy=i,this},e(window).on("load",function(){e('[data-spy="scroll"]').each(function(){var t=e(this);t.scrollspy(t.data())})})}(window.jQuery),!function(e){"use strict";var t=function(t){this.element=e(t)};t.prototype={constructor:t,show:function(){var t,i,s,n=this.element,a=n.closest("ul:not(.dropdown-menu)"),o=n.attr("data-target");o||(o=n.attr("href"),o=o&&o.replace(/.*(?=#[^\s]*$)/,"")),n.parent("li").hasClass("active")||(t=a.find(".active:last a")[0],s=e.Event("show",{relatedTarget:t}),n.trigger(s),s.isDefaultPrevented()||(i=e(o),this.activate(n.parent("li"),a),this.activate(i,i.parent(),function(){n.trigger({type:"shown",relatedTarget:t})})))},activate:function(t,i,s){function n(){a.removeClass("active").find("> .dropdown-menu > .active").removeClass("active"),t.addClass("active"),o?(t[0].offsetWidth,t.addClass("in")):t.removeClass("fade"),t.parent(".dropdown-menu")&&t.closest("li.dropdown").addClass("active"),s&&s()}var a=i.find("> .active"),o=s&&e.support.transition&&a.hasClass("fade");o?a.one(e.support.transition.end,n):n(),a.removeClass("in")}};var i=e.fn.tab;e.fn.tab=function(i){return this.each(function(){var s=e(this),n=s.data("tab");n||s.data("tab",n=new t(this)),"string"==typeof i&&n[i]()})},e.fn.tab.Constructor=t,e.fn.tab.noConflict=function(){return e.fn.tab=i,this},e(document).on("click.tab.data-api",'[data-toggle="tab"], [data-toggle="pill"]',function(t){t.preventDefault(),e(this).tab("show")})}(window.jQuery),!function(e){"use strict";var t=function(t,i){this.$element=e(t),this.options=e.extend({},e.fn.typeahead.defaults,i),this.matcher=this.options.matcher||this.matcher,this.sorter=this.options.sorter||this.sorter,this.highlighter=this.options.highlighter||this.highlighter,this.updater=this.options.updater||this.updater,this.source=this.options.source,this.$menu=e(this.options.menu),this.shown=!1,this.listen()};t.prototype={constructor:t,select:function(){var e=this.$menu.find(".active").attr("data-value");return this.$element.val(this.updater(e)).change(),this.hide()},updater:function(e){return e},show:function(){var t=e.extend({},this.$element.position(),{height:this.$element[0].offsetHeight});return this.$menu.insertAfter(this.$element).css({top:t.top+t.height,left:t.left}).show(),this.shown=!0,this},hide:function(){return this.$menu.hide(),this.shown=!1,this},lookup:function(t){var i;return this.query=this.$element.val(),!this.query||this.query.length<this.options.minLength?this.shown?this.hide():this:(i=e.isFunction(this.source)?this.source(this.query,e.proxy(this.process,this)):this.source,i?this.process(i):this)},process:function(t){var i=this;return t=e.grep(t,function(e){return i.matcher(e)}),t=this.sorter(t),t.length?this.render(t.slice(0,this.options.items)).show():this.shown?this.hide():this},matcher:function(e){return~e.toLowerCase().indexOf(this.query.toLowerCase())},sorter:function(e){for(var t,i=[],s=[],n=[];t=e.shift();)t.toLowerCase().indexOf(this.query.toLowerCase())?~t.indexOf(this.query)?s.push(t):n.push(t):i.push(t);return i.concat(s,n)},highlighter:function(e){var t=this.query.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&");return e.replace(new RegExp("("+t+")","ig"),function(e,t){return"<strong>"+t+"</strong>"})},render:function(t){var i=this;return t=e(t).map(function(t,s){return t=e(i.options.item).attr("data-value",s),t.find("a").html(i.highlighter(s)),t[0]}),t.first().addClass("active"),this.$menu.html(t),this},next:function(t){var i=this.$menu.find(".active").removeClass("active"),s=i.next();
s.length||(s=e(this.$menu.find("li")[0])),s.addClass("active")},prev:function(e){var t=this.$menu.find(".active").removeClass("active"),i=t.prev();i.length||(i=this.$menu.find("li").last()),i.addClass("active")},listen:function(){this.$element.on("focus",e.proxy(this.focus,this)).on("blur",e.proxy(this.blur,this)).on("keypress",e.proxy(this.keypress,this)).on("keyup",e.proxy(this.keyup,this)),this.eventSupported("keydown")&&this.$element.on("keydown",e.proxy(this.keydown,this)),this.$menu.on("click",e.proxy(this.click,this)).on("mouseenter","li",e.proxy(this.mouseenter,this)).on("mouseleave","li",e.proxy(this.mouseleave,this))},eventSupported:function(e){var t=e in this.$element;return t||(this.$element.setAttribute(e,"return;"),t="function"==typeof this.$element[e]),t},move:function(e){if(this.shown){switch(e.keyCode){case 9:case 13:case 27:e.preventDefault();break;case 38:e.preventDefault(),this.prev();break;case 40:e.preventDefault(),this.next()}e.stopPropagation()}},keydown:function(t){this.suppressKeyPressRepeat=~e.inArray(t.keyCode,[40,38,9,13,27]),this.move(t)},keypress:function(e){this.suppressKeyPressRepeat||this.move(e)},keyup:function(e){switch(e.keyCode){case 40:case 38:case 16:case 17:case 18:break;case 9:case 13:if(!this.shown)return;this.select();break;case 27:if(!this.shown)return;this.hide();break;default:this.lookup()}e.stopPropagation(),e.preventDefault()},focus:function(e){this.focused=!0},blur:function(e){this.focused=!1,!this.mousedover&&this.shown&&this.hide()},click:function(e){e.stopPropagation(),e.preventDefault(),this.select(),this.$element.focus()},mouseenter:function(t){this.mousedover=!0,this.$menu.find(".active").removeClass("active"),e(t.currentTarget).addClass("active")},mouseleave:function(e){this.mousedover=!1,!this.focused&&this.shown&&this.hide()}};var i=e.fn.typeahead;e.fn.typeahead=function(i){return this.each(function(){var s=e(this),n=s.data("typeahead"),a="object"==typeof i&&i;n||s.data("typeahead",n=new t(this,a)),"string"==typeof i&&n[i]()})},e.fn.typeahead.defaults={source:[],items:8,menu:'<ul class="typeahead dropdown-menu"></ul>',item:'<li><a href="#"></a></li>',minLength:1},e.fn.typeahead.Constructor=t,e.fn.typeahead.noConflict=function(){return e.fn.typeahead=i,this},e(document).on("focus.typeahead.data-api",'[data-provide="typeahead"]',function(t){var i=e(this);i.data("typeahead")||i.typeahead(i.data())})}(window.jQuery),!function(e){"use strict";var t=function(t,i){this.options=e.extend({},e.fn.affix.defaults,i),this.$window=e(window).on("scroll.affix.data-api",e.proxy(this.checkPosition,this)).on("click.affix.data-api",e.proxy(function(){setTimeout(e.proxy(this.checkPosition,this),1)},this)),this.$element=e(t),this.checkPosition()};t.prototype.checkPosition=function(){if(this.$element.is(":visible")){var t,i=e(document).height(),s=this.$window.scrollTop(),n=this.$element.offset(),a=this.options.offset,o=a.bottom,r=a.top,l="affix affix-top affix-bottom";"object"!=typeof a&&(o=r=a),"function"==typeof r&&(r=a.top()),"function"==typeof o&&(o=a.bottom()),t=!(null!=this.unpin&&s+this.unpin<=n.top)&&(null!=o&&n.top+this.$element.height()>=i-o?"bottom":null!=r&&s<=r&&"top"),this.affixed!==t&&(this.affixed=t,this.unpin="bottom"==t?n.top-s:null,this.$element.removeClass(l).addClass("affix"+(t?"-"+t:"")))}};var i=e.fn.affix;e.fn.affix=function(i){return this.each(function(){var s=e(this),n=s.data("affix"),a="object"==typeof i&&i;n||s.data("affix",n=new t(this,a)),"string"==typeof i&&n[i]()})},e.fn.affix.Constructor=t,e.fn.affix.defaults={offset:0},e.fn.affix.noConflict=function(){return e.fn.affix=i,this},e(window).on("load",function(){e('[data-spy="affix"]').each(function(){var t=e(this),i=t.data();i.offset=i.offset||{},i.offsetBottom&&(i.offset.bottom=i.offsetBottom),i.offsetTop&&(i.offset.top=i.offsetTop),t.affix(i)})})}(window.jQuery),!function(e){"use strict";e.expr[":"].icontains=function(t,i,s){return e(t).text().toUpperCase().indexOf(s[3].toUpperCase())>=0};var t=function(i,s,n){n&&(n.stopPropagation(),n.preventDefault()),this.$element=e(i),this.$newElement=null,this.$button=null,this.$menu=null,this.$lis=null,this.options=e.extend({},e.fn.selectpicker.defaults,this.$element.data(),"object"==typeof s&&s),null===this.options.title&&(this.options.title=this.$element.attr("title")),this.val=t.prototype.val,this.render=t.prototype.render,this.refresh=t.prototype.refresh,this.setStyle=t.prototype.setStyle,this.selectAll=t.prototype.selectAll,this.deselectAll=t.prototype.deselectAll,this.init()};t.prototype={constructor:t,init:function(){var t=this,i=this.$element.attr("id");this.$element.hide(),this.multiple=this.$element.prop("multiple"),this.autofocus=this.$element.prop("autofocus"),this.$newElement=this.createView(),this.$element.after(this.$newElement),this.$menu=this.$newElement.find("> .dropdown-menu"),this.$button=this.$newElement.find("> button"),this.$searchbox=this.$newElement.find("input"),void 0!==i&&(this.$button.attr("data-id",i),e('label[for="'+i+'"]').click(function(e){e.preventDefault(),t.$button.focus()})),this.checkDisabled(),this.clickListener(),this.options.liveSearch&&this.liveSearchListener(),this.render(),this.liHeight(),this.setStyle(),this.setWidth(),this.options.container&&this.selectPosition(),this.$menu.data("this",this),this.$newElement.data("this",this)},createDropdown:function(){var t=this.multiple?" show-tick":"",i=this.autofocus?" autofocus":"",s=this.options.header?'<div class="popover-title"><button type="button" class="close" aria-hidden="true">&times;</button>'+this.options.header+"</div>":"",n=this.options.liveSearch?'<div class="bootstrap-select-searchbox"><input type="text" class="input-block-level form-control" /></div>':"",a='<div class="btn-group bootstrap-select'+t+'"><button type="button" class="btn dropdown-toggle selectpicker" data-toggle="dropdown"'+i+'><span class="filter-option pull-left"></span>&nbsp;<span class="caret"></span></button><div class="dropdown-menu open">'+s+n+'<ul class="dropdown-menu inner selectpicker" role="menu"></ul></div></div>';return e(a)},createView:function(){var e=this.createDropdown(),t=this.createLi();return e.find("ul").append(t),e},reloadLi:function(){this.destroyLi();var e=this.createLi();this.$menu.find("ul").append(e)},destroyLi:function(){this.$menu.find("li").remove()},createLi:function(){var t=this,i=[],s="";return this.$element.find("option").each(function(){var s=e(this),n=s.attr("class")||"",a=s.attr("style")||"",o=s.data("content")?s.data("content"):s.html(),r=void 0!==s.data("subtext")?'<small class="muted text-muted">'+s.data("subtext")+"</small>":"",l=void 0!==s.data("icon")?'<i class="'+t.options.iconBase+" "+s.data("icon")+'"></i> ':"";if(""!==l&&(s.is(":disabled")||s.parent().is(":disabled"))&&(l="<span>"+l+"</span>"),s.data("content")||(o=l+'<span class="text">'+o+r+"</span>"),t.options.hideDisabled&&(s.is(":disabled")||s.parent().is(":disabled")))i.push('<a style="min-height: 0; padding: 0"></a>');else if(s.parent().is("optgroup")&&s.data("divider")!==!0)if(0===s.index()){var d=s.parent().attr("label"),c=void 0!==s.parent().data("subtext")?'<small class="muted text-muted">'+s.parent().data("subtext")+"</small>":"",h=s.parent().data("icon")?'<i class="'+s.parent().data("icon")+'"></i> ':"";d=h+'<span class="text">'+d+c+"</span>",0!==s[0].index?i.push('<div class="div-contain"><div class="divider"></div></div><dt>'+d+"</dt>"+t.createA(o,"opt "+n,a)):i.push("<dt>"+d+"</dt>"+t.createA(o,"opt "+n,a))}else i.push(t.createA(o,"opt "+n,a));else s.data("divider")===!0?i.push('<div class="div-contain"><div class="divider"></div></div>'):e(this).data("hidden")===!0?i.push(""):i.push(t.createA(o,n,a))}),e.each(i,function(e,t){s+="<li rel="+e+">"+t+"</li>"}),this.multiple||0!==this.$element.find("option:selected").length||this.options.title||this.$element.find("option").eq(0).prop("selected",!0).attr("selected","selected"),e(s)},createA:function(e,t,i){return'<a tabindex="0" class="'+t+'" style="'+i+'">'+e+'<i class="'+this.options.iconBase+" "+this.options.tickIcon+' icon-ok check-mark"></i></a>'},render:function(t){var i=this;t!==!1&&this.$element.find("option").each(function(t){i.setDisabled(t,e(this).is(":disabled")||e(this).parent().is(":disabled")),i.setSelected(t,e(this).is(":selected"))}),this.tabIndex();var s=this.$element.find("option:selected").map(function(){var t,s=e(this),n=s.data("icon")&&i.options.showIcon?'<i class="'+i.options.iconBase+" "+s.data("icon")+'"></i> ':"";return t=i.options.showSubtext&&s.attr("data-subtext")&&!i.multiple?' <small class="muted text-muted">'+s.data("subtext")+"</small>":"",s.data("content")&&i.options.showContent?s.data("content"):void 0!==s.attr("title")?s.attr("title"):n+s.html()+t}).toArray(),n=this.multiple?s.join(this.options.multipleSeparator):s[0];if(this.multiple&&this.options.selectedTextFormat.indexOf("count")>-1){var a=this.options.selectedTextFormat.split(">"),o=this.options.hideDisabled?":not([disabled])":"";(a.length>1&&s.length>a[1]||1==a.length&&s.length>=2)&&(n=this.options.countSelectedText.replace("{0}",s.length).replace("{1}",this.$element.find('option:not([data-divider="true"]):not([data-hidden="true"])'+o).length))}n||(n=void 0!==this.options.title?this.options.title:this.options.noneSelectedText),this.$button.attr("title",e.trim(n)),this.$newElement.find(".filter-option").html(n)},setStyle:function(e,t){this.$element.attr("class")&&this.$newElement.addClass(this.$element.attr("class").replace(/selectpicker|mobile-device/gi,""));var i=e?e:this.options.style;"add"==t?this.$button.addClass(i):"remove"==t?this.$button.removeClass(i):(this.$button.removeClass(this.options.style),this.$button.addClass(i))},liHeight:function(){var e=this.$menu.parent().clone().find("> .dropdown-toggle").prop("autofocus",!1).end().appendTo("body"),t=e.addClass("open").find("> .dropdown-menu"),i=t.find("li > a").outerHeight(),s=this.options.header?t.find(".popover-title").outerHeight():0,n=this.options.liveSearch?t.find(".bootstrap-select-searchbox").outerHeight():0;e.remove(),this.$newElement.data("liHeight",i).data("headerHeight",s).data("searchHeight",n)},setSize:function(){var t,i,s,n=this,a=this.$menu,o=a.find(".inner"),r=this.$newElement.outerHeight(),l=this.$newElement.data("liHeight"),d=this.$newElement.data("headerHeight"),c=this.$newElement.data("searchHeight"),h=a.find("li .divider").outerHeight(!0),u=parseInt(a.css("padding-top"))+parseInt(a.css("padding-bottom"))+parseInt(a.css("border-top-width"))+parseInt(a.css("border-bottom-width")),p=this.options.hideDisabled?":not(.disabled)":"",f=e(window),m=u+parseInt(a.css("margin-top"))+parseInt(a.css("margin-bottom"))+2,g=function(){i=n.$newElement.offset().top-f.scrollTop(),s=f.height()-i-r};if(g(),this.options.header&&a.css("padding-top",0),"auto"==this.options.size){var v=function(){var e;g(),t=s-m,n.options.dropupAuto&&n.$newElement.toggleClass("dropup",i>s&&t-m<a.height()),n.$newElement.hasClass("dropup")&&(t=i-m),e=a.find("li").length+a.find("dt").length>3?3*l+m-2:0,a.css({"max-height":t+"px",overflow:"hidden","min-height":e+"px"}),o.css({"max-height":t-d-c-u+"px","overflow-y":"auto","min-height":e-u+"px"})};v(),e(window).resize(v),e(window).scroll(v)}else if(this.options.size&&"auto"!=this.options.size&&a.find("li"+p).length>this.options.size){var b=a.find("li"+p+" > *").filter(":not(.div-contain)").slice(0,this.options.size).last().parent().index(),y=a.find("li").slice(0,b+1).find(".div-contain").length;t=l*this.options.size+y*h+u,n.options.dropupAuto&&this.$newElement.toggleClass("dropup",i>s&&t<a.height()),a.css({"max-height":t+d+c+"px",overflow:"hidden"}),o.css({"max-height":t-u+"px","overflow-y":"auto"})}},setWidth:function(){if("auto"==this.options.width){this.$menu.css("min-width","0");var e=this.$newElement.clone().appendTo("body"),t=e.find("> .dropdown-menu").css("width");e.remove(),this.$newElement.css("width",t)}else"fit"==this.options.width?(this.$menu.css("min-width",""),this.$newElement.css("width","").addClass("fit-width")):this.options.width?(this.$menu.css("min-width",""),this.$newElement.css("width",this.options.width)):(this.$menu.css("min-width",""),this.$newElement.css("width",""));this.$newElement.hasClass("fit-width")&&"fit"!==this.options.width&&this.$newElement.removeClass("fit-width")},selectPosition:function(){var t,i,s=this,n="<div />",a=e(n),o=function(e){a.addClass(e.attr("class")).toggleClass("dropup",e.hasClass("dropup")),t=e.offset(),i=e.hasClass("dropup")?0:e[0].offsetHeight,a.css({top:t.top+i,left:t.left,width:e[0].offsetWidth,position:"absolute"})};this.$newElement.on("click",function(){o(e(this)),a.appendTo(s.options.container),a.toggleClass("open",!e(this).hasClass("open")),a.append(s.$menu)}),e(window).resize(function(){o(s.$newElement)}),e(window).on("scroll",function(){o(s.$newElement)}),e("html").on("click",function(t){e(t.target).closest(s.$newElement).length<1&&a.removeClass("open")})},mobile:function(){this.$element.addClass("mobile-device").appendTo(this.$newElement),this.options.container&&this.$menu.hide()},refresh:function(){this.$lis=null,this.reloadLi(),this.render(),this.setWidth(),this.setStyle(),this.checkDisabled(),this.liHeight()},update:function(){this.reloadLi(),this.setWidth(),this.setStyle(),this.checkDisabled(),this.liHeight()},setSelected:function(t,i){null==this.$lis&&(this.$lis=this.$menu.find("li")),e(this.$lis[t]).toggleClass("selected",i)},setDisabled:function(t,i){null==this.$lis&&(this.$lis=this.$menu.find("li")),i?e(this.$lis[t]).addClass("disabled").find("a").attr("href","#").attr("tabindex",-1):e(this.$lis[t]).removeClass("disabled").find("a").removeAttr("href").attr("tabindex",0)},isDisabled:function(){return this.$element.is(":disabled")},checkDisabled:function(){var e=this;this.isDisabled()?this.$button.addClass("disabled").attr("tabindex",-1):(this.$button.hasClass("disabled")&&this.$button.removeClass("disabled"),this.$button.attr("tabindex")==-1&&(this.$element.data("tabindex")||this.$button.removeAttr("tabindex"))),this.$button.click(function(){return!e.isDisabled()})},tabIndex:function(){this.$element.is("[tabindex]")&&(this.$element.data("tabindex",this.$element.attr("tabindex")),this.$button.attr("tabindex",this.$element.data("tabindex")))},clickListener:function(){var t=this;e("body").on("touchstart.dropdown",".dropdown-menu",function(e){e.stopPropagation()}),this.$newElement.on("click",function(){t.setSize(),t.options.liveSearch||t.multiple||setTimeout(function(){t.$menu.find(".selected a").focus()},10)}),this.$menu.on("click","li a",function(i,s){s=e(this).parent();var n=s.index(),a=t.$element.val(),o=t.$element.prop("selectedIndex");if(i.preventDefault(),s.hasClass("selected"))return s.removeClass("selected"),void t.$button.children("span").first().html("Select Category");if(!t.isDisabled()&&!e(this).parent().hasClass("disabled")){var r=t.$element.find("option"),l=r.eq(n);l.prop("selected");r.prop("selected",!1),l.prop("selected",!0),t.$menu.find(".selected").removeClass("selected"),t.setSelected(n,!0),t.multiple?t.options.liveSearch&&t.$searchbox.focus():t.$button.focus(),(a!=t.$element.val()&&t.multiple||o!=t.$element.prop("selectedIndex")&&!t.multiple)&&t.$element.change()}}),this.$menu.on("click","li.disabled a, li dt, li .div-contain, .popover-title, .popover-title :not(.close)",function(e){e.target==this&&(e.preventDefault(),e.stopPropagation(),t.options.liveSearch?t.$searchbox.focus():t.$button.focus())}),this.$menu.on("click",".popover-title .close",function(){t.$button.focus()}),this.$searchbox.on("click",function(e){e.stopPropagation()}),this.$element.change(function(){t.render(!1)})},liveSearchListener:function(){var t=this,i=e('<li class="no-results"></li>');this.$newElement.on("click.dropdown.data-api",function(){t.$menu.find(".active").removeClass("active"),t.$searchbox.val()&&(t.$searchbox.val(""),t.$menu.find("li").show(),i.parent().length&&i.remove()),t.multiple||t.$menu.find(".selected").addClass("active"),setTimeout(function(){t.$searchbox.focus()},10)}),this.$searchbox.on("input propertychange",function(){t.$searchbox.val()?(t.$menu.find("li").show().not(":icontains("+t.$searchbox.val()+")").hide(),t.$menu.find("li").filter(":visible:not(.no-results)").length?i.parent().length&&i.remove():(i.parent().length&&i.remove(),i.html(t.options.noneResultsText+' "'+t.$searchbox.val()+'"').show(),t.$menu.find("li").last().after(i))):(t.$menu.find("li").show(),i.parent().length&&i.remove()),t.$menu.find("li.active").removeClass("active"),t.$menu.find("li").filter(":visible:not(.divider)").eq(0).addClass("active").find("a").focus(),e(this).focus()}),this.$menu.on("mouseenter","a",function(i){t.$menu.find(".active").removeClass("active"),e(i.currentTarget).parent().not(".disabled").addClass("active")}),this.$menu.on("mouseleave","a",function(){t.$menu.find(".active").removeClass("active")})},val:function(e){return void 0!==e?(this.$element.val(e),this.$element.change(),this.$element):this.$element.val()},selectAll:function(){this.$element.find("option").prop("selected",!0).attr("selected","selected"),this.render()},deselectAll:function(){this.$element.find("option").prop("selected",!1).removeAttr("selected"),this.render()},keydown:function(t){var i,s,n,a,o,r,l,d,c,h,u,p,f={32:" ",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",59:";",65:"a",66:"b",67:"c",68:"d",69:"e",70:"f",71:"g",72:"h",73:"i",74:"j",75:"k",76:"l",77:"m",78:"n",79:"o",80:"p",81:"q",82:"r",83:"s",84:"t",85:"u",86:"v",87:"w",88:"x",89:"y",90:"z",96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9"};if(i=e(this),n=i.parent(),i.is("input")&&(n=i.parent().parent()),h=n.data("this"),h.options.liveSearch&&(n=i.parent().parent()),h.options.container&&(n=h.$menu),s=e("[role=menu] li:not(.divider) a",n),p=h.$menu.parent().hasClass("open"),!p&&/([0-9]|[A-z])/.test(String.fromCharCode(t.keyCode))&&(h.setSize(),h.$menu.parent().addClass("open"),p=h.$menu.parent().hasClass("open"),h.$searchbox.focus()),h.options.liveSearch&&(/(^9$|27)/.test(t.keyCode)&&p&&0===h.$menu.find(".active").length&&(t.preventDefault(),h.$menu.parent().removeClass("open"),h.$button.focus()),s=e("[role=menu] li:not(.divider):visible",n),i.val()||/(38|40)/.test(t.keyCode)||0===s.filter(".active").length&&(s=h.$newElement.find("li").filter(":icontains("+f[t.keyCode]+")"))),s.length){if(/(38|40)/.test(t.keyCode))a=s.index(s.filter(":focus")),r=s.parent(":not(.disabled):visible").first().index(),l=s.parent(":not(.disabled):visible").last().index(),o=s.eq(a).parent().nextAll(":not(.disabled):visible").eq(0).index(),d=s.eq(a).parent().prevAll(":not(.disabled):visible").eq(0).index(),c=s.eq(o).parent().prevAll(":not(.disabled):visible").eq(0).index(),h.options.liveSearch&&(s.each(function(t){e(this).is(":not(.disabled)")&&e(this).data("index",t)}),a=s.index(s.filter(".active")),r=s.filter(":not(.disabled):visible").first().data("index"),l=s.filter(":not(.disabled):visible").last().data("index"),o=s.eq(a).nextAll(":not(.disabled):visible").eq(0).data("index"),d=s.eq(a).prevAll(":not(.disabled):visible").eq(0).data("index"),c=s.eq(o).prevAll(":not(.disabled):visible").eq(0).data("index")),u=i.data("prevIndex"),38==t.keyCode&&(h.options.liveSearch&&(a-=1),a!=c&&a>d&&(a=d),a<r&&(a=r),a==u&&(a=l)),40==t.keyCode&&(h.options.liveSearch&&(a+=1),a==-1&&(a=0),a!=c&&a<o&&(a=o),a>l&&(a=l),a==u&&(a=r)),i.data("prevIndex",a),h.options.liveSearch?(t.preventDefault(),i.is(".dropdown-toggle")||(s.removeClass("active"),s.eq(a).addClass("active").find("a").focus(),i.focus())):s.eq(a).focus();else if(!i.is("input")){var m,g,v=[];s.each(function(){e(this).parent().is(":not(.disabled)")&&e.trim(e(this).text().toLowerCase()).substring(0,1)==f[t.keyCode]&&v.push(e(this).parent().index())}),m=e(document).data("keycount"),m++,e(document).data("keycount",m),g=e.trim(e(":focus").text().toLowerCase()).substring(0,1),g!=f[t.keyCode]?(m=1,e(document).data("keycount",m)):m>=v.length&&(e(document).data("keycount",0),m>v.length&&(m=1)),s.eq(v[m-1]).focus()}/(13|32|^9$)/.test(t.keyCode)&&p&&(/(32)/.test(t.keyCode)||t.preventDefault(),h.options.liveSearch?/(32)/.test(t.keyCode)||(h.$menu.find(".active a").click(),i.focus()):e(":focus").click(),e(document).data("keycount",0)),(/(^9$|27)/.test(t.keyCode)&&p&&(h.multiple||h.options.liveSearch)||/(27)/.test(t.keyCode)&&!p)&&(h.$menu.parent().removeClass("open"),h.$button.focus())}},hide:function(){this.$newElement.hide()},show:function(){this.$newElement.show()},destroy:function(){this.$newElement.remove(),this.$element.remove()}},e.fn.selectpicker=function(i,s){var n,a=arguments,o=this.each(function(){if(e(this).is("select")){var o=e(this),r=o.data("selectpicker"),l="object"==typeof i&&i;if(r){if(l)for(var d in l)r.options[d]=l[d]}else o.data("selectpicker",r=new t(this,l,s));if("string"==typeof i){var c=i;r[c]instanceof Function?([].shift.apply(a),n=r[c].apply(r,a)):n=r.options[c]}}});return void 0!==n?n:o},e.fn.selectpicker.defaults={style:"btn-default",size:"auto",title:null,selectedTextFormat:"values",noneSelectedText:"Nothing selected",noneResultsText:"No results match",countSelectedText:"{0} of {1} selected",width:!1,container:!1,hideDisabled:!1,showSubtext:!1,showIcon:!0,showContent:!0,dropupAuto:!0,header:!1,liveSearch:!1,multipleSeparator:", ",iconBase:"glyphicon",tickIcon:"glyphicon-ok"},e(document).data("keycount",0).on("keydown",".bootstrap-select [data-toggle=dropdown], .bootstrap-select [role=menu], .bootstrap-select-searchbox input",t.prototype.keydown).on("focusin.modal",".bootstrap-select [data-toggle=dropdown], .bootstrap-select [role=menu], .bootstrap-select-searchbox input",function(e){e.stopPropagation()})}(window.jQuery),$(".selectpicker").selectpicker({}),$(".bootstrap-select-searchbox").remove(),$("#challenges-create").find("ul.selectpicker").parent().each(function(e){e=$(this),"EN"==window.locale?e.append('<div style="float: left;margin: 2px 0 0 0;border-top: 1px solid #eee;width: 100%;box-sizing: border-box;padding: 5px 0 5px 20px;"><p class="openAddCategory" style="cursor: pointer;color: #0088cc;">Add new category</p><div class="add-new-category"><input class="brocord" placeholder="Add new category..." type="text" data-events="keypress,paste,keydown" data-textlimit=50 data-onenter=".add-category" data-regex="/^[a-z0-9]+$/i" /><span class="add-category btn btn-green hide">Add</span></div></div>'):e.append('<div style="float: left;margin: 2px 0 0 0;border-top: 1px solid #eee;width: 100%;box-sizing: border-box;padding: 5px 0 5px 20px;"><p class="openAddCategory" style="cursor: pointer;color: #0088cc;">A&#xf1;adir nueva categoria</p><div class="add-new-category"><input class="brocord" placeholder="A&#xf1;adir nueva categoria" type="text" data-events="keypress,paste,keydown" data-textlimit=50 data-onenter=".add-category" data-regex="/^[a-z0-9]+$/i" /><span class="add-category btn btn-green hide">Add</span></div></div>'),e.find("p.openAddCategory").on("click",function(e,t){e.stopPropagation(),t=$(this),t.hide(),t.siblings(".add-new-category").show().children("input").focus().val("")}),e.find("div.add-new-category > input").on("blur",function(e){e=$(this),e.parent().hide().siblings("p.openAddCategory").show()}),e.find("div.add-new-category").on("click",function(e){e.stopPropagation()}),e.find("span.add-category").on("click",function(e,t,i,s,n){if(t=$(this),t=t.siblings("input"),s=t.val().trim().toCamelCase()){if(n=t.parents("div.bootstrap-select:lt(1)").siblings("select.selectpicker"),n.children("option").each(function(e,t){if(t.dataset.cat===s)return n.siblings("div.bootstrap-select").find("ul.selectpicker").children('li:eq("'+e+'")').not(".selected").children("a").trigger("click"),void(n=null)}),t.val(""),!n)return;n.append('<option data-cat="'+s+'">'+s+"</option>"),n.selectpicker("refresh").siblings("div.bootstrap-select").find("ul.selectpicker").children("li").last().children("a").trigger("click")}})}),!window.YT)var YT={loading:0,loaded:0};if(!window.YTConfig)var YTConfig={host:"http://www.youtube.com"};YT.loading||(YT.loading=1,function(){var e=[];YT.ready=function(t){YT.loaded?t():e.push(t)},window.onYTReady=function(){YT.loaded=1;for(var t=0;t<e.length;t++)try{e[t]()}catch(e){}},YT.setConfig=function(e){for(var t in e)e.hasOwnProperty(t)&&(YTConfig[t]=e[t])};var t=document.createElement("script");t.type="text/javascript",t.id="www-widgetapi-script",t.src="https://s.ytimg.com/yts/jsbin/www-widgetapi-vfl-4F7A7/www-widgetapi.js",t.async=!0;var i=document.getElementsByTagName("script")[0];i.parentNode.insertBefore(t,i)}()),function(e,t){e={attrWhiteList:["class","id","width","height","style","type","placeholder","href","title","checked","name"],setHandler:function(t){t.each(function(t,i,s,n){this.className=this.className.replace("handler","").trim(),n=e.dom(this,!0),s={},t=n.attr("handler").split("/"),i=n.attr("callback"),t[0]=t[0].split(","),i&&(i=i.split("/"));for(var a=0,o=this.attributes,r=o.length;a<r;a++)o[a]&&o[a].nodeName&&(s[o[a].nodeName]=o[a].value);for(var l in s)e.attrWhiteList.indexOf(l)===-1?l.indexOf("data-dismiss")===-1&&(l.indexOf("data-")!==-1&&n.data(),n.removeAttr(l)):delete s[l];for(var a=0,r=t[0].length;a<r;a++)n.on(t[0][a],{reference:t[1],method:t[2],data:s,callback:i},function(t,i,s){s=e.dom(this,!0),t.data.data.propagation&&"false"===t.data.data.propagation&&(t.stopPropagation&&t.stopPropagation(),t.stopImmediatePropagation&&t.stopImmediatePropagation(),t.PreventDefault&&t.PreventDefault()),i="resident"===t.data.reference?e:e[t.data.reference],i[t.data.method](e.dom(this,!0),t)})})},loadPopup:function(t,i,s){"challenges"===e.pageAttr.page&&null!=e.pageAttr.level1&&e.utils.iframeReload(),e.dom("div.nicEdit-link span.close").trigger("click"),"group-create"===t?(e.dom("#group-creator").slideDown(),e.dom("#challenges-holder").attr("class","content-holder courseon"),e["challenges-create"].groupChallenges=[],e.dom("#group-creator").children(".add-course-body").children(".challenge-title").children("div:eq(1)").focus()):"challenge-someone"===t?(s=i?i.parents("div.parent:lt(1)").attr("id"):null,e.chothers.open(t,s?s:e[e.utils.getConstraints(e.pageAttr.page).context+"-service"].thisName),e.dom("#new_CHP").children("input.search-other-challenge").focus()):"challenges-rearrange"===t?e["challenges-service"].rearrange(t):"drive-file-list"===t?(e.attachments.choosedrive(t),e.driveNode=i):"challenges-delete"===t?(e[e.utils.getConstraints(e.pageAttr.page).context+"-service"].level2?s=i.parents("ul.level1:lt(1)").find("li.level2").html():e.pageAttr.level1?i.is("li")&&i.parent().is("ul.badge-group")?s=i.find("h3 > a > span").html():i.is("li")&&(s=i.parents("ul.level1:lt(1)").find("li.level1").html()):s=i.find("a.badgeName").data("original-title"),e.dom("#popup").modal({backdrop:"static",keyboard:!1}).children("div#popup-blocks").attr("class",t),e.dom("#popup").modal({backdrop:"static",keyboard:!1}).children("div#popup-blocks").find(".modal-body").find(".ch-name").html("<b>"+s+"</b>")):"video-holder"===t?(e.dom("#popup").modal({backdrop:"static",keyboard:!1}).children("div#popup-blocks").attr("class",t),window.scroll(0,0)):e.dom("#popup").modal({backdrop:"static",keyboard:!1}).children("div#popup-blocks").attr("class",t)},changeConstraints:function(t,i,s,n,a,o){n=e.utils.getConstraints(e.pageAttr.page),t&&(i=i.data.data,"query-filter"===i.constraint?(a=n.query,a.context=[],t.is(":checked")&&a.context.push(t.data().value),o=t.parent().siblings("li").children("input"),o.is(":checked")&&a.context.push(o.data().value),n.query.context=a.context.join(","),"EL"==locale?e.dom("#request-search").attr("placeholder","Buscar "+t.siblings("label").html().toLowerCase()):e.dom("#request-search").attr("placeholder","Search "+t.siblings("label").html().toLowerCase())):"me"===e.pageAttr.page?n[i.constraint]=i["data-type"]:n[i.constraint]=i.value,n.offset=0,"filter"===i.constraint&&(t.parent().parent().siblings("a").attr("class","btn dropdown-toggle "+("disabled"!==n.filter?n.filter:"")).children("span").first().html(t.html()),e.dom("#challenges-sidebar").children("li.active").attr("class","active "+n.filter),"admin"===e.pageAttr.page&&e.dom("#type-status").html(t.data().value)),"query-filter"!==i.constraint&&"me"!=e.pageAttr.page?t.attr("class","active "+n.filter+" "+n.category).siblings().removeClass("active").removeClass("added"):"me"===e.pageAttr.page&&(t.addClass("active "+n.filter).siblings().removeClass("active"),"workingon"===n.filter?e.dom("#header-name").html("Working On"):"requested"===n.filter?e.dom("#header-name").html(e.utils.localeContentBuffer("REQUESTED")):e.dom("#header-name").html(e.utils.localeContentBuffer("APPROVED")))),("query-filter"!==i.constraint||a.query)&&(n.category&&(e.history.isPopTriggered||e.history.push({},e.pageAttr.page.toUpperCase(),"/"+e.pageAttr.univ+"/"+e.pageAttr.page+"/"+e.utils.getConstraints(e.pageAttr.page).category),e["common-service"].clearLevels(),e["common-service"].clearChallengeLevels(),e.dom("#body").attr("class","row content")),e.loadBody(n))},loadSideBar:function(){"activity"===e.pageAttr.page?e.dom("#feeds-description").html(e.utils.elipses(e.dom("#feeds-description").html(),"other","hD")):e.dom("#"+e.pageAttr.page+"-sidebar").html(""),e.xhr({url:"/load/"+e.pageAttr.univ+"/"+e.pageAttr.page,type:"GET",data:{view:"sidebar"},success:function(t,i,s){if("activity"===e.pageAttr.page)200===t.code&&t.data&&(e.dom("#feeds-univ-challenges").show().children("span").html(t.data.challenges?t.data.challenges:0),e.dom("#feeds-univ-peers").show().children("span").html(t.data.peers?t.data.peers:0));else{if(i="content","me"===e.pageAttr.page)t.data.user.profilePicUrl&&null!=t.data.user.profilePicUrl&&"null"!=t.data.user.profilePicUrl?e.utils.setImage(e.dom(".single_user_photo"),t.data.user.profilePicUrl):e.utils.setImage(e.dom(".single_user_photo"),"/images/AY2.0/user-image.png"),e.utils.getConstraints(e.pageAttr.page),e.dom(".single_user_photo").show(),e.dom("#switch_workingon_completed").show();else if(t&&t.data&&t.data.All>0){s=e.utils.getConstraints(e.pageAttr.page).category,e.sideBarList("All",t.data.All,s),delete t.data.All,t.data=e.utils.sortObjectKeys(t.data);for(var n in t.data)e.sideBarList(n,t.data[n],s)}else i="empty";e.pageAttr.loadedPages[e.pageAttr.page]=i,e.pageAttr.level1||e.dom("#body").attr("class","row "+i),"peers"===e.pageAttr.page&&(e.utils.setConstraints("peers","all","sort_high_low","",0),e.dom("#"+e.pageAttr.page+"-sidebar").find("li:first").trigger("click"))}}})},loadLearning:function(t){0===t.offset&&e.dom("#challenges-holder").html(""),e["common-service"].get("challenge",{data:JSON.stringify({context:"me",filter:t.filter,offset:t.offset})},function(t){if(e.dom("#loader").hide(),delete t.data.context,e.dom("#body").attr("class","row content"),t.data&&Object.keys(t.data).length>0)for(var i in t.data)t.data[i].type="challenge"===t.data[i].type?"challenge":"group",t.data[i]=e["challenges-service"].build(e.templates["single-"+t.data[i].type].clone(!0,!0),t.data[i],"append"),e["challenges-service"].outerProgress(t.data[i],100,"success","fadeIn");else e.dom("#blank-working-on").attr("class","well blank show");Object.keys(t.data).length<20?e.pageAttr[e.utils.getConstraints(e.pageAttr.page).context].canLoad=!1:e.pageAttr[e.utils.getConstraints(e.pageAttr.page).context].canLoad=!0})},loadBody:function(t,i,s){if(e.utils.iframeReload(),e.pageAttr[e.utils.getConstraints(e.pageAttr.page).context]||(e.pageAttr[e.utils.getConstraints(e.pageAttr.page).context]={}),e.pageAttr[e.utils.getConstraints(e.pageAttr.page).context].canLoad=!1,"peers"===t.context){if(0!=e.utils.getConstraints("peers").offset&&"all"===e.utils.getConstraints("peers").category){var n={};n.type="users",n["hash-team-name"]="all",n[n["hash-team-name"]]={},n[n["hash-team-name"]][e.utils.getConstraints("peers").filter]=e.utils.getConstraints("peers").offset,n.sort_by=e.utils.getConstraints("peers").filter,e.dom("#loader").show(),e["peers-service"].get(n)}e.utils.getConstraints("peers").hash&&e.dom(".add_pending_req_tojoin").trigger("click")}else 0===t.offset&&("admin"===e.pageAttr.page?("challengeRequests"!==t.category&&"stuffRequests"!==t.category||e.dom("#requests-list").html(""),
e["userRequest-service"].hideEmpty(),e.dom("#requests-body").hide()):"activity"===e.pageAttr.page?(e.dom("#feeds-box").html(""),e.dom(".univ-created").hide(),e["activity-service"].cards=void 0):e.dom("#"+t.context+"-holder").html("")),"admin"===e.pageAttr.page&&0!==t.offset||e.dom("#loader").show(),e.dom("#helper-text").hide(),s="challenges"===t.context?{query:t.query,fullSearch:!e["challenges-create"]||!e["challenges-create"].courseon}:"admin"!==t.context?{query:t.query,fullSearch:!0}:t.query,i=[],e.dom("#"+e.pageAttr.page+"-sidebar").find("li."+t.category).addClass("added active").siblings().removeClass("active").removeClass("added"),i.push(function(i){e.xhr({url:"/load/"+e.pageAttr.univ+"/"+t.context,type:"GET",data:{view:"body",context:t.context,category:t.category,filter:t.filter,query:JSON.stringify(s),offset:t.offset,timezoneoffset:6e4*(new Date).getTimezoneOffset(),userSemantic:"peers"===e.pageAttr.page&&t.other?t.other:""},success:function(t){e.deferred.done(i,t,!0)}})}),"challenges"===t.context&&i.push(function(i){e.xhr({url:"/load/"+e.pageAttr.univ+"/"+t.context,type:"GET",data:{view:"body",context:"progress",category:t.category,filter:t.filter,query:JSON.stringify(s),offset:t.offset,userSemantic:"peers"===e.pageAttr.page&&t.other?t.other:""},success:function(t){e.deferred.done(i,t,!0)}})}),e.deferred.init(i,function(i){e.dom("#loader").hide(),i=Array.prototype.slice.call(arguments),i.push(t),"challengeRequests"===t.category||"stuffRequests"===t.category?e["userRequest-service"].populate.apply(this,i):e[t.context+"-service"].populate.apply(this,i)})},sideBarList:function(t,i,s,n,a){n=e.utils.semanticName(t),a=!0,"peers"!==e.pageAttr.page||"All"===s?(e.dom("#"+e.pageAttr.page+"-sidebar").append('<li original-value="'+t+'" value="'+n+'" constraint="category" class = "'+n+(s===n?" active"+(hasAssigned?" assigned":" added"):"")+'"handler="click/resident/changeConstraints"><a><div class="pull-right editdel_hold"><i class="fa fa-pencil"></i><i class="fa fa-trash"></i></div><div class="pull-right saveclose_hold"><i class="fa fa-times"></i><i class="fa fa-check"></i></div><span><span class="categories_name" title="'+t+'">'+("EL"===window.locale&&"all"===n?"Todo":t)+'</span><span style="float:right;" class="label-default">'+(i>0?i:"")+"</span></span></a></li>"),"All"!==t&&e.dom("select.selectpicker").append('<option data-cat="'+t+'">'+t+"</option>").selectpicker("refresh")):"peers"===e.pageAttr.page&&e.dom("#"+e.pageAttr.page+"-sidebar").append('<li id="'+n+'" class="team-li handler" value="team" handler="click/peers-service/get_team_users"  ><a>'+("all"!==n&&isAdmin?'<div class="pull-right editdel_hold"><i class="fa fa-pencil edit_team_name" id="edit_label"></i><i class="fa fa-trash delete_team_name"></i> </div><div class="pull-right saveclose_hold"><i class="fa fa-times dont_save_team_name"></i><i class="fa fa-check save_edited_team"></i></div>':"")+'<span class="pull-right label-default team_mem_length team_length">'+i+'</span><label data-temp-team-name = "'+t+'" class="ellipsis team_name_text"  style="width:80%" contenteditable="false">'+("EL"===window.locale&&"all"===n?"Todo":t)+"</label></a></li>"),e.setHandler(e.dom("#"+e.pageAttr.page+"-sidebar").children("li").last())},back:function(t,i,s){if(e[e.pageAttr.page+"-service"].loadedTabs={},e.history.isPopTriggered||e.history.push({},e.pageAttr.page.toUpperCase(),"/"+e.pageAttr.univ+"/"+e.pageAttr.page+"/"+e.utils.getConstraints(e.pageAttr.page).category),e.pageAttr.level1=e.utils.UNDEFINED,e.pageAttr.level2=e.utils.UNDEFINED,e.dom("#chsteps").html(""),e.dom("ul.breadcrumb").find("li.level1").html("").siblings("l1.level2").html(""),e.dom("#body").attr("class","row content"),e[e.utils.getConstraints(e.pageAttr.page).context+"-service"].level1&&e.dom(e[e.utils.getConstraints(e.pageAttr.page).context+"-service"].level1).is("div"))$("html, body").animate({scrollTop:e[e.utils.getConstraints(e.pageAttr.page).context+"-service"].level1.offset().top-e[e.utils.getConstraints(e.pageAttr.page).context+"-service"].level1.height()/2},1e-5),e[e.utils.getConstraints(e.pageAttr.page).context+"-service"].level1=e.utils.UNDEFINED,e[e.utils.getConstraints(e.pageAttr.page).context+"-service"].level2=e.utils.UNDEFINED;else{if(e[e.pageAttr.page+"-service"].level1=e.utils.UNDEFINED,e[e.pageAttr.page+"-service"].level2=e.utils.UNDEFINED,e["challenges-service"].level1=e.utils.UNDEFINED,e["challenges-service"].level2=e.utils.UNDEFINED,"me"===e.pageAttr.page)return void e.dom("#me-"+("all"===e.utils.getConstraints(e.pageAttr.page).category?"learning":e.utils.getConstraints(e.pageAttr.page).category)).trigger("click");e.loadBody(e.utils.getConstraints(e.pageAttr.page))}e.pageAttr[e.utils.getConstraints(e.pageAttr.page).context].canLoad=!0},getContent:function(){e["common-service"].get("content",{data:JSON.stringify({})},function(t,i){if(t.response&&200===t.code){e.content=t.data,i=e.utils.getBufferedContent();for(var s=0,n=i.length;s<n;s++)i[s].node.html(i[s].value);i=[]}})}},window.setReference=function(t,i){return e[t]=i,e}}({},{}),function(e,t,i,s,n){n={},s={traverser:{direct:function(e,t,i){switch(t[0]){case".":i=e.getElementsByClassName(t.substr(1));break;case"#":i=[e.getElementById(t.substr(1))];break;default:i=e.getElementsByTagName(t)}return i},complex:function(e,t){}},methods:{find:function(e){return i(e,this)},on:function(e,t,i){i||(i=t,t=void 0),s.listeners(this,e,function(){(i=i.bind(this))(t)})},each:function(e,t){for(var i=0,n=this.length;i<n;i++)this[i]=s.bindMethods(this[i]),(t=e.bind(this[i]))()},attr:function(e,t){if(!t)return this.getAttribute(e);for(var i=0,s=this.length;i<s;i++)this[i].setAttribute(e,t)},show:function(){for(var e=0,t=this.length;e<t;e++)this[e].style.display="block"},hide:function(){for(var e=0,t=this.length;e<t;e++)this[e].style.display="none"},modal:function(){return i(".modal-backdrop").show(),s.bindMethods(this),this[0].setAttribute("class","modal fade in"),this},child:function(e,t){if(t=[],e)for(var n=0,a=this.length;n<a;n++)t=t.concat(i(e,this[n].childNodes));else for(var o=0,r=this[0].childNodes,l=r.length;o<l;o++)"#text"!==r[o].nodeName&&"#comment"!==r[o].nodeName&&t.push(r[o]);return s.bindMethods(t),t},appendChild:function(e){for(var t=0,i=this.length;t<i;t++)this[t].appendChild(e)},width:function(){return $(this).width()},height:function(){return $(this).height()},css:function(e,t){return t?$(this).css(e,t):$(this).css(e)}},listeners:function(e,t,i){try{e.addEventListener(t,i,!1)}catch(a){for(var s=0,n=e.length;s<n;s++)e[s].addEventListener(t,i,!1)}},bindMethods:function(e){for(var t in s.methods)e[t]=s.methods[t].bind(e);return e}},i=function(e,t){if(e)return t?$(e):(n[e]||(n[e]=$(e)),n[e])},e.setReference("dom",i),e.setReference("listeners",s.listeners)}(window,document),function(e,t,i,s){function n(e,t){if(t=e.target.dataset)return s[t.index]}function a(e,t,i,s,n,a){if(a=e.value?e.value:e.innerText,s=a.length,a=a.substring(0,+i),s>+i&&(e.value?e.value=a:e.innerText=a),s=+i-a.length+("keypress"===t?-1:0),n=e.parentNode.querySelector(".text-limiter"),n&&(n.innerHTML=s<=0?0:s,n.style.display=s<=20?"inline":"none"),s<=-1)return!1}if(i=document.getElementsByClassName("brocord"),i.length>0){s={};for(var o,r=0,l=i.length;r<l;r++)s[r]=i[r].dataset,i[r].dataset.index=r,o=i[r].parentNode.querySelector(".text-limiter"),o&&(o.style.display="none"),i[r].onblur=function(e,t){t=n(e),t&&t.textlimit&&setTimeout(function(){a(e.target,e.type,+t.textlimit),t=e.target.parentNode.querySelector(".text-limiter"),t&&(t.style.display="none")},20)},i[r].onfocus=function(e,t){t=n(e),t&&t.textlimit&&setTimeout(function(){a(e.target,e.type,+t.textlimit)},20)};i=void 0,t.onkeypress=function(e,t){if(t=n(e)){if(!e.shiftKey&&(13==e.which||13==e.keyCode)&&t.onenter)return e.target.parentNode.querySelector(t.onenter).click(),setTimeout(function(){a(e.target,e.type,+t.textlimit+1)},20),!1;if(t.textlimit)return a(e.target,e.type,t.textlimit)}},t.onkeydown=function(e,t,i){t=n(e),t&&t.textlimit&&(i=e.keyCode||e.charCode,8===i||46===i?setTimeout(function(){return a(e.target,e.type,t.textlimit)},20):(e.metaKey||e.ctrlKey)&&(88!==i&&89!==i&&90!==i||setTimeout(function(){return a(e.target,e.type,t.textlimit)},20)),setTimeout(function(){return a(e.target,e.type,t.textlimit)},40))},t.onpaste=function(e,t){t=n(e),t&&t.textlimit&&setTimeout(function(){return a(e.target,e.type,t.textlimit)},20)}}}(window,document);var wordbreak=function(e){function t(t,i){t=document.createElement("span"),t.id="wb-sample",t.style.display="inline-block",t.style.position="absolute",t.style.top="-1000px",t.style.left="-1000px",document.getElementsByTagName("body")[0].appendChild(t),t=document.getElementById("wb-sample"),i=document.createElement("div"),e={set:function(e,i,s,n,a,o){if(i&&(i=this.decode(i)))if(t.innerHTML="",t.style.fontSize=window.getComputedStyle(e).fontSize,a=this.compute(i.split(" "),n,s,[]),o=this.isInput(e.tagName.toLowerCase(),e.type),e.innerHTML="",o)e.value=a.join(" ").trim();else for(var r in a)e.innerHTML+='<span style="display: block;">'+a[r]+"</span>"},decode:function(e){return i.innerHTML=e.replace(//g," "),i.textContent||i.innerText||""},compute:function(e,i,s,n){for(var a,o,r=0,l=e.length,d=0,c=0;r<l;r++)if(t.innerHTML=e.slice(c,r+1).join(" "),t.clientWidth>i){if(d++,o=e.slice(c,r).join(" "),c=r,!(d<s)){a=e.slice(c,r+1).join(" ");for(var h=1,u=a.length;h<=u;h++)if(t.innerHTML=o+" "+a.substring(0,h)+"...",t.clientWidth>i){n.push(o+" "+a.substring(0,h-1)+"...");break}break}if(t.innerHTML=o+" ",t.clientWidth>i)n.push(o);else{a=e[c];for(var h=1,u=a.length;h<=u;h++)if(t.innerHTML=o+" "+a.substring(0,h)+"-",t.clientWidth>i){n.push(o+" "+a.substring(0,h-1)+(1==h?"":"-")),e[c]=a.substring(h-1);break}}}else r==l-1&&n.push(t.innerHTML);return n},isInput:function(e,t){return"input"===e&&"text"===t||"textarea"===e}}}return{instance:function(){return e||t(),e}}}();!function(e,t,i,s,n,a,o,r,l,d,c){function h(){var e,t,i,s=(navigator.appVersion,navigator.userAgent),n=navigator.appName,a=""+parseFloat(navigator.appVersion),o=parseInt(navigator.appVersion,10);return(t=s.indexOf("OPR/"))!=-1?(n="Opera",a=s.substring(t+4)):(t=s.indexOf("Opera"))!=-1?(n="Opera",a=s.substring(t+6),(t=s.indexOf("Version"))!=-1&&(a=s.substring(t+8))):(t=s.indexOf("MSIE"))!=-1?(n="Microsoft Internet Explorer",a=s.substring(t+5)):(t=s.indexOf("Chrome"))!=-1?(n="Chrome",a=s.substring(t+7)):(t=s.indexOf("Safari"))!=-1?(n="Safari",a=s.substring(t+7),(t=s.indexOf("Version"))!=-1&&(a=s.substring(t+8))):(t=s.indexOf("Firefox"))!=-1?(n="Firefox",a=s.substring(t+8)):(e=s.lastIndexOf(" ")+1)<(t=s.lastIndexOf("/"))&&(n=s.substring(e,t),a=s.substring(t+1),n.toLowerCase()==n.toUpperCase()&&(n=navigator.appName)),(i=a.indexOf(";"))!=-1&&(a=a.substring(0,i)),(i=a.indexOf(" "))!=-1&&(a=a.substring(0,i)),o=parseInt(""+a,10),isNaN(o)&&(a=""+parseFloat(navigator.appVersion),o=parseInt(navigator.appVersion,10)),{name:n,version:o,fullVersion:a}}function u(e){return e=navigator.userAgent||navigator.vendor||window.opera,e.match(/iPad/i)||e.match(/iPhone/i)||e.match(/iPod/i)?"iOS":e.match(/Android/i)?"Android":navigator.appVersion.indexOf("Win")!=-1?"Windows":navigator.appVersion.indexOf("Mac")!=-1?"MacOS":navigator.appVersion.indexOf("X11")!=-1?"UNIX":navigator.appVersion.indexOf("Linux")!=-1?"Linux":"Unknown OS"}function p(e,t,i){return n[e]&&!t||("peers"===a.pageAttr.page?f(e,"all","sort_high_low","",0,"peers",a.pageAttr.hash):"challenges"===a.pageAttr.page?f(e,t?t:"all",hasAssigned?"assigned":"added","",0):"store"===a.pageAttr.page?f(e,"all","enabled","",0):"admin"===a.pageAttr.page?(i="challengeRequests"===t?"requested":"stuffRequests"===t?"purchased":"",f(e,t,i,{query:"",context:"challenge,user"},0)):"me"===a.pageAttr.page?f(e,"all","","",0,"challenges"):"activity"===a.pageAttr.page&&f(e,"all","","",0,"activity")),n[e]}function f(e,t,i,s,a,o,r,l){return n[e]={},n[e].category=t,n[e].filter=i,n[e].query=s,n[e].offset=a,n[e].context=o?o:e,n[e].hash=r?r:null,n[e].other=l?l:null,n[e]}function m(e,t){/\D/g.test(e.val())&&e.val(e.val().replace(/\D/g,""))}function g(e,t){/[^0-9.()+-]/g.test(e.val())&&e.val(e.val().replace(/[^0-9.()+-]/g,""))}function v(e,t){if(e)if(e.indexOf("youtube.com")!==-1||e.indexOf("youtu.be")!==-1){if(t=!!$.trim(e).match(n.youtubeRegEx)&&RegExp.$1)return{id:t,type:"youtube"}}else if(e.indexOf("vimeo.com")!==-1&&(t=n.vimeoRegEx.exec($.trim(e)),t=t?t[5]:i))return{id:t,type:"vimeo"}}function b(e,t){e?(a.dom("span#statusMessage").html(e),a.dom("#voice-box").fadeIn(),t&&(e=1e3*Math.ceil(a.dom("span#statusMessage").width()/180),e<2e3&&(e=2e3),e+=500,a.dom("#voice-box").fadeIn().delay(e).fadeOut("slow"))):a.dom("#voice-box").fadeOut("slow")}function y(e){return $("<div/>").text(e).html()}function _(e){return $("<div/>").html(e).text()}function w(e){return e}function x(e,t,i){return i&&e&&t&&(e=e.replace(//g," "),"hE"===String(i)?e=y(e):"hD"===String(i)?e=_(e):"hR"===String(i)&&(e=w(e)),"wrap-name"===String(t)&&e.length>55?e=String(e).slice(0,51)+"...":"group-wrap-name"===String(t)&&e.length>33?e=String(e).slice(0,33)+"...":"header"===String(t)&&e.length>38?e=String(e).slice(0,35)+"...":"paragraph"===String(t)&&e.length>53?e=String(e).slice(0,50)+"...":"gp_paragraph"===String(t)&&e.length>83?e=String(e).slice(0,80)+"...":"feeds_paragraph"===String(t)&&e.length>135?e=String(e).slice(0,135)+"...":"text"===String(t)&&e.length>13?e=String(e).slice(0,10)+"...":"textLanding"===String(t)&&e.length>20?e=String(e).slice(0,20)+"...":"popup"===String(t)&&e.length>300?e=String(e).slice(0,300)+"...":"other"===String(t)&&(e=String(e))),e}function C(e){var t=/^([\w-\.]+)@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.)|(([\w-]+\.)+))([a-zA-Z]{2,4}|[0-9]{1,3})(\]?)$/;return!!t.test(e)}function k(e,t,i){i=e.hasClass("active")?"":"active",e.attr("class","pull-left "+i)}function S(e,t,i){e.siblings("div.pull-left").attr("class","pull-left"),i=e.hasClass("active")?"":"active",e.attr("class","pull-left "+i)}function D(e,t,i){e.hasClass("active")?(i="",e.siblings("div.pull-left").attr("class","pull-left active")):(i="active",e.siblings("div.pull-left").attr("class","pull-left")),e.attr("class","pull-left "+i)}function T(e,t){return t={},Object.keys(e).sort().forEach(function(i){t[i]=e[i]}),t}function O(e,t,i,s,n){"upload"===t?$.get("/get/"+s+"/session",{data:JSON.stringify({type:"user",service:"upload"})},function(t,i,s){t&&t.code&&200===t.code&&(s=e.elem,i=$("#"+s).find("input.file"),delete e.elem,$.ajaxFileUpload({url:t.data.result,secureuri:!1,fileElementId:i,dataType:"json",data:JSON.stringify(e),success:function(e){"header"==n?Header.status(e):"landing"==n?univLanding.userResp(e):"success"==e.status?a.utils.statusMsg(a.utils.localeContentBuffer("SAVED")):a.utils.statusMsg(e.status)}}))}):$.ajax({type:"POST",url:"/profileSettings/"+s+"/"+i,data:"profile="+JSON.stringify(e),success:function(e){"header"==n?Header.status(e):"landing"==n?univLanding.userResp(e):"success"==e.status?a.utils.statusMsg(a.utils.localeContentBuffer("SAVED")):a.utils.statusMsg(e.status)}})}function A(e,t,i,s,n){var a=e.universityName;$.ajax({type:"GET",url:"/University/checkUnivExist",data:"name="+a,success:function(o){"success"===o.status||"edit"===e.status&&"upload"!=t||"edit"===e.status&&(o.data.oldName===a||o.data.oldKey===i)?"upload"===t?$.get("/University/get/session",{data:JSON.stringify({type:"university",service:"upload"})},function(t,i,a){t&&t.code&&200===t.code&&(a=e.elem,i=$("#"+a).find("input.file"),delete e.elem,$.ajaxFileUpload({url:t.data.result,secureuri:!1,fileElementId:i,dataType:"json",data:JSON.stringify({obj:e,id:e.id,crop:e.crop}),success:function(t){"create"===n?univCreate.response(t,s):"landing"===n?univLanding.response(t,e):"initial_setup_create"===n&&(t.type="save_univ",setup.save(t))}}))}):$.ajax({type:"POST",url:"/University/new",data:{id:i,json:JSON.stringify(e)},success:function(t){"create"===n?univCreate.response(t,s):"landing"===n?univLanding.response(t,e):"initial_setup_create"===n&&(t.type="save_univ",setup.save(t))}}):"create"===n?univCreate.response(o,s):"landing"===n?univLanding.response(o,e):"initial_setup_create"===n&&(o.type="save_univ",setup.save(o))}})}function M(e){if("live"===app_mode){var t=e.category,i=e.action,s=e.label,n=0;e.value&&(n=parseInt(e.value)),0===n?ga("send","event",t,i,s):n>0&&ga("send","event",t,i,s,n)}}function E(e){return e.replace(/[^a-zA-Z0-9 ]/g,"").trim().replace(/ /g,"-").toLowerCase()}function I(e){var t="",i="",s="";return e/3600>=1&&(t+=Math.floor(e/3600)+":",e%=3600,2===t.length&&(t="0"+t)),e/60>=1?(i+=Math.floor(e/60)+":",e%=60):i+="00:",2===i.length&&(i="0"+i),s+=0!==e?e+"":"00",1===s.length&&(s="0"+s),t+i+s}function N(e,t){try{return t=t.toString(),1===t.length&&(t="0"+t),e>12?(e-=12,t+=" PM"):t+=12===e?" PM":" AM",e=e.toString(),1===e.length&&(e="0"+e),e+":"+t}catch(e){}return""}function P(e,t){return e&&(n.date.setTime(e),e=n.date.getDate()+" "+n.months[n.date.getMonth()]+" "+n.date.getFullYear(),t||(e+=" "+N(n.date.getHours(),n.date.getMinutes()))),e}function H(e){return e&&(n.date.setTime(e),e=n.date.getDate()+" "+n.months[n.date.getMonth()]+" "+n.date.getFullYear()),e}function L(){function e(){return Math.ceil(4294967296*Math.random()).toString(16)}return e()+"-"+e()+"-"+e()+"-"+e()}function j(e,t){a.dom("#chsteps").find("iframe").each(function(e,t){t.src=t.src})}function F(e,t){return a.content?t?t.html(a.content[e]):a.content[e]:(t&&n.bufferedContent.push({value:e,node:t}),!1)}function U(){return n.bufferedContent}function R(e){$("html, body").animate({scrollTop:e.offset().top-e.height()/2},1e-5)}function z(e,t){"status"===t&&("show-icon"===e?a.utils.statusMsg(a.utils.localeContentBuffer("DISABLED_MESSAGE"),!0):a.utils.statusMsg(a.utils.localeContentBuffer("ENABLED_MESSAGE"),!0))}function q(e,t){return e+(t&&""!=t?" "+t:"")}function B(e,t,i,s,n,a,o){t&&e.length>0&&(t=t.split("=s")[0],e.attr("url",t),e.removeAttr("style"),i=e.parents(".align-center-container:lt(1)"),setTimeout(function(){s=Math.ceil(i.innerWidth()),n=Math.ceil(i.innerHeight()),t.indexOf("crop")===-1?("auto"===n&&e.parent().css("height","auto"),W(e,t,s,n)):(i=t.split("?crop="),i[1]=i[1].split("-"),e&&e.data()&&6===i[1].length?(a=Math.round(+i[1][2]*s/+i[1][0]),"auto"===n?(e.css({width:a+"px",height:"auto","object-fit":"none","max-width":"none"}),e.parent().css("height","auto"),W(e,i[0],a,0)):(o=Math.round(+i[1][3]*n/+i[1][1]),e.css({width:a+"px",height:o+"px","margin-left":"-"+Math.round(+i[1][4]*s/+i[1][0])+"px","margin-top":"-"+Math.round(+i[1][5]*n/+i[1][1])+"px","object-fit":"none","max-width":"none"}),W(e,i[0],a,o))):e.attr("src",i[0]))},0))}function W(e,t,i,s,n){t.indexOf("googleapis.com")!==-1||t.indexOf("ytimg.com")!==-1||t.startsWith("images")||t.startsWith("/images")||t.startsWith("data:image")||(n=i?i:0,n=s&&s>parseInt(n)?s:n,t=t+"=s"+n),e.attr("src",t)}function Y(e,t){t=[],e=e.replace(/-/g,"").replace(/[^a-zA-Z0-9 ]/g,"").split(" ");for(var i=0,s=e.length;i<s;i++)e[i]=e[i].trim(),e[i]&&t.push(e[i]);return e=t.join(" "),e.replace(/ /g,"-").toLowerCase()}function V(e){return"challenge"===e?n.chLinks[Math.floor(Math.random()*n.chLinks.length)]:n.gLinks[Math.floor(Math.random()*n.gLinks.length)]}function K(e,t,i,s){return n.date.setTime(e),e=n.date,s=t.getFullYear()-e.getFullYear(),s||i?P(e,!0):(s=G(t.getMonth(),e.getMonth()),s?P(e,!0):(s=G(t.getDate(),e.getDate()),s?P(e,!0):(s=G(t.getHours(),e.getHours()),s?s+"hr":(s=G(t.getMinutes(),e.getMinutes()),s?s+"min":"now"))))}function G(e,t){return e>t?e-t:t-e}function J(e,t){return"challenge"===t||"group"===t?100-e.length:"university"===t?50-e.length:void 0}function Q(e,t,i){return e.replace(new RegExp(t,"g"),i)}function X(e,t){return t.indexOf("ytimg")==-1?t:"peers"===e?t.replace(t.split("/")[5],"default.jpg"):void 0}function Z(e,t,i,s,n){try{t<i?s=Math.ceil((parseInt(i)-parseInt(t))/10):(s=Math.ceil((parseInt(t)-parseInt(i))/10),s*=-1),n=setInterval(function(){(s>0?t>=i:t<=i)?(a.dom(".overall_points > span").html(i),clearInterval(n)):(a.dom(".overall_points > span").html(Math.ceil(t)),t=parseInt(t)+parseInt(s))},100)}catch(e){console.log(e),clearInterval(n),a.dom(".overall_points > span").html(i)}}function ee(){return window.getSelection?window.getSelection():document.getSelection?document.getSelection():document.selection?document.selection.createRange():null}function te(e){return e?n.urlRegEx.test(e):null}function ie(e){return e?n.urlRegExHTTPS.test(e):null}function se(e,t){return t=$('<div id="tempDiv">'+e+"</div>"),t=t.find("iframe")}function ne(e,t,i,s,o){n.sample||(a.dom("body").append('<span id="sample-hidden" style="position:absolute;top:-1000px;left:-1000px"></span>'),n.sample=a.dom("#sample-hidden")),t=_(t).trim().replace(//g," "),t||(t=e.attr("placeholder")),o=o?o:e,t?(n.sample.html("").css("font-size",e.css("font-size")),setTimeout(function(){s=e.width()*i;for(var a,r=1,l=t.length;r<=l;r++)if(a=t.substr(0,r),n.sample.html(a),n.sample.width()>=s){n.sample.html(t.substr(0,r-3)+"...");break}o.is(":input")?o.val(n.sample.html()):o.html(n.sample.html())},0)):o.css("width","auto")}String.prototype.toCamelCase=function(e){e=this.split(" ");for(var t in e)e[t]=e[t].slice(0,1).toUpperCase()+e[t].slice(1).toLowerCase();return e.join(" ")},String.prototype.isEmpty=function(e){return 0===this.length||!this.trim()},n={youtubeRegEx:/^(?:https?:\/\/)?(?:www\.)?(?:youtu\.be\/|youtube\.com\/(?:embed\/|v\/|watch\?v=|watch\?.+&v=))((\w|-){11})(?:\S+)?$/,vimeoRegEx:/^.*(vimeo\.com\/)((channels\/[A-z]+\/)|(groups\/[A-z]+\/videos\/))?([0-9]+)/,urlRegEx:/((ftp|http(s))?:\\)?([\w-]+\.)+[\w-]+(\[\?%&=]*)?/,urlRegExHTTPS:/(https):\/\/([\w-]+\.)?[\w-]+(\[\?%&=]*)?/,date:new Date,now:function(){return new Date},months:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],chLinks:["https://lh3.googleusercontent.com/8q-Uu7BZeBCbmwz8Ca-PX5Jch8iPv66hq75-CVi57DZBtSYai0sZP_9M0DgB3g8HKdnv9CSxUjt5AVPTt1rCKU5xqUnz40ycrA","https://lh3.googleusercontent.com/oiI7_SLKtuVX6pN3o7gn54z4AyCCKIIY3fLEgwESSsHU9B0F4pb1t7IpTAYXezTuZ21QY0d8Kekdwws94LBY6M_-Lxp3bgZRJw","https://lh3.googleusercontent.com/XhobpP0zBnLxBgOWAR1SgI1zNhok7Kw3zlr9fNhJpFvmbgUGejOQ4hmr8WtWo7XIze4RzAdhBRLZjDOmBOHIJGP5hdZg2HyNRw","https://lh3.googleusercontent.com/FK10Bo6Ge5Fjr2bbVMSKIGWO8A8a6dkFbsUoOKIgdmxcep-BAYB6JOR-L2zleQekYQEncqM0smo1rq1iODriJeKd4-BHHC-zVg","https://lh3.googleusercontent.com/Tf6ZGIemsZ3u4wXyIrQQG0JCY9_n3-owBHw6-y65D-RznDtaPTdeR6VBPkOjlMfddXFbdDFLmtWIXjLvha1-ZeVMYjJ2siFnDSM","https://lh3.googleusercontent.com/hytnHg3FzRkE31d8_hpft3t_nhaqFZDRa5OrKvmgX_Hka_MLjtV-CnrVkQy0lp4SASGAmwy8WuAEQ8hhypo3nOYsQblwY1F3kw"],gLinks:["https://lh3.googleusercontent.com/K7jEx5Np0NyjL1hdwaO2gQYcXWfm6zlaLOWTZez4moMMNlN6wrx3lJCij1Wc2ywAaDLKKZWgrjpFyEsR3d_BQn0rtLENAmDYLc8","https://lh3.googleusercontent.com/M20Bv9O6ugKNKXj6bMV9dgshRXuOVTdEqyKl4UTVwhaKU_-pAPy0mloLRHyb-AQ_Fp4wVpKqyG48G1BxMBMI7nvrcV-zbu8j","https://lh3.googleusercontent.com/PUGp5Nm8kXKg4sVbRXLdU9sInVrEu9LHC17rLeg8HFpm2nrqI7AFchPjHHHTYmZ6qpubal6P7V5qwr4W7NtW0XNktIcvaaf4","https://lh3.googleusercontent.com/auTCDw8C4lhsq04cd5SLcop4daw0p7RFZA_s_dxylxLVsXxEn8i8rBPoGeYkvz9e2Ji1sexC570A6senUXOM6rhlij-raCyu","https://lh3.googleusercontent.com/2kLk7yV3ZQXRIi_a8CMkIsZ76ZKKwRjCmkyW0BRiITPmxYNuDZPGzW0hguR6pE7EOBNh7jeHsRol2YLaqMOHGjoc0iPIqYPG7Q","https://lh3.googleusercontent.com/x9UE5yXXeory34QIVlG2F2NkBr0kEOmyTenDqNGIkhQ5w4YsvThaYhOpD820DMJXXnreAv7kDxtWFrI8DmEsKdn2Go-0S818d8Y"],bufferedContent:[]},d=["application/vnd.ms-excel","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/vnd.ms-powerpoint","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/vnd.openxmlformats-officedocument.wordprocessingml.template","application/vnd.openxmlformats-officedocument.presentationml.slideshow","application/vnd.ms-word.document.macroEnabled.12","application/vnd.openxmlformats-officedocument.spreadsheetml.template","application/vnd.ms-excel.sheet.macroEnabled.12","application/vnd.ms-excel.template.macroEnabled.12","application/vnd.ms-excel.addin.macroEnabled.12","application/vnd.ms-excel.sheet.binary.macroEnabled.12","application/vnd.openxmlformats-officedocument.presentationml.presentation","application/vnd.openxmlformats-officedocument.presentationml.template","application/vnd.ms-powerpoint.addin.macroEnabled.12","application/vnd.ms-powerpoint.presentation.macroEnabled.12","application/vnd.ms-powerpoint.presentation.macroEnabled.12","application/vnd.ms-powerpoint.slideshow.macroEnabled.12"],c=["application/vnd.oasis.opendocument.text","application/vnd.oasis.opendocument.text-template","application/vnd.oasis.opendocument.text-web","application/vnd.oasis.opendocument.text-master","application/vnd.oasis.opendocument.graphics","application/vnd.oasis.opendocument.graphics","application/vnd.oasis.opendocument.presentation","application/vnd.oasis.opendocument.presentation-template","application/vnd.oasis.opendocument.spreadsheet","application/vnd.oasis.opendocument.spreadsheet-template","application/vnd.oasis.opendocument.chart","application/vnd.oasis.opendocument.formula","application/vnd.oasis.opendocument.database","application/vnd.oasis.opendocument.image","application/vnd.openofficeorg.extension","application/vnd.sun.xml.writer","application/vnd.sun.xml.writer.template","application/vnd.sun.xml.calc","application/vnd.sun.xml.calc.template","application/vnd.sun.xml.draw","application/vnd.sun.xml.draw.template","application/vnd.sun.xml.impress","application/vnd.sun.xml.impress.template","application/vnd.sun.xml.writer.global","application/vnd.sun.xml.math","application/vnd.stardivision.writer","application/vnd.stardivision.writer-global","application/vnd.stardivision.calc","application/vnd.stardivision.draw","application/vnd.stardivision.impress","application/vnd.stardivision.impress-packed","application/vnd.stardivision.math","application/vnd.stardivision.chart","application/vnd.stardivision.mail","application/x-starwriter","application/x-starcalc","application/x-stardraw","application/x-starimpress","application/x-starmath","application/x-starchart"],$.extend($.expr[":"],{containsi:function(e,t,i,s){var n=e.textContent.split(" ");if(!(n.length>0))return 0==(e.textContent||e.innerText||"").toLowerCase().indexOf((i[3]||"").toLowerCase());for(var t in n)if(0==n[t].toLowerCase().indexOf((i[3]||"").toLowerCase()))return!0}}),s={NULL:t,UNDEFINED:i,browser:h(),platform:u(),getConstraints:p,setConstraints:f,inputOnlyNumber:m,telphonenumber:g,isValidVideoURL:v,statusMsg:b,toggleActive:k,toggleRadio:S,toggleChoptions:D,sortObjectKeys:T,elipses:x,uUser:O,uUniv:A,validateEmail:C,HHMMSS:I,pushGA:M,getSemanticName:E,id:L,ms2ts:P,ms2Since:K,univDateFromat:H,semanticName:Y,getUserFullName:q,moveFocus:R,localeContentBuffer:F,iframeReload:j,statusCheck:z,setImage:B,getDelimiterLength:J,chImLink:V,winHt:function(){return o},winWd:function(){return r},aspectWidth:function(){return 12.8*l},aspectHeight:function(){return 7.2*l},getSelectedNode:ee,isValidURL:te,isValidHttpsURL:ie,counter:Z,replaceAll:Q,numDifference:G,setText:ne,msMimeTypes:d,ooMimeTypes:c,createTempElement:se,optimizedYTImg:X,getBufferedContent:U},a=e.setReference("utils",s),a.dom(window,!0).resize(function(){o=self.innerHeight,r=self.innerWidth,l=5*Math.floor(.8*r/12.8/5),a["video-service"]&&(a["video-service"].isInFullScreen()?(a.dom("#video_popup_holder").css({width:r+"px",height:o+"px","margin-top":"0",height:"100%",top:"0",overflow:"hidden"}),a["video-service"].getPlayer().setSize(r-50,o-69)):(a.dom("#video_popup_holder").css({width:s.aspectWidth()+"px",height:"auto",top:"calc( 50% - "+s.aspectHeight()/2+"px)"}),a["video-service"].getPlayer()&&a["video-service"].getPlayer().setSize(s.aspectWidth(),s.aspectHeight())))}),a.dom(window,!0).trigger("resize")}(window,null,void 0),function(e,t,i,s){t={init:function(e,t,n,a){s||(s=0,i={}),s++,i[s]={success:t,failure:n,respMap:{},total:Object.keys(e).length,successCount:0,doneCount:0},a=0;for(var o in e)a++,e[o].apply(this,[{id:s,order:a}])},done:function(e,t,s,n,a){if(n=i[e.id],n.doneCount+=1,s&&(n.successCount+=1),t&&(n.respMap[e.order]=t),i[e.id]=n,n.doneCount===n.total)try{a=[];for(var o in n.respMap)a.push(n.respMap[o]);n.successCount===n.total?n.success.apply(this,a):n.failure.apply(this,a)}finally{delete i[e.id]}}},e.setReference("deferred",t)}(window),function(e,t,i,s){s=0,i={push:function(e,t,i){history&&(document.title="AdaptiveU - "+t,history.pushState({index:s},t,i),s++)},isPopTriggered:!1},e.onpopstate=function(e,s){i.isPopTriggered=!0,s=location.pathname.replace("/","").split("/"),t.pageAttr.univ=s[0],t.pageAttr.page=s[1],t.pageAttr.category=s[2]?s[2]:"me"===s[1]?"learning":"all",t.pageAttr.level1=s[3]?s[3]:"",t.pageAttr.level2=s[4]?s[4]:"",t.pageAttr.hash=location.hash?location.hash:null,t.dom("#view-type").attr("class",t.pageAttr.page),t.dom(".nav.header_tabs").attr("class","nav header_tabs "+t.pageAttr.page),t.dom("#header-name").html(t.utils.getConstraints(t.pageAttr.page).category),t["challenges-service"].level1=t.utils.UNDEFINED,t["challenges-service"].level2=t.utils.UNDEFINED,document.title="AdaptiveU - "+t.pageAttr.page.toUpperCase(),t["common-service"].loadpage(t.utils.getConstraints(t.pageAttr.page,t.pageAttr.category)),""==t.pageAttr.level1&&"stuffRequests"!==t.pageAttr.category&&"challengeRequests"!==t.pageAttr.category&&(i.isPopTriggered=!1)},t=e.setReference("history",i)}(window),function(e,t,i,s){i=e.setReference("xhr",function(e,i,s){if(e.type=e.type.toUpperCase(),e.data){s=[];for(var n in e.data)s.push(n+"="+encodeURIComponent(e.data[n]));s=s.join("&"),"GET"===e.type&&(e.url=e.url+"?"+s)}i=new t,i.onreadystatechange=function(t){4===i.readyState&&200===i.status&&e.success&&(t=JSON.parse(i.response),401===t.code?location.reload():e.success(t))},i.open(e.type,e.url,!0),"GET"===e.type?i.send():"POST"===e.type&&(i.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),i.send(s))})}(window,XMLHttpRequest),function(e,t,i){function s(e,t){t=Math.round(t);for(var i=0;i<5;i++)i+1<=t?e.get(i).className="icon-star":e.get(i).className="icon-star-empty"}e("body").append('<span id="ratings" class="rater"><i class="icon-star"></i><i class="icon-star"></i><i class="icon-star"></i><i class="icon-star"></i><i class="icon-star"></i><input type="hidden" /></span>').queue(function(t){i=e(this).children("span#ratings").last(),i.on("mouseout",function(t){t=e(this),s(t.children(),+t.data().value)}).on("mouseover",function(){e(this).attr("class").indexOf("review_tab")!=-1?e(this).attr("class","rater review_tab"):e(this).attr("class","rater")}),i.children("i").on("click",function(t,n){t=e(this),i=t.parent("span#ratings"),i.data().value=t.index()+1,s(t.siblings().andSelf(),+i.data().value),n=t.parent().data().callback,n&&n("value",i.data().value,t)}).on("mouseover",function(t){t=e(this),t.prevAll().andSelf().attr("class","icon-star"),t.nextAll().attr("class","icon-star-empty")}),t()}),t=i.clone(!0,!0),i.remove(),e.fn.ratings=function(n){i=t.clone(!0,!0),n=e.extend({value:0,editable:!0},n),n.editable||(i.removeAttr("class"),i.off(),i.children("i").off()),i.data().value=n.value,n.callback&&(i.data().callback=n.callback),s(i.children("i"),n.value),e(this).html(i)}}($),function(e,t,i){i={learning:function(e,i){"peers"!==t.pageAttr.page&&(t.dom("#me-learning").attr("class","active").siblings().attr("class",""),t.dom("#body").attr("class","row learning"),t.dom("#me-learning").attr("class","active").siblings().attr("class",""),t.dom("#body").attr("class","row learning"),t.dom("#switch_workingon_completed").css("display",""),t.dom(".title",!0).tooltip(),t.utils.setConstraints("me","all","","",0,"challenges"),t.pageAttr[t.utils.getConstraints(t.pageAttr.page).context].canLoad=!1,t.xhr({url:"/filterToLoad/"+t.pageAttr.univ,type:"POST",success:function(e){e&&200===e.code&&e.response?(0===Object.keys(e.data).length?(t.dom("#blank-working-on").children("a").attr("href","/"+t.pageAttr.univ+"/challenges/all"),t.dom("#blank-working-on").attr("style","display : block"),t.dom("#loader").hide(),
t.dom(".me-scope").find("#switch_workingon_completed").hide()):"workingon"===e.data.filterToLoad?t.dom("#working_on_badges").trigger("click"):"requested"===e.data.filterToLoad?t.dom("#requested_badges").trigger("click"):"approved"===e.data.filterToLoad&&t.dom("#completed_badges").trigger("click"),t.dom("#header-name").html("workingon"===e.data.filterToLoad?" "+t.utils.localeContentBuffer("WORKING_ON")+" ":e.data.filterToLoad)):t.dom("#working_on_badges").trigger("click")}}))},reports:function(e,i){t.pageAttr[t.utils.getConstraints(t.pageAttr.page).context].canLoad=!1,"me"===t.pageAttr.page&&t.dom("#header-name").html(t.utils.localeContentBuffer("REPORTS")),t.dom("#body").attr("class","row user-reports"),t.dom("#me-reports").attr("class","active").siblings().attr("class",""),t.dom("#switch_workingon_completed").hide(),reports.callReports(t.pageAttr.page)},purchased:function(e,i){"me"===t.pageAttr.page&&t.dom("#header-name").html(t.utils.localeContentBuffer("PURCHASED")),t.dom("#body").attr("class","row purchased"),t.dom("#me-purchased").attr("class","active").siblings().attr("class","")}},t=e.setReference("me-service",i)}(window),function(e,t,i,s,n){s=new Date,n=[],i={populate:function(e,n,a,o,r,l){if(s.setTime(Date.now()),e.data.activity){a=e.data.activity;for(var d in a)try{r="challenge-updated"===a[d].type||"stuff-updated"===a[d].type,o=r?a[d].type.replace("updated","created"):a[d].type,l=t.templates[o].clone(!0,!0),r?(r=a[d].type.split("-"),l.children("div.feeds-header").find("h3").html(r[1].toCamelCase()+" the "+r[0]+"!")):r=a[d].type.split("-"),i.buildActivity(l,n,a[d],e.data.users[a[d].userSemantic],e.data.users[a[d].assignedTo],e.data.type[a[d].typeSemantic],r[0],r[1])}catch(e){console.warn(e)}Object.keys(a).length<20?"prepend"===n?n=!0:(i.univCard(),n=!1):n=!0,t.pageAttr[t.utils.getConstraints(t.pageAttr.page).context].canLoad=n}else i.univCard();i.refreshAnimation()},buildActivity:function(e,i,a,o,r,l,d,c,h,u,p){if(u=location.origin+"/"+t.pageAttr.univ+"/"+("challenge"===d?"challenges":"store")+"/all/"+a.typeSemantic,h=location.origin+"/"+t.pageAttr.univ+"/peers/all/"+a.userSemantic,t.utils.setImage(e.children("div.feeds-header").children("figure").children("a").attr("href",h).children("img"),o.image),e.children("div.feeds-header").find("h2").children("span").attr("data-date",a.date).html(t.utils.ms2Since(a.date,s)).siblings("a").attr("href",h).html(o.name),"peers"!==d&&(p=e.children("div.feeds-content").children("a").attr("href",u).children("img"),t.utils.setImage(p,l.image),p=p.parent().siblings("figcaption")),"challenge"===d||"stuff"===d)p=p.children("h2").children("a").attr("href",u).html(l.name).siblings("span").html(l.points).parent().siblings("p").html(t.utils.elipses(l.description,"feeds_paragraph","hD")),"challenge"===d?"peers"===c&&(h=location.origin+"/"+t.pageAttr.univ+"/peers/all/"+a.assignedTo,e.children("div.feeds-header").find("h3").children("a").attr("href",h).html(r.name)):"stuff"===d&&"approved"===c&&(p=p.siblings("figure").children("a").attr("href",h).first().children("img"),t.utils.setImage(p,o.image),p.parent().siblings("a").html(o.name));else if("feed"===d){l.message=t.utils.elipses(l.message,"other","hD").substring(0,120).split(" ");for(var f in l.message)l.message[f]=t.utils.isValidURL(l.message[f])?'<a href="'+l.message[f]+'" target="_blank">'+l.message[f]+"</a>":l.message[f];e.children("div.feeds-content").find("p").html(l.message.join(" "))}"prepend"===i?t.dom("#feeds-box").prepend(e.show().delay(50).queue(function(e){this.className=this.className+" past",e()})):(t.dom("#feeds-box").append(e.show()),n.push(e))},univCard:function(){t.dom(".univ-created").fadeIn()},postFeed:function(e,i,s,n){s=e.siblings("textarea"),n=s.val().trim(),n?(s.attr("class","feed_testarea").val(""),t.dom(".story_board .text-limiter").html(s.data().textlimit),t["common-service"].post("update",{type:"activity",data:JSON.stringify({msg:n})},function e(e){400===e.code&&s.attr("class","feed_testarea error").focus()})):s.attr("class","feed_testarea error").focus()},stopAnimation:function(){try{t.dom("#feeds-box").waterfall("stop")}catch(e){}},addAnimation:function(){t.dom("#feeds-box").waterfall({gap:15,gridWidth:[500,500],refresh:300})},refreshAnimation:function(){t.dom("#feeds-box").waterfall(),i.triggerEase()},triggerEase:function(e,t,i,s){setTimeout(function(){if(n)for(var a in n)t=window.scrollY+window.innerHeight,i=n[a].offset().top,s=i+n[a].height(),(i>=window.scrollY&&i<=t||s>=window.scrollY&&s<=t)&&(e=n[a].attr("class"),e.indexOf("past")===-1&&n[a].attr("class",e+" past"))},350)}},t=window.setReference("activity-service",i),i.addAnimation(),t.dom(".feed_testarea").on("blur",function(){this.className="feed_testarea"}),window.onscroll=i.triggerEase,t.dom(".univ-created").children().children("span").html(t.utils.ms2Since(t.dom(".univ-created").data().date,s,!0)),t.dom(".univ-created").removeAttr("data-date")}(window),function(e,t,i,s,n){i={open:function(e,a,o){i.origin=e,o=e.children("img").data(),n=o.video[o.videoid],n.id=o.videoid,n.autopause=o.autopause,i.reset(),s[n.type].init(),t.loadPopup(e.data().type)},reset:function(){i.setup(),t.dom(".resize-small").hide().siblings().show(),t.dom("i.volume-off").trigger("click"),n.isComputing=!1,n.isUserPaused=!1,n.canUpdateProgress=!1,t.dom("div#elapsedtime").children("span").last().html(t.utils.HHMMSS(n.duration)),t.dom("#video_popup_holder").attr("class","video_popup_class hover"),t.dom(".video_progress").attr("class","video_progress smoothest")},setup:function(){n.total=+n.total,n.elapsed=+n.elapsed,n.progress=+n.progress,n.duration=+n.duration,n.elapsed=n.elapsed>=n.duration||n.elapsed===-1?0:n.elapsed,n.lapsed=n.elapsed,n.start=n.elapsed,n.volume=n.volume?n.volume:100,i.updateTime(n.elapsed,n.lapsed)},updateTime:function(e,i,s,a,o,r,l){e>=0&&(t.dom("div#elapsedtime").children("span").first().css("width",(e/3600>=1?65:45)+"px").html(t.utils.HHMMSS(Math.floor(e))),e=100*e/n.duration,t.dom("#progress-bar-slider").slider("value",e).children("span").first().css("width",e+"%")),i>=0&&(i=n.progress>=100?100:100*i/n.duration,s=t.dom("#progress-bar-slider").children("span.progress_flag"),n.progress>=100?s.css("width","100%").hide():i>=0&&s.css("width",i+"%").show(),i=Math.ceil(i),t.dom("div#procent > span").html((i>=100?100:i)+"%").css("opacity",n.canUpdateProgress?1:.4)),setTimeout(function(){l=t.dom("#video_popup_holder").width(),a=t.dom("#elapsedtime").width(),o=t.dom("#procent").width(),r=l-(a+o)-70,t.dom("#progress-bar-slider").css("width",r+"px")},300)},playing:function(e){if(i.timer||(s[n.type].volume(n.volume?n.volume:100),s[n.type].quality.set(s[n.type].resolution),i.timer=setInterval(s[n.type].states,1e3),t.dom(".icon-play").hide(),t.dom(".icon-pause").show(),t.dom(".video_progress").attr("class","video_progress smoothest"),setTimeout(function(){t.dom("#video_popup_holder").attr("class","video_popup_class")},3e3)),!n.autopause||document.hasFocus()){if(n.elapsed=s[n.type].time(),!n.elapsed)return;n.total+=1,n.canUpdateProgress=n.progress<100&&n.start<=n.lapsed&&n.elapsed>=n.lapsed,n.canUpdateProgress&&(n.lapsed=n.elapsed,e=Math.ceil(n.lapsed),(e%300===0||e>=90*n.duration)&&n.progress<=90&&(n.isComputing=!1,i.compute())),i.updateTime(n.elapsed,n.lapsed)}else s[n.type].pause(),t.dom(".icon-play").show(),t.dom(".icon-pause").hide()},stopped:function(){i.timer&&clearInterval(i.timer),i.timer=void 0,t.dom(".icon-pause").hide(),t.dom(".icon-play").show(),n.isComputing=!1,i.compute(),s[n.type].isEnded()&&(t.dom("#video_popup_holder").toggleClass("hover"),i.updateTime(n.duration,n.start<=n.lapsed?n.duration:-1),t.dom(".video_progress").attr("class","video_progress"))},progress:function(e){t.dom(".video_progress").attr("class","video_progress"),n.elapsed=e*n.duration/100,n.elapsed=n.elapsed>=n.duration?n.duration-3:n.elapsed,n.start=n.elapsed,s[n.type].seek(n.elapsed),i.updateTime(n.elapsed,n.lapsed),t.dom(".progress_flag").children("cite").attr("data-original-title",t.utils.HHMMSS(Math.floor(n.lapsed))),n.progress<90&&n.elapsed>n.lapsed&&t.utils.statusMsg("Forward seek will not record your progress!",!0)},compute:function(){n.progress<100&&!n.isComputing&&(n.isComputing=!0,n.progress=Math.floor(n.lapsed/n.duration*100),i.save())},save:function(e,s){e={elapsed:n.lapsed,duration:n.duration,progress:n.progress,total:n.total,type:n.type},i.origin.children("img").data().video[n.id]=e,n.progress<=100&&(s=i.origin.parents("div.accordion-group:lt(1)").index()+1,s=0===s?1:s,t["challenges-service"].saveProgress(i.origin,{step:"video",value:{status:e,id:n.id},stepIndex:s,callback:function(){n&&(n.isComputing=!1)}}))},close:function(e,a){s[n.type].stop(),i.stopped(),t.dom(".resize-small").trigger("click"),t.dom("#video_popup_holder").trigger("mouseover"),setTimeout(function(){s[n.type].destroy(),n=void 0},500)},getPlayer:function(){return s&&n&&s[n.type]?s[n.type].player:null},savingRate:function(e){switch(e){case e>0&&e<=60:return 50;case e>60&&e<=120:return 25;case e>120&&e<=240:return 12.5;case e>240&&e<=480:return 6.25;case e>480&&e<=840:return 5}},quality:function(e,t){e.parent().attr("class","active").siblings().removeAttr("class").parent().siblings("button").children("span").html(e.data().name),s[n.type].quality.set(e.data().quality)},controls:function(e,a,o){o=a.data.data.action,"play"===o?(t.dom(".icon-play").hide(),t.dom(".icon-pause").show(),n.isUserPaused=!1,s[n.type].play()):"pause"===o?(t.dom(".icon-play").show(),t.dom(".icon-pause").hide(),n.isUserPaused=!0,s[n.type].pause()):"resize-full"===o||"resize-small"===o?i.size(o.replace("resize-","")):o.indexOf("volume-up")!==-1?(s[n.type].mute(),t.dom("#vol-slider").slider("value",0),e.hide().siblings(".icon-volume-off").show(),t.dom(".volume-up").hide(),t.dom(".volume-off").show()):o.indexOf("volume-off")!==-1&&(s[n.type].unMute(),t.dom("#vol-slider").slider("value",n.volume),e.hide().siblings(".icon-volume-up").show(),t.dom(".volume-off").hide(),t.dom(".volume-up").show())},size:function(e){"full"===e?document.documentElement.requestFullscreen?(document.addEventListener("fullscreenchange",i.sizeHandler,!1),document.documentElement.requestFullscreen()):document.documentElement.mozRequestFullScreen?(document.addEventListener("mozfullscreenchange",i.sizeHandler,!1),document.documentElement.mozRequestFullScreen()):document.documentElement.webkitRequestFullscreen&&(document.addEventListener("webkitfullscreenchange",i.sizeHandler,!1),document.documentElement.webkitRequestFullscreen()):document.cancelFullScreen?(document.cancelFullScreen(),document.removeEventListener("fullscreenchange",this,!1)):document.mozCancelFullScreen?(document.mozCancelFullScreen(),document.removeEventListener("mozfullscreenchange",this,!1)):document.webkitCancelFullScreen&&(document.webkitCancelFullScreen(),document.removeEventListener("webkitfullscreenchange",this,!1))},isInFullScreen:function(){return document.mozFullScreenElement&&"object"==typeof document.mozFullScreenElement||document.webkitFullscreenElement&&"object"==typeof document.webkitFullscreenElement||document.fullscreenElement&&"object"==typeof document.fullscreenElement},sizeHandler:function(){i.isInFullScreen()?(t.dom("#controls i.resize-small").show().siblings("i").hide(),setTimeout(function(){t.dom("div#video_popup_holder").animate({"margin-top":0},50,function(){t.dom(window,!0).trigger("resize")}),t.dom("div#video_popup_holder > article").css({height:"88%",width:"auto","margin-bottom":"1%"})},100)):(t.dom("#controls i.resize-full").show().siblings("i").hide(),t.dom("div#video_popup_holder > article").attr("style","overflow:hidden"))},sliders:function(){t.dom("#progress-bar-slider").slider({min:0,max:100,value:0,step:.1,start:function(e,i,a){t.dom(".video_progress").attr("class","video_progress smoother"),s[n.type].pause()},stop:function(e,a,o){o=a.value||0===a.value?a.value:0,t.dom(e.target,!0).children("span").first().css("width",o+"%"),i.progress(o),t.dom(".video_progress").attr("class","video_progress smoothest"),t.dom("#quality").attr("class","dropdown"),s[n.type].play()},slide:function(e,i,a){t.dom(".video_progress").attr("class","video_progress"),s[n.type].pause(),a=i.value||0===i.value?i.value:0,t.dom(e.target,!0).children("span").first().css("width",a+"%")}}),t.dom("#vol-slider").slider({animate:75,min:0,max:100,value:100,step:.1,change:function(e,i){(i.value||0===i.value)&&(0===i.value?(t.dom(e.target,!0).children("span").css("width",0),t.dom(".volume-up").hide(),t.dom(".volume-off").show()):i.value>0&&(t.dom(e.target,!0).children("span").css("width",n.volume+"%"),s[n.type].isMuted()&&(s[n.type].unMute(),t.dom(".volume-off").hide(),t.dom(".volume-up").show())))},slide:function(e,i){n.volume=i.value||0===i.value?i.value:100,t.dom(e.target,!0).children("span").css("width",n.volume),s[n.type].volume(n.volume)}})}},s={youtube:{res:["hd2880","hd2160","hd1440","hd1080","hd720","large","medium","small","auto"],init:function(){this.destroy(),this.player=new YT.Player("video_popup",{width:t.utils.aspectWidth(),height:t.utils.aspectHeight(),playerVars:{autoplay:0,autohide:1,cc_load_policy:0,controls:0,disablekb:0,enablejsapi:1,fs:0,iv_load_policy:3,modestbranding:1,showinfo:0,playsinline:0,rel:0,origin:location.origin},events:{onReady:function(e){s.youtube.load()},onStateChange:function(e){s.youtube.state=e.data,i.interval||s.youtube.states()}}})},destroy:function(){this.player&&(this.player.destroy(),this.player=void 0)},load:function(){this.player.loadVideoById(n.id,this.isEnded()?0:n.elapsed,this.resolution?this.resolution:"auto")},play:function(){this.player&&this.player.playVideo()},pause:function(){this.player&&this.player.pauseVideo()},isEnded:function(){return 0===s.youtube.state},isBuffering:function(){return 3===s.youtube.state},seek:function(e){this.player&&this.player.seekTo(e?e:n.elapsed)},stop:function(){this.player&&this.player.stopVideo()},volume:function(e){this.player&&this.player.setVolume(e)},mute:function(){this.player&&this.player.mute()},unMute:function(){this.player&&this.player.unMute()},isMuted:function(){return!this.player||this.player.isMuted()},time:function(){return this.player?this.player.getCurrentTime():0},quality:{set:function(e){return this.qualities=s.youtube.player.getAvailableQualityLevels(),e&&this.qualities.indexOf(e)!==-1?(this.update(),s.youtube.resolution=e,void s.youtube.player.loadVideoById(n.id,s.youtube.time(),s.youtube.resolution)):void t.dom("#quality > ul").children().last().children("a").trigger("click")},update:function(e,i){for(var n in s.youtube.res)i=t.dom("#quality > ul").children("li:eq("+n+")"),this.qualities.indexOf(s.youtube.res[n])===-1?i.hide():i.show()},qualities:void 0},states:function(){switch(s.youtube.state){case-1:break;case 0:case 2:i.stopped();case 3:break;case 1:i.playing();break;case 5:}}}},t=window.setReference("video-service",i),t.dom(window).on("focus",function(e){n&&n.autopause&&(n.isUserPaused||(t.dom(".icon-play").hide(),t.dom(".icon-pause").show(),s[n.type].play()))}).on("blur",function(e){n&&n.autopause&&(t.dom(".icon-play").show(),t.dom(".icon-pause").hide(),s[n.type].isEnded()&&(n.isUserPaused=!0),s[n.type].pause())}).on("keydown",function(e,t){if(t=e.which||e.keyCode,27===t)return setTimeout(function(){i.isInFullScreen()&&i.size("small")},10),!1}),i.sliders()}(window),function(e,t,i,s){i={answerOptions:["A","B","C","D"],loadedTabs:{steps:!1},isChSubmitted:!1,search:function(e,i,s,n){t.dom("#body").attr("class","row content"),n=e.val().trim(),e.data().type&&"assigned-users"===e.data().type?(t.dom("#"+e.data().mode+"-assign-spinner").show(),t.dom("#"+e.data().mode+"-search-results").html("").hide(),t["common-service"].get("search",{data:JSON.stringify({context:"peers",query:n})},function(i,s,n){if(t.dom("#"+e.data().mode+"-assign-spinner").hide(),t.dom("#"+e.data().mode+"-search-results").html(""),i&&200===i.code&&i.response&&i.data&&Object.keys(i.data).length>0){n=!1;for(var a in i.data)i.data[a]&&t["challenges-create"][e.data().mode+"-usersAssigned"].indexOf(i.data[a].semanticName)===-1&&(n=!0,t.dom("#"+e.data().mode+"-search-results").append('<li handler="click/challenges-create/assignedUsers" data-userid="'+i.data[a].semanticName+'" data-name="'+i.data[a].name+'" data-image="'+i.data[a].image+'" data-type="'+e.data().mode+'"><a><img src="'+(i.data[a].image?t.utils.setImage(i.data[a].image,"=s30"):"/images/AY2.0/user-image.png")+'"><span>'+(i.data[a].name?i.data[a].name:"user")+"</span></a></li>"),s=t.dom("#"+e.data().mode+"-search-results").children("li").last(),s.data(),s.removeAttr("data-userid"),t.setHandler(s));n&&t.dom("#"+e.data().mode+"-search-results").fadeIn()}})):(s=t.utils.getConstraints(t.pageAttr.page),n!==s.query&&(s.query=n,s.offset=0,t.loadBody(s)))},populate:function(e,s,n,a,o){if(200===e.code&&e.response&&(o=!0,e.data.filter&&(e.data.filter!=t.utils.getConstraints(t.pageAttr.page).filter&&(o=!1),delete e.data.filter),200===s.code&&s.response&&o))if(e.data.categoryName)if("challenges"===t.pageAttr.page&&("EL"===window.locale&&"all"===n.category?t.dom("#header-name").html("Todo"):t.dom("#header-name").html(e.data.categoryName)),delete e.data.categoryName,a=Object.keys(e.data),i.is_progress=!1,s.data.is_progress_made||s.data[a[0]]!==-1||(i.is_progress=!0),a.length>0){t.dom("#blank-working-on").attr("style","display : none");for(var r in e.data)e.data[r].type="challenge"===e.data[r].type?"challenge":"group",e.data[r]=i.build(t.templates["single-"+e.data[r].type].clone(!0,!0),e.data[r],"append"),t.dom(".title",!0).tooltip(),s.data[r]&&s.data[r]>0&&i.outerProgress(e.data[r],s.data[r]);i.is_progress&&(t.dom("#challenges-holder").children().first().addClass("takechallenge"),t.dom('<div class="firstchallenge_banner"></div>').prependTo(t.dom("#challenges-holder").children().first()),t.dom("#backdrop").show(),t.dom(".challenges-scope").find(".addoption").addClass("highlight_individual"),t.dom('<div class="addchallege_banner"></div>').prependTo(t.dom(".challenges-scope").find(".addoption"))),Object.keys(e.data).length<20?t.pageAttr[t.utils.getConstraints(t.pageAttr.page).context].canLoad=!1:i.level1||""==i.level1||t.pageAttr[t.utils.getConstraints(t.pageAttr.page).context].canLoad||(t.pageAttr[t.utils.getConstraints(t.pageAttr.page).context].canLoad=!0)}else"challenges"===t.pageAttr.page?"added"!==n.filter||n.query||"all"!==n.category||0!==n.offset?t.dom("#helper-text").html(t.utils.localeContentBuffer("NO_RESULTS")).show():t.dom("#body").attr("class","row empty"):(t.dom("#blank-working-on").children("a").attr("href","/"+t.pageAttr.univ+"/challenges/all"),t.dom("#blank-working-on").attr("style","display : block"));else t.dom("#helper-text").html("Category with name '"+n.category+"' is not available").hide()},build:function(e,i,s,n){if(e.data(),e.data().name=i.simpleName,e.attr("id",i.simpleName),e.find(".badgeName").attr("title",i.name).tooltip(),n=e.find("span.avg-rating").children("span"),i.rating>0?(n.first().ratings({value:i.rating,editable:!1}),n.first().siblings().remove()):n.last().siblings().remove(),"challenge"===i.type?(n=e.children("div").children("div.badge-img").children("a").attr("href","/"+t.pageAttr.univ+"/challenges/all/"+i.simpleName).children("img"),t.utils.setImage(n,i.image),n=n.parent().parent().siblings("div.times-points-social").children("span.points").html(i.points).parent().siblings("h4").children("a.badgeName"),wordbreak.instance().set(n[0],i.name,2,.15*window.innerWidth),n.attr("href","/"+t.pageAttr.univ+"/challenges/all/"+i.simpleName).attr("title",i.name)):"group"===i.type,n=e.children("div").children("div.group-img").find("a").attr("href","/"+t.pageAttr.univ+"/challenges/all/"+i.simpleName).children("img"),t.utils.setImage(n,i.image),n.parents("div.group-img:lt(1)").siblings("div.group-detail").children("h4").children("span.group-num").children("span").html(i.subListLength).parent().siblings("a.badgeName").attr("href","/"+t.pageAttr.univ+"/"+t.pageAttr.page+"/all/"+i.simpleName).attr("title",i.name).html(t.utils.elipses(i.name,"wrap-name","hR")).siblings("span").last().html(i.points),i.isLocked||"peers"===t.pageAttr.page?(e.find("h4,div.badge-img,div.group-img").off(),e.find("a").attr("target","_blank").removeAttr("onclick"),e.find(".badge-menu").remove(),"peers"===t.pageAttr.page&&e.find("div.lock-overlay").remove()):e.find("div.lock-overlay").remove(),"me"===t.pageAttr.page&&e.find(".badge-menu").remove(),"disabled"===i.status&&e.find("div.actions-holder").children("span:eq(1)").html('<div class="hide-icon"></div>').attr("title",t.utils.localeContentBuffer("ENABLE")),i.challenged&&e.find("#sword-red").show(),s)return t.dom("#challenges-holder")[s](e).children().last()},outerProgress:function(e,t,i,s){i||(i=t<=10?"danger":t<=100?"warning":"success"),s=s?s:"fadeIn",t>=100&&e.find("#sword-red").is(":visible")&&(e.find("#sword-red").hide(),e.find("#sword-grey").show()),setTimeout(function(){e.children().children("div.progress")[s]().delay(200).children("div").attr("class","bar bar-"+i).css("width",t+"%")},500)},innerProgress:function(e,s,n,a){if(e){if(s=e<=10?"danger":e<=100?"warning":"success",n=0===e?"hide":"fadeIn",t.dom("#inner-progress").children("div.progress")[n]().delay(200).children("div").attr("class","bar bar-"+s).css("width",(e>100?100:e)+"%").find("span").html((e>100?100:e)+"%"),i.level2?a=i.level2:i.level1&&(a=i.level1),a&&i.outerProgress(a,e,s,n),e>=100)return t.dom("#dropchallenge").hide(),void t.dom("#takechallenge").hide();if(e>=10)return t.dom("#dropchallenge").show(),void t.dom("#takechallenge").hide()}else t.dom("#takechallenge").show(),t.dom("#dropchallenge").hide(),t.dom("#inner-progress").children("div.progress").hide().children("div").attr("class","bar bar-danger").css("width","0%").find("span").html(e+"%");"drafted"===t.utils.getConstraints("challenges").filter&&t.dom("#takechallenge").hide()},showChOImg:function(e,t,i){i?t<100?(e.find("#swrd_grey").hide(),e.find("#swrd_red").show()):(e.find("#swrd_grey").show(),e.find("#swrd_red").hide()):e.find("#swrd_grey,#swrd_red").hide()},rearrange:function(e){t.dom("#popup").modal({backdrop:"static",keyboard:!1}).children("div#popup-blocks").attr("class",e),t["common-service"].popupHandler("show"),i["rearrange-open"]=!0,i["rearrange-offset"]=0,i["rearrange-load"]=!1,i.get_rearrange_ch(i),t.dom(".rearrange_challenge_ul").sortable({revert:300,scrollSpeed:4,opacity:.5,distance:5,start:function(e,t){},stop:function(e,t){},update:function(e,i){var s=i.item.index(),n=$(i.item[0]).attr("ch_name");t.xhr({url:"/rearrange/"+t.pageAttr.univ+"/challenges/all",type:"POST",data:{data:JSON.stringify({index:s,context:"challenges",name:n})},success:function(e){console.log(e)}})}}),t.dom(".rearrange_challenge_ul").disableSelection()},updateRearrange:function(e){i["rearrange-open"]&&t.utils.statusMsg(e.message,!0)},get_rearrange_ch:function(e){e["rearrange-load"]||(e["rearrange-load"]=!0,t.dom(".rearrange-loader-center").show(),0==e["rearrange-offset"]&&(t.dom(".rearrange_challenge_ul").find("li").remove(),t.dom(".rearrange_number").find("li").remove()),t.xhr({url:"/load/"+t.pageAttr.univ+"/challenges",type:"GET",data:{view:"body",context:"challenges",category:"all",filter:"added",query:"",range:"40",offset:e["rearrange-offset"]},success:function(i){t.dom(".rearrange-loader-center").hide();var s=i.data;for(var n in s)if(s[n].name){var a=t.templates.challenge_num.clone(!0,!0);t.dom(".rearrange_number").append(a);var o=t.templates.rearrange_challenge_temp.clone(!0,!0);o.attr("ch_name",s[n].simpleName),o.css("display","block"),"group"===s[n].type&&o.find("img.challenge_image").css("border-radius","10%"),t.utils.setImage(o.find(".challenge_image"),s[n].image),o.find(".challenge_name").html(s[n].name),t.dom(".rearrange_challenge_ul").append(o)}e["rearrange-offset"]=e["rearrange-offset"]+40,e["rearrange-load"]=!1}}))},open:function(e,s,n,a){return i.isChSubmitted=!1,i.loadedTabs.steps=!1,i.nextChallenge=void 0,i.is_progress&&(e.parents("div.parent:lt(1)").removeClass("takechallenge"),e.parents("div.parent:lt(1)").find("div.firstchallenge_banner").remove(),t.dom(".challenges-scope").find(".addoption").removeClass("highlight_individual"),t.dom(".challenges-scope").find(".addoption > .addchallege_banner").remove(),t.dom("#backdrop").hide(),i.is_progress=!1),t["challenges-create"]&&t["challenges-create"].courseon?void e.parents("div.parent:lt(1)").find("div.addbadge").trigger("click"):(t.pageAttr[t.utils.getConstraints(t.pageAttr.page).context].canLoad=!1,e&&(e=e.parents(".parent:lt(1)"),i.level1?(i.level2=e,t.dom("#line-loader").parent().attr("class","breadcrumb level1").children("li.level2").attr("class","level2").html("")):(i.level1=e,t.dom("#line-loader").parent().attr("class","breadcrumb").children("li.level1, li.level2").html(""))),n=n?n:e.data().name,i.isChSubmitted=!1,t.pageAttr.level1=n,i.thisName=n,t.dom("#line-loader").css("display","inline-block"),t.dom("#breadcrumb-options, #breadcrumb-options-divider").hide(),t.dom("#body").attr("class","row breadcrumb"),t.dom("div.details-holder").attr("class","span12 details-holder"),n=t.pageAttr.level2?t.pageAttr.level2:n,t.dom("#"+t.pageAttr.page+"-sidebar").find("li."+t.utils.getConstraints(t.pageAttr.page).category).addClass("added active").siblings().removeClass("active").removeClass("added"),void i.get(n,a))},get:function(e,s){i.nextChallenge&&(i.thisName=i.nextChallenge,e=i.nextChallenge,i.isChSubmitted=!1),t.dom(".badge-detail").addClass("loader"),t.dom(".badge-detail").find("#chinnername,#co-name").html(""),t["common-service"].get("challenge",{data:JSON.stringify({name:e})},function(s,n,a,o,r){200===s.code&&s.response&&(n=s.data[s.data.name],o=t.utils.elipses(n.description,"other","hD").trim(),t.dom("div.details-holder").attr("class","span12 details-holder "+n.type),t.dom(".badge-detail").removeClass("loader"),"disabled"===n.status||"deleted"===n.status?(t.dom("#inner-edit").children(".actions-holder").children("span:eq(1)").html('<div class="hide-icon"></div>').attr("title",t.utils.localeContentBuffer("ENABLE")),t.dom("div.disabled_challenge").show(),t.dom("div.disabled_challenge > p > span.status").html(n.status),t.dom("div.disabled_challenge > p > span.creator").html(n.creator.name),t.dom("div.disabled_challenge > p > span.date").html(t.utils.ms2ts(n.updatedOn))):t.dom("div.disabled_challenge").hide(),t.history.isPopTriggered||"challenges"!==t.pageAttr.page&&"me"!==t.pageAttr.page||(n.groupName&&"null"!=n.groupName?t.history.push({},n.name,"/"+t.pageAttr.univ+"/"+t.pageAttr.page+"/"+t.utils.getConstraints(t.pageAttr.page).category+"/"+t.utils.getSemanticName(n.groupName)+"/"+n.simpleName):t.history.push({},n.name,"/"+t.pageAttr.univ+"/"+t.pageAttr.page+"/"+t.utils.getConstraints(t.pageAttr.page).category+"/"+n.simpleName)),t.history.isPopTriggered=!1,"challenge"===n.type?(t.utils.setImage(t.dom("#challengeImage"),n.image),t.dom("#chinnername").html(n.name),t.dom("#chpoints").html(n.points),t.dom("#chcreator").children("div").children("div.creator-name").children("span.creator-name").html(' <a target="_blank" href="/'+t.pageAttr.univ+"/peers/all/"+n.creator.simpleName+'">'+n.creator.name+"</a>").parent().siblings("div#challenge-date").children("span.challenge-date").html(t.utils.ms2ts(n.date)),o?(t.dom("#chdescription").show(),t.dom("#chdescription").html(n.description.replace(//g," "))):t.dom("#chdescription").hide(),t.dom(".ch_chatIcon").data("creator",n.creator.name),t.dom(".ch_chatIcon").data("chname",n.simpleName),t.dom(".ch_chatIcon").data(),isAdmin&&(t.dom("#inner-edit").data().name=n.simpleName,o=t.dom("#inner-edit").children(".actions-holder").children("span:eq(1)"),"disabled"===n.status?o.html('<div class="hide-icon"></div>').attr("data-original-title",t.utils.localeContentBuffer("ENABLE")):o.html('<div class="show-icon"></div>').attr("data-original-title",t.utils.localeContentBuffer("DISABLE"))),"me"===t.pageAttr.page?t.dom("#breadcrumb-options").find(".badge-menu").hide():t.dom("#breadcrumb-options").find(".badge-menu").show(),n.rating>0&&t.dom("#chavgrating").ratings({value:n.rating,editable:!1}),t.dom("#takechallenge").hide(),t.dom("#dropchallenge").hide(),t.dom("#inner-progress > div.progress").hide(),t.dom("#breadcrumb-options, #breadcrumb-options-divider").show(),i.nextChallenge&&(i.loadedTabs.steps=!1),t.dom("ul#ch-tabs-headings li").first().children("a").trigger("click")):"group"===n.type&&(t.utils.setImage(t.dom("#group-image"),n.image),t.dom("#co-name").html(n.name),o?(t.dom("#co-description").parent(".challenge-badge").removeClass("no_description"),t.dom("#co-description").html(n.description.replace(//g," "))):(t.dom("#co-description").parent(".challenge-badge").addClass("no_description"),t.dom("#co-description").html("")),t.dom("#co-points").html(n.points),t.dom("#grpcreator").children("div").children("div.creator-name").children("span.creator-name").html('<a target="_blank" href="/'+t.pageAttr.univ+"/peers/all/"+n.creator.simpleName+'">'+n.creator.name+"</a>").parent().siblings("div#challenge-date").children("span.challenge-date").html(t.utils.ms2ts(n.date)).parent().siblings("div#challenges-count").children("span.challenges-count").html(n.subListLength),t.dom("#ch-list").html(""),t.dom(".group_chatIcon").data("creator",n.creator.name),t.dom(".group_chatIcon").data("chname",n.simpleName),r=[],r.push(function(i){t.xhr({url:"/get/"+t.pageAttr.univ+"/challenge",type:"GET",data:{data:JSON.stringify({name:e,context:"group"})},success:function(e){t.deferred.done(i,e,!0)}})}),r.push(function(i){t.xhr({url:"/get/"+t.pageAttr.univ+"/progress",type:"GET",data:{data:JSON.stringify({name:e,context:"group"})},success:function(e){t.deferred.done(i,e,!0)}})}),t.deferred.init(r,function(e,i,s){if(e=Array.prototype.slice.call(arguments),e[0].data&&e[1].data)for(var o in e[1].data)e[0].data[o]&&(a=t.templates["group-in-challenge"].clone(!0,!0),e[1].data[o]>=10&&(i=e[1].data[o]<=10?"danger":e[1].data[o]<=100?"warning":"success",a.find("div.group-progress").children("div").show().children("div.bar").attr("class","bar bar-"+i).css("width",e[1].data[o]+"%")),s=a.children("div").last().children("div").first().children("div.group-badge-img").children("a").attr("href","/"+t.pageAttr.univ+"/"+t.pageAttr.page+"/all/"+n.simpleName+"/"+e[0].data[o].simpleName).children("img"),t.utils.setImage(s,e[0].data[o].image),s.parent().parent().parent().siblings("div").children("h3").children("span").children("span").html(e[0].data[o].points).parent().siblings("a").attr("href","/"+t.pageAttr.univ+"/"+t.pageAttr.page+"/all/"+n.simpleName+"/"+e[0].data[o].simpleName).attr("title",e[0].data[o].name).children("span").html(t.utils.elipses(e[0].data[o].name,"header","hR")).parent().parent().siblings("div#inner-co-desc").html(e[0].data[o].description.replace(//g," ")),a.data(),a.data().name=e[0].data[o].simpleName,a.data().type="group",a.children("div.actions-holder").children("span").tooltip().removeClass("title"),"disabled"===e[0].data[o].status&&(s=a.children("div.actions-holder").children("span:eq(1)"),s.html('<div class="hide-icon"></div>').attr("data-original-title",t.utils.localeContentBuffer("ENABLE")),a.children("div.group-enclosure").css("opacity",".4").find("a").off().removeAttr("href").css("cursor","default").children().css("cursor","default").off()),t.dom("#ch-list").append(a))})),n.groupName&&null!=n.groupName?(o=t.dom("#line-loader").css("display","none").parent().attr("class","breadcrumb level1 level2"),o.children("li.level1").attr("class","level1").html('<a handler="click/challenges-service/backToGroup">'+n.groupName+'</a><span class="divider"> / </span>').siblings("li.level2").attr("class","active level2").html(n.name),t.setHandler(o.children("li.level1").children("a"))):o=t.dom("#line-loader").css("display","none").parent().attr("class","breadcrumb level1").children("li.level1").attr("class","active level1").html(n.name).siblings("li.level2").html(""),t.dom("#body").attr("class","row details"),i.nextChallenge=void 0)})},backToGroup:function(e,s){t.utils.iframeReload(),t.dom("div.details-holder").attr("class","span12 details-holder group"),
s=t.dom("#line-loader").css("display","none").parent().attr("class","breadcrumb level1").children("li.level1"),s.attr("class","active level1").html(s.children("a").html()).siblings("li.level2").html(""),i.level1&&t.history.push({},s.html(),"/"+t.pageAttr.univ+"/challenges/all/"+i.level1.data().name),t.pageAttr.level2=t.utils.UNDEFINED,t[t.pageAttr.page+"-service"].level2?($("html, body").animate({scrollTop:t[t.pageAttr.page+"-service"].level2.offset().top-t[t.pageAttr.page+"-service"].level2.height()/2},1e-5),t[t.pageAttr.page+"-service"].level2=t.utils.UNDEFINED):i.get(t.utils.getSemanticName(e.html()),s),t.dom("#breadcrumb-options, #breadcrumb-options-divider").hide(),i.loadedTabs.steps=!1},steps:function(e,s){i.loadedTabs.steps||(i.loadedTabs.steps=!0,t.pageAttr[t.utils.getConstraints(t.pageAttr.page).context].canLoad=!1,t.dom("#chsteps,#comments_content").html(""),t.dom(".tabbable").attr("class","tabbable loader"),t["common-service"].get("progress",{data:JSON.stringify({context:"challenge",name:i.thisName,filter:t.utils.getConstraints("challenges").filter})},function(e,s,n,a,o,r,l,d,c,h){if(200===e.code){if(t.dom(".tabbable").attr("class","tabbable"),i.showChOImg($(".details-holder").find(".badge-detail"),e.data.percent,e.data.isChallenged),c=1,e.data.progress=e.data.progress?JSON.parse(e.data.progress):{},i.innerProgress(e.data.percent),e.data.details?"string"==typeof e.data.details&&(e.data.details=JSON.parse(e.data.details)):e.data.details={},e.data.attachments){e.data.attachments=JSON.parse(e.data.attachments);for(var u in e.data.attachments)e.data.details[+u+1]||(e.data.details[+u+1]={}),e.data.details[+u+1].attachments=e.data.attachments[u]}if(e.data.details){s=e.data.details;var p=0;if(s)for(var f in s)if(c++,n=s[f]){var m="icon-tasks",g=0,v=t.utils.localeContentBuffer("EXERCISES"),b=!1;n.instructions&&(v=n.instructions,b=!0,delete n.instructions);for(var y in n)if(a=n[y]){l=t.templates[y+"-step"].clone(!0,!0),r=e.data.progress[f]?e.data.progress[f]:{},"embed"===y?a=JSON.parse(a):"attachments"===y?(m="fa fa-file-text-o",b||(v=t.utils.localeContentBuffer("REFERENCES")),e.data.percent>0&&(g=100)):"questions"===y&&(m="fa fa-list-ol"),0===Object.keys(a).length&&(b||(m="fa fa-exclamation-triangle",l.find("span.video-play").addClass("error"),l.find("h4").addClass("error"),l.find("h4").children("a.report-here").addClass("handler"),v=e.data.msg+'<a class="report-here" handler="click/common-service/openPopup" data-type="user-feedback" style="text-decoration:underline;">Challenge creator </a>'));for(var _,w,x=0,C=Object.keys(a),k=C.length;x<k;x++)if("embed"===y&&(o=r.embed?r.embed:[],b||(v=t.utils.localeContentBuffer("EMBED_CONTENT")),m="fa fa-code",0===a[x].indexOf("<")?(_=a[x],w=l.find("div.single-attachment-enclosure")):t.utils.isValidURL(a[x])&&(_=t.utils.isValidVideoURL(a[x]),w=l.find("div.single-attachment-enclosure").children("a"),_?(b||(v=t.utils.localeContentBuffer("WATCH_VIDEO")),m="youtube"===_.type?"icon-youtube-play":"fa fa-vimeo-square",_="Play"):(_=a[x].split("/"),_=_[_.length-1]?_[_.length-1]:_[_.length-2],_=_.replace(/-/g," ").toCamelCase(),b||(v=t.utils.localeContentBuffer("A_WEBPAGE")),m="fa fa-newspaper-o")),w.html(_).attr({"data-mime":"embed","data-name":_,"data-url":a[x],"data-download":a[x]}).data()),"attachments"===y)o=a[C[x]],l.children("div.accordion-body").children().children().append(i.attachFile(i.thisName,o,"attachments-file",f-1,parseInt(C[x]),"attach"));else if("video"===y)o=a[C[x]],r.video&&(g=r.video[C[x]].progress),m="youtube"===o.type?"icon-youtube-play":"fa fa-vimeo-square",v=v&&"Exercises"!=v?v:"Watch "+o.title+" - "+t.utils.HHMMSS(o.duration),l.find("p.instructions").remove(),l.children("div.accordion-body").children().children().children("div").children("img").attr("src",o.image).attr({"data-videoid":C[x],"data-video":JSON.stringify(r.video)}).data(),l.find("img").removeAttr("data-videoid data-video");else if("questions"===y)o=JSON.parse(a[C[x]]),r.questions&&(Object.keys(r.questions).length===k?g=100:Object.keys(r.questions).length>0&&(g=50)),d=t.templates["single-question"].clone(!0,!0),d.children("div.q").children("span").html(C[x]+".").siblings("p").html(o.question),d.children("div.a").children("span").each(function(e){e=t.dom(this,!0),r.questions&&r.questions[C[x]]&&r.questions[C[x]]===e.data().option&&e.attr("class","selected"),o["ans-"+e.data().option]&&o["ans-"+e.data().option].trim().length>0?e.find("p").html(o["ans-"+e.data().option]):e.remove()}),l.children("div.accordion-body").children().append(d);else if("require-attachments"===y){o=r["require-attachments"]?r["require-attachments"]:[],o&&Object.keys(o).length>0&&(g=100),b||(v=t.utils.localeContentBuffer("UPLOAD_ATTACHMENT")),m="fa fa-paperclip",d=t.templates["require-attachments"].clone(!0,!0),e.data.percent>=100&&d.find("div.more-attachments").remove();for(var S=0,D=o.length;S<D;S++)d.children("div.attachments-holder").append(i.attachFile(i.thisName,o[S],"require-attachments-file",f-1,parseInt(S),"require"));if("all-files"!==a.type){d.find(".more-attachments").addClass("handler");var T="";a.type.indexOf("image-only")!=-1&&(T="image/*"),a.type.indexOf("pdf-only")!=-1&&(T&&(T+=","),T+="application/pdf"),a.type.indexOf("msword-only")!=-1&&(T&&(T+=","),T+="application/msword, application/vnd.openxmlformats-officedocument.wordprocessingml.document"),d.find(".more-attachments").attr("accept",T)}t.setHandler(d.find(".more-attachments")),l.children("div.accordion-body").children().append(d)}l=i.configAccordion(null,++p,g,m,v,l),t.dom("#chsteps").append(l),t.setHandler(l.find("h4").children("a.report-here"))}}}if(e.data.components){if(e.data.components.indexOf("review")!==-1){l=i.configAccordion("review-step",c);var O="",A=0,M='<span class="ex-num">'+c+"</span>",E={value:0,callback:i.saveRating};e.data.review&&(O=e.data.review.message?e.data.review.message:"",A=e.data.review.value?+e.data.review.value:0,M=""!==O?A>0?'<span class="ex-num complete-num"><i class="icon-ok"></i></span>':'<span class="ex-num pending-num">&bull;&bull;&bull;</span>':""===O&&A>0?'<span class="ex-num pending-num">&bull;&bull;&bull;</span>':'<span class="ex-num">'+c+"</span>",E=e.data.percent>=100?{value:A,editable:!1}:{value:A,callback:i.saveRating}),l.children("div.accordion-heading").children().children("h4").html(M+'<i class="icon-star"></i> Review this challenge'),l.children("div.accordion-body").find("textarea.edit-review").val(O).removeAttr("disabled").siblings("h5").children("div").ratings(E),e.data.percent>=100&&l.children("div.accordion-body").find("div").css("cursor","not-allowed").find("textarea").attr("disabled","disabled"),t.dom("#chsteps").append(l),c++}e.data.components.indexOf("summary")!==-1&&(l=i.configAccordion("summary-step",c),l.children("div.accordion-heading").children().children("h4").html((e.data.content?'<span class="ex-num complete-num"><i class="icon-ok"></i></span>':'<span class="ex-num">'+c+"</span>")+'<i class="icon-pencil"></i>'+t.utils.localeContentBuffer("QUICK_SUMMARY")),e.data.content&&l.children("div.accordion-body").children().find("textarea").val(e.data.content),e.data.percent>=100&&l.children("div.accordion-body").find("textarea").attr("disabled",!0),t.dom("#chsteps").append(l),c++)}e.data.percent<100?(t.dom("#chsteps").append(i.configAccordion("submit-step",c,100,"icon-hand-right","")),e.data.percent>=10&&t.dom("#chsteps").children("div.accordion-group").find("span.issue_submission").show()):100===e.data.percent?t.dom("#chsteps").append(i.configAccordion("submitted-step",c,100,"icon-hand-right",t.utils.localeContentBuffer("YOUR_REQUEST_SENT_ON")+' <span style="font-size: 12px;">'+t.utils.ms2ts(e.data.requestDate)+"</span> ")):e.data.percent>100&&(e.data.assignee=e.data.assignee?JSON.parse(e.data.assignee):"",t.dom("#chsteps").append(i.configAccordion("submitted-step",c,100,"icon-hand-right",t.utils.localeContentBuffer("REQUEST_APPROVED")+" "+(e.data.assignee?t.utils.localeContentBuffer("BY")+'  <a target="_blank" href="/'+t.pageAttr.univ+"/peers/all/"+e.data.assignee.simpleName+'" style="">'+e.data.assignee.name+"</a>":"")+" "+String(t.utils.localeContentBuffer("ON")).toLowerCase()+"  <span>"+t.utils.ms2ts(e.data.approveDate)+"</span>")))}else t.dom("#chsteps").find("textarea.edit-review").removeAttr("disabled");i.loadedTabs.ratings=!1,t.dom("#ch-tabs-headings").find(".reviews").trigger("click")}))},attachFile:function(e,s,n,a,o,r,l,d,c,h){return d=t.templates[n].clone(!0,!0),"mp4"===s.mime||"avi"===s.mime||"mov"===s.mime||"m4v"===s.mime||"wmv"===s.mime?(d.find("video").attr({src:location.origin+"/"+t.pageAttr.univ+"/serve/"+e+"/"+r+"-"+(l?l:userSemantic)+"-"+a+"-"+o+"."+s.mime,type:s["original-mime"]}).siblings("span.single-attachment-name").html(s.name),d.find("a").remove(),d.find("audio").parent().remove()):"mp3"===s.mime?(d.find("audio").attr({src:location.origin+"/"+t.pageAttr.univ+"/serve/"+e+"/"+r+"-"+(l?l:userSemantic)+"-"+a+"-"+o+"."+s.mime,type:s["original-mime"]}).siblings("span.single-attachment-name").html(s.name),d.find("a").remove(),d.find("video").parent().remove()):(c=location.origin+"/"+t.pageAttr.univ+"/serve/"+e+"/"+r+"-"+(l?l:userSemantic)+"-"+a+"-"+o+"."+s.mime,s["original-mime"]=s["original-mime"]?s["original-mime"]:"",d.children("a").first().attr({"data-mime":s["original-mime"],"data-name":s.name,"data-url":i.formViewerURL(c,s["original-mime"]),"data-download":c}).children("span.single-attachment-name").html(s.name).parent().find("i").attr("class","fa fa-file-"+s.mime+"-o"),d.children("a").first().data(),d.children("a").first().removeAttr("data-mime data-name data-url data-download"),d.children("a").last().attr("href",c+"?mode=download"),d.find("video").parent().remove(),d.find("audio").parent().remove()),d},formViewerURL:function(e,i){return t.utils.msMimeTypes.indexOf(i)!=-1?e="https://view.officeapps.live.com/op/embed.aspx?src="+e+"&embedded=true":i.indexOf("image")===-1&&i.indexOf("pdf")===-1&&(e="https://docs.google.com/gview?url="+e+"&embedded=true"),e},openFiles:function(e,i){t.dom("#file-loader").show(),t.dom("#file-viewer-name").html(e.data().name),t.dom("#file_viewer").children().children("object").remove(),t.dom("#file_viewer").children().children("img").remove(),t.dom("#file_viewer").children().children("a.file-download").remove(),e.data().mime.indexOf("image")===-1?t.utils.msMimeTypes.indexOf(e.data().mime)!=-1?t.dom("#file_viewer").find(".overlay_container").append('<iframe style="width:100%;height:95%;" src="'+e.data().url+'"></iframe>'):(i='document.getElementById("file-loader").style.display="none";this.removeAttribute("onerror");this.removeAttribute("onload"); ',t.dom("#file_viewer").find(".overlay_container").append('<a class="file-download" href="'+e.data().download+'?mode=download" download><i class="fa fa-download" aria-hidden="true"></i></a><object onload='+i+"onerror="+i+'style="width:100%;height:100%;" type="'+e.data().mime+'" name="'+e.data().name+'" data="'+e.data().url+'" style="width:100%;height:100%;"><iframe style="width:100%;height:100%;" src="'+e.data().url+'"></iframe></object>')):t.dom("#file_viewer").find(".overlay_container").append('<img onload=\'document.getElementById("file-loader").style.display="none";\' style="max-width:100%;max-height:100vh;" src="'+e.data().url+'"/>'),t.dom("#file_viewer").show()},configAccordion:function(e,i,s,n,a,o){return e&&(o=t.templates[e].clone(!0,!0)),o.children("div.accordion-body").attr("id","collapse"+i),o.children().children().children("h4").html((100===s?'<span class="ex-num complete-num"><i class="icon-ok"></i></span>':s>0?'<span class="ex-num pending-num">&bull;&bull;&bull;</span>':'<span class="ex-num">'+i+"</span>")+'<i class="'+n+'"></i> '+a),"submitted-step"!==e&&o.children("div.accordion-heading").attr("class","accordion-heading accordion"+i).children("a.accordion-toggle").attr({"data-parent":"#accordion"+i,href:"#collapse"+i}),o},action:function(e,s){e.hide().siblings("span").show(),t["common-service"].get(s.data.data.status,{data:JSON.stringify({context:"challenge"})},function(e){"start"===s.data.data.status?(i.innerProgress(10),i.loadedTabs.steps=!1,i.steps()):(i.innerProgress(0),i.loadedTabs.steps=!1,i.steps())})},saveRating:function(e,s,n,a){a=n.parents("span.rater:lt(1)").attr("class").indexOf("review_tab")!=-1?t.dom("#chsteps").find(".rater"):t.dom(".current_review").find(".rater"),$(a.data("value",s)).trigger("mouseout"),i.saveProgress(n,{step:"rating",value:s,canShow:!0})},stepState:function(e,t,i){"review"!==t&&"summary"!==t||!e.is(":focus")?"video"===t&&i>=90&&(i=100):i=50,e=e.parents("div.accordion-group:lt(1)"),e.children("div.accordion-heading").find("h4 > span").replaceWith(100===i?'<span class="ex-num complete-num"><i class="icon-ok"></i></span>':i>0?'<span class="ex-num pending-num">&bull;&bull;&bull;</span>':'<span class="ex-num">'+(e.index()+1)+"</span>")},progress:function(e,s,n,a){if(n=s.data.data.step,"qa"===n&&e.attr("class","selected").siblings("span").attr("class",""),"review"===n||"summary"===n){if("keyup"===s.type||"focus"===s.type)return e.removeClass("error"),void i.stepState(e,n,50);"blur"===s.type&&(""!==e.val().trim()?"review"===n?(e.attr("class").indexOf("summary")!=-1?t.dom("#comments_content").find("li.current_review").find("textarea.edit-review").val(e.val()):e.attr("id")&&"review_tab"===e.attr("id")&&t.dom("#chsteps").find("textarea.edit-review.first").attr("class","summary edit-review first").val(e.val()).trigger("keyup"),e.siblings().find("i.icon-star").length>0?i.stepState(e,n,100):i.stepState(e,n,50)):"summary"===n&&i.stepState(e,n,100):"review"===n&&e.siblings().find("i.icon-star").length>0?i.stepState(e,n,50):"review"!==n&&"summary"!==n||i.stepState(e,n,0))}"review"===n||"summary"===n||"review_content"===n?a={step:"review_content"===n?"review":n,value:e.val().trim(),canShow:"review_content"===n}:"qa"===n&&(e.attr("class","selected").siblings("span").attr("class",""),e.parents("div.qa:lt(1)").children("div.q").css("background","none"),a={step:n,value:e.data().option,qaIndex:e.parents("div.qa:lt(1)").index()+1,stepIndex:e.parents("div.accordion-group:lt(1)").index()+1}),i.saveProgress(e,a)},reviewProgress:function(e,t,s,n,a){"edit-review-btn"===e.attr("id")?(e.parents().find("li.current_review:lt(1)").find("textarea.edit-review").val(e.parents().find("li.current_review:lt(1)").find("span.display-review").html().replace(/<br\s*[\/]?>/gi,"\n")),e.parents().find("li.current_review:lt(1)").find("textarea.edit-review").attr("class","edit-review first").removeAttr("disabled").focus(),e.parents().find("li.current_review:lt(1)").find("div#submit_comment").attr("class","my-review rep_msg_content edit"),e.parents().find("li.current_review:lt(1)").find(".ratainglikes").hide(),e.siblings("button#save-review-btn").html("Save Review"),e.hide().siblings().show()):"hide-review"===e.attr("id")?(e.parents().find("li.current_review:lt(1)").find("textarea.edit-review").attr("class","edit-review").attr("disabled","disabled"),e.parents().find("li.current_review:lt(1)").find("div#submit_comment").attr("class","my-review rep_msg_content"),e.parents().find("li.current_review:lt(1)").find(".ratainglikes").show(),e.siblings("button#edit-review-btn").show().siblings().hide()):"save-review-btn"===e.attr("id")&&i.validateReview(e.parents().find("li.current_review:lt(1)").find("textarea.edit-review"),e.parents().find("li.current_review:lt(1)").find("#rating-value"),!0)&&(e.parents().find("li.current_review:lt(1)").find("textarea.edit-review").attr("disabled","disabled"),e.html('<i class="review-process-icon icon-spinner icon-spin" style=" float: left;display: block;"></i>Saving'),i.progress(e.parents().find("li.current_review:lt(1)").find("textarea.edit-review"),{data:{data:{step:"review_content"}}}))},saveProgress:function(e,s){t["common-service"].post("progress",{type:"challenge",data:JSON.stringify(s)},function(t,n){200===t.code&&t.response?(t.data&&"review"===s.step&&s.canShow&&(t.data[window.userSemantic].me=!0,i.buildRatings(t.data)),i.innerProgress(t.data.progress),n=0,"summary"===s.step&&s.value?n=100:"review"===s.step?e.attr("id")&&"review_tab"===e.attr("id")&&s.canShow?e.parents().find("li.current_review:lt(1)").find("div#submit_comment").attr("class","my-review rep_msg_content"):(n=100,""!==e.val().trim()?n=0==e.siblings().find("#ratings").find(".icon-star").length?50:100:""===e.val().trim()&&(n=0==e.siblings().find("#ratings").find(".icon-star").length?0:50)):"rating"===s.step&&s.value>0?n=e.parents("h5:lt(1)").siblings("textarea.edit-review").val()&&""!==e.parents("h5:lt(1)").siblings("textarea.edit-review").val().trim()?100:50:"qa"===s.step?(t.data.progress<100&&(n=50),e.parents("div.accordion-inner:lt(1)").find("div.q").length===e.parents("div.accordion-inner:lt(1)").find("div.a > span.selected").length&&(n=100)):"video"===s.step&&(n=s.value.status.progress),i.stepState(e,s.step,n)):t.response&&!t.response&&(i.isChSubmitted=!1)})},validateReview:function(e,i,s,n,a){return n=e.val().trim(),a=i.find(".icon-star").length,0==a?(s=!1,t.utils.statusMsg(t.utils.localeContentBuffer("VALID_RATING"),!0),i.find("#ratings").attr("class","rater error")):""===n&&(s=!1,t.utils.statusMsg(t.utils.localeContentBuffer("VALID_REVIEW"),!0),e.addClass("error").focus()),s},validateProgress:function(e,s,n){if(t.utils.iframeReload(),!i.isChSubmitted){if(e.parents("div#chsteps:lt(1)").find("textarea.summary").length>0&&""===e.parents("div#chsteps:lt(1)").find("textarea.summary").val().trim())return t.utils.statusMsg(t.utils.localeContentBuffer("VALID_SUMMARY"),!0),void e.parents("div#chsteps:lt(1)").find("textarea.summary").focus();if(!(e.parents("div#chsteps:lt(1)").find(".edit-review").length>0)||i.validateReview(e.parents("div#chsteps:lt(1)").find(".edit-review"),e.parents("div#chsteps:lt(1)").find("#ratings"),!0)){if(n={review:e.parents("div#chsteps:lt(1)").find(".edit-review").val(),rating:e.parents("div#chsteps:lt(1)").find("#ratings").find(".icon-star").length},e.hasClass("issue")){if(n=t.dom("#challenge-issue").val().trim(),!n)return void t.utils.statusMsg(t.utils.localeContentBuffer("ISSUE_FACED"),!0);n={"issue-content":n,review:t.dom(".edit-review").val(),rating:e.parents("div#chsteps:lt(1)").find("#ratings").find(".icon-star").length},t.dom("#challenge-issue").val(""),t.dom("#issue-popup").find(".close").trigger("click")}else e.find(".submit-process-icon").show(),e.find(".sub_approval_txt").html(t.utils.localeContentBuffer("SENDING_REQUEST")),e.attr("disabled",!0),e.parents("div#chsteps:lt(1)").find(".edit-review,.summary").css("cursor","not-allowed").attr("disabled","disabled"),i.isChSubmitted=!0;for(var a=!0,o=t.dom("#chsteps").children(),r={},l={},d=0;d<o.length;d++){var c=$(o[d]).find(".qa").find(".a"),h=$(o[d]).find(".video-thumb");if(c){for(var u={},p={},f=0;f<c.length;f++)$(c[f]).children("span.selected").size()>0||($(c[f]).prev().css("background","#F4E3E4"),1==a&&$("html, body").animate({scrollTop:$(c[f]).prev().offset().top-$(c[f]).parent().height()/2},1e-5),a=!1),$(c[f]).children("span.selected").data()&&(u[f+1]=$(c[f]).children("span.selected").data().option);$.isEmptyObject(u)||(p.questions=u,r[d+1]=p)}if(!a)return i.isChSubmitted=!1,t.utils.statusMsg(t.utils.localeContentBuffer("ANSWER_QUESTION"),!0),e.find(".submit-process-icon").hide(),e.find(".sub_approval_txt").html(t.utils.localeContentBuffer("SUBMIT_FOR_APPROVAL")),e.parents("div#chsteps:lt(1)").find(".edit-review").removeAttr("disabled"),void e.attr("disabled",!1);0!=h.length&&Object.keys(h.data()).length>0&&(h.data().video[h.data().videoid].id&&delete h.data().video[h.data().videoid].id,l[d+1]={video:h.data().video})}n.videoStep=l,n.questions=r,t["common-service"].post("submit",{type:"challenge",data:JSON.stringify(n)},function(s,a){if(e.attr("disabled",!1),t.utils.statusMsg(s.msg,!0),200===s.code&&s.response)s.data.is_progress_made||setTimeout(function(){t.dom(gridsetup).find(".close").on("click",function(){t.dom(gridsetup).modal("hide")}),t.dom(gridsetup).find(".approve_grid").insertBefore(t.dom(gridsetup).find(".peers_grid")),t.dom(gridsetup).modal("show")},1e3),s.data.isAutoApprove?(i.innerProgress(200),+s.data.points!==+t.dom(".overall_points > span").html()&&t.utils.counter(t.dom(".overall_points > span"),t.dom(".overall_points > span").html(),s.data.points),n=t.templates["submitted-step"].clone(!0,!0),n.find(".display_message").html(s.msg),t.dom("div#chsteps").children("div.accordion-group").last().replaceWith(n)):(i.innerProgress(100),t.dom("div#chsteps").children("div.accordion-group").last().replaceWith(t.templates["submitted-step"].clone(!0,!0))),s.data["next-challenge"]&&(t.dom("div#chsteps").find(".display_message").parent().append("<span class='next-challenge handler' data-name='"+t.utils.getSemanticName(s.data["next-challenge"])+"' handler='click/challenges-service/get'><a>Next</a><i class='fa fa-arrow-right'></i></span>"),n=t.dom("div#chsteps").find(".next-challenge"),i.nextChallenge=t.utils.getSemanticName(s.data["next-challenge"]),n.attr("data-name",s.data["next-challenge"]),n.data(),n.removeAttr("data-name"),t.setHandler(n)),s.data[window.userSemantic]&&s.data[window.userSemantic].canShow&&i.buildRatings(s.data),n={},n.category="Challenge Requested",n.action=univName,n.label=e.parents("#challenge-details:lt(1)").find("span#chinnername").html()+"-"+curr_user_email,n.value=1,t.utils.pushGA(n);else if(i.isChSubmitted=!1,e.find(".submit-process-icon").hide(),e.find(".sub_approval_txt").html(t.utils.localeContentBuffer("SUBMIT_FOR_APPROVAL")),e.parents("div#chsteps:lt(1)").find(".edit-review,.summary").removeAttr("disabled"),"rate"===s.status)t.dom(".tab-pane.active").find("#ratings").focus(),t.dom(".tab-pane.active").find("#ratings").attr("class","rater error").fadeIn("500");else if("incorrect"===s.status){var o=null;a=JSON.parse(s.data.result);for(var r in a)for(var l in a[r])0===a[r][l]||a[r][l]===-1?(null==o&&(o=t.dom("#chsteps").children("div.accordion-group:eq("+(r-1)+")").children("div.accordion-body").children("div.accordion-inner").children("div.qa:eq("+(l-1)+")").children("div.q")),t.dom("#chsteps").children("div.accordion-group:eq("+(r-1)+")").children("div.accordion-body").children("div.accordion-inner").children("div.qa:eq("+(l-1)+")").children("div.q").css("background","#F4E3E4")):t.dom("#chsteps").children("div.accordion-group:eq("+(r-1)+")").children("div.accordion-body").children("div.accordion-inner").children("div.qa:eq("+(l-1)+")").children("div.q").css("background","rgba(205, 227, 205, 0.63)");null!=o&&$("html, body").animate({scrollTop:$(o).offset().top-$(o).parent().height()/2},1e-5)}n["issue-content"]&&e.siblings("span").trigger("click")})}}},onfocus:function(e,t){e.hasClass("error_textarea")&&e.removeClass("error_textarea"),e.hasClass("error")&&e.removeClass("error")},disqus:function(e,i){if(t.utils.iframeReload(),e.hasClass("get_discussion"))t.dom("#chdisqus").children("ul.discussion_content").remove(),t.dom("#disqus_loader").show(),t["common-service"].get("discussion",{data:JSON.stringify({context:"get_forum"})},function(e){t.dom("#disqus_loader").hide();var i=JSON.parse(e.data.thread_list),s=JSON.parse(e.data.post_list);for(var n in i.response)if(i.response[n].message&&""!=i.response[n].message){var a=t.templates.question_ans_temp.clone(!0,!0);a.find(".prev_question > p").html(i.response[n].message.replace("</p>","").replace("<p>","")),a.find(".ques_date").html(t.utils.ms2ts(Date.parse(i.response[n].createdAt))+" - "+i.response[n].title.split("_")[0]),a.find(".ask_answer").attr("id",i.response[n].id);for(var o in s.response)if(s.response[o].thread===i.response[n].id){var r=t.templates.prev_answers.clone(!0,!0);r.find("p").html(s.response[o].raw_message),r.find(".answer_date").html(t.utils.ms2ts(Date.parse(s.response[o].createdAt))+" - "+s.response[o].author.name),a.append(r)}a.find(".view_all").insertAfter(a.find("li.prev_answers:last")),a.find(".answer_input").insertAfter(a.find(".view_all")),t.dom("#chdisqus").append(a)}});else if(e.hasClass("outer_ques"))t.dom(".outer_ques").hide(),t.dom(".question_input").show(),setTimeout(function(){t.dom(".disqus_ques_area").focus()},500);else if(e.hasClass("ques_cancel"))t.dom(".question_input").hide(),t.dom(".outer_ques").show();else if(e.hasClass("answer_cancel"))e.parents("ul:lt(1)").find(".answer_input").hide(),e.parents("ul:lt(1)").find(".outer_answer").show();else if(e.hasClass("outer_answer"))e.hide(),e.parents("ul:lt(1)").find("li.answer_input").show(),e.parents("ul:lt(1)").find("li.answer_input").find("textarea.disqus_ques_area").val(""),setTimeout(function(){e.parents("ul:lt(1)").find("li.answer_input").find("textarea.disqus_ques_area").focus()},500);else if(e.hasClass("ask_ques")){var s=t.dom(".disqus_ques_area").val();t.dom(".disqus_ques_area").val(""),""!==s.trim()?(t.dom(".question_input").find(".post-process-icon").show(),t.dom(".question_input").find(".span").html(t.utils.localeContentBuffer("POSTING")),t["common-service"].post("discussion",{type:"create_thread",data:s},function(e){if(200===e.code&&e.response){t.dom(".question_input").find(".post-process-icon").hide(),t.dom(".question_input").find(".span").html(t.utils.localeContentBuffer("POST"));var i=JSON.parse(e.data.thread_list),s=t.templates.question_ans_temp.clone(!0,!0);s.find(".prev_question > p").html(i.response.message.replace("</p>","").replace("<p>","")),s.find(".ask_answer").attr("id",i.response.id),s.find(".ques_date").html(t.utils.ms2ts(Date.parse(i.response.createdAt))+" - "+i.response.title.split("_")[0]),t.dom("#chdisqus").find(".question_input").after(s),t.dom(".question_input").find(".ques_cancel").trigger("click")}})):t.dom(".question_text").addClass("error_textarea")}else if(e.hasClass("ask_answer")){var n=e.parents("ul:lt(1)").find(".answer_text").val();""!==n.trim()?(e.parents("ul:lt(1)").find(".answer_text").val(""),e.parents("ul:lt(1)").find(".answer_cancel").trigger("click"),t["common-service"].post("discussion",{type:"create_post",data:JSON.stringify({message:n,thread_id:e.attr("id")})},function(i){if(200===i.code&&i.response){var s=JSON.parse(i.data.post_details),n=t.templates.prev_answers.clone(!0,!0);n.find("p").html(s.response.raw_message),n.find(".answer_date").html(t.utils.ms2ts(Date.parse(s.response.createdAt))+" - "+s.response.author.name),$(e.parents("ul:lt(1)").find(".view_all")).before(n)}})):e.parents("ul:lt(1)").find(".answer_text").addClass("error_textarea")}},ratings:function(e,s,n){t.utils.iframeReload(),i.loadedTabs.ratings||(n=t.dom("#review-editor").find("img"),t.utils.setImage(n,n.attr("src")),i.loadedTabs.ratings=!0,t.dom("#comments_content").html(""),t["common-service"].get("ratings",{data:JSON.stringify({})},function(e){200===e.code&&e.response&&e.data&&(t.dom("#post-review-btn").val(""),t.dom("#comments_content").html(""),i.buildRatings(e.data))}))},buildRatings:function(e,s,n,a,o,r){r=!0;for(var l in e)(e[l].user&&e[l].isSubmitted||e[l].me)&&(t.dom("#comments_content").find("li."+t.utils.replaceAll(e[l].user.semanticUserName,"\\.","\\.")).length>0&&t.dom("#comments_content").find("li."+t.utils.replaceAll(e[l].user.semanticUserName,"\\.","\\.")).remove(),s=t.templates["single-review"].clone(!0,!0),s.attr("data-messageid",e[l].messageId).data(),s.removeAttr("data-messageid"),s.addClass(e[l].user.semanticUserName),t.utils.setImage(s.find("img"),e[l].user.profilePicUrl?e[l].user.profilePicUrl:"/images/AY2.0/user-image.png"),s.find("h5 a").html(t.utils.getUserFullName(e[l].user.firstName,e[l].user.lastName)).attr("href","/"+t.pageAttr.univ+"/peers/all/"+e[l].user.semanticUserName).attr("target","_blank"),e[l].message&&s.find(".display-review").html(e[l].message.replace(/\n/g,"<br />")),e[l].isLiked?s.find("i.fa.fa-heart-o").remove():s.find("i.fa.fa-heart").remove(),s.find("span.likescount").children("span.tl_count").html(e[l].likes),s.find(".rep_msg_content .time-stamp").html(t.utils.ms2ts(e[l].lastModified)).show(),e[l].me||e[l].user.semanticUserName===window.userSemantic?(s.find("div#rating-value").ratings({value:+e[l].value,callback:i.saveRating}),s.find("div#rating-value").addClass("rating-value"),s.find("div#rating-value").find("span").attr("class","rater review_tab"),s.addClass("current_review"),s.find(".review-saver").find("#edit-review-btn").show(),void 0==e[l].canShow||e[l].canShow?(s.find("div#submit_comment").attr("class","my-review rep_msg_content"),s.find(".edit-review").attr("class","edit-review first").attr("disabled","disabled")):(r=!1,s.find("div#submit_comment").attr("class","my-review rep_msg_content edit"),e[l].message&&s.find("textarea.edit-review").val(e[l].message.replace(/<br\s*[\/]?>/gi,"\n")),s.find(".edit-review").attr("class","edit-review first").removeAttr("disabled"),s.find("#save-review-btn").html("Post Review").show().siblings().hide(),s.find(".ratainglikes").hide())):(s.find("div#rating-value").ratings({value:+e[l].value,editable:!1}),s.find("textarea.edit-review").remove()),t.dom("#comments_content").prepend(s));r||($("#comments_content > li.current_review").insertBefore($("#comments_content").find("li:first")),setTimeout(function(){t.dom("#comments_content > li.current_review").find("textarea.edit-review:first").focus()},500))},updateLikes:function(e,i,s){s=e.children("i.fa").hasClass("fa-heart"),e.find("i").hasClass("fa fa-heart-o")?e.siblings("span.likescount").children("span.tl_count").html(parseInt(e.siblings("span.likescount").children("span.tl_count").html())+1):e.siblings("span.likescount").children("span.tl_count").html(parseInt(e.siblings("span.likescount").children("span.tl_count").html())-1),s=e.children("i.fa").hasClass("fa-heart"),e.children("i.fa").attr("class","fa fa-heart"+(s?"-o":"")),t["common-service"].post("likes",{type:"challenge",data:e.parents("li:lt(1)").data().messageid},function(i){e.siblings("span.likescount").children("span.tl_count").html(i.data.likes),500!==i.code||i.response||t.utils.statusMsg(t.utils.localeContentBuffer("SOME_ERROR_OCCURRED"))})},share:function(e,i,s){s=e?e.parents("div.parent:lt(1)").attr("id"):null,t["common-service"].get("share",{data:JSON.stringify({context:"challenge",simpleName:s})},function(i,s){var n=i.data;for(var a in n){n=n[a];break}s=t.dom("#share").attr("data-id",n.simpleName).children(".popup_wrapper").children("div").children(".popup_body").find("img"),t.utils.setImage(s,n.image),s.parent().siblings("div.sh-details").children("div").children("h2.ch-name").html(n.name).siblings("h4").html(t.utils.localeContentBuffer("BY")+" "+n.creator.name).siblings("p").html(t.utils.elipses(n.description,"popup","hD")).siblings("div.sh-points").children("h5").html(n.points+" "+t.utils.localeContentBuffer("POINTS")).siblings("span").ratings({value:n.rating,editable:!1}),t.loadPopup(e.data().type)})},shareOn:function(e,i){var s=location.origin+"/"+t.pageAttr.univ+"/challenges/all/"+e.parents("div#share").data().id,n=t.dom("input#fb-appid").val(),a={};a.category="Initiated Share Challenge",a.action=univName,a.value=1,e.is(".fb")?(a.label="FB"-e.parents("div#share").data().id+"-NaN"+curr_user_name,window.open("https://www.facebook.com/dialog/feed?app_id="+n+"&display=page&link="+encodeURIComponent(s)+"&redirect_uri="+encodeURIComponent(s),t.dom("#share").find("h2").first().html(),"width="+t.utils.winWd()+",height="+.8*t.utils.winHt())):e.is(".gplus")?(a.label="GP"-e.parents("div#share").data().id+"-NaN"+curr_user_name,window.open("https://plus.google.com/share?url="+encodeURIComponent(s),t.dom("#share").find("h2").first().html(),"width="+t.utils.winWd()+",height="+.8*t.utils.winHt())):e.is(".link")?(a.label="LI"-e.parents("div#share").data().id+"-NaN"+curr_user_name,window.open("http://www.linkedin.com/shareArticle?mini=true&url="+encodeURI(s)+"&title="+encodeURI(t.dom("#share").find("h2").first().html())+"&summary="+encodeURI(t.dom("#share").find("p").first().html())+"&image-url="+t.dom("#share").find("img").attr("src")+"&source="+encodeURI(s),t.dom("#share").find("h2").first().html(),"width="+t.utils.winWd()+",height="+.8*t.utils.winHt())):e.is(".tweet")?(a.label="TW"-e.parents("div#share").data().id+"-NaN"+curr_user_name,
window.open("http://twitter.com/share?url="+encodeURI(s),t.dom("#share").find("h2").first().html(),"width="+t.utils.winWd()+",height="+.8*t.utils.winHt())):e.is(".mail")||cache.temp.is(".share-close")?(cache["email-share"].find("#share-emails").val(""),cache["email-share"].toggle()):cache.temp.is(".share-send"),t.utils.pushGA(a)},afterRAUpload:function(e,t,s,n){e.data.progress>10&&n.children("div.accordion-heading").find("h4").children("span.ex-num").replaceWith('<span class="ex-num complete-num"><i class="icon-ok"></i></span>'),i.innerProgress(e.data.progress)}},t=e.setReference("challenges-service",i),$(".rearrange_challenge_list").on("scroll",function(e){$(this).scrollTop()+$(this).innerHeight()>=this.scrollHeight/2&&i.get_rearrange_ch(i)})}(window),function(e,t,i){i={isLoad:!1,currentUser:"",populate:function(e){if(console.log(e),t.dom("#loader").hide(),t.dom("#header-name").html(t.utils.localeContentBuffer("ALL")),200==e.code&&e.response){if(0===t.utils.getConstraints(t.pageAttr.page).offset&&t.dom("#peers-holder").html(""),e.data.nextTwentyUsers){var s=e.data.nextTwentyUsers.userProfileMap,n=e.data.nextTwentyUsers.userBadgeLogMap;for(var a in s){var o={};o.user=s[a],o.userStatus=n[a+e.data.univ.key],o.type="user",console.log(s[a].firstName),console.log(o.userStatus.points),i.build(o)}}}else t.pageAttr[t.utils.getConstraints(t.pageAttr.page).context].canLoad=!1},build:function(e){if("user"===e.type){t.dom("#peers-holder").find("#placeholder_text").hide();var s=e.user,n=e.userStatus;if(s&&n){i.peersHolder.user_temp=t.templates["single-peer"].clone(!0,!0),i.peersHolder.user_temp.remove("display_none"),i.peersHolder.user_temp.attr("data-user-id",s.key),i.peersHolder.user_temp.attr("data-user-semanticname",s.semanticUserName),i.peersHolder.user_temp.attr("id",s.key);var a=s.firstName;s.lastName&&null!=s.lastName&&""!=s.lastName&&"null"!=s.lastName&&(a+=" "+s.lastName),i.peersHolder.user_temp.find(".user_name").html(a);var o="/images/AY2.0/user-image.png";if(s.profilePicUrl&&"null"!=s.profilePicUrl&&(o=s.profilePicUrl.indexOf("googleusercontent")!=-1?s.profilePicUrl.replace("/photo.jpg","/s135/photo.jpg"):s.profilePicUrl.indexOf("ggpht")!=-1?s.profilePicUrl+"=s134":s.profilePicUrl),t.utils.setImage(i.peersHolder.user_temp.find("td:first").find("img"),o),i.peersHolder.user_temp.find("li.points").html('<i class="coin-small"></i>'+n.points).attr("title",n.points+" "+t.utils.localeContentBuffer("POINTS")).tooltip(),i.peersHolder.user_temp.find(".status").html("User"===n.type?t.utils.localeContentBuffer("USER"):window.creator===s.userName?t.utils.localeContentBuffer("SUPER_ADMIN"):t.utils.localeContentBuffer("ADMIN")).attr("title",t.utils.localeContentBuffer("ROLE")).tooltip().css("border-right","0px"),s.otherDetails&&Object.keys(s.otherDetails).length>0)try{var r=JSON.parse(s.otherDetails);r.mobile?i.peersHolder.user_temp.find(".mobile").html(r.mobile).parent().attr("title",t.utils.localeContentBuffer("CONTACT_NUMBER")).tooltip():i.peersHolder.user_temp.find(".mobile").parent().remove()}catch(e){console.log(e)}else i.peersHolder.user_temp.find(".mobile").parent().remove();i.peersHolder.user_table_body.append(i.peersHolder.user_temp),"all"!==i.peersHolder.actTeam?i.peersHolder.user_temp.find(".remove_user").remove():i.peersHolder.user_temp.find(".remove_user_team").remove(),isAdmin&&window.creator!==s.userName||i.peersHolder.user_temp.find(".user_edit").parent().css("visibility","hidden")}}else if("pending_invite"===e.type){i.peersHolder.pending_invites.find(".pendinglist_ul").children().remove();var l=e.userMap;if(l&&Object.keys(l).length>0){for(var d in l){i.peersHolder.temp=i.peersHolder.pending_invites_li.clone(!0,!0),i.peersHolder.temp.removeClass("display_none"),i.peersHolder.temp.find(".pending_user_mail").html(l[d].userName),i.peersHolder.temp.attr("data-remove_user_id",d);var c=Math.floor(((new Date).getTime()-l[d].invitedDate)/864e5);c>0?(i.peersHolder.temp.find(".pending_user_date").attr("days",c),i.peersHolder.temp.find(".pending_user_date").html(c+" "+t.utils.localeContentBuffer("DAYS"))):(i.peersHolder.temp.find(".pending_user_date").attr("days",c),i.peersHolder.temp.find(".pending_user_date").html(t.utils.localeContentBuffer("INVITED_TODAY"))),i.peersHolder.pending_invites.find(".pendinglist_ul").append(i.peersHolder.temp)}i.jquerySearchOrSort("sort_invited_date")}else i.peersHolder.pending_invites.find(".pendinglist_ul").append('<li><span style="padding-left:35%">'+t.utils.localeContentBuffer("NO_ONE_INVITED")+"</span></li>")}else if("pending_req_peer"===e.type)if(i.peersHolder.pending_request.find(".pending_req_ul").html(""),console.log(e.userInfo),e&&Object.keys(e.userInfo).length>0){var s=e.userInfo;for(d in s)console.log("comes here"+s[d].userName+" name ::"+s[d].userFirstAndLastName+" mobile num ::"+s[d].userMobileNo),i.peersHolder.temp=i.peersHolder.pending_req_li.clone(!0,!0),i.peersHolder.temp.removeClass("display_none"),i.peersHolder.temp.attr("data-email",s[d].userName),i.peersHolder.temp.find(".req_user_name").html(s[d].userFirstAndLastName),i.peersHolder.temp.find(".req_user_email").html(s[d].userName),i.peersHolder.temp.find(".req_user_mobile").html(s[d].userMobileNo),i.peersHolder.pending_request.find(".pending_req_ul").append(i.peersHolder.temp)}else i.peersHolder.pending_request.find(".pending_req_ul").append('<li><span style="padding-left:35%">No request yet!</span></li>');else if("team"===e.type)i.peersHolder.group_temp=i.peersHolder.groups.clone(!0,!0),i.peersHolder.group_temp.attr("id",e.manageTeam.hashedTeamName),i.peersHolder.group_temp.attr("data-team-name",e.manageTeam.hashedTeamName).data(),i.peersHolder.group_temp.find(".temp-team-name").html(e.manageTeam.teamName),i.peersHolder.group_temp.find(".team_name_text").data("temp-team-name",e.manageTeam.teamName),i.peersHolder.group_temp.find(".team_name_text").html("all"!=e.manageTeam.teamName?e.manageTeam.teamName:"All"),i.peersHolder.group_temp.find(".team_length").html(e.manageTeam.teamMembers.length),i.peersHolder.group_temp.find(".team_length").html(e.manageTeam.teamMembers.length),isAdmin&&"all"!==e.teamName&&"All"!==e.teamName||i.peersHolder.group_temp.find(".editdel_hold,.saveclose_hold").remove(),i.peersHolder.group_temp.show(),i.peersHolder.groups_ul.append(i.peersHolder.group_temp),i.jquerySearchOrSort("sort_team_name"),i.peersHolder.groups_ul.find("#all").insertBefore($($(".teamList > li")[0])),i.peersHolder.group_temp.trigger("click");else if("add_user_search"===e.type){t.dom("#peers-holder").find("#placeholder_text").hide(),i.peersHolder.add_peers_team.find(".peer_search_list").find("ul").html("");var e=e.userInfo;for(d in e){var s=e[d],a=s.firstName;s.lastName&&null!=s.lastName&&""!=s.lastName&&"null"!=s.lastName&&(a+=" "+s.lastName);var o="/images/AY2.0/user-image.png";s.profilePicUrl&&"null"!=s.profilePicUrl&&(o=s.profilePicUrl.indexOf("googleusercontent")!=-1?s.profilePicUrl.replace("/photo.jpg","/s135/photo.jpg"):s.profilePicUrl),i.peersHolder.temp=i.peersHolder.add_peers_team_valid_peer.clone(!0,!0),i.peersHolder.temp.find("img").attr("src",o),i.peersHolder.temp.find("span").html(a),i.peersHolder.temp.find("span").data("valid-search-id",s.key),i.peersHolder.add_peers_team.find(".peer_search_list").find("ul").append(i.peersHolder.temp)}}},pending:function(e){},popup:function(e,s,n,a){if("university"===s.data.data.value)t.dom(".peers_invite,.domain_invite").show(),i.peersHolder.invite_peers.find(".modal-title").html(t.utils.localeContentBuffer("INVITE_PEER_TITLE")),i.peersHolder.invite_peers.find(".invite_peer_input").css("border",""),i.peersHolder.invite_peers.find(".invite_peer_li")&&i.peersHolder.invite_peers.find(".invite_peer_li").remove(),i.peersHolder.invite_peers.modal("show"),i.peersHolder.invite_peers.find("input.invite_peer_input").val(""),i.peersHolder.invite_peers.find(".before_invite").show(),i.peersHolder.invite_peers.find(".after_invite").hide(),setTimeout(function(){i.peersHolder.invite_peers.find(".invite_peer_input").focus()},500),i.getDomain();else if("pending_invite_university"===s.data.data.value){i.peersHolder.pending_invites.modal("show");var s={};s.type="pending_invite",i.get(s)}else if("pending_req_join_university"===s.data.data.value){i.peersHolder.pending_request.modal("show");var s={};s.type="pending_req",i.get(s)}else if("create_new_team"===s.data.data.value)i.peersHolder.add_team.modal("show"),i.peersHolder.add_team.find(".save_team").removeAttr("disabled"),setTimeout(function(){i.peersHolder.add_team.find(".addteam_input").focus().val("")},500);else if("add_new_mem_team"===s.data.data.value)i.peersHolder.add_peers_team.find(".valid_added_peer")&&i.peersHolder.add_peers_team.find(".valid_added_peer").remove(),i.peersHolder.add_peers_team.find(".valid_peer").remove(),i.peersHolder.add_peers_team.modal("show"),i.peersHolder.add_peers_team.find(".peercontact_list > ul > li").remove(),i.peersHolder.add_peers_team.find(".save_add_mem").removeAttr("disabled"),setTimeout(function(){i.peersHolder.add_peers_team.find(".peer_search_list").focus().val("")},500);else if("remove_user_univ"===s.data.data.value){var o=$(e).parents("tr.person-listing").data("user-semanticname");i.peersHolder.delete_user_modal.find(".yes_delete_user").data("selected_user_id",o),i.peersHolder.delete_user_modal.modal("show")}},append_user_invite:function(e,s,n,a){var o=s.which?s.which:s.keyCode,r=i.peersHolder.invite_peers.find(".invite_peer_input").val(),l=i.get_existing_emails();t.dom(".invite_peer_input").css("border",""),9==o||13==o||188==o||32==o?(r&&(i.validate(r)||1==(r.match(/,/g)||[]).length)?(r=r.replace(",","").trim(),""!=r&&i.validate(r)&&l.indexOf(r)==-1?(i.peersHolder.temp=i.peersHolder.invite_peers_li.clone(!0,!0),i.peersHolder.temp.find("span").html(r),i.peersHolder.temp.insertBefore(i.peersHolder.invite_peers.find(".invite_peer_ul > li:last")),i.peersHolder.invite_peers.find(".invite_peer_input").val("")):""!=r&&i.validate(r)?l.indexOf(r)!=-1&&t.utils.statusMsg(t.utils.localeContentBuffer("EMAIL_ALREADY_ADDED"),!0):(t.utils.statusMsg(t.utils.localeContentBuffer("ENTER_VALID_EMAIL"),!0),t.dom(".invite_peer_input").css("border","1px solid red"))):(r.match(/,/g)||[]).length>1?i.bulkAppend(r):t.utils.statusMsg(t.utils.localeContentBuffer("ENTER_VALID_EMAIL"),!0),s.preventDefault()):86==o&&(i.bulkAppend(r),s.preventDefault())},bulkAppend:function(e,s,n,a){e&&void 0!=e&&e.indexOf(",")!=-1?(n=String(e).split(","),t.dom(".before_invite").find(".invite_peer_input").val("")):s&&void 0!=s&&s.indexOf(",")!=-1&&(n=String(s).split(","),t.dom(".domain_invite").find(".allowed_domains_text").val(""));for(var o=0;o<n.length;o++)""!=String(n[o]).trim()&&(e?(a=i.peersHolder.invite_peers_li.clone(!0,!0),i.validate(n[o].trim())||a.find(".taglist").css("background","red"),a.find("span").html(String(n[o]).trim()),a.insertBefore(t.dom(".peers_invite").find(".invite_peer_ul >li:last"))):s&&(a=t.templates.allowed_domains_li.clone(!0,!0),i.validate(void 0,n[o].trim())||a.find(".taglist").css("background","red"),a.find("span").html(String(n[o]).trim()),a.insertBefore(t.dom(".allowed_domains_ul > li.domain_input_li"))))},uploadcsv:function(e,s,n,a,o,r,l){for(var d=i.get_existing_emails(),c=r.split(/\r\n|\n/),h=new Array,u=0;u<c.length;u++)for(var p=c[u].split(","),f=0;f<p.length;f++)p[f]=p[f].trim(),""!==p[f]&&h.indexOf(p[f])==-1&&d.indexOf(p[f])==-1&&h.push(p[f]);for(var u=0;u<h.length;u++)i.peersHolder.temp=i.peersHolder.invite_peers_li.clone(!0,!0),h[u]&&!i.validate(h[u].trim())&&i.peersHolder.temp.find(".taglist").css("background","red"),i.peersHolder.temp.find("span").html(String(h[u]).trim()),i.peersHolder.temp.insertBefore(i.peersHolder.invite_peers.find(".invite_peer_ul >li:last"));setTimeout(function(){t.dom(".invite_peer_input").focus()},100)},close:function(e,s,n,a){e.hasClass("pendingrequest")&&i.isLoad&&(t.dom("#peers-sidebar").find("li#all").hasClass("active")&&t.dom("#peers-sidebar").find("li#all").trigger("click"),i.isLoad=!1),t.pageAttr.hash=null,t.history.push({},t.pageAttr.page.toUpperCase(),"/"+t.pageAttr.univ+"/"+t.pageAttr.page+"/"+t.utils.getConstraints(t.pageAttr.page).category)},open:function(e,s,n){var a=null==e?n:$(e).parents("tr.person-listing").data("user-semanticname");Object.keys(t.pageAttr.loadedPages).length>0&&(t.pageAttr.loadedPages.me||t.pageAttr.loadedPages.challenges)&&(t.pageAttr.loadedPages.me&&Object.keys(t.pageAttr.loadedPages.me).length>0?delete t.pageAttr.loadedPages.me:delete t.pageAttr.loadedPages.challenges),t["peers-service"].scrollPos=$(document).scrollTop(),t.utils.setImage(t.dom(".single_user_photo"),"/images/AY2.0/user-image.png"),t.dom("#body-header").children("span").html(""),t.dom("#challenges-holder").html(""),t.dom("#loader").show(),t.dom("#view-type").attr("class","me"),t.dom("#switch_workingon_completed").css("display","none");var o={};o["hash-team-name"]=i.peersHolder.actTeam,o.type="get_peer_basic_info",o["user-semanticname"]=a,i.get(o)},get_existing_emails:function(){for(var e=i.peersHolder.invite_peers.find(".invite_peer_ul > li.invite_peer_li"),t=new Array,s=0;s<e.length;s++)t.push($(e[s]).find("span").html().trim());return t},add_user:function(e,s,n,a){for(var o=i.peersHolder.invite_peers.find(".invite_peer_ul > li.invite_peer_li"),r=!0,l=new Array,d=0;d<o.length;d++){var c=$(o[d]).find("span").html();c&&!i.validate(c.trim())?(r&&(r=!1),$(o[d]).find(".taglist").css("background","red")):l.push(c.trim())}if(console.log("emailArr ::"+l),console.log(r),r&&l&&l.length>0){var h=i.peersHolder.invite_peers.find(".invite_peer_ul > li > input.invite_peer_input").val();if(h&&""!=h.trim()&&i.validate(h.trim())){l.push(h.trim()),console.log("ready to save peers"+l);var u={};u.type="invite_peer_univ",u.email=l,u.from="peers",i.save(u)}else if(h&&""!=h.trim()&&!i.validate(h.trim()))t.utils.statusMsg(t.utils.localeContentBuffer("ENTER_VALID_EMAIL"),!0),i.peersHolder.invite_peers.find(".invite_peer_ul > li > input.invite_peer_input").css({"border-color":"red","border-width":"1px","border-style":"solid"});else{var u={};u.type="invite_peer_univ",u.email=l,u.from="peers",i.save(u)}}else if(0===l.length){var h=i.peersHolder.invite_peers.find(".invite_peer_ul > li > input.invite_peer_input").val();if(i.validate(h.trim())){var p=new Array;p.push(h.trim());var u={};u.type="invite_peer_univ",u.email=p,u.from="peers",console.log("comes before save"),i.save(u)}else i.peersHolder.invite_peers.find(".invite_peer_ul > li > input.invite_peer_input").css({"border-color":"red","border-width":"1px","border-style":"solid"})}else r||console.log("Please check the invalid email id's!")},search:function(e,s){if(t.utils.setConstraints("peers",i.peersHolder.actTeam,t.utils.getConstraints("peers").filter,$(e).val(),t.utils.getConstraints("peers").offset),"all"===i.peersHolder.actTeam&&""!=$(e).val().trim()){var n={};n["hash-team-name"]="all",n.type="general_user_search",n.searched_user=$(e).val(),t.pageAttr[t.utils.getConstraints(t.pageAttr.page).context].canLoad=!1,i.get(n)}else"all"!==i.peersHolder.actTeam&&""!=$(e).val().trim()?(i.jquerySearch($(e).val()),t.utils.setConstraints("peers",i.peersHolder.actTeam,t.utils.getConstraints("peers").filter,$(e).val(),t.utils.getConstraints("peers").offset)):""===$(e).val().trim()&&(t.pageAttr[t.utils.getConstraints(t.pageAttr.page).context].canLoad=!0,$("#"+t.utils.getConstraints("peers").category).trigger("click"))},approve_deny_univ_request:function(e,t,s,n){console.log("comes here");var a=$(e).parent().find("span.req_user_email").html(),o="deny_req"===$(e).attr("id")?"deny":"approve",r={};r.type="update_pending_req",r.email=a,r.action=o,i.update_peers(r)},get_team_users:function(e,s,n,a){if(e.addClass("active").siblings("li").removeClass("active"),"edit_label"===$(s.target).attr("id")){console.log(e.find(".saveclose_hold").length),e.find(".saveclose_hold").show(),e.find("label").attr("contenteditable","true"),e.find("label").removeClass("ellipsis");var o=e.find("label");e.find("label").html();return setTimeout(function(){o.focus()},100),event.preventDefault(),!1}if($(s.target).hasClass("team_name_text")&&"true"===$(s.target).attr("contenteditable"))return console.log("team_name_text "),event.preventDefault(),!1;if($(s.target).hasClass("delete_team_name"))i.peersHolder.delete_team.find(".yes_delete_team").attr("id",$(e).attr("id")),i.peersHolder.delete_team.modal("show");else{if($(s.target).hasClass("dont_save_team_name")){var r=e;r.find("span.temp_team_name").html();r.find("label.team_name_text").attr("contenteditable",!1),r.find("label.team_name_text").addClass("ellipsis"),r.find(".saveclose_hold").hide(),console.log(r);var l=r.find("label").data("temp-team-name");return console.log(l),r.find("label").html(l),event.preventDefault(),!1}if($(s.target).hasClass("save_edited_team")){console.log("saving the updateed team name");var r=e,d=e.find(".team_name_text").html().trim();if(d&&""!=d){var c=r.find("label").data("temp-team-name"),h=r.find(".team_name_text").html().trim();if(console.log("temp_name ::"+c),console.log("updated_name ::"+h),c!==h){var u={};u["hash-team-name"]=r.attr("id"),u.teamName=r.find(".team_name_text").html().trim(),u.type="update_team_name",console.log(u),console.log("before appending peers"),i.update_peers(u),console.log("after calling update method")}else r.find("label.team_name_text").attr("contenteditable",!1),r.find(".saveclose_hold").hide()}else $(peersHolder["voice-box"]).find("#statusMessage").html(t.utils.localeContentBuffer("VALID_TEAM_NAME")),$(peersHolder["voice-box"]).fadeIn().delay(2e3).fadeOut("slow");return event.preventDefault(),!1}i.peersHolder.header.find("span#header-name").html(e.find(".team_name_text").html()),i.peersHolder.user_table_body.find("tr").remove(),i.peersHolder.actTeam=e.attr("id"),t.utils.setConstraints("peers",e.attr("id"),t.utils.getConstraints("peers").filter,"",0);var p={};p.type="users",p["hash-team-name"]=e.attr("id"),"all"!==e.attr("id")?t.dom(".add_peers_team_li").show():(p[p["hash-team-name"]]={},p[p["hash-team-name"]][s.data.data["data-sort"]]=t.utils.getConstraints("peers").offset,p.sort_by=t.utils.getConstraints("peers").filter,t.dom(".add_peers_team_li").hide()),t.dom("#loader").show(),console.log("comes here for getting all the users"),i.get(p)}},delete_team:function(e,t,s,n){var a={};a["hash-team-name"]=$(e).attr("id"),a.type="delete_team",i.delete_peers(a)},remove_user_team_fun:function(e,t,s,n){var a=$(e).parents("tr.person-listing").data("user-semanticname");i.peersHolder.delete_user_team_modal.find(".yes_delete_user_team").data("del-user-semanticname",a),i.peersHolder.delete_user_team_modal.modal("show")},save_remove_user_team:function(e,t,s,n){var a={};a.remove_user_semanticname=$(e).data("del-user-semanticname"),a["hash-team-name"]=i.peersHolder.actTeam,a.type="remove_user_team",i.delete_peers(a)},get:function(e){$.ajax({url:"/post/"+t.pageAttr.univ+"/get",type:"POST",data:{type:"peers",data:JSON.stringify(e)},success:function(s){if("success"===String(s.status).toLowerCase()){if("pending_invite"===e.type){i.peersHolder.pending_invites.find("#load").hide(),t.utils.statusMsg(s.msg,!0);var n=s.data;n.type="pending_invite",i.build(n)}else if("get_peer_basic_info"===e.type)t.history.isPopTriggered=!1,t.history.isPopTriggered||"peers"!==t.pageAttr.page||t.history.push(e["user-semanticname"],s.data.user.firstName,"/"+t.pageAttr.univ+"/"+t.pageAttr.page+"/all/"+e["user-semanticname"]),s.data.user.profilePicUrl&&null!=s.data.user.profilePicUrl&&"null"!=s.data.user.profilePicUrl?t.utils.setImage(t.dom(".single_user_photo"),s.data.user.profilePicUrl):t.utils.setImage(t.dom(".single_user_photo"),"/images/AY2.0/user-image.png"),t.dom(".single_user_photo").show(),t.dom("#body-header").children("span").html(s.data.user.firstName+' <span class="pull-right"><i class="coin-large points"></i>'+s.data.user_status.points+"</span>"),t.utils.setConstraints("peers","all","approved","",0,"challenges",null,e["user-semanticname"]),t.dom("#body").attr("class","row content"),t.loadBody(t.utils.getConstraints(t.pageAttr.page));else if("pending_req"===e.type){i.peersHolder.pending_request.find("#load").hide(),t.utils.statusMsg(s.msg,!0);var n=s.data;n.type="pending_req_peer",i.build(n)}else if("users"===e.type){if(t.dom("#loader").hide(),"all"!==e["hash-team-name"]&&(t.pageAttr[t.utils.getConstraints(t.pageAttr.page).context].canLoad=!1,$("#"+e["hash-team-name"]).find(".team_length").html(s.data.team_mem_length?s.data.team_mem_length:0)),0===parseInt(s.data.team_mem_length))i.peersHolder.header.find(".addoption").addClass("open"),t.dom("#peers-holder").html('<h3 id="placeholder_text" >Click on "+ Add peers to this team" from the dropdown!</h3>');else if(s.data.nextTwentyUsers&&Object.keys(s.data.nextTwentyUsers).length>0){var a=s.data.nextTwentyUsers.userProfileMap,o=s.data.nextTwentyUsers.userBadgeLogMap;if("all"===e["hash-team-name"]&&Object.keys(a).length>0?t.pageAttr[t.utils.getConstraints(t.pageAttr.page).context].canLoad=!0:"all"===e["hash-team-name"]&&t.dom(".teamList").find("li#all").find(".team_mem_length").html(Object.keys(a).length),i.peersHolder.actTeam===e["hash-team-name"]){for(var r in a){var l={};l.user=a[r],l.userStatus=o[r],l.type="user",i.build(l)}"all"!==e["hash-team-name"]&&i.jquerySearchOrSort(t.utils.getConstraints("peers").filter)}}else t.pageAttr[t.utils.getConstraints(t.pageAttr.page).context].canLoad=!1;t.xhr({url:"/get/"+t.pageAttr.univ+"/peers",type:"GET",data:{data:JSON.stringify({view:"body",context:"challenges",category:"all",filter:"approved",query:"","hash-team-name":e["hash-team-name"],"sort-by":t.utils.getConstraints("peers").filter,range:"20",offset:t.utils.getConstraints("peers").offset})},success:function(e,i,s,n){i=e.data.user_challenge_map;for(var a in i){n=i[a];for(var o in n)s=t.templates.peers_small_badge.clone(!0,!0),s.find(".challenge_link").attr("href","/"+t.utils.getSemanticName(window.univName)+"/challenges/all/"+n[o].simpleName),s.find(".title").attr("title",n[o].name),t.utils.setImage(s.find("img").attr("src",t.utils.optimizedYTImg(t.pageAttr.page,n[o].image))),t.dom("tr#"+a,!0).find(".comp_badges").append(s).show(),t.dom(".peers_small_badge",!0).attr("title",n[o].name).tooltip()}}})}else if("search"===e.type||"general_user_search"===e.type){if("search"===e.type)if(s.data&&Object.keys(s.data).length>0&&null!=s.data)if("true"===s.data.isUserExists){var d=s.data.userProfileMap;if(d&&Object.keys(d).length>0)for(var c in d){var n={};n.type="add_user_search",n.userInfo=d,i.build(n)}else i.peersHolder.temp=i.peersHolder.add_peers_team_valid_peer.clone(!0,!0),i.peersHolder.temp.find("img").remove(),i.peersHolder.temp.attr("class",""),i.peersHolder.temp.find("span").css("max-width","100%"),i.peersHolder.temp.find("span").html(t.utils.localeContentBuffer("USER_ALREADY_ADDED")),i.peersHolder.add_peers_team.find(".peer_search_list").find("ul").html($(peersHolder.temp))}else"false"===s.data.isUserExists&&(i.peersHolder.temp=i.peersHolder.add_peers_team_valid_peer.clone(!0,!0),i.peersHolder.temp.find("img").remove(),i.peersHolder.temp.attr("class",""),i.peersHolder.temp.find("span").css("max-width","100%"),i.peersHolder.temp.find("span").html(t.utils.localeContentBuffer("USER_DOESNT_BELONG_TO_UNIV")),console.log(i.peersHolder.temp.html()),i.peersHolder.add_peers_team.find(".peer_search_list").find("ul").html(i.peersHolder.temp));else peersHolder.temp=i.peersHolder.add_peers_team_valid_peer.clone(!0,!0),$(peersHolder.temp).find("img").remove(),$(peersHolder.temp).attr("class",""),$(peersHolder.temp).find("span").css("max-width","100%"),$(peersHolder.temp).find("span").html(t.utils.localeContentBuffer("USER_DOESNT_BELONG_TO_UNIV")),$(".add_peers_team").find(".peer_search_list").find("ul").html($(peersHolder.temp));else if("general_user_search"===e.type)if(i.peersHolder.user_table_body.find("tr").remove(),s.data.userProfileMap&&0!=Object.keys(s.data.userProfileMap).length){var a=s.data.userProfileMap,o=s.data.userStatusMap,h=s.data.univ;if(a&&0!=Object.keys(a).length){for(var r in a)if(t.dom("#peers-search").val()===e.searched_user){var l={};l.user=a[r],l.userStatus=o[r+h.key],l.type="user",i.build(l)}i.jquerySearchOrSort(t.utils.getConstraints(t.pageAttr.page).filter)}}else t.dom("#peers-holder").html('<h3 id="placeholder_text" >'+t.utils.localeContentBuffer("USER_DOESNT_BELONG_TO_UNIV")+"</h3>")}else if("peers_badges"===e.type){var u=s.data.challenges;if(u&&Object.keys(u).length>0){i.peersHolder.user_table_body.find('[data-user-id="'+e.userKey+'"]').find(".comp_badges").html("");var p=0;for(var f in u)i.peersHolder.temp=i.peersHolder.comp_badges.clone(!0,!0),i.peersHolder.temp.attr("title",u[f].name),i.peersHolder.temp.attr("title",u[f].name).tooltip(),i.peersHolder.temp.show(),t.utils.setImage(i.peersHolder.temp.find(".challenge-img"),u[f].image),i.peersHolder.temp.find(".challenge_link").attr("href","/"+t.pageAttr.univ+"/challenges/all/"+u[f].simpleName),p<2&&Object.keys(u).length>10&&(i.peersHolder.temp.addClass("minbadge_hide"),p+=1),i.peersHolder.user_table_body.find('[data-user-id="'+e.userKey+'"]').find(".comp_badges").prepend(i.peersHolder.temp);if(s.data.length.chCompleted){var m='<i class="icon-certificate "></i>'+s.data.length.chCompleted;i.peersHolder.user_table_body.find('[data-user-id="'+e.userKey+'"]').find(".ch_comp").html(m).attr("title",s.data.length.chCompleted+" "+t.utils.localeContentBuffer("CHALLENGES_COMPLETED")).tooltip()}else{var m='<i class="icon-certificate "></i>0';i.peersHolder.user_table_body.find('[data-user-id="'+e.userKey+'"]').find(".ch_comp").html(m).attr("title",s.data.length.chCompleted+" "+t.utils.localeContentBuffer("CHALLENGES_COMPLETED")).tooltip()}}else{var m='<i class="icon-certificate "></i>0';i.peersHolder.user_table_body.find('[data-user-id="'+e.userKey+'"]').find(".ch_comp").html(m).attr("title","0 "+t.utils.localeContentBuffer("CHALLENGES_COMPLETED")).tooltip()}}}else"failure"===s.status&&("pending_invite"===e.type?t.utils.statusMsg(s.msg,!0):"get_peer_basic_info"===e.type?t.utils.statusMsg(s.msg,!0):"pending_req"===e.type?t.utils.statusMsg(s.msg,!0):"users"===e.type||"peers_badges"===e.type||"general_user_search"===e.type&&console.log("comes ehre"))}})},onfocus:function(e,t,i,s){$(e).hasClass("error_input")!=-1&&$(e).removeClass("error_input")},save:function(e){"invite_peer_univ"===e.type?("peers"===e.from&&t.utils.statusMsg(t.utils.localeContentBuffer("INVITING"),!0),$.ajax({type:"POST",url:"/post/"+("peers"===e.from?t.pageAttr.univ:e.univ_name)+"/save",data:{type:"peers",data:JSON.stringify(e)},success:function(s){if("success"===s.status)if(console.log(s),"peers"===e.from){t.dom(".peers_invite,.domain_invite").hide(),i.peersHolder.invite_peers.find(".before_invite").hide(),i.peersHolder.invite_peers.find("h4").html(t.utils.localeContentBuffer("INVITED_PEERS"));var n=s.data.invitedLog;i.peersHolder.invite_peers.find(".invited_user_mail_ul").children().remove();var a=e.email;console.log(e.email.length);for(var o=0;o<a.length;o++){var r=i.peersHolder.invited_mail_peers_li.clone(!0,!0);if(r.find(".invited_user_mail").html(a[o]),r.find(".privillege_user").attr("name",n[a[o]].userKey),r.find(".privillege_admin").attr("name",n[a[o]].userKey),n[a[o]].isUserExists)n[a[o]].isOwner?(r.find(".user_radio_div").remove(),r.find(".privillege_admin").prop("checked",!0),r.find(".privillege_admin").html(t.utils.localeContentBuffer("SUPER_ADMIN")),r.attr("data-original-title","You can't change the role of the creator of this university!")):"Admin"===n[a[o]].privilege&&(r.find(".privillege_user").prop("checked",!1),r.attr("data-original-title","Already invited!"),r.find(".privillege_admin").prop("checked",!0),r.find(".checked").remove());else{"User"===n[a[o]].privilege?r.find(".privillege_user").prop("checked",!0):"Admin"===n[a[o]].privilege&&r.find(".privillege_admin").prop("checked",!0);try{var l={};l.category="Invited Peers",l.action=window.univName,l.label=a[o],l.value=0,t.utils.pushGA(l)}catch(e){console.log(e)}}console.log(r),i.peersHolder.invite_peers.find(".invited_user_mail_ul").append(r)}i.peersHolder.invite_peers.find(".after_invite").show(),t.utils.statusMsg(s.msg,!0)}else"peers_save_initial_setup"===e.from&&(s.type=e.type,setup.save(s));else"failure"===s.status&&t.utils.statusMsg(s.msg,!0)}})):"team"===e.type?(i.peersHolder.add_team.find(".save_team").attr("disabled","disabled"),$.ajax({type:"POST",url:"/post/"+t.pageAttr.univ+"/save",data:{type:"peers",data:JSON.stringify(e)},success:function(e){if("success"===e.status){i.peersHolder.add_team.find(".save_team").removeAttr("disabled");var s=e.data;s.type="team",i.build(s),t.utils.statusMsg(e.msg,!0),i.peersHolder.add_team.modal("hide")}else"failure"===e.status&&(i.peersHolder.add_team.find(".save_team").removeAttr("disabled"),i.peersHolder.add_team.find(".addteam_input").addClass("error_input"))}})):"team_members"===e.type&&$.ajax({type:"POST",url:"/post/"+t.pageAttr.univ+"/save",data:{type:"peers",data:JSON.stringify(e)},success:function(s){"success"===s.status?(i.peersHolder.add_peers_team.find(".save_add_mem").removeAttr("disabled"),t.utils.statusMsg(s.msg,!0),i.peersHolder.add_peers_team.modal("toggle"),i.peersHolder.groups_ul.find("#"+e.teamName).trigger("click")):"failure"==s.status&&(i.peersHolder.add_peers_team.find(".save_add_mem").removeAttr("disabled"),t.utils.statusMsg(s.msg,!0))}})},remove_peers:function(e,t,s,n){if("delete_pending_invite"===t.data.data.value){var a={};a.type="delete_invited_peer",a.remove_user_id=$(e).parent().data("remove_user_id"),i.delete_peers(a)}},delete_peers:function(e){"delete_invited_peer"===e.type?$.ajax({type:"POST",url:"/post/"+t.pageAttr.univ+"/delete",data:{type:"peers",data:JSON.stringify(e)},success:function(t){"success"===t.status?($('[data-remove_user_id="'+e.remove_user_id+'"]').remove(),0==i.peersHolder.pending_invites.find(".pendinglist_ul").children().length&&i.peersHolder.pending_invites.modal("hide")):"failure"===t.status}}):"delete_univ_peer"===e.type?$.ajax({type:"POST",url:"/post/"+t.pageAttr.univ+"/delete",data:{type:"peers",data:JSON.stringify(e)},success:function(s){"success"===s.status?($('[data-user-semanticname="'+e.delete_user_semanticname+'"]').remove(),i.peersHolder.delete_user_modal.modal("hide")):"failure"===s.status&&(t.utils.statusMsg(s.msg,!0),t.dom("#delete_user_modal").modal("hide"))}}):"remove_user_team"===e.type?$.ajax({type:"POST",url:"/post/"+t.pageAttr.univ+"/delete",data:{type:"peers",data:JSON.stringify(e)},success:function(t){console.log(t),"success"===t.status?($("#"+e["hash-team-name"]).find(".team_mem_length").html(t.data.count),i.peersHolder.delete_user_team_modal.modal("hide"),i.peersHolder.actTeam===e["hash-team-name"]&&i.peersHolder.user_table_body.find('[data-user-semanticname="'+e.remove_user_semanticname+'"]').remove()):"failure"===t.status}}):"delete_team"===e.type&&$.ajax({type:"POST",url:"/post/"+t.pageAttr.univ+"/delete",data:{type:"peers",data:JSON.stringify(e)},success:function(s){"success"===s.status?(t.dom("#peers-sidebar").find("#all").trigger("click"),i.peersHolder.delete_team.modal("hide"),t.dom("#peers-sidebar").find("#"+e["hash-team-name"]).remove()):"failure"===s.status}})},save_team:function(e,s,n,a){var o=i.peersHolder.add_team.find(".addteam_input").val();if(o&&""!=o){var r={};r.teamName=o,r.type="team",i.save(r)}else t.utils.statusMsg(t.utils.localeContentBuffer("VALID_TEAM_NAME"),!0)},select_valid_peer:function(e,s,n,a){var o=e.find("span").html(),r=e.find("span").data("valid-search-id");console.log("member ::"+o),console.log("key ::"+r);var l=!0;console.log("length ::"+i.peersHolder.add_peers_team.find(".valid_added_peer_ul").children().length),i.peersHolder.add_peers_team.find(".valid_added_peer_ul").children().length>1&&i.peersHolder.add_peers_team.find(".valid_added_peer_ul").children().each(function(){if($(this).data("valid-id")===r)return l=!1,!1}),l?(i.peersHolder.temp=i.peersHolder.add_peers_valid_added_peer.clone(!0,!0),i.peersHolder.temp.find(".selected_user").html(o),i.peersHolder.temp.data("valid-id",r),i.peersHolder.temp.insertBefore(i.peersHolder.add_peers_team.find(".search_user_name").parent()),
i.peersHolder.add_peers_team.find(".peer_search_list").val(""),setTimeout(function(){i.peersHolder.add_peers_team.find(".peer_search_list").focus()},100)):t.utils.statusMsg(t.utils.localeContentBuffer("USER_ALREADY_ADDED")),e.remove()},remove_valid_user:function(e,t,i,s){e.parent().parent().remove()},save_valid_user_team:function(e,t,s,n){var a=new Array;i.peersHolder.add_peers_team.find(".valid_added_peer_ul").children().each(function(){$(this).data("valid-id")&&a.push($(this).data("valid-id"))});var o={};o.teamName=i.peersHolder.actTeam,o.type="team_members",o.team_mem=a,i.save(o)},search_valid_user:function(e,t,s,n){if(i.peersHolder.searchTimeout&&clearTimeout(i.searchTimeout),""!=i.peersHolder.add_peers_team.find(".peer_search_list").val().trim()){console.log("searched value ::"+i.peersHolder.add_peers_team.find(".peer_search_list").val()),console.log("active Team ::"+i.peersHolder.actTeam);var a={};a.type="search",a.searched_user=i.peersHolder.add_peers_team.find(".peer_search_list").val(),a["hash-team-name"]=i.peersHolder.actTeam,i.peersHolder.searchTimeout=setTimeout(i.get(a),200)}else i.peersHolder.add_peers_team.find(".peercontact_list > ul").children().remove()},remove_invite_user:function(e,t,i,s){e.parent().parent().remove()},changestatus:function(e,t,s,n){var a=e.attr("name"),o=e.hasClass("privillege_admin")?"admin":"user",r={};r.userKey=a,r.status=o,r.type="update_status_on_invite",i.update_peers(r)},delete_user_univ:function(e,t,s,n){console.log("comes to delete user");var a={};a.delete_user_semanticname=$(e).data("selected_user_id"),a.type="delete_univ_peer",i.delete_peers(a)},update_peers:function(e){"update_status_on_invite"===e.type&&$.ajax({type:"POST",url:"/post/"+t.pageAttr.univ+"/update",data:{type:"peers",data:JSON.stringify(e)},success:function(s){console.log(s),"success"===s.status&&(i.peersHolder.user_table_body.find('[data-user-id="'+e.userKey+'"]').find(".status").html(e.status),t.utils.statusMsg(s.msg,!0),i.peersHolder.change_status_modal.modal("hide"))}}),"update_status"===e.type?$.ajax({type:"POST",url:"/post/"+t.pageAttr.univ+"/update",data:{type:"peers",data:JSON.stringify(e)},success:function(s){console.log(s),"success"===s.status?(i.peersHolder.change_status_modal.modal("hide"),i.peersHolder.user_table_body.find('[data-user-semanticname="'+e.selected_user_semanticname+'"]').find(".status").html(e.status)):"failure"===s.status&&(t.utils.statusMsg(s.msg,!0),i.peersHolder.change_status_modal.modal("hide"))}}):"update_team_name"===e.type?$.ajax({type:"POST",url:"/post/"+t.pageAttr.univ+"/update",data:{type:"peers",data:JSON.stringify(e)},success:function(s){if(console.log(s),"success"===s.status){var n=e["hash-team-name"];console.log("old team name ::"+e["hash-team-name"]),$("#"+n).find(".team_name_text").html(e.teamName),t.utils.statusMsg(s.msg,!0);var a=s.data.updated_team.hashedTeamName;console.log("has active ::"+$("#"+e["hash-team-name"]).hasClass("active")),$("#"+n).hasClass("active")&&i.peersHolder.header.find("span#header-name").html(s.data.updated_team.teamName),console.log($("#"+e["hash-team-name"]).attr("id")),console.log("updated name ::"+a),$("#"+n).attr("id",a),console.log($("#"+a)),$("#"+a).find("label.team_name_text").attr("contenteditable",!1),$("#"+a).find(".saveclose_hold").hide(),console.log("after hiding ")}else"failure"===s.status&&(t.utils.statusMsg(s.msg,!0),s.data.result&&"already_exist"===s.data.result?$("#"+n).find("label.team_name_text").html(s.data.old_team_name):($("#"+n).find("label.team_name_text").attr("contenteditable",!1),$("#"+n).find(".saveclose_hold").hide()))}}):"update_pending_req"===e.type&&(i.isLoad=!0,$.ajax({type:"POST",url:"/post/"+t.pageAttr.univ+"/update",data:{type:"peers",data:JSON.stringify(e)},success:function(t){"success"===t.status&&(i.peersHolder.pending_request.find('[data-email="'+e.email+'"]').remove(),0==i.peersHolder.pending_request.find(".pending_req_ul").children().length&&i.peersHolder.pending_request.find(".close").trigger("click"))}}))},get_status:function(e,s){i.currentUser=e.parents("tr.person-listing:lt(1)").data("user-semanticname"),t["common-service"].get("peers",{data:JSON.stringify({status:"status","selected-user":i.currentUser})},function(e,i,s,n,a){200===e.code&&"Success"==e.status&&(t.dom("#change_status_modal").modal("show"),t.dom("#change_status_modal").find("button.save_status").html(t.utils.localeContentBuffer("SAVE")),t.dom(".change_status_ul").find("input."+e.data.status).prop("checked",!0).siblings().prop("checked",!1))})},save_change_status:function(e,s){e.html(t.utils.localeContentBuffer("SAVING")),t["common-service"].post("update",{type:"peers",data:JSON.stringify({type:"update-status",status:e.parent().find("input.status-change:checked").data("status"),"selected-user":i.currentUser})},function(s){"Success"===s.status?(e.html(t.utils.localeContentBuffer("SAVED")),setTimeout(function(){t.dom("#change_status_modal").modal("hide")},500),console.log(t.dom(".everyone-table").find('[data-user-semanticname="'+i.currentUser+'"]')),t.dom(".everyone-table").find('[data-user-semanticname="'+i.currentUser+'"]').find("li.status").html(s.data.status)):"failure"===s.status&&(e.html(t.utils.localeContentBuffer("SAVE")),t.utils.statusMsg(s.msg,!0))})},filter:function(e,s,n,a){if(t.dom("#body-header").find(".peers_sort_result").html($(e).html()),t.utils.setConstraints("peers","all",s.data.data["data-sort"],"",0),"all"!==i.peersHolder.actTeam)console.log(s.data.data["data-sort"]),i.jquerySearchOrSort(s.data.data["data-sort"]);else if("all"===i.peersHolder.actTeam&&""===t.dom("#peers-search").val().trim()){i.peersHolder.user_table_body.find("tr").remove();var o={};o.type="users",o["hash-team-name"]=i.peersHolder.actTeam,o[o["hash-team-name"]]={},o[o["hash-team-name"]][s.data.data["data-sort"]]=0,o.sort_by=s.data.data["data-sort"],t.dom("#loader").show(),i.get(o)}else t.dom("#peers-search").val()&&i.jquerySearchOrSort(s.data.data["data-sort"])},validate:function(e,t,i){return e?(i=/^([\w-\.]+)@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.)|(([\w-]+\.)+))([a-zA-Z]{2,4}|[0-9]{1,3})(\]?)$/,!!i.test(e)):t?(i=/^@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.)|(([\w-]+\.)+))([a-zA-Z]{2,4}|[0-9]{1,3})(\]?)$/,!!i.test(t)):void 0},loadPrMsgs:function(e,i,s){var n=e.attr("class").indexOf("userchatico")!==-1?$(e.parents()[2]).data("user-id"):$(e.parents()[1]).data("user-id");t.messages.openIndUserMsg(n)},loadInrPrMsgs:function(e,i,s){var n=e.data().usr;t.messages.openIndUserMsg(n)},append:function(e,s,n){var a=s.which?s.which:s.keyCode,o=t.dom(".allowed_domains_text").val();new Array;t.dom(".allowed_domains_text").css("border","0px"),9==a||13==a||188==a||32==a?(o&&(o=String(o).replace(/ /g,"").trim(),i.validate(void 0,o)||1==(o.match(/,/g)||[]).length?(o=o.replace(",","").trim(),""!=o&&i.validate(void 0,o)?(n=t.templates.allowed_domains_li.clone(!0,!0),n.find("span").html(o),n.insertBefore(t.dom(".allowed_domains_ul > li.domain_input_li")),t.dom(".allowed_domains_text").val("")):""!=o&&i.validate(void 0,o)?emailArr.indexOf(email)!=-1&&t.utils.statusMsg(t.utils.localeContentBuffer("DOMAIN_ALREADY_ADDED"),!0):(t.utils.statusMsg(t.utils.localeContentBuffer("VALID_DOMAIN"),!0),t.dom(".allowed_domains_text").css("border","1px solid red"))):(o.match(/,/g)||[]).length>1?i.bulkAppend(void 0,o):(t.utils.statusMsg(t.utils.localeContentBuffer("VALID_DOMAIN"),!0),t.dom(".allowed_domains_text").css("border","1px solid red"))),s.preventDefault()):86==a&&(i.bulkAppend(void 0,o),s.preventDefault())},appendElem:function(){},updateDomain:function(e,s,n,a,o,r){if(r=new Array,"save"===e.data().type){if(n=$(".allowed_domains_li"),o=!0,n&&n.length>0)for(a=0;a<n.length;a++){var l=$(n[a]).find("span").html();l&&!i.validate(void 0,l.trim())?(o&&(o=!1),t.dom(l[a]).find(".taglist").css("background","red")):r.indexOf(l.trim())==-1&&r.push(l.trim())}if(""!=t.dom(".allowed_domains_text").val()){if(console.log(i.validate(void 0,t.dom(".allowed_domains_text").val().trim())),!i.validate(void 0,t.dom(".allowed_domains_text").val().trim()))return t.dom(".allowed_domains_text").css("border","1px solid red"),!1;r.push(t.dom(".allowed_domains_text").val())}r.length>0&&t["common-service"].post("update",{type:"peers",data:JSON.stringify({type:"add",domainArray:r})},function(e){for(a in e.data)if("Success"===e.status){t.dom(".allowed_domains_ul").find(".allowed_domains_li").remove(),t.dom(".domain_invite").attr("class","domain_invite");for(var i=0;i<e.data[a].length;i++)n=t.templates.allowed_domains_li.clone(!0,!0),n.find("span").html(e.data[a][i]),t.dom(".allowed_domains_ul").prepend(n)}})}else"remove"===e.data().type?(r.push(e.parent().find("span").html()),t["common-service"].post("update",{type:"peers",data:JSON.stringify({type:"remove",domainArray:r})},function(t){"Success"===t.status&&e.parents("li.allowed_domains_li:lt(1)").remove()})):"add"===e.data().type&&(setTimeout(function(){t.dom(".domain_invite").find(".allowed_domains_text").focus()},500),t.dom(".allowed_domains_text").val(""),t.dom(".domain_invite").attr("class","domain_invite add"))},getDomain:function(e,i){t.dom(".allowed_domains_div").find(".allowed_domains_li").remove(),t.dom(".allowed_domains_text").val(""),t["common-service"].get("peers",{data:JSON.stringify({allowedDomains:"allowedDomains"})},function(s){if("Success"===s.status)for(i in s.data)if(s.data[i])for(var n=0;n<s.data[i].length;n++)e=t.templates.allowed_domains_li.clone(!0,!0),e.find("span").html(s.data[i][n]),t.dom(".allowed_domains_ul").prepend(e),t.dom(".domain_invite").attr("class","domain_invite")})},jquerySearch:function(e){$(".everyone_tbody > tr").hide();for(var i=$($("#peers-holder > tr.person-listing > td ").find("h3:containsi('"+e+"')")),s=0;s<i.length;s++)$($(i[s]).parents()[1]).show();$(".everyone_tbody > tr").is(":visible")||t.dom("#peers-holder").html('<h3 id="placeholder_text" >'+t.utils.localeContentBuffer("USER_DOESNT_BELONG_TO_TEAM")+"</h3>")},jquerySearchOrSort:function(e){if(console.log(e),"sort_name_asc"===e){var t=$(".everyone_tbody").children("tr").find("h3 > a").get();t.sort(function(e,t){var i=String($(e).text().toLowerCase()),s=String($(t).text().toLowerCase());return i<s?-1:i>s?1:0}),$.each(t,function(e,t){$(".everyone_tbody").append($($(t).parents()[2]))})}else if("sort_high_low"===e){var s=$(".everyone_tbody").children("tr").find("li > span.points").get();s.sort(function(e,t){var i=parseInt($(e).text()),s=parseInt($(t).text());return i>s?-1:i<s?1:0}),$.each(s,function(e,t){$(".everyone_tbody").append($($(t).parents()[3]))})}else if("sort_team_name"===e){var t=$(".teamList").children("li").find("label").get();t.sort(function(e,t){var i=$(e).text().toLowerCase(),s=$(t).text().toLowerCase();return i<s?-1:i>s?1:0}),$.each(t,function(e,t){$(".teamList").append($($(t).parents()[1]))})}else if("sort_low_high"===e){var s=$(".everyone_tbody").children("tr").find("li > span.points").get();s.sort(function(e,t){var i=parseInt($(e).text()),s=parseInt($(t).text());return i<s?-1:i>s?1:0}),$.each(s,function(e,t){$(".everyone_tbody").append($($(t).parents()[3]))})}else if("sort_invited_date"===e){var n=i.peersHolder.pending_invites.find(".pending_user_date").get();n.sort(function(e,t){var i=parseInt($(e).attr("days")),s=parseInt($(t).attr("days"));return i<s?-1:i>s?1:0}),$.each(n,function(e,t){$(".pendinglist_ul").append($($(t).parents()[0]))})}}},t=e.setReference("peers-service",i),t.setHandler(t.dom(".add_peers_team").find(".handler")),t.setHandler(t.dom(".invite_peer_li").find(".handler")),t.setHandler(t.dom("#invitepeers").find(".handler")),t.setHandler(t.dom(".teamList").find(".handler")),t.setHandler(t.dom("#pendinginvite").find(".handler")),t.setHandler(t.dom("#pendingrequest").find(".pending_req_ul > li:first").find(".handler")),t["peers-service"].peersHolder={user_table_body:t.dom(".everyone_tbody"),header:t.dom("#body-header"),groups_ul:t.dom(".teamList"),groups:t.dom(".teamList").find("li:first").clone(!0,!0),invite_peers:t.dom("#invitepeers"),invite_peers_li:t.dom("#invitepeers").find(".invite_peer_li").clone(!0,!0),invited_mail_peers_li:t.dom("#invitepeers").find(".invited_user_mail_ul").find("li:first").clone(!0,!0),pending_invites:t.dom("#pendinginvite"),pending_invites_li:t.dom("#pendinginvite").find(".pendinglist_ul > li:first").clone(!0,!0).css("display",""),pending_request:t.dom("#pendingrequest"),pending_req_li:t.dom("#pendingrequest").find(".pending_req_ul > li:first").clone(!0,!0).css("display",""),add_team:t.dom("#addteam"),group_temp:{},temp:{},actTeam:"all",heading:t.dom(".heading").find("span.team_heading"),add_peers_team:t.dom(".add_peers_team"),add_peers_team_valid_peer:t.dom(".add_peers_team").find(".valid_peer").clone(!0,!0),add_peers_valid_added_peer:t.dom(".add_peers_team").find(".valid_added_peer").clone(!0,!0),change_status_modal:t.dom("#change_status_modal"),searchTimeout:null,comp_badges:t.dom(".everyone_tbody").find("tr").find(".peers_small_badge"),delete_user_modal:t.dom("#delete_user_modal"),delete_user_team_modal:t.dom("#delete_user_team_modal"),delete_team:t.dom("#delete_team"),scrollPos:null}}(window),function(e,t,i){i={cropHolderHover:function(){$("#cropping-holder").hover(function(){$("body").css("overflow","hidden")},function(){$("body").css("overflow","auto")})},save:function(e,s,n,a,o){"pay"===e.data().type&&(o=!1,n={plan:e.data().plan,type:"upgrade",cardHolderName:e.parents("div.card_details:lt(1)").find(".cardHolderName").val(),cardNumber:e.parents("div.card_details:lt(1)").find(".cardNumber").val().replace(/ /g,"").trim(),expirationDate:e.parents("div.card_details:lt(1)").find(".exp_mm").val()+"/"+e.parents("div.card_details:lt(1)").find(".exp_yy").val(),cvv:e.parents("div.card_details:lt(1)").find(".cvv_input").val(),postalCode:e.parents("div.card_details:lt(1)").find(".zip_input").val(),country:e.parents("div.card_details:lt(1)").find(".country_dropdown").find(".bootstrap-select").find("span").html().split("-")[1].replace(/ /g,"").trim()},a=!0,e.parents("div.card_details:lt(1)").find("li").find("input").each(function(){$(this).val().isEmpty()&&($(this).attr("class").indexOf("exp_mm")!=-1||$(this).attr("class").indexOf("exp_yy")!=-1?$(this).parent().attr("class",$(this).parent().attr("class")+" error"):$(this).attr("class",$(this).attr("class")+" error"),a=!1)}),/^[0-9]{12,19}$/.test(n.cardNumber)||(e.parents("div.card_details:lt(1)").find(".cardNumber").addClass("cardNumber error"),a=!1),/^[0-9]{3,4}$/.test(e.parents("div.card_details:lt(1)").find(".cvv_input").val())||(e.parents("div.card_details:lt(1)").find(".cvv_input").addClass("cvv_input error"),a=!1),e.parents("div.card_details:lt(1)").find(".expiration_input").val()&&(i.checkExDate(e.parents("div.card_details:lt(1)").find(".exp_mm"),e.parents("div.card_details:lt(1)").find(".exp_yy"))||(e.parents("div.card_details:lt(1)").find(".expiration_input").parent().addClass("error"),a=!1)),a&&!o&&(o=!0,e.html("Processing..."),t["common-service"].post("payment",{type:e.data().type,data:JSON.stringify({action:"create_transaction",cardDetails:n})},function(i){o=!1,"Success"===i.status?(window.plan=n.plan,e.parents("div.card_details:lt(1)").attr("class","card_details success").find("h2").html(i.msg),"pro"!==window.plan&&"premium"!==window.plan||t.dom(".header-upgrade,.header-pay").hide()):"Failure"===i.status&&Object.keys(i.data).length>0&&i.data.hasOwnProperty("card-status")&&(console.log("card-status ::"+i.data["card-status"]),i.data["card-status"]?(i.data["card-status"]||"message"===i.data["card-status"])&&e.parents("div.card_details:lt(1)").attr("class","card_details failed").find("h2").html(i.msg):(e.html("Pay"),console.log(i.data.validation_error_attribute),"number"===i.data.validation_error_attribute?e.parents("div.card_details:lt(1)").find("li").find("input.cardNumber").addClass("error"):"expiration_date"===i.data.validation_error_attribute?e.parents("div.card_details:lt(1)").find("li").find("input.expiration_input").addClass("error"):"cvv"===i.data.validation_error_attribute?e.parents("div.card_details:lt(1)").find("li").find("input.cvv_input").addClass("error"):e.parents("div.card_details:lt(1)").find("li").find("input").addClass("error")))})))},onfocus:function(e,t,s,n,a){0===t.which?e.attr("class").indexOf("exp_yy")!=-1||e.attr("class").indexOf("exp_mm")!=-1?e.parent().removeClass("error"):e.removeClass("error"):t.which>0&&("cardNumber"===e.attr("class")?e.val().length>22||!(t.which>=48&&t.which<58)&&32!=t.which&&9!=t.which&&8!=t.which&&0!=t.which?t.preventDefault():(s=t.target,n=s.selectionEnd,a=s.value.length,s.value=s.value.replace(/[^\dA-Z]/g,"").replace(/(.{4})/g,"$1 ").trim(),s.selectionEnd=n+=" "===s.value.charAt(n-1)&&" "===s.value.charAt(a-1)&&a!==s.value.length?1:0):"cardHolderName"===e.attr("class")?t.which>=65&&t.which<=90||t.which>=97&&t.which<=122||32==t.which||0==t.which||t.preventDefault():e.attr("class").indexOf("zip_input")!=-1?event.keyCode>=48&&event.keyCode<=57&&0==event.shiftKey||event.keyCode>=65&&event.keyCode<=90||event.keyCode>=97&&event.keyCode<=122||t.preventDefault():(t.which>=48&&t.which<58||32==t.which||39==t.which||9==t.which||8==t.which||0==t.which||t.preventDefault(),"cvv_input"===e.attr("class")?e.val().length>3&&t.preventDefault():e.attr("class").indexOf("exp_mm")!=-1?9!=t.which&&37!=t.which&&39!=t.which&&32!=t.which&&8!=t.which&&e.val().length>1&&t.preventDefault():e.attr("class").indexOf("exp_yy")!=-1&&(9==t.which?i.checkExDate(e.siblings("input.exp_mm"),e)||e.parent().addClass("error"):8!=t.which&&e.val().length>1&&t.preventDefault())))},checkExDate:function(e,t){return e.val().length<2&&e.val("0"+e.val()),!(t.val().length<2||0==parseInt(e.val())||parseInt(e.val())>12||parseInt(e.val())<(new Date).getMonth()+1&&parseInt((new Date).getFullYear().toString().substr(0,2)+t.val())<=parseInt((new Date).getFullYear())||parseInt((new Date).getFullYear().toString().substr(0,2)+t.val())<(new Date).getFullYear())},set:function(e,i,s){"settings"===e.data().type?(i=e.find("i").attr("class").indexOf("on")!=-1?"disable":"enable",t["common-service"].post("university",{type:e.data().type,data:JSON.stringify({action:i,page:e.data().page})},function(s){"Success"===s.status&&(e.find("i").attr("class","togl_butn "+("enable"===i?"on":"off")),t.utils.statusMsg(s.msg,!0))})):"upgrade"===e.data().type?(t.dom("div.card_details").find("li").find("input,label").val("").removeClass("error"),t.dom("div.card_details").find("li").find("button.pricing_pay").html("Pay"),t.dom(".upgrade_plan").attr("class","upgrade_plan card "+e.data().plan),t.dom(".upgrade_plan").find("span.amount").html("$"+e.data().amount),t.dom(".upgrade_plan").find(".pricing_pay").data("plan",e.data().plan),t.dom(".card_details").attr("class","card_details"),t.dom(".card_details").find(".cardHolderName").focus()):"language"===e.data().type&&t["common-service"].post("university",{type:e.data().type,data:JSON.stringify({language:e.data().lang})},function(e){"Success"===e.status&&(t.utils.statusMsg(e.msg,!0),t.dom("li.univ-settings").find("div."+e.data.language).addClass("active").siblings("div").removeClass("active"),window.location.reload(!1))})},open:function(e){"settings"===e.data().type?(isPeersDisabled&&t.dom(".peers-toggle").find("i").attr("class","togl_butn on"),isStoreDisabled&&t.dom(".store-toggle").find("i").attr("class","togl_butn on"),window.locale&&""!=window.locale&&"null"!=window.locale&&null!=window.locale?t.dom("li.univ-settings").find("div."+window.locale).addClass("active"):t.dom("li.univ-settings").find("div.EN").addClass("active")):"upgrade"===e.data().type?(t.utils.iframeReload(),t.dom(".upgrade_plan").attr("class","upgrade_plan "+window.plan).show(),"free"===window.plan?t.dom(".pricing_"+window.plan).attr("class","pricing_"+window.plan+" current").siblings().addClass("upgrade"):"starter"===window.plan?t.dom(".pricing_"+window.plan).attr("class","pricing_"+window.plan+" current").next().addClass("upgrade"):t.dom(".pricing_"+window.plan).attr("class","pricing_"+window.plan+" current"),t.dom("#pricing-backdrop").show()):"pay"===e.data().type?(t.dom(".upgrade_plan").attr("class","upgrade_plan card "+window.plan).show().find(".pricing_back").remove(),t.dom(".pricing").find(".pricing_"+window.plan).find(".upgrade_button").trigger("click")):"current-plan"===e.data().type&&(console.log("comes here"),t.dom(".upgrade_plan").attr("class","upgrade_plan current "+window.plan).attr("id","current_plan").show(),t.dom("#pricing-backdrop").show())},close:function(e){"pricing"===e.data().type&&(t.dom(".upgrade_plan").hide(),t.dom("#pricing-backdrop").hide())},back:function(e){"pricing"===e.data().type&&(t.dom(".upgrade_plan").attr("class","upgrade_plan "+window.plan),"free"===window.plan?t.dom(".pricing_"+window.plan).attr("class","pricing_"+window.plan+" current").siblings().addClass("upgrade"):"starter"===window.plan?t.dom(".pricing_"+window.plan).attr("class","pricing_"+window.plan+" current").next().addClass("upgrade"):t.dom(".pricing_"+window.plan).attr("class","pricing_"+window.plan+" current"))}},t=window.setReference("university-service",i)}(window),function(e,t,i){var s={};i={search:function(e,i,s,n){s=t.utils.getConstraints(t.pageAttr.page),n=$.trim(e.val()),n!==s.query&&(s.query=n,s.offset=0,t.loadBody(s))},populate:function(e,s){if(200===e.code&&e.response)if("EL"===window.locale&&"all"===s.category?t.dom("#header-name").html("Todo"):t.dom("#header-name").html(e.data.categoryName),delete e.data.categoryName,Object.keys(e.data).length>0){(0===t.utils.getConstraints(t.pageAttr.page).offset||s.query)&&t.dom("#store-holder").html("");for(var n in e.data)i.build(t.templates["single-stuff"].clone(!0,!0),e.data[n],"append");t.dom(".title",!0).tooltip(),Object.keys(e.data).length<20?t.pageAttr[t.utils.getConstraints(t.pageAttr.page).context].canLoad=!1:t.pageAttr[t.utils.getConstraints(t.pageAttr.page).context].canLoad=!0}else"store"===t.pageAttr.page&&(""!==s.filter&&"enabled"!==s.filter||s.query||0!==s.offset?t.dom("#helper-text").html(t.utils.localeContentBuffer("NO_RESULTS")).show():t.dom("#body").attr("class","row empty"))},build:function(e,i,s,n,a,o){document.getElementById(i.key)||(!n||1==n&&""==t.dom("#store-search").val())&&(t.dom("#body").hasClass("row empty")&&t.dom("#body").attr("class","row content"),a=isAdmin?t.dom("#activefilter").siblings("ul").find("a.active").data().value:"",i.isDeleted||(isAdmin?String(i.status).toLowerCase()!==a.toLowerCase():"enabled"!==String(i.status))||("disabled"===String(i.status)&&(e.css("opacity","0.5"),e.find(".adminstore").children(".show_product_act").removeClass("check").attr("title","Enable")),o=e.children("td.stuff-img").find("img"),t.utils.setImage(o,i.image),o.parent().parent().siblings("td.stuff-con").children("h2").html(i.name).siblings("p#stuffCreator").children("span").html(i.creator.name).parent().siblings("span.stuff_desc").html(i.description.replace(//g," ")),i.stuffLeft>0?e.children("td.price-col").children("div.stuff_frame").children("span.stuff_number").html(i.stuffLeft).parent().siblings("div.price-well").children("div.clearfix").html("").siblings("h3").html("<i class='coin-small'></i> "+i.points):(e.children("td.price-col").children("div.stuff_frame").hide(),e.children("td.price-col").children("div.price-well").children("h3").html("<i class='coin-small'></i> "+i.points).siblings("a").hide()),isAdmin||e.find(".adminstore").remove(),e.attr("data-status",i.status).data(),e.removeAttr("data-status"),e.attr("id",i.key),e.find(".ch_chatIcon").data("stfname",i.name),e.find(".ch_chatIcon").data("stfkey",i.key),e.find(".ch_chatIcon").data("reluniv",i.univKey),e.find(".ch_chatIcon").data(),e.find(".ch_chatIcon").removeAttr("stfname"),e.find(".ch_chatIcon").removeAttr("stfkey"),e.find(".ch_chatIcon").removeAttr("reluniv"),e.find(".ch_chatIcon").tooltip(),t.dom("#store-holder")[s](e)))},buy:function(e,n){if(s.temp=e.parents("tr.person-listing:lt(1)"),"enabled"===s.temp.data().status){var a={};a.id=s.temp.attr("id"),a.popup=!0,t["common-service"].get("store",{data:JSON.stringify(a)},function(e){e?"success"==e.status&&("can buy"==e.msg?"enabled"===e.data[a.id].status&&i.popup("purchase",e.data[a.id]):"less points"===e.msg&&t.utils.statusMsg(t.utils.localeContentBuffer("NO_POINTS_TO_BUY"),!0)):t.utils.statusMsg(t.utils.localeContentBuffer("OOPS_TRY_AFTER_SOMETIME"),!0)})}},edit:function(e,i){s.temp=e.parents("tr.person-listing:lt(1)");var n=s.temp.attr("id");t["common-service"].post("get",{type:"store",data:JSON.stringify({id:n,type:!0})},function(i){var s=i.data.Details;t.dom("#store_popup").children("div.modal-body").attr("id",n).children("div.challenge-title").children("div.cropped-container").children("img").attr("src",s.image+"=s44").parent().siblings("input.challenge_name").val(s.name).siblings("input.challenge_point").val(s.points),t.dom("#store_popup").children("div.modal-body").children("div.challenge_dtl").children("div.max_quantity").children("input.quantity_left").val(s.stuffLeft),t.dom("#store_popup").children("div.modal-body").children("div.challenge_dtl").children("div#send_mail").hide(),t.dom("#store_popup").children("div.modal-footer").children("a.submit_button").html(t.utils.localeContentBuffer("UPDATE_STUFF")),nicEditors.findEditor("store-textarea").setContent(s.description),t.loadPopup(e.data().type)})},enableOrDisable:function(e,i){s.temp=e.parents("tr.person-listing:lt(1)");var n=s.temp.data().status,a=s.temp.attr("id");"enabled"==n?(s.temp.find(".adminstore").children(".show_product_act").removeClass("check"),n="disabled"):"disabled"===n&&(s.temp.find(".adminstore").children(".show_product_act").addClass("check"),n="enabled"),t["common-service"].get("store",{data:JSON.stringify({id:a,status:n})},function e(e){"success"==e.status&&s.temp.remove(),t.utils.statusMsg(n,!0)})},del:function(e,n){s.temp=e.parents("tr.person-listing:lt(1)");var a=s.temp.attr("id");t["common-service"].post("get",{type:"store",data:JSON.stringify({id:a,type:!1})},function(e){var t=e.data.Details;"success"==e.status&&i.popup("delete_stuff",t)})},chatIcon:function(e,i){var s=e.data().stfkey,n=e.data().stfname,a=e.data().reluniv;t["common-service"].userStfFeedBack(s,n,a)},popup:function(e,i){s.temp=t.dom("#store-purchase").clone(!0,!0),t.utils.setImage(s.temp.find(".badge-img > img"),i.image),s.temp.find(".badge_content > h4").html(i.name),"purchase"===e?(s.temp.find("#stuffDesc").html("This stuff is worth of &nbsp<b>"+i.points+"</b>&nbsp point(s). Are you ready to purchase?"),s.temp.find(".delete_stuff").css("display","none")):"delete_stuff"===e?(s.temp.find("#stuffDesc").html(t.utils.localeContentBuffer("STUFF_DELETE")),s.temp.find(".purchase").css("display","none")):"pendingReq"===e&&s.temp.find("#stuffDesc").html('Sorry! There are  pending requests for this stuff , to <span class="notif_bgn">Delete</span> make sure you <span class="notif_bgn"> Approve </span> or <span class="notif_bgn">Disapprove </span> all the requests for this Stuff. '),"purchase"!==e&&"delete_stuff"!==e||s.temp.find("."+e).attr("id",i.key+"-popup").css("display",""),s.temp.find("#cancelStuff").html(t.utils.localeContentBuffer("CANCEL")),t.dom("#store-purchase").html(s.temp),t.loadPopup("store-purchase")},confirmBuy:function(e,i){var s=e.attr("id").split("-")[0];t.utils.statusMsg(t.utils.localeContentBuffer("PROCESSING")),t["common-service"].post("purchase",{type:"store",data:JSON.stringify({id:s})},function(i){if(i)if("success"==i.status){var s=i.data.data,n=s.key;i.data.notifCount&&i.data.notifCount>0&&t.notifications.updateCount(i.data.notifCount),s.stuffLeft>0?t.dom("#"+n).children("td.price-col").children("div.stuff_frame").children("span.stuff_number").html(s.stuffLeft):(t.dom("#"+n).children("td.price-col").children("div.stuff_frame").hide(),t.dom("#"+n).children("td.price-col").children("div.price-well").children("h3").html("<i class='coin-small'></i> "+s.points).siblings("a").hide(),t.dom("#"+n).children("td.price-col").children("div.price-well").children("div.clearfix").html("<span class='soldOut'>"+t.utils.localeContentBuffer("SOLD_OUT")+"</span>")),t.utils.statusMsg(t.utils.localeContentBuffer("PURCHASED"),!0),t.utils.counter(t.dom(".overall_points > span"),t.dom(".overall_points > span").html(),i.data.userPoints)}else"less points"==i.status?t.utils.statusMsg(t.utils.localeContentBuffer("NO_POINTS_TO_BUY")):"Sold Out"==i.status&&(t.utils.statusMsg(rsident.content.STUFF_SOLD_OUT),t.dom("#"+n).children("td.price-col").children("span").hide(),t.dom("#"+n).children("td.price-col").children("div.price-well").children("h3").html("<i class='coin-small'></i> "+s.points).siblings("a").remove(),t.dom("#"+n).children("td.price-col").children("div.price-well").children("div.clearfix").html("<span class='soldOut'>"+t.utils.localeContentBuffer("SOLD_OUT")+"</span>"));else t.utils.statusMsg(t.utils.localeContentBuffer("OOPS_TRY_AFTER_SOMETIME"));e.parents("#popup:lt(1)").modal("hide")})},confirmDel:function(e,n){var a=e.attr("id").split("-")[0];t["common-service"].post("delete",{type:"store",data:JSON.stringify({id:a})},function n(n){"success"==n.status?(i.removeElement(a,"delete"),t.utils.statusMsg(t.utils.localeContentBuffer("SUCCESSFULLY_DELETED"),!0),e.parents("#popup:lt(1)").modal("hide")):"purchased items exist"==n.status&&(s.temp=e.parents("#store-purchase"),s.temp.find("#stuffDesc").html('Sorry! There are  pending requests for this stuff , to <span class="notif_bgn">Delete</span> make sure you <span class="notif_bgn"> Approve </span> or <span class="notif_bgn">Disapprove </span> all the requests for this Stuff. '),s.temp.find(".delete_stuff").css("display","none"),s.temp.find("#cancelStuff").html(t.utils.localeContentBuffer("OK_GOTIT")))})},afterEdit:function(e){e.stuffLeft>0?t.dom("#"+e.key).children("td.price-col").children("div.stuff_frame").show().children("span.stuff_number").html(e.stuffLeft).parent().siblings("div.price-well").children("div.clearfix").html("").siblings("h3").html("<i class='coin-small'></i> "+e.points).siblings("a").show():(t.dom("#"+e.key).children("td.price-col").children("div.stuff_frame").hide(),t.dom("#"+e.key).children("td.price-col").children("div.price-well").children("h3").html("<i class='coin-small'></i> "+e.points).siblings("a").hide(),t.dom("#"+e.key).children("td.price-col").children("div.price-well").children("div.clearfix").html("<span class='soldOut'>"+t.utils.localeContentBuffer("SOLD_OUT")+"</span>")),t.dom("#"+e.key).children("td.stuff-img").children("img.store-photo").attr("src",e.image+"=s134").parent().siblings("td.stuff-con").children("h2").html(e.name).siblings("p#stuffCreator").children("span").html(e.creator.name).parent().siblings("span.stuff_desc").html(e.description.replace(//g," "))},removeElement:function(e,i,s){s=isAdmin?t.dom("#activefilter").find(".active-recent").html().trim():"enabled","delete"!==i&&i.toLowerCase()==s.toLowerCase()||(t.dom("#store-holder").find("#"+e).remove(),t.dom("#store-holder").children().length<=0&&("enabled"===s.toLowerCase()?t.dom("#body").attr("class","row empty"):t.dom("#helper-text").html(t.utils.localeContentBuffer("NO_RESULTS")).show()))},sideBarCount:function(e){t.dom("#store-sidebar").find(".label-default").html(e)}},t=e.setReference("store-service",i)}(window),function(e,t,i){i={attr:{searchTimeout:null},clearLevels:function(){t.pageAttr.level1=void 0,t.pageAttr.level2=void 0},clearChallengeLevels:function(){t["challenges-service"].level1=void 0,t["challenges-service"].level2=void 0},loadpage:function(e,i){if(t.history.isPopTriggered||"admin"===t.pageAttr.page||t.history.push({},t.pageAttr.page.toUpperCase(),"/"+t.pageAttr.univ+"/"+t.pageAttr.page+"/"+t.utils.getConstraints(t.pageAttr.page).category),t.pageAttr.loadedPages[t.pageAttr.page])t.dom("#body").attr("class","row "+t.pageAttr.loadedPages[t.pageAttr.page]),"peers"===t.pageAttr.page||"challenges"===t.pageAttr.page||"me"===t.pageAttr.page?t.pageAttr.level1?t[t.utils.getConstraints(t.pageAttr.page).context+"-service"].open(null,null,t.pageAttr.level1):"challenges"===t.utils.getConstraints(t.pageAttr.page).context?t.loadBody(e):t["peers-service"].scrollPos&&t["peers-service"].scrollPos>0&&($("html, body").css("overflow","inherit"),
$("html, body").animate({scrollTop:t["peers-service"].scrollPos},1)):t.dom(document,!0).scrollTop();else{switch(t.pageAttr.page){case"me":t.dom("#body-header").children("span").html(""),t.dom("#challenges-holder").html(""),t.dom("#loader").show(),delete t.pageAttr.loadedPages.challenges;break;case"challenges":delete t.pageAttr.loadedPages.me;var s={};s.minDate=new Date,s.singleDatePicker=!0,s.drops="up",s.timezone=(new Date).getTimezoneOffset(),s.autoUpdateInput=!1,t.dom("input#publishdatepicker").daterangepicker(s),t.dom("input#publishdatepicker").val("")}if("admin"===t.pageAttr.page){if("reports"===e.category)return t.dom("#sidebar").hide(),t.dom(".admin-content").attr("class","admin-content reports"),void t.reports.callUnivReports();t.dom("#sidebar").show(),t.pageAttr.level2||t.pageAttr.level1||0!==e.offset||t.dom("#loader").show(),t.dom(".admin-content").attr("class","admin-content "+e.category),"challengeRequests"===e.category?"EN"===window.locale?t.dom("#adminTitle").html("Challenge Requests- "):t.dom("#adminTitle").html("Solicitud de retos- "):"stuffRequests"===e.category&&("EN"===window.locale?t.dom("#adminTitle").html("Stuff Requests- "):t.dom("#adminTitle").html("Solicitudes Cosas- ")),t.pageAttr.level1&&t.pageAttr.level2&&t["userRequest-service"].open({data:function(){return{type:t.pageAttr.level2,user:t.pageAttr.level1,offset:-1,context:e.category}}})}else if("activity"===t.pageAttr.page)i=t.dom(".feeds-university-logo"),i.attr("src").indexOf("=s")===-1&&i.attr("src",t.utils.setImage(i,i.attr("src"))).show(),t.loadSideBar();else{if(t.pageAttr.level2||t.pageAttr.level1||t.dom("#loader").show(),t.history.isPopTriggered||"peers"==t.pageAttr.page&&t.pageAttr.level1||t.loadSideBar(),t.pageAttr.level2)return void t[t.utils.getConstraints(t.pageAttr.page).context+"-service"].open(null,null,t.pageAttr.level2);if(t.pageAttr.level1)return void t[t.utils.getConstraints(t.pageAttr.page).context+"-service"].open(null,null,t.pageAttr.level1);if("me"===t.pageAttr.page)return t.utils.setConstraints("me","all","workingon","",0,"challenges"),void t.dom("#switch_workingon_completed").find("#working_on_badges").trigger("click")}t.loadBody(t.utils.getConstraints(t.pageAttr.page))}},buildUnivs:function(){i.get("universites",{data:JSON.stringify({})},function(e,i,s){if(200==e.code&&e.response&&e.data&&Object.keys(e.data).length>0){if(e.data.isPremiumUser&&delete e.data.isPremiumUser,t.dom("li.univ_list").show(),i=t.utils.sortObjectKeys(e.data),s=t.dom("ul.organization_list").children("li").first().children("ul.univ-list"),i&&Object.keys(i).length>0)for(var n in i)s.append('<li><a onclick="return false;" href="/'+i[n].simpleName+"/"+t.pageAttr.page+'" name="'+i[n].simpleName+'" class="handler" handler="click/common-service/loadUniv"><span>'+n+"<span></span></span></a></li>"),s.find("li").last().off().on("mouseover",{univKey:n,uname:i[n].simpleName},function(e){var i=window.location.pathname;t.pageAttr.page.indexOf("admin")!=-1?i.indexOf("challengeRequests")!=-1?$(this).find("a").attr("href","/"+e.data.uname+"/admin/challengeRequests"):i.indexOf("stuffRequests")!=-1?$(this).find("a").attr("href","/"+e.data.uname+"/admin/stuffRequests"):i.indexOf("reports")!=-1&&$(this).find("a").attr("href","/"+e.data.uname+"/admin/reports"):$(this).find("a").attr("href","/"+e.data.uname+"/"+t.pageAttr.page)});else t.dom("ul.organization_list").find(".manageUniv").parent().siblings().hide();t.setHandler(t.dom("ul.organization_list").find(".handler"))}else t.dom("li.univ_list").remove()})},profilePopup:function(e,s){i.post("get",{type:"user",data:JSON.stringify({})},function n(n){var a=n.data.user;if(t.dom(".over-cover").hide(),t.dom("#profile-settings").children("div.modal-body").attr("id",a.semanticUserName),t.utils.setImage(t.dom("#pf-img"),a.profilePicUrl),t.dom("#profile-settings").find(".prof_fstname").val(a.firstName.trim()+""+(a.lastName?" "+a.lastName:"")),t.dom("#profile-settings").find(".profile_dtl > p").html(a.userName),a.logins.indexOf("NORMAL")!=-1&&t.dom("#profile-settings").find(".profile_dtl").find("#change_password").attr("class",""),a.otherDetails){var o=JSON.parse(a.otherDetails);t.dom("#profile-settings").find("#user_skype_Id").val(o.skypeId),t.dom("#profile-settings").find("#user_mobile_no").val(o.mobile).attr("maxlength","15")}t.dom("#profile-settings").find("#user_tagline").val(a.tagLine),i.openPopup(e,s),setTimeout(function(){t.dom(".prof_fstname").focus()},500)})},login:function(e,s){t.dom("#signuppoup").find(".modal-title").html("Log In!"),i.removeClasses(),t.dom("#signuppoup").find("#signup-popup-form #name").hide(),t.dom("#signuppoup").find("#signup-popup-form #firstName").hide(),t.dom("#signuppoup").find("#signup-popup-form #lastName").hide(),t.dom("#signuppoup").find("#signup-popup-form #phone_num").hide(),t.dom("#signuppoup").find("#signup-popup-form #name").val(""),t.dom("#signuppoup").find("#signup-popup-form #username").attr("id","email"),t.dom("#signuppoup").find("#signup-popup-form #email").val(""),t.dom("#signuppoup").find("#signup-popup-form #password").val(""),t.dom("#signuppoup").find("#signup-popup-form .create-account-button").attr("value","Log In"),t.dom("#signuppoup").find("#signup-popup-form .create-account-button").data("type","login"),t.dom("#signuppoup").find("#signup-popup-form .create-account-button").removeAttr("data"),t.dom("#signuppoup").find("#signup-popup-form .create-account-button").attr("onclick","login('public');return false;"),t.dom("#signuppoup").find(".modal-body #social-login > p").html(" Log in quick with your social login"),t.dom("#signuppoup").find(".modal-body #social-login .button-facebook > span").html(" Log in with Facebook"),t.dom("#signuppoup").find(".modal-body #social-login .button-facebook").attr("onclick","oauthlogin('FACEBOOK','HEADER')"),t.dom("#signuppoup").find(".modal-body #social-login .button-google > span").html(" Log in with Google"),t.dom("#signuppoup").find(".modal-body #social-login .button-google").attr("onclick","oauthlogin('GOOGLE','HEADER')"),t.dom("#signuppoup [id='email']").focus();var n="Still don't have an account, <span class='handler' handler='click/common-service/loginRSignup'>Sign Up</span> here";t.dom("#signuppoup").find("#signup-popup-form #otr-cont").html(n).queue(function(e){t.dom(this).find("span").data("type","signup").data(),t.dom(this).find("span").removeAttr("type"),t.setHandler(t.dom(this).find("span")),e()}),t.dom("#signuppoup").modal("show"),i.setFocusEmail()},removeClasses:function(){t.dom("#signuppoup").find("#signup-popup-form #name").hasClass("loginError")&&t.dom("#signuppoup").find("#signup-popup-form #name").removeClass("loginError"),t.dom("#signuppoup").find("#signup-popup-form #username").hasClass("loginError")&&t.dom("#signuppoup").find("#signup-popup-form #username").removeClass("loginError"),t.dom("#signuppoup").find("#signup-popup-form #email").hasClass("loginError")&&t.dom("#signuppoup").find("#signup-popup-form #email").removeClass("loginError"),t.dom("#signuppoup").find("#signup-popup-form #password").hasClass("loginError")&&t.dom("#signuppoup").find("#signup-popup-form #password").removeClass("loginError")},signup:function(){t.dom("#signuppoup").find(".modal-title").html("Sign Up!"),i.removeClasses(),t.dom("#signuppoup").find("#signup-popup-form #name").show(),t.dom("#signuppoup").find("#signup-popup-form #firstName").show(),t.dom("#signuppoup").find("#signup-popup-form #lastName").show(),t.dom("#signuppoup").find("#signup-popup-form #phone_num").show(),t.dom("#signuppoup").find("#signup-popup-form").removeAttr("action"),t.dom("#signuppoup").find("#signup-popup-form").removeAttr("method"),t.dom("#signuppoup").find("#signup-popup-form #name").val(""),t.dom("#signuppoup").find("#signup-popup-form #email").attr("id","username"),t.dom("#signuppoup").find("#signup-popup-form #username").val(""),t.dom("#signuppoup").find("#signup-popup-form #password").val(""),t.dom("#signuppoup").find("#signup-popup-form .create-account-button").attr("value","Sign Up"),t.dom("#signuppoup").find("#signup-popup-form .create-account-button").data("type","signup"),t.dom("#signuppoup").find("#signup-popup-form .create-account-button").removeAttr("data"),t.dom("#signuppoup").find("#signup-popup-form .create-account-button").attr("onclick","signUp();return false;"),t.dom("#signuppoup").find(".modal-body #social-login > p").html(" Sign Up quick with your social login"),t.dom("#signuppoup").find(".modal-body #social-login .button-facebook > span").html(" Sign Up with Facebook"),t.dom("#signuppoup").find(".modal-body #social-login .button-facebook").attr("onclick","oauth('FACEBOOK','HEADER')"),t.dom("#signuppoup").find(".modal-body #social-login .button-google > span").html("Sign Up with Google"),t.dom("#signuppoup").find(".modal-body #social-login .button-google").attr("onclick","oauth('GOOGLE','HEADER')"),t.dom("#signuppoup").find("#signup-popup-form #name").focus();var e="Already have an account, <span  class=handler handler=click/common-service/loginRSignup >Log In</span> here";t.dom("#signuppoup").find("#signup-popup-form #otr-cont").html(e).queue(function(e){t.dom(this).find("span").data("type","login").data(),t.dom(this).find("span").removeAttr("type"),t.setHandler(t.dom(this).find("span")),e()}),t.dom("#signuppoup").modal("show"),i.setFocusName()},forgetPassword:function(){t.dom(".forgot_pwd").on("click",function(){t.dom("#signuppoup").modal("hide"),""!=t.dom("#email").val()&&null!=t.dom("#email").val()&&t.dom("#forgot-emailId").val(t.dom("#email").val()),t.dom("#forgotpwd").modal("show"),t.dom("#forgotpwd").on("click",".create-account-button",function(){var e=t.dom("#forgot-emailId").val();""!=e&&null!=e&&jchcomms.vEmail(e)||jchcomms.utils.statusMsg(t.utils.localeContentBuffer("ENTER_VALID_EMAIL"))})})},loginRSignup:function(e,t){var s=e.data().type;"login"===s?i.login():"signup"===s&&i.signup()},setFocusEmail:function(){t.dom("#signuppoup").on("shown.bs.modal",function(){t.dom("#signuppoup [id='email']").focus()})},setFocusName:function(){t.dom("#signuppoup").on("shown.bs.modal",function(){t.dom("#signuppoup [id='name']").focus()})},profileSettings:function(e,s){var n={};e=e.parents("#profile-settings"),n.id=e.children("div.modal-body").attr("id");var a="";return a=e.find(".prof_fstname").val().toString().trim(),n.firstName=a.substr(0,a.indexOf(" "))?a.substr(0,a.indexOf(" ")):a,n.lastName="-1"!=a.indexOf(" ")?a.substr(a.indexOf(" ")+1)?a.substr(a.indexOf(" ")+1):a:n.lastName="",n.firstName?(""!=e.find("#oldPassword").val()&&""!=e.find("#newPassword").val()&&(n.oldPassword=e.find("#oldPassword").val(),n.newPassword=e.find("#newPassword").val()),n.otherDetails={},n.otherDetails.skypeId=e.find("#user_skype_Id").val(),n.otherDetails.mobile=e.find("#user_mobile_no").val(),n.tagLine=e.find("#user_tagline").val(),n.newPassword&&!n.oldPassword?(t.utils.statusMsg(t.utils.localeContentBuffer("OLD_PASSWORD"),!0),!1):(a=e.find("div.choose-file.cropped-container").find("input"),n.crop=a.length>0?a.data().coords:{},void($.isEmptyObject(n.crop)?i.post("update",{type:"user",data:JSON.stringify(n)},function e(e){i.afterProfileUpload(e,"user")}):i.upload("user",n,e)))):(e.find(".prof_fstname").focus(),t.utils.statusMsg(t.utils.localeContentBuffer("FIRST_EMPTY_NOT_EMPTY"),!0),!1)},afterProfileUpload:function(e,i,s){e.data&&(t.dom("#usr_name").html(e.data.user.firstName),t.utils.statusMsg(e.status,!0),"success"==e.status&&t.dom("a.profile-close").trigger("click"))},changePass:function(e,t){e.parents(".profile_dtl").children("#text_password").attr("class",""),e.attr("class","hide")},loadUniv:function(e,i){location.href="/"+i.data.data.name+"/"+t.pageAttr.page},search:function(e,s,n){n="admin"===t.pageAttr.page?"userRequest":t.pageAttr.page,e.data().type&&"assigned-users"===e.data().type||(t.pageAttr.level1=t.utils.UNDEFINED,t.pageAttr.level2=t.utils.UNDEFINED,t[n+"-service"].level1=t.utils.UNDEFINED,t[n+"-service"].level2=t.utils.UNDEFINED),i.attr.searchTimeout&&clearTimeout(i.attr.searchTimeout),i.attr.searchTimeout=setTimeout(function(){t[n+"-service"].search(e,s)},500)},get:function(e,i,s){t.xhr({url:"/get/"+t.pageAttr.univ+"/"+e,type:"GET",data:i,success:s})},post:function(e,i,s){t.xhr({url:"/post/"+t.pageAttr.univ+"/"+e,type:"POST",data:{data:i.data,type:i.type},success:s,dataType:"json"})},upload:function(e,s,n,a,o){o=e,e="group"===e?"challenges":e,t.dom("div."+e+"-scope > div.empty-holder").fadeOut(),t.dom(".over-cover").fadeIn("fast"),"challenges"===e?a=n.find("div.challenge-title").find("input.file"):"requireattachment"===e?(a=n,n=n.parents("div.accordion-group:lt(1)")):a=n.find("input.file"),a.removeAttr("data-coords"),i.get("session",{data:JSON.stringify({type:o,service:"upload"})},function(r){r&&r.code&&200===r.code&&$.ajaxFileUpload({url:r.data.result,secureuri:!1,fileElementId:a,dataType:"json",data:JSON.stringify(s),success:function(a,r){"requireattachment"===e?(t["challenges-service"].afterRAUpload(a,e,s,n),t.dom(".over-cover").hide()):"user"===e?i.afterProfileUpload(a,e,s):(t.dom(".over-cover").hide(),t[e+"-create"].afterUpload(a,o,s),window.scroll(0,0))}})})},getCounts:function(){t.xhr({url:"/get/"+t.pageAttr.univ+"/counts",type:"GET",data:{data:JSON.stringify({})},success:function(e,t,s){e&&200===e.code&&e.data&&e.data.counts&&(e.data.counts=JSON.parse(e.data.counts),t=e.data.counts.cr,s=e.data.counts.sr),i.updateUICounts(t,s)}})},updateUICounts:function(e,i){e!==-1&&(e=parseInt(e),e=isNaN(e)||e<0?0:e,t.dom("#challengeRequests").find("span").html("("+e+")")),i!==-1&&(i=parseInt(i),i=isNaN(i)||i<0?0:i,t.dom("#stuffRequests").find("span").html("("+i+")")),t.dom("#requestCount").html("("+("challengeRequests"===t.pageAttr.category?e:i)+")").show()},updUserActiveStatus:function(e){var i=e.user;i&&i.key&&($(".msgscontainer").is(":visible")&&t.messages.updActvUser(i),window.page&&"peers"===window.page&&$(".everyone_tbody").find("[data-user-id='"+i.key+"']")&&(i.logInTime&&i.logInTime>i.logOutTime?$(".everyone_tbody").find("[data-user-id='"+i.key+"']").find(".userchatico").hasClass("online")||$(".everyone_tbody").find("[data-user-id='"+i.key+"']").find(".userchatico").addClass("online"):$(".everyone_tbody").find("[data-user-id='"+i.key+"']").find(".userchatico").hasClass("online")&&$(".everyone_tbody").find("[data-user-id='"+i.key+"']").find(".userchatico").removeClass("online")))},gHC:function(){t.pageAttr.univ&&$.ajax({type:"GET",url:"/getCountsForCompany/"+t.pageAttr.univ,success:function(e){if(1==e.response)if(null!=e.data){if(null!=e.data.userCountObj){var i=JSON.parse(e.data.userCountObj.count),s=i.notifCount,n=i.msgCount;if(t.pageAttr.userCount=t.pageAttr.userCount?t.pageAttr.userCount:{},t.pageAttr.userCount.allNotifCnt=s,t.pageAttr.userCount.allMsgCnt=n,t.notifications.updateCount(s),s&&null!=s&&s>0)if(0!=$("#notify_icon").has(".notification_count").size())$(".notification_count").html(s).show();else{var a='<span class="badge badge-important pull-right notification_count">'+s+"</span>";$("#notify_icon > i").html(a).show()}else $(".notification_count").html("");if(n&&null!=n&&n>0)if(0!=$("#msgtoggle").has(".conv_count").size())$(".conv_count").html(n).show();else{var a='<span class="badge badge-important pull-right conv_count">'+n+"</span>";$("#msgtoggle > i").html(a).show()}else $(".conv_count").html("");var o=0;o=s+n}if(null==e.data.univCntObj||$.isEmptyObject(e.data.univCntObj))$("#admin").is(":visible")&&($("#challengereq").find("span").html("(0)"),$("#stuffreq").find("span").html("(0)"),$("#badge_request").find("#inr_count").html("(0)"),$("#stuff_request").find("#inr_count").html("(0)"));else{var r=e.data.univCntObj.count,l=0,d=0;if(null!=r&&r.length>0)for(var c in r){var h=JSON.parse(r[c]),u=Object.keys(h);"chReq"===u[0]?(l=h[u[0]],t.pageAttr.userCount.chReq=l):"stuffReq"===u[0]&&(d=h[u[0]],t.pageAttr.userCount.stuffReq=d)}t.pageAttr.userCount&&$("#admin").is(":visible")&&($("#challengereq").find("span").html("("+l+")"),$("#stuffreq").find("span").html("("+d+")"),$("#badge_request").find("#inr_count").html("("+l+")"),$("#stuff_request").find("#inr_count").html("("+d+")"))}}else $("#admin").is(":visible")&&($("#challengereq").find("span").html("(0)"),$("#stuffreq").find("span").html("(0)"),$("#badge_request").find("#inr_count").html("(0)"),$("#stuff_request").find("#inr_count").html("(0)"))}})},openPopup:function(e,s){"user-feedback"===e.data().type&&i.userChFeedBack(e,s),t.loadPopup(e.data().type,e)},popupHandler:function(e,i,s){"show"===e?($("body").height($(window).height()),$("body").css("overflow","hidden")):"close"===i.data.data.action&&(t.dom(i.target).hasClass("rearrange_close")&&(t["challenges-service"]["rearrange-open"]=!1,t.dom("#challenges-sidebar").find("li.active").trigger("click")),$("body").height($(document).height()),$("body").css("overflow","scroll"))},getGoogleFiles:function(e,i){$("ul.drive_file_ul > li").find("a.active").each(function(e,i,s){e=t.dom(this,!0).parent().data().details,i=document.createElement("span"),s=t.dom(i,!0),s.attr({class:"file","data-type":"external","data-details":JSON.stringify(e)}).data(),s.removeAttr("data-details"),t.attachments.handler(t.driveNode,i,null,e.name)}),t.dom(".dtldrive_viewclose").trigger("click")},userChFeedBack:function(e,i){$("#user-feedback .hdr").html(t.utils.localeContentBuffer("REPORT_TO")+" "+(e.data().creator?e.data().creator:"The Challenge Creator")),$("#user-feedback .cont").html(t.utils.localeContentBuffer("CHALLENGE_REPORT_MSG")),$("#user-feedback #submit_issue").html(t.utils.localeContentBuffer("SUBMIT")),$("#user-feedback #issue_area").val(""),$("#user-feedback #submit_issue").addClass("feedback"),$("#user-feedback #submit_issue").removeClass("issue"),$("#user-feedback .foot-cont").hide(),$("#user-feedback #issue_area").show(),$("#user-feedback .cont").show(),$("#user-feedback .modal-footer").show(),$("#user-feedback #submit_issue").data("tyname",e.data().chname),$("#user-feedback #submit_issue").data("type","ch-Feedbck"),$("#user-feedback #submit_issue").data("rUniv",t.pageAttr.univ),setTimeout(function(){$("#user-feedback #issue_area").focus()},500),$("#user-feedback #submit_issue").removeAttr("tyname"),$("#user-feedback #submit_issue").removeAttr("type"),$("#user-feedback #submit_issue").removeAttr("rUniv")},userStfFeedBack:function(e,i,s){t.loadPopup("user-feedback"),$("#user-feedback .hdr").html(t.utils.localeContentBuffer("REPORT_STUFF_CREATOR")+" - "+i),$("#user-feedback .cont").html(t.utils.localeContentBuffer("STUFF_REPORT_MSG")),$("#user-feedback #submit_issue").html(t.utils.localeContentBuffer("SUBMIT")),$("#user-feedback #issue_area").val(""),$("#user-feedback #submit_issue").addClass("feedback"),$("#user-feedback #submit_issue").removeClass("issue"),$("#user-feedback .foot-cont").hide(),$("#user-feedback #submit_issue").data("tyname",e),$("#user-feedback #submit_issue").data("type","stuff-Feedbck"),$("#user-feedback #submit_issue").data("rUniv",s),$("#user-feedback #issue_area").show(),$("#user-feedback .cont").show(),$("#user-feedback .modal-footer").show(),setTimeout(function(){$("#issue_modal #issue_area").focus()},500),$("#user-feedback #submit_issue").removeAttr("tyname"),$("#user-feedback #submit_issue").removeAttr("type"),$("#user-feedback #submit_issue").removeAttr("rUniv"),$("#submit_issue").button().click(function(){$("#user-feedback").modal("hide")})},submitIssue:function(e,s){var n=e.data().type,a=e.data().tyname,o=(e.data().rUniv,$.trim($("#issue_area").val()));e.hasClass("feedback")&&i.get("feedbackIssue",{data:JSON.stringify({msg:o,type:n,id:a})},function(e){"Enter your feedback message"==e.msg&&t.dom("body").find("#voice-box").find("span").html("Enter your feedback!"),"Trying to send to same creator!"==e.msg?(t.dom("body").find("#voice-box").find("span").html("Sorry! You are trying to Message yourself!"),t.dom("body").find("#voice-box").fadeIn(),t.dom("body").find("#voice-box").fadeOut(3e3)):(t.dom("#user-feedback #issue_area").hide(),t.dom("#user-feedback .cont").hide(),t.dom("#user-feedback .modal-footer").hide(),t.dom("#user-feedback .foot-cont").show(),t.dom("#user-feedback").modal("hide"),t.dom(".notifi_popup").find(".modal-header").css({"background-color":"#fff","padding-top":"10%","padding-bottom":"3%"}),t.dom(".notifi_popup").find("#feedbackModalLabel").html("Report successfully submitted!").css({"font-size":"2.0em","line-height":"0.5em"}),t.dom(".notifi_popup").find(".modal-body").html("<img src='/images/feedbackLoopToDo/tick.png' style='width:10% ; height:10%'></img>"),t.dom("#popup-blocks").attr("class","notifypopup"))})},closeViewer:function(e){e.parent().parent().hide(),e.siblings("iframe").remove(),e.siblings("object").remove()},closeTour:function(){t.dom(".on_boarding").hide()}},document.onscroll=function(e,i,s){e=t.dom(document),100*Math.round($(window).scrollTop()/(e.height()-$(window).height()))>75&&"admin"!==t.pageAttr.page&&(s=t.utils.getConstraints(t.pageAttr.page).context,!t.pageAttr[s].canLoad||t.pageAttr.level1!==t.utils.UNDEFINED&&""!=t.pageAttr.level1||(t.pageAttr[s].canLoad=!1,"me"===t.utils.getConstraints(t.pageAttr.page).context||"peers"===t.utils.getConstraints(t.pageAttr.page).context&&"me"===t.pageAttr.page?("peers"===t.utils.getConstraints(t.pageAttr.page).context?(i=t.utils.getConstraints("me"),i=t.utils.setConstraints("me","all","approved","",i.offset+20,"peers")):(i=t.utils.getConstraints(s),i=t.utils.setConstraints(s,"all","approved","",i.offset+20,s)),t.loadLearning(i)):(i=t.utils.getConstraints(t.pageAttr.page),i=t.utils.setConstraints(t.pageAttr.page,i.category,i.filter,i.query,i.offset+20,i.context),t.loadBody(i))))},e.onresize=function(){var e=$(window).height(),t=window.innerHeight,i=$(".container").height();$(".app_reqlist").height(t-250),i>e?$(".footer-container").css("position","inherit"):i<e&&$(".footer-container").css("position","fixed"),$("ul#peers-sidebar").height(e-210),$("#messages_holder .nav.nav-tabs.msg_menu").height(t-218),$("#messages_holder .nav.nav-tabs.conv_srcRes").height(t-218),$("#messages_holder .textarea_holder textarea").hasClass("unfocus")?$("#messages_holder .msg_content").height(t-175):$("#messages_holder .msg_content").height(t-327),$("#tab2 .textarea_holder textarea").hasClass("unfocus")?$("#tab2 .msg_content").height(t-405):$("#tab2 .msg_content").height(t-331),$("#each_Message_Content .textarea_holder #indiv-text-Content").hasClass("unfocus")&&$("#each_Message_Content #comments_content").height(t-433);var s=window.innerHeight;$(".msgs_listhold").height(s-93);var n=$("#headheight").outerHeight(),a=$(".textareahold").outerHeight(),o=s-n-a;$(".msgs_detail").height(o-35)},$(document).on("click",function(e){$(".msgscontainer").is(":visible")&&0===$(e.target).parents("div.msgscontainer:lt(1)").length&&(t.dom(".msgscontainer").slideToggle(),t.dom("#msgtoggle").hasClass("active")&&t.dom("#msgtoggle").removeClass("active"),t.messages.checkOut(),t.dom("body").css("overflow","auto"),t.dom("html").css("overflow","auto")),0===t.dom(e.target,!0).parents("div.notify_list_hold:lt(1)").length&&t.notifications.get(),t.dom(".dropdown, .btn-group").removeClass("open")}),t=e.setReference("common-service",i);var s=t.dom(".show_btn");s.click(function(){$(this).parent(".description_height").toggleClass("expand",function(){t.dom(".description_height").hasClass("expand")?s.text("(less)"):s.text("...more")})})}(window),function(e,t,i){var s={},n={},a={},o="",r=[],l=[],d=[],c=[],h={},u=!1,p=!1,f=!1,m=null,g=null;i={loadmsgs:function(){$(".notify_list_hold").is(":visible")&&($(".notify_list").size()>0&&$(".notify_list > li").remove(),$(".notify_list_hold").hide(),$("#notify_icon").hasClass("active")&&$("#notify_icon").removeClass("active")),$(".msgscontainer").is(":visible")?($("#msgtoggle").removeClass("active"),$(".msgscontainer").slideToggle(),i.checkOut(),$("body").css("overflow","auto"),$("html").css("overflow","auto")):($("body").css("overflow","hidden"),$("html").css("overflow","hidden"),$("#msgtoggle").hasClass("active")||$("#msgtoggle").addClass("active"),$(".view1").css("margin-left","0px"),$(".view2").css("margin-left","400px"),$("#compose_msg").show(),$("#close_search").hide(),$(".view1 .search_ico").removeClass("search_focus"),$(".msgscontainer").slideToggle(),i.openMsgs())},openMsgs:function(){if($(".msgscontainer").is(":visible")&&0==n.curReq){s.view1.find(".conv_search").val(""),s.view1.find(".usr_srch").val(""),s.view1.find(".msgpeers_list .nav").html(""),s.view1.find(".msgpeers_list").hide(),$("#view1Spinner").show(),n.curReq=!0,c.length>0&&($.each(c,function(e,t){t.abort()}),c=[]);var e=$.ajax({type:"GET",url:"/myConversations/get/all/conV",data:{univName:t.pageAttr.univ},success:function(e){if(n.curReq=!1,null!=e.data&&null!=e.data.curUser&&(o=e.data.curUser.key,h=e.data.curUser),s.msgs_listhold.find(".nav").html(""),1==e.response&&null!=e.data&&null!=e.data.convMrgr){var t=e.data.convMrgr;n.convList=t,n.convOffset=0,s.view1.find(".msgs_listhold #blank-messages").hide(),i.getConversation()}else"Session Invalid!"===e.msg||"Session Invalid"===e.msg?($("#voice-box").fadeIn(),$("body").find("#voice-box").find("span").html("Session Expired! Please LogIn Again!"),$("body").find("#voice-box").fadeIn(),$("body").find("#voice-box").fadeOut(3500)):(n.convList?n.convList:{},$("#view1Spinner").hide(),s.view1.find(".msgs_listhold #blank-messages").show())},error:function(){n.curReq=!1}});c.push(e)}},getConversation:function(){if(n.convList){var e=n.convList.list;if(null!=e&&e&&e.length>0){if(n.convOffset>=0){var o=n.convOffset,r=[];if(n.convOffset<=e.length){for(o;o<e.length&&r.length<15;o++)r.push(e[o]);0==n.curReq&&null!=r&&r.length>0&&(n.curReq=!0,n.convOffset=n.convOffset+r.length,$.ajax({type:"POST",url:"/myConversations/getConvDetails/"+t.pageAttr.univ,contentType:"application/json",data:JSON.stringify(r),success:function(e){if($("#view1Spinner").hide(),n.curReq=!1,1==e.response&&null!=e.data&&null!=e.data.myConv){var t=e.data.myConv;n.myConv=n.myConv?n.myConv:{};for(var o in t){var r=t[o].key;if(n.myConv[r]=t[o],r){var l=i.buildView1(n.myConv[r]);null!=l&&s.msgs_listhold.find(".nav").append(l).queue(function(e){s.msgs_listhold.find(".nav > li").last().data(),s.msgs_listhold.find(".nav > li").last().removeAttr("data-conv"),a[r]=s.msgs_listhold.find(".nav > li").last(),e()})}}}else"Session Invalid!"!==e.msg&&"Session Invalid"!==e.msg||($("#voice-box").fadeIn(),$("body").find("#voice-box").find("span").html("Session Expired! Please LogIn Again!"),$("body").find("#voice-box").fadeIn(),$("body").find("#voice-box").fadeOut(3500))},error:function(){n.curReq=!1}}))}}}else s.view1.find(".msgs_listhold #blank-messages").show()}else s.view1.find(".msgs_listhold #blank-messages").show()},buildView1:function(e){if(null!=e.type&&""!=e.type)if("ch-lr-request"===e.type){if(null!=e.chObj&&null!=e.convObj){var t=i.build1LiObj(s["lrn-conv"].clone(!0,!0),e,e.chObj.image,e.chObj.name,"");return t}}else if("ch-others"===e.type){if(null!=e.chObj&&null!=e.convObj){var t=i.build1LiObj(s["chO-conv"].clone(!0,!0),e,e.chObj.image,e.chObj.name,"");return t}}else if("ch-Feedbck"===e.type){if(null!=e.chObj&&null!=e.convObj){var t=i.build1LiObj(s["feedbck-conv"].clone(!0,!0),e,e.chObj.image,e.chObj.name,"");return t}}else if("stuff-Feedbck"===e.type){if(null!=e.storeObj&&null!=e.convObj){var t=i.build1LiObj(s["feedbck-conv"].clone(!0,!0),e,e.storeObj.stuffImg,e.storeObj.stuffName,"");return t}}else if("stuff-lr"===e.type){if(null!=e.storeObj&&null!=e.convObj){var t=i.build1LiObj(s["lrn-conv"].clone(!0,!0),e,e.storeObj.stuffImg,e.storeObj.stuffName,"");return t}}else if("indiv"===e.type&&(n.indivConv=n.indivConv?n.indivConv:{},null!=e.convObj.users&&e.convObj.users.length>1)){var a=[];a.push.apply(a,e.convObj.users);var r=a.indexOf(o);if(a.splice(r,1),null!=a&&1==a.length){var l=a[0];n.indivConv[l]=e.key;var d={};if(null!=e.usersIn){var c=e.usersIn;for(var h in c){var u=c[h].key;d[u]=c[h]}}if(null!=d&&d&&d.hasOwnProperty(l)){var p="",f=i.make1LetterCapital(d[l].firstName);null!=d[l].lastName&&""!=d[l].lastName&&(p=d[l].lastName,p=i.make1LetterCapital(p));var m=f+" "+p,g="";g=d[l].profilePicUrl?d[l].profilePicUrl:"/images/AY2.0/user-image.png";var v="";v=d[l].loggedIn&&1==d[l].loggedIn?"online":"offline";var t=i.build1LiObj(s["one-one"].clone(!0,!0),e,g,m,v);return t}}}},build1LiObj:function(e,t,s,n,a){e.attr("data-conv",t.convObj.key),e.find(".convImg").attr("src",s);var r=i.make1LetterCapital(n);if(e.find(".chName").html(r),"indiv"===t.type){var l=!(null==window.mozInnerScreenX);l?e.find("code").addClass("firefoxfix"):e.find("code").hasClass("firefoxfix")&&e.find("code").removeClass("firefoxfix"),"online"===a?e.find("code").hasClass("online")||(e.find("code").removeClass("offline"),e.find("code").addClass("online")):"offline"===a&&(e.find("code").hasClass("offline")||(e.find("code").removeClass("online"),e.find("code").addClass("offline")))}if(t.convObj.dateModified){var d=i.getOnlyDate(t.convObj.dateModified),c=i.checkForToday(t.convObj.dateModified);if(c){var h=i.getOnlyTime(t.convObj.dateModified);e.find(".date").html(h)}else e.find(".date").html(d)}if(t.convObj.unreadCount&&t.convObj.unreadCount[o]?(e.addClass("unread"),e.find(".inrMCnt").html(t.convObj.unreadCount[o]).show()):e.find(".inrMCnt").hide(),null!=t.msgs){var u={};if(t.msgs&&t.msgs.length>1){var p={},f="";for(var m in t.msgs)p[t.msgs[m].key]=t.msgs[m];var g=Object.keys(p).sort(function(e,t){return String(p[e].timeStamp).localeCompare(String(p[t].timeStamp))});g.reverse(),f=g[0],u=null!=f&&""!=f?p[f]:t.msgs[0]}else u=t.msgs[0];var v="";if(null!=u&&null!=u.message){if(null!=u.frmKey&&""!=u.frmKey)if(u.frmKey===o)v="You";else if(t.type&&null!=t.type&&"indiv"!=t.type){var b=t.usersIn;if(null!=b&&b.length>0)for(var y in b){var _=b[y].key;if(u.frmKey===_){v=b[y].firstName,v=i.make1LetterCapital(v);break}}}var w="",x=u.message;x.indexOf("<br>")!==-1&&(x=x.split("<br>").join(" ")),x=null!=v&&""!=v?v+": "+x:x;var C='<span id="tmpDelDesc" style="display:none">'+x+"</span>";$("body").append(C),w=$("#tmpDelDesc").text(),$("#tmpDelDesc").remove(),w.length>85&&(w=w.substring(0,76)+"..."),e.find("p").html(w)}}return null!=t.univName&&""!=t.univName&&e.find(".univ").html("~ "+t.univName),e},checkForToday:function(e){var t=new Date(e),i=new Date;return t.setHours(0,0,0,0)==i.setHours(0,0,0,0)},showView2:function(e){s.view2.find(".msgs_detail .nav").html(""),s.view2.find("#cnvFor").html(""),s.view2.find("#cnvFor").data().sts="",s.view2.find("#cnvFor").data().conv="",s.view2.find("#cnvFor").data().type="",s.view2.find("#cnvFor").data().msg="",s.view1.css("margin-left","-400px"),s.view2.css("margin-left","0px"),s.view2.find(".textareahold #textCont").html(""),s.view1.find("#compose_msg").hide(),"new"===e?(s.view2.find("h1 label").hide(),s.view2.find(".edit_focus").show(),s.view2.find(".edit_focus").focus(),s.view2.find(".msgpeers_list").hide(),i.changeHtForTextBox()):"old"===e&&(s.view2.find("h1 label").show(),s.view2.find(".edit_focus").hide(),s.view2.find(".msgpeers_list").hide(),s.view2.find(".textareahold").show(),s.view2.find(".textareahold #textCont").focus())},createFakeMsgs:function(e,t,i){var s={};if("request"===i&&null!=e.requestContent&&""!=e.requestContent&&null!=e.requestContent.value&&""!=$.trim(e.requestContent.value)){if(e.allStatus&&(e.allStatus.indexOf("approved")!==-1||e.allStatus.indexOf("declined")!==-1)){var n="";n=e.key+"-req",s.key=n,s.message=e.requestContent.value,s.frmKey=e.userKey,s.timeStamp=e.dateRequested,s.type="summary"}}else if("review"===i){if(e.allStatus&&e.allStatus.indexOf("approved")!==-1){if(null!=t.ratingReview&&""!=t.ratingReview){var a=JSON.parse(t.ratingReview),n="";n=a.messageId,s.key=n,s.message=a.message,s.frmKey=e.userKey,s.timeStamp=parseInt(a.lastModified),s.type="review"}}else if(e.allStatus&&e.allStatus.indexOf("declined")!==-1&&null!=t.decRevMsg&&t.decRevMsg.length>0)for(var o in t.decRevMsg)t.decRevMsg[o].timeStamp===e.dateRequested&&(s=t.decRevMsg[o],s.type="review")}else if("aReply"===i&&null!=e.replyMessage&&""!=e.replyMessage&&null!=e.replyMessage.value&&""!=$.trim(e.replyMessage.value)&&e.allStatus&&(e.allStatus.indexOf("approved")!==-1||e.allStatus.indexOf("declined")!==-1)){
var n="";n=e.key+"-reply",s.key=n,s.message=e.replyMessage.value,s.frmKey=e.assignee,s.timeStamp=e.dateApproved,e.allStatus.indexOf("approved")!==-1?s.type="approved":e.allStatus.indexOf("declined")!==-1&&(s.type="declined")}return s},buildStsConv:function(e,t){if(null!=e){var n=!1,a={},o={};if(null!=e.usersIn){var r=e.usersIn;for(var l in r){var c=r[l].key;a[c]=r[l]}}if(i.buildView2Header(e,"challenge"),null!=e.chObj&&null!=e.chObj.components&&e.chObj.components.indexOf("review")!==-1&&(n=!0),"temp"===t){var h=e.stsObj,u={};for(var p in h){var f=h[p].key,m={},g={},v={};if(o[f]=h[p],null!=h[p].allStatus&&h[p].allStatus.indexOf("working on")===-1){if(m=i.createFakeMsgs(h[p],e,"request"),$.isEmptyObject(m)||(u[f+"-req"]=m),1==n&&(v=i.createFakeMsgs(h[p],e,"review"),$.isEmptyObject(v)||(u[f+"-review"]=v)),$.isEmptyObject(m)&&$.isEmptyObject(v)){var b={};b.key=h[p].key+"-fReq",b.type="request",b.timeStamp=h[p].dateRequested,b.frmKey=h[p].userKey,u[f+"-fReq"]=b}if(null==h[p].allStatus||h[p].allStatus.indexOf("approved")===-1&&h[p].allStatus.indexOf("declined")===-1||(g=i.createFakeMsgs(h[p],e,"aReply"),$.isEmptyObject(g)||(u[f+"-reply"]=g)),$.isEmptyObject(g)){var b={};h[p].allStatus.indexOf("approved")!==-1?(b.key=h[p].key+"-fApp",b.type="approved"):h[p].allStatus.indexOf("declined")!==-1&&(b.key=h[p].key+"-fDec",b.type="declined"),b.timeStamp=h[p].dateApproved,b.frmKey=h[p].assignee,u[b.key]=b}}}var y=Object.keys(u).sort(function(e,t){return String(u[e].timeStamp).localeCompare(String(u[t].timeStamp))}),_=0;d=[];y.forEach(function(e){if(null!=e&&""!=e&&a.hasOwnProperty(u[e].frmKey)){var t=i.getOnlyDate(u[e].timeStamp);if(d.indexOf(t)===-1){var n=s["conv-date"].clone(!0,!0);n.html(t),s.view2.find(".msgs_detail .nav").append(n),d.push(t)}if(e.indexOf("-req")!==-1||e.indexOf("-fReq")!==-1){if(null!=u[e].message&&""!=u[e].message){var r=i.buildEachMs(a[u[e].frmKey],u[e]);s.view2.find(".msgs_detail .nav").append(r);var l=i.buildTitle("requested",a[u[e].frmKey],u[e]);s.view2.find(".msgs_detail .nav").append(l)}else{var r=i.buildDottedText(a[u[e].frmKey],u[e]);s.view2.find(".msgs_detail .nav").append(r)}_+=1}else if(e.indexOf("-reply")!==-1){var c=e.split("-reply")[0];if(o.hasOwnProperty(c)&&null!=u[e].message&&""!=u[e].message){var h="";h=o[c].allStatus.indexOf("declined")!==-1?"declined":"approved";var r=i.buildEachMs(a[u[e].frmKey],u[e]);s.view2.find(".msgs_detail .nav").append(r);var l=i.buildTitle(h,a[u[e].frmKey],u[e]);s.view2.find(".msgs_detail .nav").append(l)}}else if(e.indexOf("-fApp")!==-1||e.indexOf("-fDec")!==-1){var r=i.buildDottedText(a[u[e].frmKey],u[e]);s.view2.find(".msgs_detail .nav").append(r)}if(e.indexOf("-review")!==-1&&null!=u[e].message&&""!=u[e].message){var r=i.buildEachMs(a[u[e].frmKey],u[e]);s.view2.find(".msgs_detail .nav").append(r);var l=i.buildTitle("reviewed",a[u[e].frmKey],u[e]);s.view2.find(".msgs_detail .nav").append(l),_+=1}}})}}},buildTempTag:function(e,t){if(null!=e&&""!=e){var i=s.dottedText.clone(!0,!0);return i.find("span").html(e+" has "+t),i}var i=s["conv-tag"].clone(!0,!0);return i.find("span").html(" You have "+t),i},buildCh_O_Conv:function(e,t){if("temp"===t){if(null!=e&&null!=e.msgs&&1==e.msgs.length){d=[];for(var n in e.msgs){var a=e.msgs[n].key;if(null!=a&&""!=a&&(i.buildView2Header(e,"challenge"),null!=e.msgs[n].frmKey&&""!=e.msgs[n].frmKey)){var r=i.getOnlyDate(e.msgs[n].timeStamp);if(d.indexOf(r)===-1){var l=s["conv-date"].clone(!0,!0);l.html(r),s.view2.find(".msgs_detail .nav").append(l),d.push(r)}if(null!=e.msgs[n].message&&""!=e.msgs[n].message){var c=i.buildEachMs(e.ch_O_From,e.msgs[n]);s.view2.find(".msgs_detail .nav").append(c)}if(o===e.msgs[n].frmKey){if(e.ch_O_To){var h=i.buildTitle("challenged",e.ch_O_To,e.msgs[n]);s.view2.find(".msgs_detail .nav").append(h)}}else if(e.ch_O_From){var h=i.buildTitle("challenged",e.ch_O_From,e.msgs[n]);s.view2.find(".msgs_detail .nav").append(h)}}}}}else"exist"===t&&(i.buildView2Header(e,"challenge"),i.buildExistConv(e))},getMyConvForOne:function(e,t,a,r,l,d,c){$(".notify_list_hold").is(":visible")&&($(".notify_list").size()>0&&$(".notify_list > li").remove(),$(".notify_list_hold").hide()),$(".notify_dtl_hold").has("div")&&$(".notify_dtl_hold").find("div").remove(),s.view2.find(".msgs_detail .nav").html(""),$(".msgscontainer").is(":visible")?i.showView2("old"):($(".msgscontainer").slideToggle(),i.showView2("old")),$("body").css("overflow","hidden"),$("html").css("overflow","hidden"),$("#view2Spinner").show();var u={};r?(c="exist",u={convK:r,univName:t}):"ch-lr-request"===c?u={stsK:e,univName:t}:"ch-others"===c?u={chK:a,msgK:l,chToUK:d,univName:t}:"stuff-Feedbck"===c?u={stsK:e,univName:t}:"stuff-lr"===c&&(u={stsK:e,univName:t}),$.ajax({type:"GET",url:"/myConversations/get/"+c+"/msgV",data:u,success:function(t){if($("#view2Spinner").hide(),null!=t.data&&null!=t.data.curUser&&(o=t.data.curUser.key,h=t.data.curUser),1==t.response&&null!=t.data&&null!=t.data.myConv&&t.data.myConv.length>0){var a=t.data.myConv;n.myConv=n.myConv?n.myConv:{};for(var d in a){var u=a[d].key;if(e.indexOf("purStf_")!==-1&&u.indexOf("_stuff-Feedbck")&&(a[d].hasOwnProperty("convObj")||(u=e+"_stuff-Feedbck")),n.myConv[u]=a[d],r)i.buildView2Header(n.myConv[u],"challenge"),i.buildExistConv(n.myConv[u]);else if("ch-lr-request"===c)u.indexOf("ch-lr-request")!==-1?(n.myConv[u].tempSts=e,i.buildStsConv(n.myConv[u],"temp")):(i.buildView2Header(n.myConv[u],"challenge"),i.buildExistConv(n.myConv[u]));else if("ch-others"===c)u.indexOf("ch-others")!==-1?(n.myConv[u].tempSts=e,n.myConv[u].tempMsg=l,i.buildCh_O_Conv(n.myConv[u],"temp")):(i.buildView2Header(n.myConv[u],"challenge"),i.buildExistConv(n.myConv[u]));else if("stuff-Feedbck"===c)if(u.indexOf("stuff-Feedbck")!==-1){if(n.myConv[u].tempSts=e,n.myConv[u].stsObj)for(var p in n.myConv[u].stsObj){var f="";if(e.indexOf("purStf_")!==-1&&(f=e.split("purStf_")[1]),e.indexOf("purStf_")!==-1&&f===n.myConv[u].stsObj[p].key){n.myConv[u].stsObj[p].key=e;var m=[];m.push("purchased"),n.myConv[u].stsObj[p].allStatus=m}}i.buildView2Header(n.myConv[u],"stuff"),i.buildStuffMsg(n.myConv[u])}else i.buildView2Header(n.myConv[u],"stuff"),i.buildExistConv(n.myConv[u]);else"stuff-lr"===c&&(u.indexOf("stuff-lr")!==-1?(n.myConv[u].tempSts=e,i.buildView2Header(n.myConv[u],"stuff"),i.buildStuffMsg(n.myConv[u])):(i.buildView2Header(n.myConv[u],"stuff"),i.buildExistConv(n.myConv[u])));s.view2.find(".msgs_detail").scrollTop(s.view2.find(".msgs_detail .nav").height())}}else"Session Invalid!"===t.msg||"Session Invalid"===t.msg?($("#voice-box").fadeIn(),$("body").find("#voice-box").find("span").html("Session Expired! Please LogIn Again!"),$("body").find("#voice-box").fadeIn(),$("body").find("#voice-box").fadeOut(3500)):($("#voice-box").fadeIn(),document.getElementById("statusMessage").innerHTML="No Conversation Exists..",document.getElementById("voice-box").setAttribute("status","saved"),$("#voice-box").fadeOut(1750),s.view2.find(".textareahold #textCont").attr("disabled",!0),s.view2.find(".sendbtn_hold").attr("disabled",!0))}})},buildStuffMsg:function(e){if(e.stsObj){d=[];for(var t in e.stsObj){var n=i.getOnlyDate(e.stsObj[t].dateRequested);if(d.indexOf(n)===-1){var a=s["conv-date"].clone(!0,!0);a.html(n),s.view2.find(".msgs_detail .nav").append(a),d.push(n)}var o=s.dottedText.clone(!0,!0);o.find("span").html(" You have sent a request"),s.view2.find(".msgs_detail .nav").append(o);var r={};if(null!=e.usersIn){var l=e.usersIn;for(var c in l){var h=l[c].key;r[h]=l[c]}}if(e.stsObj[t].allStatus&&e.stsObj[t].assignee&&r.hasOwnProperty(e.stsObj[t].assignee)){var u={};if(u.frmKey=e.stsObj[t].assignee,u.timeStamp=e.stsObj[t].dateApproved,e.stsObj[t].allStatus.indexOf("declined")!==-1){if(u.key=e.stsObj[t].key+"-declined",u.message=e.stsObj[t].replyMessage.value,u.type="declined",null!=u.message&&""!=u.message){var p=i.buildEachMs(r[e.stsObj[t].assignee],u);s.view2.find(".msgs_detail .nav").append(p);var f=i.buildTitle("declined",r[e.stsObj[t].assignee],u);s.view2.find(".msgs_detail .nav").append(f)}}else if(e.stsObj[t].allStatus.indexOf("approved")!==-1)if(e.stsObj[t].replyMessage&&e.stsObj[t].replyMessage.value){u.key=e.stsObj[t].key+"-approved",u.message=e.stsObj[t].replyMessage.value,u.type="approved";var p=i.buildEachMs(r[e.stsObj[t].assignee],u);s.view2.find(".msgs_detail .nav").append(p);var f=i.buildTitle("approved",r[e.stsObj[t].assignee],u);s.view2.find(".msgs_detail .nav").append(f)}else{var o=s.dottedText.clone(!0,!0);if(e.stsObj[t].assignee===e.stsObj[t].userKey)o.find("span").html(" You have approved");else{var m=i.getOnlyName(r[e.stsObj[t].assignee],"fullN");m=i.make1LetterCapital(m),o.find("span").html(m+" has approved")}s.view2.find(".msgs_detail .nav").append(o)}}}}},buildExistConv:function(e){var t=e.msgs,a={},r={};if(null!=t&&t.length>0){for(var l in e.usersIn){var c=e.usersIn[l].key;r[c]=e.usersIn[l]}for(var h in t){var u=t[h].key;a[u]=t[h]}var p=Object.keys(a).sort(function(e,t){return String(a[e].timeStamp).localeCompare(String(a[t].timeStamp))});d=[],n.currentConKey=e.key,s.view2.find(".msgs_detail .nav").hide();for(var f in p){var m=p[f];if(null!=m&&""!=m){var g=a[m];if(null!=g){var v=i.getOnlyDate(g.timeStamp);if(d.indexOf(v)===-1){var b=s["conv-date"].clone(!0,!0);b.html(v),s.view2.find(".msgs_detail .nav").append(b),d.push(v)}if("summary"===g.type&&null!=g.message&&""!=g.message){var y=i.buildEachMs(r[g.frmKey],g);s.view2.find(".msgs_detail .nav").append(y);var _=i.buildTitle("requested",r[g.frmKey],g);s.view2.find(".msgs_detail .nav").append(_)}else if("approved"===g.type||"declined"===g.type)if(null!=g.message&&""!=g.message){var y=i.buildEachMs(r[g.frmKey],g);s.view2.find(".msgs_detail .nav").append(y);var _=i.buildTitle(g.type,r[g.frmKey],g);s.view2.find(".msgs_detail .nav").append(_)}else{var y=i.buildDottedText(r[g.frmKey],g);s.view2.find(".msgs_detail .nav").append(y)}else if(null!=g.message&&""!=g.message&&"review"===g.type){var y=i.buildEachMs(r[g.frmKey],g);s.view2.find(".msgs_detail .nav").append(y);var _=i.buildTitle("reviewed",r[g.frmKey],g);s.view2.find(".msgs_detail .nav").append(_)}else if(null!=g.message&&""!=g.message&&"chO"===g.type){var w=e.convObj.users;if(w.indexOf(o)!==-1){var f=w.indexOf(o),x=w.splice(f,1),C=w[0];w.push(x[0]),e.convObj.users=w}if(C){var y=i.buildEachMs(r[C],g);s.view2.find(".msgs_detail .nav").append(y);var _=i.buildTitle("challenged",r[C],g);s.view2.find(".msgs_detail .nav").append(_)}}else if(null!=g.message&&""!=g.message&&"ch-feed"===g.type||"stuff-feed"===g.type){var y=i.buildEachMs(r[g.frmKey],g);s.view2.find(".msgs_detail .nav").append(y);var _=i.buildTitle("feedback",r[g.frmKey],g);s.view2.find(".msgs_detail .nav").append(_)}else if("request"===g.type){var y=i.buildDottedText(r[g.frmKey],g);s.view2.find(".msgs_detail .nav").append(y)}else{var y=i.buildEachMs(r[g.frmKey],g);s.view2.find(".msgs_detail .nav").append(y).queue(function(e){e()})}}}}$("body").css("overflow","hidden"),$("html").css("overflow","hidden"),s.view2.find(".msgs_detail .nav").show(),i.changeHtForTextBox(),s.view2.find(".msgs_detail").scrollTop(s.view2.find(".msgs_detail .nav").height());var k=e.convObj.key;n.myConv[k]&&n.myConv[k].convObj&&n.myConv[k].convObj.unreadCount&&n.myConv[k].convObj.unreadCount[o]>0&&i.removeCnt(k,n.myConv[k].convObj.univKey),s.view1.find(".msgs_listhold .nav").children().each(function(){var e=$(this).data().conv;e===k&&($(this).find(".inrMCnt").html(""),$(this).find(".inrMCnt").hide(),$(this).hasClass("unread")&&$(this).removeClass("unread"))})}},buildView2Header:function(e,t){if(null!=e){var a="",r="";if(d=[],e.convObj&&null!=e.convObj.key&&""!=e.convObj.key&&(a=e.convObj.key),"challenge"===t&&null!=e.chObj)r=i.make1LetterCapital(e.chObj.name);else if("stuff"===t&&null!=e.storeObj)r=i.make1LetterCapital(e.storeObj.stuffName);else if("indiv"===t&&(n.indivConv=n.indivConv?n.indivConv:{},null!=e.convObj&&null!=e.convObj.key&&null!=e.convObj.users&&e.convObj.users.length>1)){var l=[];l.push.apply(l,e.convObj.users);var c=l.indexOf(o);if(l.splice(c,1),null!=l&&1==l.length){var h=l[0];n.indivConv[h]=e.key;var u={};if(null!=e.usersIn){var p=e.usersIn;for(var f in p){var m=p[f].key;u[m]=p[f]}}if(null!=u&&u&&u.hasOwnProperty(h)){var g="",v=i.make1LetterCapital(u[h].firstName);null!=u[h].lastName&&""!=u[h].lastName&&(g=u[h].lastName,g=i.make1LetterCapital(g)),r=u[h].loggedIn&&1==u[h].loggedIn?'<code class="statcscheck online"></code>':'<code class="statcscheck offline"></code>',r+=v+" "+g}}}null!=a&&""!=a?(s.view2.find("#cnvFor").data().conv=a,s.view2.find("#cnvFor").data().type="exist",s.view2.find("#cnvFor").html(r).queue(function(e){$(this).data(),$(this).removeAttr("data-conv"),$(this).removeAttr("data-type"),e()})):e.type&&"ch-lr-request"===e.type?(s.view2.find("#cnvFor").data().sts=e.tempSts,s.view2.find("#cnvFor").data().type="ch-lr-request",s.view2.find("#cnvFor").html(r).queue(function(e){$(this).data(),$(this).removeAttr("data-sts"),$(this).removeAttr("data-type"),e()})):e.type&&"ch-others"===e.type?(s.view2.find("#cnvFor").data().sts=e.tempSts,s.view2.find("#cnvFor").data().type="ch-others",s.view2.find("#cnvFor").data().msg=e.tempMsg,s.view2.find("#cnvFor").html(r).queue(function(e){$(this).data(),$(this).removeAttr("data-sts"),$(this).removeAttr("data-msg"),$(this).removeAttr("data-type"),e()})):e.type&&"stuff-Feedbck"===e.type?(s.view2.find("#cnvFor").data().sts=e.tempSts,s.view2.find("#cnvFor").data().type="stuff-Feedbck",s.view2.find("#cnvFor").html(r).queue(function(e){$(this).data(),$(this).removeAttr("data-sts"),$(this).removeAttr("data-type"),e()})):e.type&&"stuff-lr"===e.type&&(s.view2.find("#cnvFor").data().sts=e.tempSts,s.view2.find("#cnvFor").data().type="stuff-lr",s.view2.find("#cnvFor").html(r).queue(function(e){$(this).data(),$(this).removeAttr("data-sts"),$(this).removeAttr("data-type"),e()}));var b=[];e.usersIn&&null!=e.usersIn&&(b=e.usersIn);var y="";if(null!=b&&b.length>0){y+="You";for(var f in b){var _=b[f].key;if(_!=o){var w=i.getOnlyName(b[f],"firstN");w=i.make1LetterCapital(w),y+=", "+w}}e.type&&"indiv"!==e.type?s.view2.find(".users_names").html(y).queue(function(e){s.view2.find(".users_names").parent().hasClass("adjust")||s.view2.find(".users_names").parent().addClass("adjust"),i.changeHtForTextBox(),e()}):(s.view2.find(".users_names").parent().hasClass("adjust")&&s.view2.find(".users_names").parent().removeClass("adjust"),s.view2.find(".users_names").html(""),i.changeHtForTextBox())}else if(e.type&&"ch-others"===e.type){y+="You, ";var x="";e.ch_O_From&&null!=e.ch_O_From.key&&""!=e.ch_O_From.key&&e.ch_O_From.key!=o&&(x+=i.getOnlyName(e.ch_O_From,"firstN"),y+=x),e.ch_O_To&&null!=e.ch_O_To.key&&""!=e.ch_O_To.key&&e.ch_O_To.key!=o&&(x+=i.getOnlyName(e.ch_O_To,"firstN"),y+=x),s.view2.find(".users_names").html(y).queue(function(e){s.view2.find(".users_names").parent().hasClass("adjust")||s.view2.find(".users_names").parent().addClass("adjust"),i.changeHtForTextBox(),e()})}}},buildTitle:function(e,t,n){var a={},r=i.getOnlyName(t,"fullN");i.getOnlyDate(n.timeStamp);return"challenged"===e?n.frmKey===o?(a=s["conv-tag"].clone(!0,!0),a.html("You have "+e+" "+r),a.addClass("tagright")):(a=s["conv-tag"].clone(!0,!0),a.html(r+" has "+e+" you "),a.addClass("tagleft")):"feedback"===e?n.frmKey===o?(a=s["conv-tag"].clone(!0,!0),a.html("You have sent a feedback "),a.addClass("tagright")):(a=s["conv-tag"].clone(!0,!0),a.html(r+" has sent a feedback"),a.addClass("tagleft")):"requested"===e||"reviewed"===e?n.frmKey===o?(a=s["conv-tag"].clone(!0,!0),a.html("You have "+e),a.addClass("tagright")):(a=s["conv-tag"].clone(!0,!0),a.html(r+" has "+e),a.addClass("tagleft")):n.frmKey===o?(a=s["conv-tag"].clone(!0,!0),a.html(" You have "+e),a.addClass("tagright")):(a=s["conv-tag"].clone(!0,!0),a.html(r+" has "+e),a.addClass("tagleft")),a},buildEachMs:function(e,t){var n={};if(null!=t.message&&""!=t.message){var a=i.getOnlyTime(t.timeStamp);t.frmKey===o?(n=s["my-msg"].clone(!0,!0),h&&h.profilePicUrl?n.find("img").attr("src",h.profilePicUrl):n.find("img").attr("src","/images/AY2.0/user-image.png")):(n=s["otr-msg"].clone(!0,!0),e.profilePicUrl?n.find("img").attr("src",e.profilePicUrl):n.find("img").attr("src","/images/AY2.0/user-image.png")),n.find("p").html(t.message),n.find("span").html(a)}return n},buildDottedText:function(e,t){var n=s.dottedText.clone(!0,!0),a="";return e.key===o?a="You":(a=i.getOnlyName(e,"fullN"),a=i.make1LetterCapital(a)),"request"===t.type?n.find("span").html(a+" sent a request"):"approved"===t.type?n.find("span").html(a+" approved the request"):"declined"===t.type&&n.find("span").html(a+" declined the request"),n},addMsgToConv:function(e,t,a){if(null!=e&&""!=e&&null!=t.convObj){a.convKey=e,a.frmKey=o;var r=new Date,l=Date.parse(r);a.timeStamp=l;var c=i.getOnlyDate(a.timeStamp);if(d.indexOf(c)===-1){var u=s["conv-date"].clone(!0,!0);u.html(c),s.view2.find(".msgs_detail .nav").append(u),d.push(c)}var p=!1;if(null==h||$.isEmptyObject(h))p=!0;else{var m=i.buildEachMs(h,a);s.view2.find(".msgs_detail .nav").append(m).queue(function(t){s.view2.find("#cnvFor").data().conv=e,s.view2.find("#cnvFor").data().type="exist",s.view2.find(".msgs_detail").scrollTop(s.view2.find(".msgs_detail .nav").height()),s.view2.find(".textareahold #textCont").focus(),i.changeHtForTextBox(),t()}),s.view2.find(".textareahold #textCont").html("")}a.timeStamp=0,a.frmKey="",$.ajax({type:"POST",url:"/message/conversation/"+t.convObj.univKey+"/"+t.convObj.key+"/add",contentType:"application/json",data:JSON.stringify(a),success:function(t){if(f=!1,1==t.response&&null!=t.data&&null!=t.data.myConversation){if($("#voice-box").fadeIn(),document.getElementById("statusMessage").innerHTML="Message Sent !",document.getElementById("voice-box").setAttribute("status","saved"),$("#voice-box").fadeOut(1750),1==p){var a=t.data.message,o=i.buildEachMs(t.data.curUser,a);s.view2.find(".msgs_detail .nav").append(o).queue(function(t){s.view2.find("#cnvFor").data().conv=e,s.view2.find("#cnvFor").data().type="exist",s.view2.find(".msgs_detail").scrollTop(s.view2.find(".msgs_detail .nav").height()),s.view2.find(".textareahold #textCont").focus(),i.changeHtForTextBox(),t()}),s.view2.find(".textareahold #textCont").html("")}n.myConv=n.myConv?n.myConv:{},n.myConv[e]=t.data.myConversation,i.buildUpdConvDyn(t.data.myConversation)}else"Session Invalid!"===t.msg||"Session Invalid"===t.msg?($("#voice-box").fadeIn(),$("body").find("#voice-box").find("span").html("Session Expired! Please LogIn Again!"),$("body").find("#voice-box").fadeIn(),$("body").find("#voice-box").fadeOut(3500)):($("#voice-box").fadeIn(),$("body").find("#voice-box").find("span").html("Something went wrong! Message could not be sent."),$("body").find("#voice-box").fadeIn(),$("body").find("#voice-box").fadeOut(3500))},error:function(){f=!1}})}},buildUpdConvDyn:function(e){if(null!=e){var t=e.key;n.dynConv=n.dynConv?n.dynConv:[],n.dynConv.push(t);var o=i.buildView1(e);a[t]?(a[t].remove(),delete a[t],s.msgs_listhold.find(".nav").children().each(function(){var e=$(this).data().conv;null!=e&&""!=e&&e===t&&$(this).remove()}),s.msgs_listhold.find(".nav").prepend(o).queue(function(e){s.msgs_listhold.find(".nav > li").first().data(),s.msgs_listhold.find(".nav > li").first().removeAttr("data-conv"),a[t]=s.msgs_listhold.find(".nav > li").first(),s.msgs_listhold.find(".nav").scrollTop(200),e()})):s.msgs_listhold.find(".nav").prepend(o).queue(function(e){s.msgs_listhold.find(".nav > li").first().data(),s.msgs_listhold.find(".nav > li").first().removeAttr("data-conv"),a[t]=s.msgs_listhold.find(".nav > li").first(),s.msgs_listhold.find(".nav").scrollTop(200),e()})}i.changeHtForTextBox()},onMsgSend:function(e,a,r,l,c,u){var p=s.view2.find(".textareahold #textCont").html(),m="";if(p.indexOf("<br>")!==-1){var g=p.split("<br>");if(g.length>0)for(var v in g){var b=g[v],y='<span id="tmpDelSpan" style="display:none"></span>';$("body").append(y),$("#tmpDelSpan").html(b);var _=$("#tmpDelSpan").text();$("#tmpDelSpan").remove(),m+=_+"<br>"}}else m=s.view2.find(".textareahold #textCont").text();var w=[],x={};if(x.timeStamp=0,x.message=m,x.type="msg",w.push(x),null!=e&&""!=e&&null!=c&&0==f)f=!0,i.addMsgToConv(e,c,x);else if("ch-lr-request"===l&&null!=a&&""!=a&&null!=c&&0==f){f=!0;var C={},k=Date.parse(new Date);C.timeStamp=k,C.frmKey=o,C.message=m,C.type="msg";var S=i.getOnlyDate(C.timeStamp);if(d.indexOf(S)===-1){var D=s["conv-date"].clone(!0,!0);D.html(S),s.view2.find(".msgs_detail .nav").append(D),d.push(S)}var T=!1;if(null==h||$.isEmptyObject(h))T=!0;else{var O=i.buildEachMs(h,C);s.view2.find(".msgs_detail .nav").append(O).queue(function(e){s.view2.find(".textareahold #textCont").focus(),e()}),s.view2.find(".textareahold #textCont").html("")}var A={},M={},E=[],I=[],N=!1,P=c.stsObj;M.univKey=c.univKey,M.type=l,null!=c.chObj&&null!=c.chObj.key&&""!=c.chObj.key&&(M.typeKey=c.chObj.key,null!=c.chObj.components&&c.chObj.components.indexOf("review")!==-1&&(N=!0));for(var H in P){var L=P[H].key,j={},F={},U={};if(I.push(L),null!=P[H].allStatus&&P[H].allStatus.indexOf("working on")===-1){if(""!=P[H].userKey&&E.indexOf(P[H].userKey)===-1&&E.push(P[H].userKey),""!=P[H].assignee&&E.indexOf(P[H].assignee)===-1&&E.push(P[H].assignee),j=i.createFakeMsgs(P[H],c,"request"),$.isEmptyObject(j)||(j.key="",w.push(j)),null==P[H].allStatus||P[H].allStatus.indexOf("approved")===-1&&P[H].allStatus.indexOf("declined")===-1||(F=i.createFakeMsgs(P[H],c,"aReply"),$.isEmptyObject(F)||(F.key="",w.push(F))),1==N&&(U=i.createFakeMsgs(P[H],c,"review"),$.isEmptyObject(U)||(U.key="",w.push(U))),$.isEmptyObject(j)&&$.isEmptyObject(U)){var R={};R.key=P[H].key+"-fReq",R.timeStamp=P[H].dateRequested,R.frmKey=P[H].userKey,R.type="request",$.isEmptyObject(R)||w.push(R)}if($.isEmptyObject(F)){var R={};null!=P[H].allStatus&&(P[H].allStatus.indexOf("approved")!==-1?(R.key=P[H].key+"-fApp",R.type="approved"):P[H].allStatus.indexOf("declined")!==-1&&(R.key=P[H].key+"-fDec",R.type="declined"),R.timeStamp=P[H].dateApproved,R.frmKey=P[H].assignee,$.isEmptyObject(R)||w.push(R))}}}M.users=E,A.conversations=M,A.messages=w,A.stsKeys=I,$("#voice-box").fadeIn(),$("body").find("#voice-box").find("span").html("Sending Message!"),$("body").find("#voice-box").fadeIn(),$("body").find("#voice-box").fadeOut(3500);$.ajax({type:"POST",url:"/myConversations/create/"+l,contentType:"application/json",data:JSON.stringify(A),success:function(t){if(f=!1,1==t.response&&null!=t.data&&null!=t.data.myConversation){e=t.data.myConversation.key;var a=t.data.curUser,o=(t.data.myConversation.usersIn,{});if(n.currentConKey=e,o.frmKey=a.key,o.message=m,o.timeStamp=t.data.myConversation.convObj.dateCreated,1==T){var r=i.buildEachMs(a,o);s.view2.find(".msgs_detail .nav").append(r).queue(function(e){s.view2.find(".textareahold #textCont").focus(),e()}),s.view2.find(".textareahold #textCont").html("")}s.view2.find("#cnvFor").data().conv=e,s.view2.find("#cnvFor").data().type="exist",n.myConv=n.myConv?n.myConv:{},n.myConv[e]=t.data.myConversation,i.buildUpdConvDyn(t.data.myConversation)}else"Session Invalid!"===t.msg||"Session Invalid"===t.msg?($("#voice-box").fadeIn(),$("body").find("#voice-box").find("span").html("Session Expired! Please LogIn Again!"),$("body").find("#voice-box").fadeIn(),$("body").find("#voice-box").fadeOut(3500)):($("#voice-box").fadeIn(),$("body").find("#voice-box").find("span").html("Something went wrong! Message could not be sent."),$("body").find("#voice-box").fadeIn(),$("body").find("#voice-box").fadeOut(3500))},error:function(){f=!1}})}else if("ch-others"===l&&null!=r&&""!=r&&null!=c&&0==f)f=!0,i.createChOConv(r,l,c,m);else if("indiv"===l&&null!=u&&""!=u&&0==f){f=!0;var z={},q={},E=[],I=[];E.push(u),z.univKey=t.pageAttr.univ,z.type="indiv",z.users=E,q.conversations=z,q.messages=w,q.stsKeys=I,$.ajax({type:"POST",url:"/myConversations/create/"+l,contentType:"application/json",data:JSON.stringify(q),success:function(t){if(f=!1,1==t.response&&null!=t.data&&null!=t.data.myConversation){e=t.data.myConversation.key;var a=t.data.curUser,o=(t.data.myConversation.usersIn,{});n.currentConKey=e,o.frmKey=a.key,o.message=m,o.timeStamp=t.data.myConversation.convObj.dateCreated;var r=i.getOnlyDate(o.timeStamp);if(d.indexOf(r)===-1){var l=s["conv-date"].clone(!0,!0);l.html(r),s.view2.find(".msgs_detail .nav").append(l),d.push(r)}var c=i.buildEachMs(a,o);s.view2.find(".msgs_detail .nav").append(c).queue(function(i){s.view2.find("#cnvFor").data().conv=e,s.view2.find("#cnvFor").data().type="exist",n.myConv=n.myConv?n.myConv:{},n.myConv[e]=t.data.myConversation,s.view2.find(".textareahold #textCont").focus(),i()}),s.view2.find(".textareahold #textCont").html(""),i.buildUpdConvDyn(t.data.myConversation)}else"Message to yourself"===t.msg?($("#voice-box").fadeIn(),$("body").find("#voice-box").find("span").html("You cannot message yourself!"),$("body").find("#voice-box").fadeIn(),$("body").find("#voice-box").fadeOut(3500)):"Session Invalid!"===t.msg||"Session Invalid"===t.msg?($("#voice-box").fadeIn(),$("body").find("#voice-box").find("span").html("Session Expired! Please LogIn Again!"),$("body").find("#voice-box").fadeIn(),$("body").find("#voice-box").fadeOut(3500)):($("#voice-box").fadeIn(),$("body").find("#voice-box").find("span").html("Something went wrong! Message could not be sent."),$("body").find("#voice-box").fadeIn(),$("body").find("#voice-box").fadeOut(3500))},error:function(){f=!1}})}else"stuff-Feedbck"===l&&0==f?(f=!0,c.storeObj&&c.univKey&&i.feedBckToCreator(c.storeObj.key,m,"stuff-Feedbck",c.univKey,"msg")):"stuff-lr"===l&&0==f?(f=!0,i.createStuffConv(a,w,c,m)):0==f&&($("#voice-box").fadeIn(),document.getElementById("statusMessage").innerHTML="Something went wrong! Message could not be sent.",document.getElementById("voice-box").setAttribute("status","saved"),$("#voice-box").fadeOut(2e3))},createStuffConv:function(e,t,a,r){if(null!=a&&null!=e&&""!=e&&null!=t&&t.length>0){var l={},c={},u=[],p=[],m=t[0],g=Date.parse(new Date);m.timeStamp=g,m.frmKey=o;var v=i.getOnlyDate(m.timeStamp);if(d.indexOf(v)===-1){var b=s["conv-date"].clone(!0,!0);b.html(v),s.view2.find(".msgs_detail .nav").append(b),d.push(v)}var y=!1;if(null==h||$.isEmptyObject(h))y=!0;else{var _=i.buildEachMs(h,m);s.view2.find(".msgs_detail .nav").append(_).queue(function(e){s.view2.find(".textareahold #textCont").focus(),e()}),s.view2.find(".textareahold #textCont").html("")}if(m.timeStamp=0,m.frmKey="",a.stsObj)for(var w in a.stsObj){var x=a.stsObj[w].key;if(e===x){null!=a.stsObj[w].assignee&&""!=a.stsObj[w].assignee&&p.indexOf(a.stsObj[w].assignee)===-1&&p.push(a.stsObj[w].assignee),p.indexOf(a.stsObj[w].userKey)===-1&&p.push(a.stsObj[w].userKey);var C={};if(C.key=a.stsObj[w].key+"-fReq",C.timeStamp=a.stsObj[w].dateRequested,C.frmKey=a.stsObj[w].userKey,C.type="request",$.isEmptyObject(C)||t.push(C),null!=a.stsObj[w].allStatus&&(a.stsObj[w].allStatus.indexOf("approved")!==-1||a.stsObj[w].allStatus.indexOf("declined")!==-1)){var k=i.createFakeMsgs(a.stsObj[w],a,"aReply");if($.isEmptyObject(k)){var C={};null!=a.stsObj[w].allStatus&&(a.stsObj[w].allStatus.indexOf("approved")!==-1?(C.key=a.stsObj[w].key+"-fApp",C.type="approved"):a.stsObj[w].allStatus.indexOf("declined")!==-1&&(C.key=a.stsObj[w].key+"-fDec",C.type="declined"),C.timeStamp=a.stsObj[w].dateApproved,C.frmKey=a.stsObj[w].assignee,$.isEmptyObject(C)||t.push(C))}else k.key="",t.push(k)}}}u.indexOf(e)===-1&&u.push(e),l.univKey=a.univKey,l.type="stuff-lr",l.typeKey=a.storeObj.key,l.users=p,c.conversations=l,c.messages=t,c.stsKeys=u,$("#voice-box").fadeIn(),$("body").find("#voice-box").find("span").html("Sending Message!"),$("body").find("#voice-box").fadeIn(),$("body").find("#voice-box").fadeOut(3500),$.ajax({type:"POST",url:"/myConversations/create/stuff-lr",contentType:"application/json",data:JSON.stringify(c),success:function(e){if(f=!1,1==e.response&&null!=e.data&&null!=e.data.myConversation){var t=e.data.myConversation.key,a=e.data.curUser;e.data.myConversation.usersIn;if(n.currentConKey=t,1==y){var o={};o.frmKey=a.key,o.message=r,o.timeStamp=e.data.myConversation.convObj.dateCreated;var l=i.buildEachMs(a,o);s.view2.find(".msgs_detail .nav").append(l).queue(function(e){s.view2.find(".textareahold #textCont").focus(),e()}),s.view2.find(".textareahold #textCont").html("")}s.view2.find("#cnvFor").data().conv=e.data.myConversation.convObj.key,s.view2.find("#cnvFor").data().type="exist",n.myConv=n.myConv?n.myConv:{},n.myConv[e.data.myConversation.convObj.key]=e.data.myConversation,i.buildUpdConvDyn(e.data.myConversation)}else"Session Invalid!"===e.msg||"Session Invalid"===e.msg?($("#voice-box").fadeIn(),$("body").find("#voice-box").find("span").html("Session Expired! Please LogIn Again!"),$("body").find("#voice-box").fadeIn(),$("body").find("#voice-box").fadeOut(3500)):($("#voice-box").fadeIn(),$("body").find("#voice-box").find("span").html("Something went wrong! Message could not be sent."),$("body").find("#voice-box").fadeIn(),$("body").find("#voice-box").fadeOut(3500))},error:function(){f=!1}})}},createChOConv:function(e,t,a,r){var l={},c=[],u={},p={},m={},g=[],v=[],b=Date.parse(new Date);p.timeStamp=b,p.message=r,p.type="msg",p.frmKey=o;var y=i.getOnlyDate(p.timeStamp);if(d.indexOf(y)===-1){var _=s["conv-date"].clone(!0,!0);_.html(y),s.view2.find(".msgs_detail .nav").append(_),d.push(y)}var w=!1;if(null==h||$.isEmptyObject(h))w=!0;else{var x=i.buildEachMs(h,p);s.view2.find(".msgs_detail .nav").append(x).queue(function(e){s.view2.find(".textareahold #textCont").focus(),e()}),s.view2.find(".textareahold #textCont").html("")}v.push(a.tempSts);for(var C in a.msgs){var k=a.msgs[C].key;null==a.msgs[C].convKey&&(a.msgs[C].convKey=""),null==a.msgs[C].fromKey&&(a.msgs[C].fromKey=""),k===e&&(m=a.msgs[C])}m.type="chO",$.isEmptyObject(m)||c.push(m),p.timeStamp=0,p.frmKey="",c.push(p),u.univKey=a.univKey,u.type=t,null!=a.chObj&&null!=a.chObj.key&&""!=a.chObj.key&&(u.typeKey=a.chObj.key),null!=a.ch_O_From&&null!=a.ch_O_From.key&&""!=a.ch_O_From.key&&g.push(a.ch_O_From.key),null!=a.ch_O_To&&null!=a.ch_O_To.key&&""!=a.ch_O_To.key&&g.push(a.ch_O_To.key),u.users=g,l.conversations=u,l.messages=c,l.stsKeys=v,$("#voice-box").fadeIn(),$("body").find("#voice-box").find("span").html("Sending Message!"),$("body").find("#voice-box").fadeIn(),$("body").find("#voice-box").fadeOut(3500),$.ajax({type:"POST",url:"/myConversations/create/"+t,contentType:"application/json",data:JSON.stringify(l),success:function(e){if(f=!1,1==e.response&&null!=e.data&&null!=e.data.myConversation){$("#voice-box").fadeIn(),document.getElementById("statusMessage").innerHTML="Message Sent..!",document.getElementById("voice-box").setAttribute("status","saved"),$("#voice-box").fadeOut(2e3),n.currentConKey=e.data.myConversation.key;var t=e.data.curUser;e.data.myConversation.usersIn;if(1==w){var a={};a.frmKey=t.key,a.message=r,a.timeStamp=e.data.myConversation.convObj.dateCreated;var o=i.buildEachMs(t,a);s.view2.find(".msgs_detail .nav").append(o).queue(function(e){s.view2.find(".textareahold #textCont").focus(),e()}),s.view2.find(".textareahold #textCont").html("")}s.view2.find("#cnvFor").data().conv=e.data.myConversation.key,s.view2.find("#cnvFor").data().type="exist",n.myConv=n.myConv?n.myConv:{},n.myConv[e.data.myConversation.key]=e.data.myConversation,i.buildUpdConvDyn(e.data.myConversation)}else"Session Invalid!"===e.msg||"Session Invalid"===e.msg?($("#voice-box").fadeIn(),$("body").find("#voice-box").find("span").html("Session Expired! Please LogIn Again!"),$("body").find("#voice-box").fadeIn(),$("body").find("#voice-box").fadeOut(3500)):($("#voice-box").fadeIn(),document.getElementById("statusMessage").innerHTML="Something went wrong! Message could not be sent!",document.getElementById("voice-box").setAttribute("status","saved"),$("#voice-box").fadeOut(2e3))},error:function(){f=!1}})},searchConv:function(){var e=s.view1.find(".search_ico .conv_search").val();null!=e&&""!=e&&0==p&&(p=!0);var a=$.ajax({type:"POST",url:"/myConversations/searchConv/"+t.pageAttr.univ,data:{user:e},success:function(e){if(u=!1,s.view1.find("#view1Spinner").hide(),1==e.response&&null!=e.data&&null!=e.data.conversation){
s.view1.find("#noConvFound").hide(),s.view1.find(".nav").html("");var t=e.data.conversation,a={};if(n.myConv=n.myConv?n.myConv:{},null!=t&&t.length>0){for(var o in t){var r=t[o].key;a[r]=t[o].convObj,n.myConv[r]=t[o]}var l=Object.keys(a).sort(function(e,t){return String(a[e].dateModified).localeCompare(String(a[t].dateModified))});l.reverse(),l.forEach(function(e){if(e){var t=i.buildView1(n.myConv[e]);s.msgs_listhold.find(".nav").append(t).queue(function(e){s.msgs_listhold.find(".nav li").last().data(),s.msgs_listhold.find(".nav li").last().removeAttr("data-conv"),e()})}})}}else"Session Invalid!"===e.msg||"Session Invalid"===e.msg?($("#voice-box").fadeIn(),$("body").find("#voice-box").find("span").html("Session Expired! Please LogIn Again!"),$("body").find("#voice-box").fadeIn(),$("body").find("#voice-box").fadeOut(3500)):"No Conversation"==e.msg&&(s.view1.find("#blank-messages").hide(),s.view1.find("#noConvFound").show())},error:function(){u=!1,s.view1.find("#view1Spinner").hide(),s.view1.find("#noConvFound").hide()}});l.push(a)},srchUsr:function(){var e=s.view1.find(".usr_srch").val();if(n.srchUsrz=n.srchUsrz?n.srchUsrz:{},null!=e&&""!=e&&0==u){u=!0;var a=$.ajax({type:"POST",url:"/myConversations/searchUsers/"+t.pageAttr.univ,data:{usrN:e},success:function(e){if(u=!1,s.view1.find(".msgpeers_list .nav").html(""),1==e.response&&null!=e.data&&null!=e.data.usersFound){s.view1.find(".msgpeers_list .nav").html(""),s.view1.find(".msgpeers_list").show();var t=e.data.usersFound;n.usrObj=n.usrObj?n.usrObj:{},s.view1.find(".msgpeers_list .nav").show();var a=0;for(var o in t){var r=t[o].key;if(n.usrObj[r]=t[o],null!=r&&""!=r){var l="",d=i.make1LetterCapital(t[o].firstName);null!=t[o].lastName&&""!=t[o].lastName&&(l=t[o].lastName,l=i.make1LetterCapital(l));var c=d+" "+l,h=s["usr-srch-li"].clone(!0,!0),p=!(null==window.mozInnerScreenX);p?h.find("code").addClass("firefoxfix"):h.find("code").hasClass("firefoxfix")&&h.find("code").removeClass("firefoxfix"),t[o].loggedIn&&1==t[o].loggedIn?(h.find("code").hasClass("offline")&&h.find("code").removeClass("offline"),h.find("code").hasClass("online")||h.find("code").addClass("online")):(h.find("code").hasClass("online")&&h.find("code").removeClass("online"),h.find("code").hasClass("offline")||h.find("code").addClass("offline")),t[o].profilePicUrl?h.find("img").attr("src",t[o].profilePicUrl):h.find("img").attr("src","/images/AY2.0/user-image.png"),h.find("h4").html(c),h.find("span").html(t[o].userName),h.attr("data-usr",r),s.view1.find(".msgpeers_list .nav").append(h).queue(function(e){n.srchUsrz[r]=s.view1.find(".msgpeers_list .nav > li").last(),$(this).find("li").last().data(),$(this).find("li").last().removeAttr("data-usr"),0==a&&($(this).find("li").last().addClass("select_focus"),a+=1),e()})}}}else if("Session Invalid!"===e.msg||"Session Invalid"===e.msg)$("#voice-box").fadeIn(),$("body").find("#voice-box").find("span").html("Session Expired! Please LogIn Again!"),$("body").find("#voice-box").fadeIn(),$("body").find("#voice-box").fadeOut(3500),n.srchUsrz={};else{n.srchUsrz={};var f='<li id="no_usr_srch" class="without_hover"><span>Sorry No Users Found</span></li>';s.view1.find(".msgpeers_list .nav").append(f).queue(function(e){s.view1.find(".msgpeers_list").show(),s.view1.find(".msgpeers_list .nav").show(),e()})}},error:function(){u=!1,s.view1.find(".msgpeers_list .nav").has("#usr_srch_spin")&&s.view1.find(".msgpeers_list .nav #usr_srch_spin").is(":visible")&&s.view1.find(".msgpeers_list .nav #usr_srch_spin").remove(),n.srchUsrz={}}});r.push(a)}},view2Handlers:function(e){e.find("a.back_msg").on("click",function(){s.view1.css("margin-left","0px"),s.view2.css("margin-left","400px"),s.view1.find("h1 a.back_msg").hide(),s.view1.find(".usr_srch").val(""),s.view1.find(".msgpeers_list .nav").html(""),s.view1.find(".msgpeers_list").hide(),s.view1.find("#noConvFound").hide(),s.view1.find(".conv_search").val()&&s.view1.find(".conv_search").val().length>0?(s.view1.find("#compose_msg").hide(),s.view1.find(".conv_search").focus()):(s.view1.find("#compose_msg").show(),s.view1.find(".search_ico").removeClass("search_focus"),s.view1.find("#close_search").hide(),s.view1.find(".conv_search").val(""),(0===s.msgs_listhold.find(".nav").children().size()||n&&n.dynConv&&n.dynConv.length==s.msgs_listhold.find(".nav").children().size())&&i.openMsgs()),n.dynConv=[],n.currentConKey=""}),e.find(".textareahold #textCont").on("keyup",function(e){i.changeHtForTextBox()}),e.find(".textareahold #textCont").on("keydown",function(e){13!=e.keyCode||e.shiftKey||(e.preventDefault(),document.getElementById("sendBtn").click(),i.changeHtForTextBox())}),e.find(".msgs_detail").on("scroll",function(e){var t=$(this).scrollTop();t<=0&&e.preventDefault()}),e.find(".sendbtn_hold").on("click",function(e){if(i.changeHtForTextBox(),null!=s.view2.find(".textareahold #textCont").text()&&""!=$.trim(s.view2.find(".textareahold #textCont").text())){var t="",a="",o="",r="",l="",d=s.view2.find("#cnvFor").data().type;null!=d&&""!=d?("exist"===d?(t=s.view2.find("#cnvFor").data().conv,l=t):"ch-lr-request"===d?(a=s.view2.find("#cnvFor").data().sts,l=a+"_"+d):"ch-others"===d?(o=s.view2.find("#cnvFor").data().msg,l=o+"_"+d):"indiv"===d?(r=s.view2.find("#cnvFor").data().usr,l=r+"_"+d):"stuff-Feedbck"===d?(a=s.view2.find("#cnvFor").data().sts,l=a+"_"+d):"stuff-lr"===d&&(a=s.view2.find("#cnvFor").data().sts,l=a+"_"+d),n.myConv&&n.myConv[l]?i.onMsgSend(t,a,o,d,n.myConv[l],""):i.onMsgSend("","","",d,null,r)):($("#voice-box").fadeIn(),document.getElementById("statusMessage").innerHTML="Something went wrong! message could not be sent.",document.getElementById("voice-box").setAttribute("status","saved"),$("#voice-box").fadeOut(2e3))}else $("#voice-box").fadeIn(),document.getElementById("statusMessage").innerHTML="Please enter a message!",document.getElementById("voice-box").setAttribute("status","saved"),$("#voice-box").fadeOut(2e3),s.view2.find(".textareahold #textCont").focus()})},changeHtForTextBox:function(){var e=window.innerHeight,t=s.view2.find("#headheight").outerHeight(),i=s.view2.find(".textareahold").outerHeight(),n=e-t-i;s.view2.find(".msgs_detail").height(n-35),s.view2.find(".msgs_detail").scrollTop(s.view2.find(".msgs_detail .nav").height())},changeMsgDetailsHt:function(){var e=window.innerHeight;$(".msgs_listhold").height(e-93);var t=$("#headheight").outerHeight(),i=$(".textareahold").outerHeight(),s=e-t-i;$(".msgs_detail").height(s-35)},getMsgsForIndiv:function(e){if(null!=e&&""!=e){i.showView2("old"),s.view2.find(".msgpeers_list").hide(),s.view2.find(".msgpeers_list .nav").html(""),s.view2.find(".usr_srch").val(""),s.view2.find(".edit_focus").hide();var a="";if(n&&n.usrObj&&n.usrObj[e]){var o="",r=i.make1LetterCapital(n.usrObj[e].firstName);null!=n.usrObj[e].lastName&&""!=n.usrObj[e].lastName&&(o=n.usrObj[e].lastName,o=i.make1LetterCapital(o)),a=n.usrObj[e].loggedIn&&1==n.usrObj[e].loggedIn?'<code class="statcscheck online"></code>':'<code class="statcscheck offline"></code>',a+=r+" "+o}s.view2.find("#cnvFor").data().usr=e,s.view2.find("#cnvFor").data().type="indiv",s.view2.find("#cnvFor").html(a).queue(function(e){$(this).data(),$(this).removeAttr("data-usr"),$(this).removeAttr("data-type"),e()}),s.view2.find(".users_names").parent().hasClass("adjust")&&s.view2.find(".users_names").parent().removeClass("adjust"),s.view2.find(".users_names").html(""),s.view2.find("#cnvFor").show(),i.changeMsgDetailsHt(),s.view2.find(".textareahold #textCont").focus(),n.indivConv=n.indivConv?n.indivConv:{},$.ajax({type:"POST",url:"/myConversations/getMsgsForIndivConv/"+t.pageAttr.univ,data:{toKey:e},success:function(t){if($("#view2Spinner").hide(),""==a&&null!=t.data&&null!=t.data.toUserObj){n.usrObj=n.usrObj?n.usrObj:{},e=t.data.toUserObj.key,n.usrObj[e]=t.data.toUserObj;var o="",r=i.make1LetterCapital(n.usrObj[e].firstName);null!=n.usrObj[e].lastName&&""!=n.usrObj[e].lastName&&(o=n.usrObj[e].lastName,o=i.make1LetterCapital(o)),a=n.usrObj[e].loggedIn&&1==n.usrObj[e].loggedIn?'<code class="statcscheck online"></code>':'<code class="statcscheck offline"></code>',a+=r+" "+o,s.view2.find("#cnvFor").html(a)}if(1==t.response&&null!=t.data&&null!=t.data.myConv){var l=t.data.myConv[0];n.myConv=n.myConv?n.myConv:{},n.myConv[l.key]=l,n.indivConv[e]=l.key,i.buildExistConv(n.myConv[l.key]),s.view2.find("#cnvFor").data().conv=l.key,s.view2.find("#cnvFor").data().type="exist",s.view2.find("#cnvFor").html(a).queue(function(e){$(this).data(),$(this).removeAttr("data-conv"),$(this).removeAttr("data-type"),e()})}else if("Not to yourself"===t.msg){s.view2.find("#cnvFor").data().usr=e,s.view2.find("#cnvFor").data().type="indiv",s.view2.find("#cnvFor").html(a).queue(function(e){$(this).data(),$(this).removeAttr("data-usr"),$(this).removeAttr("data-type"),e()});var d=s["conv-tag"].clone(!0,!0);d.html("Sorry! You cannot message yourself!"),s.view2.find(".nav").html(d)}else"Session Invalid!"!==t.msg&&"Session Invalid"!==t.msg||($("#voice-box").fadeIn(),$("body").find("#voice-box").find("span").html("Session Expired! Please LogIn Again!"),$("body").find("#voice-box").fadeIn(),$("body").find("#voice-box").fadeOut(3500))}})}},view1Handlers:function(e){e.find("a#compose_msg").on("click",function(){e.find(".usr_srch").val(""),e.find(".msgpeers_list .nav").scrollTop(0),"none"==$(".msgpeers_list").css("display")?$(".msgpeers_list").css("display","block"):$(".msgpeers_list").css("display","none"),$(".searchpeer_list").focus(),e.find(".msgpeers_list .nav").hide()}),e.find(".search_ico").on("click",function(){e.find(".usr_srch").val(""),e.find(".msgpeers_list .nav").html(""),e.find(".msgpeers_list").hide(),e.find("#close_search").show(),e.find("a#compose_msg").hide(),$(this).addClass("search_focus"),$(".search_ico").find("input").focus()}),e.find("#close_search").on("click",function(){e.find("#close_search").hide(),e.find("a#compose_msg").show(),e.find(".usr_srch").val(""),e.find("#noConvFound").hide(),e.find(".msgpeers_list .nav").html(""),e.find(".msgpeers_list").hide(),e.find(".search_ico").removeClass("search_focus"),l.length>0&&($.each(l,function(e,t){t.abort()}),l=[]),p=!1,g&&clearTimeout(g),null!=e.find(".search_ico .conv_search").val()&&""!=e.find(".search_ico .conv_search").val()&&(e.find(".search_ico .conv_search").val(""),s.view1.find(".nav").html(""),i.openMsgs())}),e.find(".usr_srch").on("keyup",function(t){if(37==t.which||39==t.which)return t.preventDefault(),!1;if(13==t.which)return t.preventDefault(),$this=e.find(".msgpeers_list .nav > li.select_focus"),$this&&$this.trigger("click"),!1;if(38==t.which||40==t.which){if(t.preventDefault(),$this=e.find(".msgpeers_list .nav > li.select_focus"),40==t.keyCode){if(e.find(".msgpeers_list .nav > li.select_focus").next()&&e.find(".msgpeers_list .nav > li.select_focus").next().length>0){$this.removeClass("select_focus"),$this.next().addClass("select_focus");var a=e.find(".msgpeers_list .nav");return a.scrollTop(a.prop("scrollHeight")/a.children().length*a.children().index(a.children("li[class=select_focus]"))),!1}return $this.removeClass("select_focus"),e.find(".msgpeers_list .nav").scrollTop(0),e.find(".msgpeers_list .nav > li").first().addClass("select_focus"),!1}if(38==t.keyCode){if(e.find(".msgpeers_list .nav > li.select_focus").prev()&&e.find(".msgpeers_list .nav > li.select_focus").prev().length>0){$this.removeClass("select_focus"),$this.prev().addClass("select_focus");var a=e.find(".msgpeers_list .nav");return a.scrollTop(a.prop("scrollHeight")/a.children().length*a.children().index(a.children("li[class=select_focus]"))),!1}return!1}}if(r.length>0&&($.each(r,function(e,t){t.abort()}),r=[]),u=!1,m&&clearTimeout(m),s.view1.find(".usr_srch").val().length>0&&""!=$.trim(s.view1.find(".usr_srch").val())){s.view1.find(".msgpeers_list .nav").html("");var o='<li id="usr_srch_spin" class="without_hover"><span><i class="icon-spinner icon-spin"></i></span></li>';s.view1.find(".msgpeers_list .nav").html(o),n.srchUsrz={},m=setTimeout(i.srchUsr,500)}else n.srchUsrz={},s.view1.find(".msgpeers_list .nav").has("#usr_srch_spin")&&!s.view1.find(".msgpeers_list .nav #usr_srch_spin").is(":visible")&&s.view1.find(".msgpeers_list .nav #usr_srch_spin").remove(),s.view1.find(".usr_srch").val(""),s.view1.find(".msgpeers_list .nav").hide(),s.view1.find(".msgpeers_list .nav").html("")}),e.find(".msgpeers_list .nav > li").on("click",function(e){e.stopImmediatePropagation();var t=$(this).data().usr;i.getMsgsForIndiv(t)}),e.find(".msgs_listhold .nav > li").on("click",function(){i.showView2("old");var e=$(this).data().conv;$("#view2Spinner").show(),null!=e&&""!=e&&($(this).find(".inrMCnt").html(""),$(this).find(".inrMCnt").hide(),$(this).hasClass("unread")&&$(this).removeClass("unread"),n.myConv&&n.myConv[e]?($.ajax({type:"POST",url:"/myConversations/getAllMessages/"+e,success:function(t){if($("#view2Spinner").hide(),1==t.response&&null!=t.data&&null!=t.data.allMsgs){var s=t.data.allMsgs;n.myConv[e].msgs=s,i.buildExistConv(n.myConv[e]),n.myConv[e]&&n.myConv[e].convObj&&n.myConv[e].convObj.unreadCount&&n.myConv[e].convObj.unreadCount[o]&&n.myConv[e].convObj.unreadCount[o]>0&&i.removeCnt(e,n.myConv[e].univKey)}else"Session Invalid!"!==t.msg&&"Session Invalid"!==t.msg||($("#voice-box").fadeIn(),$("body").find("#voice-box").find("span").html("Session Expired! Please LogIn Again!"),$("body").find("#voice-box").fadeIn(),$("body").find("#voice-box").fadeOut(3500))}}),n.myConv[e].type&&(n.myConv[e].type.indexOf("stuff")!==-1?i.buildView2Header(n.myConv[e],"stuff"):n.myConv[e].type.indexOf("ch")!==-1?i.buildView2Header(n.myConv[e],"challenge"):"indiv"===n.myConv[e].type&&i.buildView2Header(n.myConv[e],"indiv"))):$.ajax({type:"GET",url:"/myConversations/get/exist/msgV",data:{convK:e,univName:t.pageAttr.univ},success:function(t){if($("#view2Spinner").hide(),1==t.response&&null!=t.data){var s=t.data.myConv;n.myConv=n.myConv?n.myConv:{};for(var a in s){var r=s[a].key;n.myConv[r]=s[a],n.myConv[r].type&&(n.myConv[r].type.indexOf("stuff")!==-1?i.buildView2Header(n.myConv[r],"stuff"):n.myConv[r].type.indexOf("ch")!==-1?i.buildView2Header(n.myConv[r],"challenge"):"indiv"===n.myConv[e].type&&i.buildView2Header(n.myConv[e],"indiv")),i.buildExistConv(n.myConv[r]),n.myConv[e]&&n.myConv[e].convObj&&n.myConv[e].convObj.unreadCount&&n.myConv[e].convObj.unreadCount[o]&&n.myConv[e].convObj.unreadCount[o]>0&&i.removeCnt(e,n.myConv[e].univKey)}}else"Session Invalid!"!==t.msg&&"Session Invalid"!==t.msg||($("#voice-box").fadeIn(),$("body").find("#voice-box").find("span").html("Session Expired! Please LogIn Again!"),$("body").find("#voice-box").fadeIn(),$("body").find("#voice-box").fadeOut(3500))}})),$("body").css("overflow","hidden"),$("html").css("overflow","hidden")}),e.find(".search_ico .conv_search").on("keyup",function(t){return 13==t.which?(t.preventDefault(),!1):(l.length>0&&($.each(l,function(e,t){t.abort()}),l=[]),p=!1,g&&clearTimeout(g),void(e.find(".search_ico .conv_search").val().length>0&&""!=$.trim(e.find(".search_ico .conv_search"))?(s.view1.find(".nav").html(""),s.view1.find("#noConvFound").hide(),s.view1.find("#view1Spinner").show(),g=setTimeout(i.searchConv,500)):(s.view1.find(".nav").html(""),s.view1.find("#noConvFound").hide(),s.view1.find("#view1Spinner").hide(),i.openMsgs())))}),s.msgs_listhold.on("scroll",function(){s.msgs_listhold.scrollTop()>=s.msgs_listhold.height()-.8*s.msgs_listhold.height()&&$(".msgscontainer").is(":visible")&&s.view1.is(":visible")&&n.convOffset&&0==n.curReq&&i.getConversation()})},removeCnt:function(e,i){null!=e&&""!=e&&n.myConv&&n.myConv[e]&&n.myConv[e].convObj&&n.myConv[e].convObj.unreadCount&&n.myConv[e].convObj.unreadCount[o]>0&&0==n.remReq&&(n.remReq=!0,$.ajax({type:"POST",url:"/myConversations/markAsViewed/"+i+"/"+e,success:function(i){if(n.remReq=!1,1==i.response){if(n.myConv[e].convObj.unreadCount[o]=0,t.pageAttr.userCount&&t.pageAttr.userCount.allMsgCnt){var s=t.pageAttr.userCount.allMsgCnt-1;if(s>0){if($(".conv_count").html(s),t.pageAttr.userCount.allMsgCnt=s,t.pageAttr.userCount.allNotifCnt){t.pageAttr.userCount.allNotifCnt+s}}else s=0,$(".conv_count").fadeOut(3e3).promise().done(function(){$(".conv_count").html("")}),t.pageAttr.userCount.allMsgCnt=0;if(t.pageAttr.userCount.allNotifCnt){t.pageAttr.userCount.allNotifCnt+s}}}else"Session Invalid!"!==i.msg&&"Session Invalid"!==i.msg&&"Invalid Session!"!==i.msg||($("#voice-box").fadeIn(),$("body").find("#voice-box").find("span").html("Session Expired! Please LogIn Again!"),$("body").find("#voice-box").fadeIn(),$("body").find("#voice-box").fadeOut(3500))},error:function(){n.remReq=!1}}))},onReady:function(){n.curReq=!1,n.remReq=!1,s.view1=$(".msgscontainer .newmsg_view_hold .view1"),s.view2=$(".msgscontainer .newmsg_view_hold .view2"),s.msgs_listhold=s.view1.find(".msgs_listhold"),i.view1Handlers(s.view1),s["one-one"]=s.msgs_listhold.find(".nav .peer_msgs").clone(!0,!0),s["lrn-conv"]=s.msgs_listhold.find(".nav .approve_msgs").clone(!0,!0),s["feedbck-conv"]=s.msgs_listhold.find(".nav .feed_msgs").clone(!0,!0),s["chO-conv"]=s.msgs_listhold.find(".nav .challengeother_msgs").clone(!0,!0),s["usr-srch-li"]=s.view1.find(".msgpeers_list .nav > li").clone(!0,!0),s.msgs_listhold.find(".nav").html(""),s.view1.find(".msgpeers_list .nav").html(""),i.view2Handlers(s.view2),s["conv-date"]=s.view2.find(".msgs_detail .nav .convDate").clone(!0,!0),s["otr-msg"]=s.view2.find(".msgs_detail .nav #otr-msg").clone(!0,!0),s["conv-tag"]=s.view2.find(".msgs_detail .nav .convTag").clone(!0,!0),s["my-msg"]=s.view2.find(".msgs_detail .nav #my-msg").clone(!0,!0),s.dottedText=s.view2.find(".msgs_detail .nav .dottedText").clone(!0,!0),s.view2.find(".msgs_detail .nav").html("")},getOnlyDate:function(e){var t=new Date(e),s="";return s=t.getDate()+"-"+i.gMS(t.getMonth())+"-"+t.getFullYear()+" "},gMS:function(e){var t=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];return t[e]},getOnlyName:function(e,t){var i="";return i="fullN"==t&&null!=e.lastName&&""!=e.lastName?e.firstName+" "+e.lastName:e.firstName},getOnlyTime:function(e){var t=new Date(e),i="",s="",n="";return t.getHours()<12?(s=t.getHours()<10?"0"+t.getHours()%12:t.getHours()%12,n=t.getMinutes()<10?"0"+t.getMinutes():t.getMinutes(),i+=+s+":"+n+" AM"):12==t.getHours()?(s=t.getHours(),n=t.getMinutes()<10?"0"+t.getMinutes():t.getMinutes(),i+=+s+":"+n+" PM"):(s=t.getHours()%12<10?"0"+t.getHours()%12:t.getHours()%12,n=t.getMinutes()<10?"0"+t.getMinutes():t.getMinutes(),i+=+s+":"+n+" PM"),i},checkOut:function(){$(".view1").css("margin-left","0px"),$(".view2").css("margin-left","400px"),$("#compose_msg").show(),$("#close_search").hide(),$(".view1 .search_ico").removeClass("search_focus"),s.msgs_listhold.find(".nav").html(""),s.view2.find(".msgs_detail .nav").html(""),s.view2.find("#cnvFor").html(""),s.view2.find("#cnvFor").data().sts="",s.view2.find("#cnvFor").data().conv="",s.view2.find("#cnvFor").data().type="",s.view2.find("#cnvFor").data().msg="",s.view2.find(".users_names").parent().hasClass("adjust")&&s.view2.find(".users_names").parent().removeClass("adjust"),s.view2.find(".users_names").html(""),s.view1.find(".conv_search").val(""),s.view1.find(".usr_srch").val(""),s.view1.find(".msgpeers_list .nav").html(""),s.view1.find(".msgpeers_list").hide(),d=[],a={},n.dynConv=[],n.currentConKey="",n.remReq=!1},make1LetterCapital:function(e){return e.charAt(0).toUpperCase()+e.slice(1)},feedBckToCreator:function(e,a,o,r,l){$.ajax({type:"POST",url:"/myConversations/postAFeedBck/"+r+"/"+o+"/"+e,data:{msg:a},success:function(e){if(f=!1,0==e.response)"Trying to send to same creator!"===e.msg?($("body").find("#voice-box").find("span").html("Sorry! Your trying to Message yourself!"),$("body").find("#voice-box").fadeIn(),$("body").find("#voice-box").fadeOut(3e3)):"Session Invalid!"===e.msg?($("body").find("#voice-box").find("span").html("Sorry! Your Session Expired! Login Again!"),$("body").find("#voice-box").fadeIn(),$("body").find("#voice-box").fadeOut(3e3)):($("body").find("#voice-box").find("span").html("Sorry! Something went wrong! Try Again Later!"),$("body").find("#voice-box").fadeIn(),$("body").find("#voice-box").fadeOut(3e3));else if("Session Invalid!"===e.msg||"Session Invalid"===e.msg)$("#voice-box").fadeIn(),$("body").find("#voice-box").find("span").html("Session Expired! Please LogIn Again!"),$("body").find("#voice-box").fadeIn(),$("body").find("#voice-box").fadeOut(3500);else if(console.log("from.."+l),console.log("type.."+o),"feedbck"===l)$("#user-feedback #issue_area").hide(),$("#user-feedback .cont").hide(),$("#user-feedback .modal-footer").hide(),$("#user-feedback .foot-cont").show(),$("#user-feedback").modal("hide"),"ch-Feedbck"===o?$(".notifi_popup").find("p").html("The Challenge Creator will soon get back to you."):"stuff-Feedbck"===o&&$(".notifi_popup").find("p").html("The Store Manager will soon get back to you."),t.dom("#popup-blocks").attr("class","notifypopup"),console.log("ah");else if("msg"===l&&null!=e.data&&null!=e.data.myConversation&&null!=e.data.curUser){var r=e.data.curUser,c={};c.frmKey=r.key,c.message=a,c.timeStamp=e.data.myConversation.convObj.dateCreated;var h=i.getOnlyDate(c.timeStamp);if(d.indexOf(h)===-1){var u=s["conv-date"].clone(!0,!0);u.html(h),s.view2.find(".msgs_detail .nav").append(u),d.push(h)}var p=i.buildEachMs(r,c);s.view2.find(".msgs_detail .nav").append(p).queue(function(t){s.view2.find("#cnvFor").data().conv=e.data.myConversation.key,s.view2.find("#cnvFor").data().type="exist",n.myConv=n.myConv?n.myConv:{},n.myConv[e.data.myConversation.key]=e.data.myConversation,s.view2.find(".textareahold #textCont").focus(),t()}),s.view2.find(".textareahold #textCont").html(""),i.buildUpdConvDyn(e.data.myConversation)}if(null!=e.data&&null!=e.data.curUser&&null!=e.data.myConversation){var m={};if(void 0!=typeof uName&&"undefined"!=typeof uName&&""!=uName){var g=null,v=null;null!=e.data.myConversation.chObj?g=e.data.myConversation.chObj:null!=e.data.myConversation.storeObj&&(v=e.data.myConversation.storeObj),null!=g&&null!=g.name&&""!=g.name?(m.category="Challenge Feedback",m.action=uName,m.label=g.name+"-"+e.data.curUser.firstName+" "+e.data.curUser.lastName):null!=v&&(m.category="Stuff Feedback",m.action=uName,m.label=v.stuffName+"-"+e.data.curUser.firstName+" "+e.data.curUser.lastName),m.value=1,pushGoogleAnalytics(m)}}},error:function(){f=!1}})},channelForMsgs:function(e){var o=JSON.parse(e.data);if(null!=o.myConversation&&null!=o.myConversation.key){var r=o.myConversation,l=(o.curUser,o.allCount),c=0,h=o.myConversation.key,u=JSON.parse(l.count);if(c=u.msgCount,t.pageAttr.userCount.allMsgCnt=c,n.myConv=n.myConv?n.myConv:{},n.myConv[h]=r,c>0&&$(".conv_count").html(c).show(),t.pageAttr.userCount&&t.pageAttr.userCount.allNotifCnt){t.pageAttr.userCount.allNotifCnt+c}if($(".msgscontainer").is(":visible")&&$(".view1").find(".conv_search").val().length<=0){if(a&&a[h]){a[h].remove(),delete a[h];var p=i.buildView1(n.myConv[h]);s.msgs_listhold.find(".nav").children().each(function(){var e=$(this).data().conv;null!=e&&""!=e&&e===h&&$(this).remove()}),s.msgs_listhold.find(".nav").prepend(p).queue(function(e){s.msgs_listhold.find(".nav > li").first().data(),s.msgs_listhold.find(".nav > li").first().removeAttr("data-conv"),a[h]=s.msgs_listhold.find(".nav > li").first(),s.msgs_listhold.find(".nav").scrollTop(200),e()})}else{var f=i.buildView1(n.myConv[h]);s.msgs_listhold.find(".nav").prepend(f).queue(function(e){s.msgs_listhold.find(".nav > li").first().data(),s.msgs_listhold.find(".nav > li").first().removeAttr("data-conv"),a[h]=s.msgs_listhold.find(".nav > li").first(),s.msgs_listhold.find(".nav").scrollTop(200),e()})}if(s.view2.is(":visible")&&"0px"==$(".msgscontainer").find(".view2").css("margin-left")&&void 0!=n.currentConKey&&n.currentConKey&&n.currentConKey===h&&null!=o.message){var m=i.getOnlyDate(o.message.timeStamp);if(d.indexOf(m)===-1){var g=s["conv-date"].clone(!0,!0);g.html(m),s.view2.find(".msgs_detail .nav").append(g),d.push(m)}if(r&&r.usersIn)for(var v in r.usersIn){var b=r.usersIn[v].key;if(null!=b&&""!=b&&b===o.message.frmKey&&null!=o.message.message&&""!=o.message.message){var y=i.buildEachMs(r.usersIn[v],o.message);s.view2.find(".msgs_detail .nav").append(y).queue(function(e){if(s.view2.find(".msgs_detail").scrollTop(s.view2.find(".msgs_detail .nav").height()),s.view1.find(".msgs_listhold .nav > li").first().find(".inrMCnt").html(""),s.view1.find(".msgs_listhold .nav > li").first().find(".inrMCnt").hide(),s.view1.find(".msgs_listhold .nav > li").first().hasClass("unread")&&s.view1.find(".msgs_listhold .nav > li").first().removeClass("unread"),r.univKey)i.removeCnt(r.key,r.univKey);else{var t=o.myConversation.convObj.univKey;i.removeCnt(r.key,t)}e()})}}}}}},updActvUser:function(e){var t="",i="";if(t=e.loggedIn&&1==e.loggedIn?"online":"offline",n.indivConv&&n.indivConv.hasOwnProperty(e.key)&&(i=n.indivConv[e.key]),"0px"==$(".msgscontainer").find(".view2").css("margin-left"))if($(".msgscontainer").find(".view2 #cnvFor").has("code").size()>0)"online"===t?$(".msgscontainer").find(".view2 #cnvFor > code").hasClass("online")||($(".msgscontainer").find(".view2 #cnvFor > code").removeClass("offline"),$(".msgscontainer").find(".view2 #cnvFor > code").addClass("online")):"offline"===t&&($(".msgscontainer").find(".view2 #cnvFor > code").hasClass("offline")||($(".msgscontainer").find(".view2 #cnvFor > code").removeClass("online"),$(".msgscontainer").find(".view2 #cnvFor > code").addClass("offline")));else{var s=$(".msgscontainer").find(".view2 #cnvFor").html(),o='<code class="statcscheck "'+t+'""></code>'+s;$(".msgscontainer").find(".view2 #cnvFor").html(o)}if(i&&a&&a[i]&&("online"===t?(a[i].find("code").hasClass("offline")&&a[i].find("code").removeClass("offline"),a[i].find("code").addClass("online")):"offline"===t&&(a[i].find("code").hasClass("online")&&a[i].find("code").removeClass("online"),a[i].find("code").addClass("offline"))),$(".msgpeers_list").is(":visible")&&$(".msgpeers_list").find(".nav").children().each(function(i){var s=$(this).data().usr;e.key===s&&n.srchUsrz&&n.srchUsrz.hasOwnProperty(s)&&("online"===t?(n.srchUsrz[s].find("code").hasClass("offline")&&n.srchUsrz[s].find("code").removeClass("offline"),n.srchUsrz[s].find("code").addClass("online")):"offline"===t&&(n.srchUsrz[s].find("code").hasClass("online")&&n.srchUsrz[s].find("code").removeClass("online"),n.srchUsrz[s].find("code").addClass("offline")))}),n.usrObj=n.usrObj?n.usrObj:{},n.usrObj[e.key]=e,i&&n.myConv&&n.myConv.hasOwnProperty(i)){var r=n.myConv[i],l=r.usersIn,d=[];for(var c in l)l[c].key===e.key?d.push(e):d.push(l[c]);r.usersIn=d,n.myConv[i]=r}},openIndUserMsg:function(e){console.log("come shere"),null!=o&&""!=o||t&&t.uk&&(o=t.uk),(null==h||$.isEmptyObject(h))&&t&&t.thisUP&&(h=t.thisUP);var s=!1;if($(".msgscontainer").is(":visible"))if("0px"==$(".msgscontainer").find(".view1").css("margin-left"))s=!0;else if(void 0!=n.currentConKey&&n.currentConKey&&n.myConv&&n.myConv[n.currentConKey])if("indiv"===n.myConv[n.currentConKey].type){var a=n.myConv[n.currentConKey].usersIn,r=!1;for(var l in a)a[l].key===e&&(r=!0);0==r&&(s=!0)}else s=!0;else s=!0;else s=!0,setTimeout(function(){$(".msgscontainer").slideToggle()},200);$("body").css("overflow","hidden"),$("html").css("overflow","hidden"),1==s?($("#view2Spinner").show(),i.getMsgsForIndiv(e)):$(".view2").find(".textareahold #textCont").focus()}},i.onReady(),t=e.setReference("messages",i)}(window),function(e,t,i,s,n,a,o,r){s=Date.now(),n=!1,a=0,o=0,i={get:function(e,s){t.dom("div.notify_list_hold").is(":visible")?(t.dom(".notify_hold.dropdown").removeClass("open"),t.dom(".notification_count").hide()):e&&(t.dom("ul#notify_list").html("").hide(),s=t.dom(".dropdown, .btn-group"),t.dom(document).find(s).removeClass("open"),t.dom(".notify_hold").addClass("open"),a=0,i.load(),i.clearNotification())},load:function(){t.dom("#notif_loader").show(),t.dom("#notify_icon").removeAttr("class"),0===a&&t.dom(".notification_count").html(0).hide(),t.xhr({url:"/load/"+t.pageAttr.univ+"/"+t.pageAttr.page,type:"GET",data:{view:"notifications",timezoneoffset:s,offset:a},success:function(e,s,o,r,l){if(t.dom("#notif_loader").hide(),200===e.code)if(e.data.status){for(var d in e.data.status)s=e.data.status[d],o=e.data.type[s.typeKey],r=s.assignee?e.data.user[s.assignee]:{},l=e.data.univ[s.univKey],s&&o&&r&&l&&i.buildNotification(s,o,r,l);t.dom("ul#notify_list").show(),n=!0}else 0===a&&t.dom("#blank-notifications").show()}})},buildNotification:function(e,i,s,n,a){"item"===e.type&&(e.type="stuff"),e.allStatus.indexOf("approved")!==-1?a=e.type+"-completed":e.allStatus.indexOf("declined")!==-1?a=e.type+"-declined":e.allStatus.indexOf("challenged")!==-1?a=e.type+"-challenged":e.allStatus.indexOf("purchased")!==-1&&(a=e.type+"-purchased"),a=t.templates[a].clone(!0,!0),t.utils.setImage(a.children("div.notify-image").children("img"),i.image),a.children("div.notify-image").siblings("div").children("h4").children("span").html(t.utils.ms2ts(e.dateModified)).parent().siblings("p").children("a.type-name").html(i.name).attr("href","stuff"!=e.type?location.origin+"/"+n.semanticUnivName+"/challenges/all/"+t.utils.semanticName(i.name):location.origin+"/"+n.semanticUnivName+"/store/all").siblings("a.status-user-name").html(s.firstName).attr("href",location.origin+"/"+n.semanticUnivName+"/peers/all/"+s.semanticUserName).siblings("a.status-univ").html(n.universityName).attr("href",location.origin+"/"+n.semanticUnivName).siblings("span.status-points").html(i.points),e.message&&(t.utils.setImage(a.find(".notify_message").children("div.align-center-container").children("img"),s.img?s.img:"/images/AY2.0/user-image.png"),a.find(".notify_message").css("display","block").children("div.notify_message_body").find("a.status-user-name").html(s.firstName+" "+(s.LastName?s.LastName:"")).parent().find("p.notify_message_content").html(e.message.value?e.message.value:e.message),(e.message.value&&e.message.value.length<=89||e.message.length<=89)&&(a.find(".notify_message").css("display","block").children("div.notify_message_body").find("p.notify_message_content").css("height","auto"),a.find(".notify_message").children("div.notify_message_body").find("span").hide())),a&&t.dom("ul#notify_list").append(a)},updateCount:function(e){t.notifications.NCount=e,e>0?(t.dom(".notification_count").html(e).show(),t.dom("#notify_icon").addClass("bell_loader"),setTimeout(function(){t.dom("#notify_icon").removeClass("bell_loader")},2e3)):t.dom(".notification_count").hide()},clearNotification:function(){o>0&&(o=0,t["common-service"].post("update",{type:"notificationsCount",data:JSON.stringify({})},function(e){t.dom(".notification_count").fadeOut("slow"),t.dom("#notify_icon").removeClass("bell_loader")}))},moreOrLess:function(e){e.parent(".notify_message_body").hasClass("more")?(e.parent(".notify_message_body").removeClass("more"),e.html("..more")):(e.parent(".notify_message_body").addClass("more"),e.html("less"))}},t=e.setReference("notifications",i),r=document.getElementById("notify_list_hold"),r&&(r.onscroll=function(e,s){e=t.dom(this,!0),e.scrollTop()>=.7*e.height()&&n&&(n=!1,a+=10,i.load()),0===e.scrollTop()&&i.clearNotification()})}(window),function(e,t,i){i={open:function(e,i){t.dom("#gridsetup").modal("hide"),t.pageAttr.page!==i.data.data.page&&(console.log("page ::"+i.data.data.page),"challengereq"===i.data.data.page?window.location.href="/"+t.pageAttr.univ+"/admin/challengeRequests":"univ_page"===i.data.data.page?window.location.href="/"+t.pageAttr.univ:t.dom(".header_tabs").find("#"+i.data.data.page).trigger("click"))}},t=e.setReference("grid",i)}(window),function(e,t,i){i={open:function(e,s,n,a,o,r){if(t.dom("#add-steps").addClass("step_increment"),n||(n=e.data().type),i["one-step-challenges-create"===n?"challenges":n.replace("-create","")]={},i["one-step-challenges-create"===n?"challenges":n.replace("-create","")].origin=e,o=!a,!(a||e.is("li")||e.is("a")))return e=e.parents(".parent:lt(1)"),void t["common-service"].get("challenge",{data:JSON.stringify({name:e.data().name,context:"group-edit"})},function(t){200===t.code&&t.response&&(t.data[e.data().name].usersAssigned=t.data.usersAssigned,
i.open(e,s,n,t.data[e.data().name]))});if(t.dom("#challenge_popup > div.modal-footer > a.edit-challenge")[o||"drafted"===t.utils.getConstraints("challenges").filter?"first":"last"]().show().siblings("a.edit-challenge").hide(),t.dom("#challenge_popup > div.modal-footer > a.btn-pri").last()[o||"drafted"===t.utils.getConstraints("challenges").filter?"show":"hide"](),t.loadPopup(n),t.dom("#challenge_popup").find(".refer_list").attr("style","display:block"),t.dom("#auto-pause").removeClass("active").hide(),a?(t.dom(".close-challenges").css("float","right"),t.dom(".edit-challenge-divider").show(),t.dom("#challenges-create").find(".text-limiter").html(t.utils.getDelimiterLength(a.name,"challenge")),a.image=a.image?a.image:"/images/AY2.0/upimg.png","drafted"===t.utils.getConstraints("challenges").filter?t.dom("#send-creation-mail").show():(t.dom("#send-creation-mail").hide(),t.dom("#send-creation-mail").attr("class","pull-left"))):(t.dom("#ch-options > div#admin_approve").first().attr("class","pull-left active").siblings("div").attr("class","pull-left"),t.dom(".close-challenges").css("float","left"),t.dom("#challenges-create").find(".text-limiter").html("100"),t.dom(".edit-challenge-divider").hide(),a={simpleName:"",name:"",points:"",image:"challenges-create"===n?t.utils.chImLink("challenge"):t.utils.chImLink("group"),description:"",categories:[],components:[],type:"challenges-create"===n||"one-step-challenges-create"===n?"challenge":"group",subListLength:0,subList:{},autoApprove:!1,assign:!0}),t.dom("#add-steps").html(""),t["challenges-create"][a.type+"-usersAssigned"]=[],t.dom("#"+a.type+"-assigned-users").html(""),t.dom("#"+a.type+"-assign-everyone").trigger("click"),a){if(a.usersAssigned&&Object.keys(a.usersAssigned).length>0){t.dom("#"+a.type+"-assign-specific").trigger("click");for(var l in a.usersAssigned)a.usersAssigned[l].userid=l,i.singleAssignedUser(a.usersAssigned[l],a.type)}if("challenge"===a.type)a.simpleName?t.dom("#challenge_popup").children("div.modal-body").children("div#send-creation-mail").hide():t.dom("#challenge_popup").find("div#send-creation-mail").show().children("input").prop("checked",!0),t.dom("#challenge_popup").children("div.modal-body").data().name=a.simpleName,r=t.dom("#challenge_popup").children("div.modal-body").children("div.challenge-title").children("div.cropped-container").children("img"),t.utils.setImage(r,a.image),r.parent().siblings("input.challenge_name").val(a.name).siblings("input.challenge_point").val(a.points),nicEditors.findEditor("challenge-textarea").setContent(a.description),a.categories&&Object.keys(a.categories).length>0?t.dom("#ch-cat").children("div.bootstrap-select").children("div.dropdown-menu").children("ul.selectpicker").children("li").removeAttr("class").each(function(e){e=t.dom(this,!0).children(),a.categories[0].indexOf(e.children("span.text").html())===-1||e.hasClass("selected")||e.trigger("click")}):$(".selectpicker").selectpicker("deselectAll").scrollTop(0),a.settings&&t.dom("#auto-pause").addClass(JSON.parse(a.settings).video.autoPause?"active":""),a.components&&t.dom("#ch-components > div").first().attr("class","pull-left"+(a.components.indexOf("summary")!==-1?" active":"")).siblings("div").attr("class","pull-left"+(a.components.indexOf("review")!==-1?" active":"")),a.autoApprove?t.dom("#ch-options > div#auto_approve").first().attr("class","pull-left active").siblings("div").attr("class","pull-left"):t.dom("#ch-options > div#admin_approve").first().attr("class","pull-left active").siblings("div").attr("class","pull-left"),t.dom(".over-cover").fadeIn("fast"),t["common-service"].get("progress",{data:JSON.stringify({context:"challenge-steps",name:a.simpleName,filter:t.utils.getConstraints("challenges").filter})},function(e,s,a,o){if(t.dom(".over-cover").fadeOut("fast"),200===e.code&&e.response&&e.data){if(e.data.isDeleted&&e.data.stepsLength&&(n="one-step-challenges-create",t["one-step-challenges-create"]=!0),e.data.details?"string"==typeof e.data.details&&(e.data.details=JSON.parse(e.data.details)):e.data.details={},e.data.attachments){e.data.attachments=JSON.parse(e.data.attachments);for(var r in e.data.attachments)e.data.details[+r+1]||(e.data.details[+r+1]={}),e.data.details[+r+1].attachments=e.data.attachments[r]}for(var l in e.data.details){o=null;for(var d in e.data.details[l]){if("video"===d){t.dom("#add-video").trigger("click");for(var c in e.data.details[l][d])e.data.details[l][d][c]=e.data.details[l][d][c],s="youtube"===e.data.details[l][d][c].type?"https://www.youtube.com/watch?v=":"https://vimeo.com/",o=t.dom("#add-steps").children("li").last(),i.addNewVideo(o.find("div.step-video").children("input").val(s+c),e.data.details[l][d][c])}else if("attachments"===d){t.dom("#add-files").trigger("click"),t.attachments.sampleBuilder(),a=e.data.details[l][d];for(var c in a)a.template=t.attachments.sample.cloneNode(!0),a.template.setAttribute("class","single-attachment-enclosure indexed"),o=t.dom("#add-steps").children("li").last(),t.attachments.builder(o.find(".more-attachments"),null,a[c].mime,a[c].name,null,a[c].value,a.template)}else if("questions"===d){t.dom("#add-qa").trigger("click"),a=e.data.details[l][d];for(var c in a)o=t.dom("#add-steps").children("li").last(),a[c]=JSON.parse(a[c]),o.find(".more-questions").trigger("click").parent().children("div.single-question").last().children("div").first().children("input").val(a[c].question).parent().siblings("div").children("input").each(function(e){e=t.dom(this,!0),e.val(a[c]["ans-"+String.fromCharCode(e.index()+65)])}).siblings("div#options-dropdown").find("li.options-list").children("a:eq("+(a[c]["c-ans"].charCodeAt()-65)+")").trigger("click")}else if("require-attachments"===d){t.dom("#require-attachments").trigger("click"),a=e.data.details[l][d];for(var c in a){o=t.dom("#add-steps").children("li").last();var h=o.find(".require-attachments");h.find(".require_attachments_list").find("#all-files").removeClass("active");for(var u in a[c])h.find(".require_attachments_list").find("#"+a[c][u]).addClass("active")}}else if("embed"===d){t.dom("#add-embed").trigger("click"),d=JSON.parse(e.data.details[l][d]),o=t.dom("#add-steps").children("li").last();for(var c in d)o.find("div.step-embed").children("input").val(d[c])}o&&e.data.details[l].instructions&&o.find("input.step-instructions").val(e.data.details[l].instructions)}}}});else if("group"===a.type&&(i.courseon=!0,t.dom("#recently-modified").trigger("click"),t.dom("#challenges-filter").hide(),i.groupChallenges=[],t.dom("#challenge_popup").children("div.modal-body"),t.dom("#group-creator").data().name=a.simpleName,i.groupSimpleName=a.simpleName,t.dom("#group-creator").find("img.item-image").attr({src:a.image,style:"max-width : none;"}).parent().siblings("div.contentedit").html(a.name).siblings("span").html("("+a.subListLength+")"),t.dom(".course-descript").val(a.description),a.userShowDate&&0!=a.userShowDate?(t.dom(".usershowdate").addClass("selected"),t.dom(".showdateinput").val(parseInt(a.userShowDate)/864e5)):$(".showdateinput").val(0),a.categories&&t.dom("div.add-course-content ul.selectpicker").children("li").removeAttr("class").each(function(e){e=t.dom(this,!0).children(),a.categories.indexOf(e.children("span.text").html())!==-1&&e.trigger("click")}),t.dom("#selected-chs").html(""),a.subList))for(var d in a.subList)i.buildGroupChallenge(a.subList[d])}else t.dom("#challenge_popup").children("div.modal-body").data("data-name","");t.dom("#challenge_popup").children("div.modal-body").data(),t.dom("#challenge_popup").children("div.modal-body").removeAttr("data-name"),"one-step-challenges-create"===n&&(t.dom("#add-steps").removeClass("step_increment"),t.dom("#steps-holder").find("#add-video").trigger("click"),t["one-step-challenges-create"]=!0),t["challenges-service"].is_progress&&(t.dom("#challenges-holder").children().first().removeClass("takechallenge"),t.dom("#challenges-holder").children().first().find("div.firstchallenge_banner").remove(),t.dom(".challenges-scope").find(".addoption").removeClass("highlight_individual"),t.dom(".challenges-scope").find(".addoption > .addchallege_banner").remove(),t.dom("#backdrop").hide(),t["challenges-service"].is_progress=!1)},step:function(e,s){t.dom("#add-steps").append(t.templates["challenge-step"].clone(!0,!0)).children().last().children("ul#step-types").children("li").get(s.data.data.index).click(),"0"===s.data.data.index||i.challenges.origin.data().name||("1"===s.data.data.index?t.dom("#add-steps").children().last().find(".more-attachments").trigger("click"):t.dom("#add-steps").children().last().find(".more-questions").trigger("click"))},configStep:function(e,t){e.attr("class","active").siblings().hide(),e.parent().parent().children("div.challenge_dec").children("div#step-choices").attr("class",t.data.data.step)},closeStep:function(e,i){e=e.parent(),e.find("#step-choices.attachments").find("div.single-attachment-enclosure.indexed").each(function(){t.dom(this,!0).children("span.single-attachment-close").trigger("click")}),0==e.siblings().find("#step-choices.video").length&&t.dom("#auto-pause").removeClass("active").hide(),e.remove()},getVideoInput:function(e,s,n,a){i.timeout&&clearTimeout(i.timeout),i.timeout=setTimeout(function(){(32===s.keyCode||8===s.keyCode)&&""===e.val().trim()||""===e.val().trim()?(e.removeClass("error"),e.siblings("div.video-details").slideUp(),e.siblings().children("#video_search_result").hide(),t.dom("#search-box").hide()):32===s.keyCode&&32===s.which||(t.dom("#search-box").scrollTop(0),t.utils.isValidURL(e.val())?(e.removeClass("error"),n=t.utils.isValidVideoURL(e.val()),n?(e.siblings().children(".searchresults").hide(),e.siblings("span.video-loader").fadeIn(),e.parent().attr("class","placeholder step-video"),a={list:n.id,type:n.type}):(e.attr("class","placeholder dec_intxt error"),e.siblings(".video-details").hide(),e.siblings("#search-box").hide(),e.siblings("div.video-details").slideUp())):(e.removeClass("error"),e.siblings(".video-details").hide(),a={searchStr:e.val()}),i.getVideoDetails(e,s,n,a,null))},400)},getVideoDetails:function(e,s,n,a,o){null!=o&&(a={searchStr:e.val(),nextPageToken:i.nPageToken});try{(a.searchStr||a.list)&&t.xhr({url:"/get/"+t.pageAttr.univ+"/videos",type:"GET",data:{data:JSON.stringify(a)},success:function(a){if(i.youTubeSearch=!0,e.siblings("span.video-loader").fadeOut(),a&&200==a.code)if(n)JSON.parse(a.data[n.id])&&i.addNewVideo(e,JSON.parse(a.data[n.id]));else if(a.data.resp)if(0==JSON.parse(a.data.resp).pageInfo.totalResults)e.siblings().children("#video_search_result").hide(),e.siblings("#search-box").hide();else{i.nPageToken=JSON.parse(a.data.resp).nextPageToken,a.data.resp=JSON.parse(a.data.resp).items,o||e.siblings().children("#video_search_result").html(""),e.siblings("#search-box").show();for(var r in a.data.resp)a.data.resp[r].id.videoId&&(e.siblings().children("#video_search_result").show(),e.siblings().children("#video_search_result").append("<li id ="+a.data.resp[r].id.videoId+'><img src = "https://i.ytimg.com/vi/'+a.data.resp[r].id.videoId+'/default.jpg "></img><h2>'+a.data.resp[r].snippet.title+"</h2><p>"+a.data.resp[r].snippet.description+"</p></li>")),e.siblings().children("#video_search_result").children("li").last().on("click",function(){e.val("https://www.youtube.com/watch?v="+t.dom(this,!0).attr("id")),e.siblings().children(".searchresults").hide(),e.siblings().children(".searchresults").html(""),t.dom("#search-box").scrollTop(0),e.siblings("#search-box").hide(),i.getVideoInput(e,s,null,null)})}}})}catch(e){}},addNewVideo:function(e,i,s,n){e.siblings("div.video-details").attr("duration",i.duration).find("div").html(i.title).siblings("p").html(i.description).siblings("img").attr("src",i.image).parent().slideDown(),(t.dom("#popup-blocks").hasClass("one-step-challenges-create")||t["one-step-challenges-create"])&&(n=t.dom("#popup-blocks").attr("class","challenges-create"),n.find(".challenge_name").val(i.title),n.find(".item-image:first").attr("src",i.image).css("height","44px"),s=Math.round(parseInt(i.duration)/60),s=s>0?s:1,n.find(".challenge_point").val(s),n.find(".refer_list").attr("style","display:none !important"),n.find("#ch-components > div:eq(1)").attr("class","pull-left active").siblings("div").attr("class","pull-left"),n.find("#ch-options > div#auto_approve").first().attr("class","pull-left active").siblings("div").attr("class","pull-left")),t.dom("#auto-pause").show()},addNewQA:function(e,i,s){e.before(t.templates["step-question"].clone(!0,!0)),s=e.siblings("div.single-question").first(),s.attr("class","single-question first_question"),e.siblings().length>1&&s.attr("class","single-question")},removeQA:function(e,t,i){i=e.parent().parent().siblings("div.single-question"),1===i.length&&i.attr("class","single-question first_question"),e.parent().parent().remove()},chooseAnswer:function(e,i){e.attr("class","active").siblings().removeAttr("class"),e.parent().parent().siblings("a.options-text").children("span").first().html(t.utils.localeContentBuffer("OPTION")+" "+i.data.data.ans)},saveChallenge:function(e,s,n,a,o,r){if(n){if(n.sendMail=t.dom("div#send-creation-mail").hasClass("active"),n.videoautoPause=t.dom("div#auto-pause").hasClass("active"),o=e.children("div.challenge-title").children("div.choose-file.cropped-container").children("input"),n.crop=o.length>0?o.data().coords:{},n.simpleName=e.data().name?e.data().name:a?"":t.utils.getSemanticName(n.name),t["one-step-challenges-create"]&&(n.image=t.dom(".challenges-create").find(".item-image:first").attr("src")),n.points=$.trim(e.children("div.challenge-title").children("input.challenge_point").val()),!n.points&&a)return t.utils.statusMsg(t.utils.localeContentBuffer("ENTER_CHALLENGE_POINTS")),e.children("div.challenge-title").children("input.challenge_point").focus(),!1;if(isNaN(n.points)&&a)return t.utils.statusMsg(t.utils.localeContentBuffer("NUMERIC_POINTS")),e.children("div.challenge-title").children("input.challenge_point").focus(),!1;if(n.points=n.points?n.points:0,n.description=$.trim(nicEditors.findEditor("challenge-textarea").getContent()),o=t.dom("#chdescription"),!n.description&&a?o.hide():(o.show(),o.html(n.description)),o=t.dom("#ch-components").children("div"),n.components=[],o.each(function(e){e=t.dom(this,!0),e.hasClass("active")&&n.components.push(e.data().prop)}),o=t.dom("#ch-options").children("div:lt(2)"),n.options={},o.each(function(e){e=t.dom(this,!0),e.hasClass("active")&&(n.options[e.data().prop]=!0)}),!(Object.keys(n.options).length>0))return t.dom("#ch-options").focus().addClass("error"),void t.utils.statusMsg(t.utils.localeContentBuffer("SELECT_ONE_OPTION")+" "+t.utils.localeContentBuffer("HOW_TO_APPROVE_CHALLENGE"),!0);if(o=t.dom("#ch-admin-options").children("div:lt(2)"),o.each(function(e){e=t.dom(this,!0),e.hasClass("active")&&(n.options[e.data().prop]=!0)}),n.options.assign=!1,o=t.dom("#ch-cat").children("div.bootstrap-select").children("div.dropdown-menu").children("ul.selectpicker").children("li.selected"),n.categories=[],o[0]&&o.each(function(){n.categories.push(t.dom(this,!0).children().children("span.text").html())}),n.categories=n.categories.join(","),n.categories||(o=t.dom("#ch-cat").find("div.add-new-category").children("input").val(),o&&(n.categories=o)),n["assigned-users"]={},t.dom("#challenge-assign-everyone").is(":checked"))n["assigned-users"].mode="all";else if(t.dom("#challenge-assign-specific").is(":checked")&&(n["assigned-users"].mode="specific",n["assigned-users"].users=[],o=t.dom("#challenge-assigned-users").children("span.single-assigned-user"),o[0]&&o.each(function(){n["assigned-users"].users.push(t.dom(this,!0).data().userid)}),n["assigned-users"].users=n["assigned-users"].users.join(","),n["assigned-users"].users.length<=0))return void t.utils.statusMsg(t.utils.localeContentBuffer("ONE_PEER_FOR_ASSIGNING"));if(o=t.dom("ul#add-steps").children("li.single-step"),o.length>0&&(n.steps={},n.questions={},n.answers={},o.each(function(e,i,s,a,o){if(!r)switch(e=t.dom(this,!0),i=e.index()+1,n.steps[i]={},n.steps[i].instructions=e.children("div.challenge_dec").children("div").first().children("input.step-instructions").val(),e=e.children("div.challenge_dec").children("div#step-choices"),e.attr("class")){case"video":s=t.utils.isValidVideoURL(e.children("div.step-video").children("input").val()),s?n.steps[i].video=s:(t.utils.statusMsg(t.utils.localeContentBuffer("VALID_YOUTUBE_URL")),e.children().children("input.dec_intxt").addClass("error").css("outline","none").focus(),r=!0);break;case"qa":e=e.children("div.step-qa").children("div.single-question"),n.questions[i]={},n.answers[i]={},e.each(function(e,s,a,o){return o=!1,e=t.dom(this,!0),a=e.index()+1,n.questions[i][a]={},s=e.children("div").first().children("input.question"),s.val()?(n.questions[i][a].question=s.val(),s.attr("class","dec_intxt question")):(t.utils.statusMsg(t.utils.localeContentBuffer("COMPLETE_QUESTIONAIRE_BLOCK"),!0),s.focus(),s.attr("class","dec_intxt question box-error"),r=!0),e=e.children("div").last(),s=e.children("input.answer"),s.each(function(e,s){e=String.fromCharCode(e+65),s.value.trim()?(n.questions[i][a]["ans-"+e]=s.value,t.dom(this,!0).attr("class","answer ans-"+e)):Object.keys(n.questions[i][a]).length-1>=2?t.dom(this,!0).attr("class","answer ans-"+e):(t.utils.statusMsg(t.utils.localeContentBuffer("FILL_CONSECUTIVES_BLOCKS"),!0),t.dom(this,!0).attr("class","answer ans-"+e+" box-error").addClass("error").css("outline","none").focus(),r=!0,o=!0)}),o&&Object.keys(n.questions[i][a]).length-1<=1?(t.utils.statusMsg(t.utils.localeContentBuffer("MUST_HAVE_TWO_OPTION"),!0),r=!0,!1):(s=e.children("div#options-dropdown").children().children("ul").children().children("a.active").index(),o||n.questions[i][a]["ans-"+String.fromCharCode(s+65)]+1&&s!==-1?(n.answers[i][a]=String.fromCharCode(s+65),void e.children("div#options-dropdown").removeAttr("class")):(s===-1?t.utils.statusMsg(t.utils.localeContentBuffer("PLEASE_SELECT_CORRECT_OPTION"),!0):t.utils.statusMsg(t.utils.localeContentBuffer("CORRECT_OPTION_FIELD_NOT_EMPTY"),!0),e.children("div#options-dropdown").attr("class","error").css("outline","none").focus(),r=!0,!1))});break;case"attachments":0===e.find("div.single-attachment-enclosure").length&&(t.utils.statusMsg(t.utils.localeContentBuffer("COMPLETE_QUESTIONAIRE_BLOCK"),!0),e.find(".step-attachments").css("outline","none").focus().addClass("error"),r=!0);break;case"require-attachments":if(s={},e=e.children(".step-require-attachments").children().children(),e.hasClass("active")){var l=[];e.each(function(e){$(this).hasClass("active")&&l.push($(this).attr("id"))}),s.type=l,n.steps[i]["require-attachments"]=s}else t.utils.statusMsg(t.utils.localeContentBuffer("COMPLETE_QUESTIONAIRE_BLOCK"),!0),t.dom("#step-choices").children().focus().addClass("error").css("outline","none"),r=!0;break;case"embed":s=e.children("div.step-embed").children("input").val().trim(),o=t.utils.createTempElement(s),o.length>0&&t.utils.isValidHttpsURL(o[0].getAttribute("src"))||t.utils.isValidHttpsURL(s)?n.steps[i].embed={0:s}:(t.utils.statusMsg("Url with HTTPS are accepted",!0),e.children("div.step-embed").children("input.dec_intxt").addClass("error").css("outline","none").focus(),r=!0)}})),!r){if(t.utils.statusMsg(),i.removableFiles){for(var l in i.removableFiles)i.removableFiles[l]&&"-1"!==i.removableFiles[l]&&(i.removableFiles[l]=i.removableFiles[l].toString());n.removableFiles=i.removableFiles,i.removableFiles={}}n.toBePublished=a,n.filter=t.utils.getConstraints("challenges").filter,$.isEmptyObject(n.crop)&&!t["one-step-challenges-create"]&&(n.image=t.dom(".challenges-create").find(".item-image:first").attr("url")),t.dom(".over-cover").fadeIn("fast"),$.isEmptyObject(n.crop)?t["common-service"].post("update",{type:"challenge",data:JSON.stringify(n)},function(e){i.afterUpload(e,"challenges",n)}):t["common-service"].upload("challenges",n,e)}}else a="draft"!==e.data().type,e=e.parent().siblings("div.modal-body"),o=e.children("div.challenge-title").children("input.challenge_name").val().trim(),o?t.xhr({url:"/validate/"+t.pageAttr.univ+"/name",type:"GET",data:{data:JSON.stringify({type:"challenge",nname:o,oname:i.challenges.origin.data().name})},success:function(n){n.data.result?i.saveChallenge(e,s,{name:o},a):(t.utils.statusMsg(n.msg,!0),e.children("div.challenge-title").children("input.challenge_name").focus())}}):(t.utils.statusMsg(t.utils.localeContentBuffer("ENTER_CHALLENGE_NAME"),!0),e.children("div.challenge-title").children("input.challenge_name").focus())},afterUpload:function(e,s,n,a){t.dom("#body").attr("class","row content"),t.dom("#helper-text").hide(),e.data.isNew?(e.data.toBePublished||"added"!==e.data.filter?t["challenges-service"].build(t.templates["single-"+("challenges"===s?"challenge":"group")].clone(!0,!0),e.data.result,"prepend"):t.utils.statusMsg(t.utils.localeContentBuffer("MOVED_TO_DRAFTED")),i.courseon&&t.dom("#challenges-holder").children("div").first().find("div.addbadge").trigger("click"),window.scroll(0,0),t["one-step-challenges-create"]&&(t["one-step-challenges-create"]=!1)):e.data.toBeRemoved?(t.dom("ul.breadcrumb").children("li").first().find("a").trigger("click"),t.dom("#"+e.data.result.simpleName).remove(),t.utils.statusMsg(t.utils.localeContentBuffer("MOVED_TO_RECENT")),window.scroll(0,0)):t.pageAttr.level1||t.pageAttr.level2?(t.history.push({},t.pageAttr.page.toUpperCase(),"/"+t.pageAttr.univ+"/challenges/all"),t["challenges-service"].open(null,null,t.pageAttr.level2?t.pageAttr.level2:t.pageAttr.level1)):t["challenges-service"].build(i[s].origin,e.data.result),t.loadSideBar(),i.attachFiles(t.dom("a.close-"+s),s,n.name),e.data.assign&&(a=t.dom("#challenges-holder").children().first(),a&&t["challenges-service"].outerProgress(a,200),a=t.dom("li.overall_points").children("span"),a.html(+a.html().trim()+e.data.result.points));var o={};o.category=(e.data.result.type+" "+(e.data.isNew?"created":"updated")).toUpperCase(),o.action=e.data.result.creator.name,o.label=e.data.result.name+" - "+window.curr_user_email,o.value=1,t.utils.pushGA(o)},attachFiles:function(e,s,n,a,o,r){"challenges"===s?(a={},o=0,r=0,t.dom("ul#add-steps").children("li.single-step").each(function(e){e=t.dom(this,!0),a[o]={},r=0,e.find("div.single-attachment-enclosure").each(function(e,i){e=t.dom(this,!0).find(".file"),e&&e.data()&&"external"===e.data().type?a[o][r]=e:(i=e.val(),a[o][r]=i?e:void 0),r++}),o++}),i.sequencedUpload(e,n,a,0,0)):i.removeBlocker(e,n,s)},check:function(e,t){e.toggleClass("active"),"all"===e.data().type?e.siblings().attr("class","pull-left handler"):e.siblings("#all-files").attr("class","pull-left handler")},removeBlocker:function(e,i,s){t.xhr({url:"/post/"+t.pageAttr.univ+"/complete",type:"POST",data:{data:i,type:s},success:function(i){t.dom(".over-cover").fadeOut("fast"),t.dom("div.group-over-cover").fadeOut("fast"),e.trigger("click"),t.dom("div.addedbadge",!0).parents(".parent:lt(1)").remove()}})},sequencedUpload:function(e,s,n,a,o,r){$.isEmptyObject(n)?i.removeBlocker(e,s,"challenge"):n[a]?n[a][o]?(r=n[a][o],"external"===r.data().type?t["common-service"].post("upload",{data:JSON.stringify({context:"google",k:s,id:r.data().details.id,y:a,x:o}),type:"external"},function(t){i.removeUploadedFiles(e,s,n,a,o)}):t.xhr({url:"/get/"+t.pageAttr.univ+"/session",type:"GET",data:{data:JSON.stringify({type:"attachment",service:"upload"})},success:function(t){t&&t.code&&200===t.code&&$.ajaxFileUpload({url:t.data.result,secureuri:!1,fileElementId:n[a][o],dataType:"json",data:JSON.stringify({k:s,crop:n[a][o].data().coords,y:a,x:o}),success:function(t,r){i.removeUploadedFiles(e,s,n,a,o)}})}})):i.removeUploadedFiles(e,s,n,a,o):(delete n[a],i.sequencedUpload(e,s,n,a++,0))},removeUploadedFiles:function(e,t,s,n,a){delete s[n][a],$.isEmptyObject(s[n])?(delete s[n],n++,a=0):a++,i.sequencedUpload(e,t,s,n,a)},slideGroupCreator:function(e,i,s){s=e.data().display,e.parents("div.add-course-body:lt(1)").siblings("div")[s](),e.children().children("i").attr("class","icon-chevron-"+s.replace("slide","").toLowerCase()),s="slideUp"===s?"slideDown":"slideUp",e.data().display=s,t.dom("div.group-over-cover").hide()},closeGroupCreator:function(e,i,s){e.parents("div.add-course-holder:lt(1)").slideUp(),s=e.parent().siblings(".slider-updown").find("i.icon-chevron-up"),s.length>0&&s.trigger("click"),t["challenges-create"].courseon=!1,t.dom("#challenges-holder").attr("class","content-holder").find(".addedbadge").attr("class","addbadge"),t.utils.statusMsg(),t.dom("#challenges-filter").show(),t.dom("#recently-modified").trigger("click")},buildGroupChallenge:function(e,s,n){s=t.templates["single-group-challenge"].clone(!0,!0),s.attr({"data-name":e.simpleName,id:"sub-"+e.simpleName}).data(),s.removeAttr("data-name"),t.utils.setImage(s.find("img.coursebadge-img"),e.image),s.find(".well").find("h4").html(e.name),t.dom("#selected-chs").append(s),i.groupChallenges.push(e.simpleName);try{t.dom("#selected-chs").sortable("destroy")}catch(e){}t.dom("#selected-chs").sortable({axis:"x",distance:3,items:"> li",opacity:.5,containment:"parent",start:function(e,t){n=t.item.index()},stop:function(e,t){n=void 0},update:function(e,t){isNaN(n)||i.groupChallenges.splice(t.item.index(),0,i.groupChallenges.splice(n,1)[0])}}).disableSelection(),i.updateGroupWidth()},toggleGroupContent:function(e,s,n,a){e=e.parents(".parent:lt(1)"),n=n?n:e.data().name,a=document.getElementById(n),a&&t.dom(a,!0).find("div.addbadge").toggleClass("addedbadge"),a=i.groupChallenges.indexOf(n),a===-1?(a={name:e.find("a.badgeName > span").html(),image:e.find(".badge-img").children("a").children("img").attr("url"),simpleName:e.data().name},e=document.getElementById("sub-"+n),e?(e=t.dom(e,!0).children("div.well").css("opacity",1).siblings("div.removebadge").css({"background-color":"#00a9da",color:"#fff",border:"1px solid #fff"}),i.groupChallenges.splice(e.parent().index(),0,n)):i.buildGroupChallenge(a)):(i.groupChallenges.splice(a,1),e=document.getElementById("sub-"+n),t.dom(e,!0).children("div.well").css("opacity",.5).siblings("div.removebadge").css({"background-color":"#f3f3f3",color:"#aaaaaa",border:"1px solid #ccc"})),i.updateGroupCount()},updateGroupCount:function(){t.dom("#group-creator").children("div.add-course-body").children("div.challenge-title").children("span").html("("+i.groupChallenges.length+")")},updateGroupWidth:function(){t.dom("#selected-chs").css("width",155*i.groupChallenges.length+"px")},saveGroup:function(e,s,n,a){if(n){if(a=e.siblings("div.choose-file.cropped-container").children("input"),e=e.parent().parent(),n.crop=a.length>0?a.data().coords:{},n.simpleName=i.groupSimpleName,e=e.siblings("div.add-course-content"),n.description=e.find(".course-descript").val().trim(),n.description?(t.dom("#co-description").parent(".challenge-badge").removeClass("no_description"),t.dom("#co-description").html(n.description)):(t.dom("#co-description").parent(".challenge-badge").addClass("no_description"),t.dom("#co-description").html("")),!i.groupChallenges||0===i.groupChallenges.length)return t.utils.statusMsg(t.utils.localeContentBuffer("ADD_CHALLENGES_TO_GROUP")),!1;if(n.sublist=i.groupChallenges.join(","),n.categories=[],a=t.dom("div.course_additionaldtl").find("div.bootstrap-select").children("div.dropdown-menu").children("ul.selectpicker").children("li.selected"),a[0]&&a.each(function(){n.categories.push(t.dom(this,!0).children().children("span.text").html())}),n.categories=n.categories.join(","),n.categories||(a=t.dom(".course_additionaldtl").find("div.add-new-category").children("input").val(),a&&(n.categories=a)),n["assigned-users"]={},t.dom("#group-assign-everyone").is(":checked")?n["assigned-users"].mode="all":t.dom("#group-assign-specific").is(":checked")&&(n["assigned-users"].mode="specific",n["assigned-users"].users=[],a=t.dom("#group-assigned-users").children("span.single-assigned-user"),a[0]&&a.each(function(){n["assigned-users"].users.push(t.dom(this,!0).data().userid)}),n["assigned-users"].users=n["assigned-users"].users.join(",")),n.userShowDate=e.parent().find(".showdateinput").val()>0?e.parent().find(".showdateinput").val():0,e.parent().find(".publishdate").hasClass("selected")&&e.parent().find("input#publishdatepicker").val()&&0!=e.parent().find("input#publishdatepicker").val()&&new Date(e.parent().find("input#publishdatepicker").val())){var o=e.parent().find("input#publishdatepicker").val().split("/");if(3==o.length){var r=new Date(o[2],o[0]-1,o[1],0,0,0,0);r.getTime()?n.publishDate=r.getTime():n.publishDate=0}}else n.publishDate=0;n.toBePublished=!0,n.filter=t.utils.getConstraints("challenges").filter,t.utils.statusMsg(),$.isEmptyObject(n.crop)&&(n.image=t.dom("#group-create").find(".item-image:first").attr("src").replace("=s44","")),t.dom("div.group-over-cover").fadeIn(),$.isEmptyObject(n.crop)?t["common-service"].post("update",{type:"group",data:JSON.stringify(n)},function(e){i.afterUpload(e,"group",n)}):t["common-service"].upload("group",n,e.parent());for(var l in i.groupChallenges)t.dom("#"+i.groupChallenges[l],!0).remove()}else e=e.parent().parent().siblings("div.contentedit"),a=e.html().replace(/&nbsp;/g,"").trim(),a?t.xhr({url:"/validate/"+t.pageAttr.univ+"/name",type:"GET",data:{data:JSON.stringify({type:"challenge",nname:a,oname:i.groupSimpleName})},success:function(n){n.data.result?i.saveGroup(e,s,{name:a}):t.utils.statusMsg(t.utils.localeContentBuffer("GROUP_NAME_EXIST"),!0)}}):t.utils.statusMsg(t.utils.localeContentBuffer("ENTER_GROUP_NAME"))},toggleShowOrPublish:function(e,i,s){e.addClass("selected").siblings().removeClass("selected"),e.hasClass("usershowdate")?(e.find("input.showdateinput").focus(),t.dom("input#publishdatepicker").val("")):(e.find("input#publishdatepicker").focus(),t.dom("input.showdateinput").val(0))},toggleStatus:function(e,s,n,a,o){e=e.parents(".parent:lt(1)"),a=!!e.data()&&"group"===e.data().type,"confirm-remove"===s.data.data.action?(i["to-delete"]=e,t.loadPopup("challenges-delete",i["to-delete"])):("remove"===s.data.data.action&&(t.dom("#popup").modal("hide"),e=i["to-delete"]),t["common-service"].get("status",{data:JSON.stringify({context:"challenge",name:e.data().name,action:s.data.data.action})},function(i){a||t.loadSideBar(),(t.pageAttr.level1||t.pageAttr.level2)&&(a||(t.back(e,s),n=e.children(".actions-holder").children("span:eq(1)").children("div").attr("class"),t.utils.statusCheck(n,s.data.data.action),t.dom("#"+e.data().name).remove())),a?(n=e.children("div.group-enclosure").css("opacity"),"0.4"===n?(e.children("div.actions-holder").children("span:eq(1)").html('<div class="show-icon"></div>').attr("data-original-title",t.utils.localeContentBuffer("DISABLE")),e.children("div.group-enclosure").css("opacity",1),t.utils.statusMsg(t.utils.localeContentBuffer("ENABLED_MESSAGE"),!0)):(e.children("div.actions-holder").children("span:eq(1)").html('<div class="hide-icon"></div>').attr("data-original-title",t.utils.localeContentBuffer("ENABLE")),e.children("div.group-enclosure").css("opacity",.4),t.utils.statusMsg(t.utils.localeContentBuffer("DISABLED_MESSAGE"),!0)),e.children("div.actions-holder").children("span:eq(1)").trigger("mouseover")):(n=e.children().children().children("ul").children("li").children("div").children("span").children("div").attr("class"),e.parent("#challenges-holder").hasClass("content-holder")?(t.utils.statusCheck(n,s.data.data.action),e.remove()):t.dom("#"+e.data().name).remove())}))},removeStatusMessage:function(){t.utils.statusMsg(),t.dom("#challenges-filter").show(),t["one-step-challenges-create"]&&(t["one-step-challenges-create"]=!1)},assignUsers:function(e,i){"everyone"===e.data().user?(t.dom("#"+e.data().type+"-assigned-users").hide(),t.dom("#"+e.data().type+"-assign-users-box").attr("disabled",!0).val("").css("background","rgba(255, 255, 255, 0.5)"),t.dom("#"+e.data().type+"-search-results").html("").hide(),"group"===e.data().type&&t.dom("div.course-badges").css("margin-left","335px")):"specific"===e.data().user&&(t.dom("#"+e.data().type+"-assign-users-box").removeAttr("disabled").val("").css("background","rgba(255, 255, 255, 1)").focus(),t.dom("#"+e.data().type+"-assigned-users").show(),
"group"===e.data().type&&t.dom("div.course-badges").css("margin-left","455px"))},assignedUsers:function(e){i.singleAssignedUser(e.data(),e.data().type)},singleAssignedUser:function(e,i,s){e.image=e.image?e.image+"=s30":"/images/AY2.0/user-image.png",e.name=e.name?e.name:"user",t["challenges-create"][i+"-usersAssigned"].push(e.userid),t.dom("#"+i+"-assigned-users").append('<span class="single-assigned-user" data-userid="'+e.userid+'" data-type="'+i+'"><img src="'+e.image+'"><span style="top: 2px;position: relative;">'+e.name+'</span><span class="remove-assigned" handler="click/challenges-create/removeAssigned"><i class="icon-remove"></i></span></span>'),s=t.dom("#"+i+"-assigned-users").children("span").last(),s.data(),s.removeAttr("data-userid"),s.removeAttr("data-type"),t.setHandler(s.children("span.remove-assigned")),t.dom("#"+i+"-assign-users-box").siblings("input").trigger("click"),t.dom("#"+i+"-search-results").html("").hide()},removeAssigned:function(e,i){i=t["challenges-create"][e.parent().data().type+"-usersAssigned"].indexOf(e.parent().data().userid),t["challenges-create"][e.parent().data().type+"-usersAssigned"].splice(i,1),e.parent().remove(),t.dom("#assign-users-box").siblings("input").trigger("click"),t.dom("#ch-search-results").html("").hide()},searchResults:function(e,t){i.youTubeSearch&&Math.round(e.scrollTop()/(e.children("#video_search_result").height()-e.height())*100)>75&&(i.youTubeSearch=!1,i.getVideoDetails(e.siblings(".searchbox"),t,null,null,i.nPageToken))}},t=e.setReference("challenges-create",i)}(window),function(e,t,i){i={open:function(e,i){t.dom("#store_popup").children("div.modal-body").removeAttr("id").children("div.challenge-title").children("div.cropped-container").children("img").attr("src","/images/AY2.0/upimg.png").attr("style","").parent().siblings("input.challenge_name").val("").siblings("input.challenge_point").val(""),t.dom("#store_popup").children("div.modal-body").children("div.challenge_dtl").children("div.max_quantity").children("input.quantity_left").val(""),t.dom("#store_popup").children("div.modal-body").children("div.challenge_dtl").children("div#send_mail").show(),t.dom("#store_popup").children("div.modal-footer").children("a.submit_button").html(t.utils.localeContentBuffer("CREATE_STUFF")),nicEditors.findEditor("store-textarea").setContent(""),t.loadPopup(e.data().type)},saveStuff:function(e,i,s,n){return s={},e=e.parent().siblings("div.modal-body"),s.id=e.attr("id")?e.attr("id"):"",n=e.children("div.challenge-title").children("div.choose-file.cropped-container").children("input"),s.crop=n.length>0?n.data().coords:{},$.isEmptyObject(s.crop)&&!s.id?(t.utils.statusMsg(t.utils.localeContentBuffer("STUFF_IMAGE"),!0),!1):(s.name=e.children("div.challenge-title").children("input.challenge_name").val(),s.name?(s.points=$.trim(e.children("div.challenge-title").children("input.challenge_point").val()),s.points?isNaN(s.points)?(t.utils.statusMsg(t.utils.localeContentBuffer("NUMERIC_POINTS")),!1):(s.description=$.trim(nicEditors.findEditor("store-textarea").getContent().replace(//g," ")),s.description?(s.stuffLeft=e.find(".max_quantity").children("input").val(),s.stuffLeft?isNaN(s.stuffLeft)?(t.utils.statusMsg(t.utils.localeContentBuffer("NUMERIC_QUANTIIY"),!0),!1):(s.id||(s.crop.id=t.utils.id(),s.crop.date=(new Date).getTime(),s.edit=!1,s.status="enabled",delete s.id,s.sendMail=$("#send_mail").find("input").prop("checked")),void($.isEmptyObject(s.crop)?s.id&&t["common-service"].post("update",{type:"store",data:JSON.stringify(s)},function(e){t["store-service"].afterEdit(e.data.data,"store"),t.dom("a.close-store").trigger("click")}):t["common-service"].upload("store",s,e))):(t.utils.statusMsg(t.utils.localeContentBuffer("ENTER_AVALIABLE_QUANTITY"),!0),!1)):(t.utils.statusMsg(t.utils.localeContentBuffer("ENTER_STUFF_DESCRIPTION"),!0),!1)):(t.utils.statusMsg(t.utils.localeContentBuffer("ENTER_STUFF_POINTS"),!0),!1)):(t.utils.statusMsg(t.utils.localeContentBuffer("ENTER_STUFF_NAME"),!0),!1))},afterUpload:function(e,i,s){t.dom("#body").attr("class","row content"),t["store-service"].build(t.templates["single-stuff"].clone(!0,!0),e.data.data,"prepend"),e.data.sidebarcount&&t["store-service"].sideBarCount(e.data.sidebarcount),t.dom("a.close-store").trigger("click")}},t=e.setReference("store-create",i)}(window),function(e,t,i){i={search:function(e,i,s,n){n=e.val().trim(),s=t.utils.getConstraints(t.pageAttr.page),n!==s.query.query&&(n.length>=3||!n)&&(s.query.query=n,s.query.context=t.dom("#srch_optn").find('input[name="admin-search-filter"]:checked').data().value,s.offset=0,t.loadBody(s))},populate:function(e,s,n,a,o,r){if(200===e.code&&e.response&&e.data.status){if(r=Object.keys(e.data.status).length,t.pageAttr[t.utils.getConstraints(t.pageAttr.page).context].canLoad=!(r<20),r>0){t.dom(".user-requests").attr("class","user-requests"),n=e.data.type?e.data.type:{},a=e.data.user?e.data.user:{},e=e.data.status?e.data.status:{};for(var l in e)o=t.templates["single-request"].clone(!0,!0),o.attr("id",e[l].user.replace(/\./g,"-")+"-"+e[l].type),o.data().type=e[l].type,o.data().user=e[l].user,o.data().offset=e.offset?e.offset:-1,o.data().context=s.category,t.utils.setImage(o.children(".align-center-container").first().children("img"),a[e[l].user].profilePicUrl),o.children(".align-center-container").first().children("img").parent().siblings("span").html(a[e[l].user].firstName+(a[e[l].user].lastName?" "+a[e[l].user].lastName:"")),t.utils.setImage(o.children(".align-center-container").last().find("img"),n[e[l].type].image),t.dom("#requests-list").append(o);return 0!==s.offset||t.pageAttr.level1&&t.pageAttr.level2||t.dom("#requests-list").children("li").first().trigger("click"),t["common-service"].clearLevels(),void(t.pageAttr[t.utils.getConstraints(t.pageAttr.page).context].canLoad&&(r={},r.listHeight=t.dom("#requests-list").height(),r.loadedHeight=t.dom("#requests-list").children("li").length*t.dom("#requests-list").children("li").first().height(),r.loadedHeight<=r.listHeight&&i.triggerNext()))}t.history.isPopTriggered||"admin"!==t.pageAttr.page||t.history.push({},t.pageAttr.page.toUpperCase(),"/"+t.pageAttr.univ+"/admin/"+t.utils.getConstraints(t.pageAttr.page).category),t.history.isPopTriggered=!1}0!==t.utils.getConstraints(t.pageAttr.page).offset||t.pageAttr.level1&&t.pageAttr.level2||i.showEmpty(),t["common-service"].clearLevels()},showEmpty:function(){t.dom(".user-requests").attr("class","user-requests empty")},hideEmpty:function(){t.dom(".user-requests").attr("class","user-requests")},open:function(e){e instanceof jQuery&&e.attr("class","active").siblings().removeAttr("class"),t.dom("#requests-body").hide(),t.dom("#loader").show(),t.history.isPopTriggered||"admin"!==t.pageAttr.page||t.history.push({},t.pageAttr.page.toUpperCase(),"/"+t.pageAttr.univ+"/admin/"+e.data().context+"/"+e.data().user+"/"+e.data().type),t.history.isPopTriggered=!1,t["common-service"].get("admin",{data:JSON.stringify(e.data())},function(s,n,a,o,r,l,d){if(n=s.data.status,a=s.data[n.typeSemantic],o=s.data[n.userSemantic],i.activeUser=o.semanticUserName,i.activeType=n.typeSemantic?n.typeSemantic:a.simpleName,i.active=a.type,i.offset=e.data().offset,r="/"+t.pageAttr.univ+"/"+a.page+"/all/"+n.typeSemantic,t.utils.setImage(t.dom("#typImg"),a.image),t.dom("#typImg").parent("a").attr("href",r),t.dom("#typ_nme").html(a.name).attr("href",r),t.dom("#crtr_nme").html(a.creator.name).parent("a").attr("href","/"+t.pageAttr.univ+"/peers/all/"+a.creator.simpleName),t.dom("#typ_pts").html(a.points).siblings("span").html(a.type),t.utils.setImage(t.dom("#usrImg"),o.profilePicUrl),t.dom("#usrImg").parent().siblings("span#uName").html(o.firstName+(o.lastName?" "+o.lastName:"")).parent("a").attr("href","/"+t.pageAttr.univ+"/peers/all/"+o.semanticUserName),t.dom("#reqDate").html(t.utils.ms2ts(n.dateRequested)),e instanceof jQuery||t.dom("#requests-list").children("li#"+i.activeUser.replace(/\./g,"-")+"-"+i.activeType).first().attr("class","active").siblings().removeAttr("class"),n.content?t.dom("#description").show().find("p.justifyCont").html(n.content):t.dom("#description").hide(),n.issue?t.dom("#issue_faced").show().find("p.justifyCont").html(n.issue):t.dom("#issue_faced").hide(),n.review&&n.review.message?(t.dom("#review").show().find("p.justifyCont").html(n.review.message),t.dom("#review").find("#rt_stars").ratings({value:n.review.value,editable:!1})):t.dom("#review").hide(),t.dom("#user-attachments").hide().children("div.single-attachment-enclosure").remove(),n.progress){n.progress=JSON.parse(n.progress);for(var c in n.progress)if(n.progress[c]["require-attachments"]){d=!0;for(var h in n.progress[c]["require-attachments"])t.dom("#user-attachments").append(t["challenges-service"].attachFile(i.activeType,n.progress[c]["require-attachments"][h],"require-attachments-file",c-1,parseInt(h),"require",n.userSemantic))}d&&t.dom("#user-attachments").show()}0!==n.dateApproved?(t.dom("#request-reply").val(n.reply?n.reply:"No reply given.").attr("disabled",!0),t.dom("#admin-action-btns").hide(),t.dom("#approve-details").show().children("a.appr-name").html(n.assignee.name).attr("href",location.origin+"/"+t.pageAttr.univ+"/peers/all/"+n.assignee.simpleName).siblings("span.appr-status").html(n.status?n.status.indexOf("approved")!==-1?"approved":"declined":"taken care by").siblings("span.appr-date").html(t.utils.ms2ts(n.dateApproved))):(t.dom("#request-reply").val("").attr("disabled",!1),t.dom("#admin-action-btns").show(),t.dom("#approve-details").hide()),t.dom("#loader").hide(),t.dom("#requests-body").show()})},action:function(e,s,n,a,o,r){if(i.activeUser&&i.activeType){if(n=s.data.data.action,a=t.dom("#request-reply").val(),"deny"===n&&!a)return void t.utils.statusMsg(t.utils.localeContentBuffer("ENTER_MESSAGE"),!0);o=t.dom("#requests-list").children("li#"+i.activeUser.replace(/\./g,"-")+"-"+i.activeType).first(),r=o.index(),o.remove(),o=t.dom("#requests-list").children("li"),t["common-service"].post("update",{type:"admin",data:JSON.stringify({context:"requestAction",activeType:i.active,action:n,user:i.activeUser,type:i.activeType,content:a,offset:i.offset})},function(e,s,n){e&&200===e.code&&e.data&&(e.data.count=e.data.count?e.data.count:0,"challenge"===i.active?(s=e.data.count,n=-1):(s=-1,n=e.data.count),t["common-service"].updateUICounts(s,n),o.length<=5&&e.data.count>o.length&&t.dom("#requests-list").trigger("scroll"))}),o.length>0?r<o.length?o.get(r).click():(o.first().trigger("click"),t.dom("#requests-list").scrollTop(0)):(t.dom("#requests-body").hide(),i.showEmpty(),t.history.push({},null,"/"+t.pageAttr.univ+"/admin/"+i.active+"Requests"))}},triggerNext:function(e){e=t.utils.getConstraints(t.pageAttr.page),t.pageAttr[e.context].canLoad&&(t.pageAttr[e.context].canLoad=!1,e=t.utils.setConstraints(t.pageAttr.page,e.category,e.filter,e.query,e.offset+20,e.context),t.loadBody(e))}},t=e.setReference("userRequest-service",i),document.getElementById("requests-list").onscroll=function(e){e=t.dom(this,!0),e.scrollTop()>=.1*e.height()&&i.triggerNext()}}(window),function(e,t,i){reports={reportsHolder:{},rep_data:{},callReports:function(e,i,s){reports.configureDatePicker(t.dom("#user-reports").find(".datepicker-holder")),reports.rep_data.type="user",reports.rep_data.status=t.dom("#switch_user_reports").find("button.active").data("type"),reports.rep_data.filter="week",t.dom("#user-reports").find(".datepicker-holder").on("click",".fa-calendar,.fa-caret-down",function(){t.dom("#user-reports").find("#config-datepicker").trigger("click")}),s=(new Date).getTime(),i=(new Date).getTime()-6048e5,reports.rep_data.cusStartDate=("0"+new Date(i).getDate()).substr(-2,2)+"/"+("0"+new Date(i).getMonth()).substr(-2,2)+"/"+new Date(i).getFullYear(),reports.rep_data.cusEndDate=("0"+new Date(s).getDate()).substr(-2,2)+"/"+("0"+new Date(s).getMonth()).substr(-2,2)+"/"+new Date(s).getFullYear(),reports.rep_data.offset=(new Date).getTimezoneOffset(),reports.get_reports(reports.rep_data)},callUnivReports:function(){reports.reportsHolder.start=!0,reports.rep_data.type="univ",reports.rep_data.offset=(new Date).getTimezoneOffset(),t.dom("#univ_reports_holder").find(".overallreport_hold").hide(),t.dom("#univ_reports_holder").find(".table-responsive").hide(),t.dom("#univ_reports_holder").find(".datepicker-holder").on("click",".fa-calendar,.fa-caret-down",function(){t.dom("#univ_reports_holder").find("#config-datepicker").trigger("click")}),reports.configureDatePicker(t.dom("#univ_reports_holder").find(".datepicker-holder"))},configureDatePicker:function(e){var i=new Date,s={},n=moment().subtract(7,"days")._d,a=moment()._d;s.minDate=new Date(i.getTime()-31536e6),s.maxDate=i,s.startDate=n.getMonth()+1+"/"+n.getDate()+"/"+n.getFullYear(),s.endDate=a.getMonth()+1+"/"+a.getDate()+"/"+a.getFullYear(),s.opens="left",s.timezone=(new Date).getTimezoneOffset();var o={"Last 7 Days":[moment().subtract(7,"days"),moment()],"Last 30 Days":[moment().subtract(30,"days"),moment()]};s.ranges=o,e.find("#config-datepicker").daterangepicker(s,function(e,t,i){reports.byDateReport(e,t,i,reports.rep_data)}),e.on("apply.daterangepicker",function(e,i){reports.reportsHolder.start&&(reports.rep_data.status=t.dom(".admin_switch_reports").find("button.active").data("type"),reports.byDateReport(s.startDate,s.endDate,i.chosenLabel,reports.rep_data),reports.reportsHolder.start=!1)}),$(".daterangepicker").find(".ranges").find("li:first").trigger("click")},byDateReport:function(e,t,i){reports.rep_data.cusStartDate=("0"+new Date(e).getDate()).substr(-2,2)+"/"+("0"+new Date(e).getMonth()).substr(-2,2)+"/"+new Date(e).getFullYear(),reports.rep_data.cusEndDate=("0"+new Date(t).getDate()).substr(-2,2)+"/"+("0"+new Date(t).getMonth()).substr(-2,2)+"/"+new Date(t).getFullYear(),"Custom Range"===i?(reports.rep_data.filter="custom",reports.rep_data.cus_start_date=new Date(e),reports.rep_data.cus_end_date=new Date(t)):"Last 7 Days"===i?reports.rep_data.filter="week":"Last 30 Days"===i&&(reports.rep_data.filter="previous_month"),reports.get_reports(reports.rep_data)},byStatusReport:function(e){e.attr("class","btn active").siblings("button").attr("class","btn"),reports.rep_data.status=e.data("type"),reports.get_reports(reports.rep_data)},build_report_table:function(e){var i=e.data,s=i.cStatus;"requested"===e.status?s=i.rStatus:"workingon"===e.status&&(s=i.wStatus);var n=i.challenges,a=i.user,o=new Array,r="";if("week"===e.filter){var l=reports.getDatesAccToFilter(e);r=t.utils.ms2ts(l.firstday)+" to "+t.utils.ms2ts(l.lastday)}else if("custom"===e.filter){e.cus_start_date;r=t.utils.ms2ts(e.cus_start_date)+" to "+t.utils.ms2ts(e.cus_end_date)}else if("previous_month"===e.filter){var l=reports.getDatesAccToFilter(e);r=jchcomms.mnths[l.firstday.getMonth()]+" "+l.firstday.getFullYear()}var d=1;for(index in s){var c={};c.number=d,c.person_name=a[s[index].userKey].firstName+(null!=a[s[index].userKey].lastName&&"null"!=a[s[index].userKey].lastName?" "+a[s[index].userKey].lastName:""),c.person_email=a[s[index].userKey].userName,c.challenge_name=n[s[index].typeKey].name,"requested"===e.status?(t.dom(".empty-content").hide(),c.wDate=jchcomms.ms2ts(s[index].dateStarted),c.date=jchcomms.ms2ts(s[index].dateRequested)):"workingon"===e.status?(t.dom(".empty-content").hide(),c.date=jchcomms.ms2ts(s[index].dateStarted)):(c.wDate=jchcomms.ms2ts(s[index].dateStarted),c.rDate=jchcomms.ms2ts(s[index].dateRequested),c.date=jchcomms.ms2ts(s[index].dateApproved)),o.push(c),d+=1}0!==Object.getOwnPropertyNames(s).length||void 0===i.msg||"workingon"!==e.status&&"requested"!==e.status||(t.dom(".empty-content").show(),t.dom(".empty-content").html(e.data.msg)),"univ"===e.type?(t.dom("#univ_reports_holder").find(".table-responsive").find("#table").bootstrapTable({data:o}),t.dom(".admin-reports").find("#table").bootstrapTable("load",o),t.dom("#univ_reports_holder").find(".table-responsive").find("#table").bootstrapTable("resetView"),t.dom("#univ_reports_holder").find(".table-responsive").find(".export").find("li").unbind("click"),t.dom("#univ_reports_holder").find(".table-responsive").find(".export").off().on("click","li",function(e){t.dom(".admin-reports").find("#table").bootstrapTable("togglePagination"),"csv"===$(this).attr("data-type")?t.dom(".admin-reports").find("#table").tableExport({fileName:r,type:"csv"}):"txt"===$(this).attr("data-type")?t.dom(".admin-reports").find("#table").tableExport({fileName:r,type:"txt"}):"excel"===$(this).attr("data-type")&&t.dom(".admin-reports").find("#table").tableExport({fileName:r,type:"excel"}),t.dom(".admin-reports").find("#table").bootstrapTable("togglePagination")})):(t.dom(".flot-user-reports").find("#table").bootstrapTable("load",o),t.dom(".flot-user-reports").find("#table").bootstrapTable({data:o}),t.dom(".flot-user-reports").find("#table").find(".export").find("li").unbind("click"),t.dom(".flot-user-reports").find("#table").find(".export").off().on("click","li",function(e){t.dom(".admin-reports").find("#table").bootstrapTable("togglePagination"),"csv"===$(this).attr("data-type")?t.dom(".admin-reports").find("#table").tableExport({fileName:r,type:"csv"}):"txt"===$(this).attr("data-type")?t.dom(".admin-reports").find("#table").tableExport({fileName:r,type:"txt"}):"excel"===$(this).attr("data-type")&&t.dom(".admin-reports").find("#table").tableExport({fileName:r,type:"excel"}),t.dom(".admin-reports").find("#table").bootstrapTable("togglePagination")})),"requested"===e.status?(t.dom(".table").bootstrapTable("showColumn","wDate"),t.dom(".table").bootstrapTable("hideColumn","rDate"),t.dom(".table").find('[data-field="date"]').find(".th-inner").html(t.utils.localeContentBuffer("DATE_REQUESTED"))):"completed"===e.status?(t.dom(".empty-content").hide(),t.dom(".table").bootstrapTable("showColumn","wDate"),t.dom(".table").bootstrapTable("showColumn","rDate"),t.dom(".table").find('[data-field="date"]').find(".th-inner").html(t.utils.localeContentBuffer("DATE_APPROVED"))):"workingon"===e.status&&(t.dom(".table").bootstrapTable("hideColumn","wDate"),t.dom(".table").bootstrapTable("hideColumn","rDate"),t.dom(".table").find('[data-field="date"]').find(".th-inner").html(t.utils.localeContentBuffer("DATE_STARTED")))},get_reports:function(e){"user"===e.type?(t.dom(".flot-user-reports").find("#flot-placeholder").html(""),t.dom(".flot-user-reports").find("#flot-placeholder").append('<div id="loader"><img src="/images/core/loader.gif" style="height:12px;"></div>')):(t.dom("#univ_reports_holder").find("#univ-reports-loader").show(),t.dom("#univ_reports_holder").find(".overallreport_hold").hide(),t.dom("#univ_reports_holder").find(".reportdtl_descrp").hide()),e.data&&delete e.data,$.ajax({url:"/get/"+t.pageAttr.univ+"/reports",type:"POST",data:{data:JSON.stringify(e)},success:function(i){if("Success"==i.status)if("univ"===e.type)t.dom("#univ_reports_holder").find("#univ-reports-loader").hide(),t.dom("#univ_reports_holder").find(".overallreport_hold").show(),t.dom("#univ_reports_holder").find(".reportdtl_descrp").show(),e.data={},e.data=i.data,e.type="univ",reports.plotGraph(e),reports.build_report_table(e);else if("user"===e.type){e.data={},e.data=i.data,e.type="user",reports.plotGraph(e);try{reports.build_report_table(e)}catch(e){console.log(e)}}}})},getDatesAccToFilter:function(e){var t=(new Date,new Date),i=new Date;"week"===e.filter?(i=moment().subtract(7,"days")._d,t=moment()._d):"month"===e.filter?(i=moment().subtract(1,"month").startOf("month")._d,t=moment().subtract(1,"month").endOf("month")._d):"previous_month"===e.filter?(i=moment().subtract(1,"months")._d,t=moment()._d,console.log("firstday ::"+new Date(i)),console.log("lastday ::"+new Date(t))):"custom"===e.filter&&(i=e.cus_start_date,t=e.cus_end_date);var s={};return s.firstday=i,s.lastday=t,s},plotGraph:function(e){var i=reports.getDatesAccToFilter(e),s={};s.firstday=i.firstday,s.lastday=i.lastday,s.ch=e.data.challenges,"completed"===e.status?s.result=e.data.cStatus:"requested"===e.status?s.result=e.data.rStatus:s.result=e.data.wStatus,s.type=e.status,s.filter=e.filter;var n=reports.getPlotDataAccStatus(s),a=n.max_y_axis;"completed"===e.status?s.color="#4dc580":"requested"===e.status?s.color="#f9c26b":s.color="#ef7373",s.count=a>5?a:5;var o=reports.plotFlotData(s),r="Last 7 Day's Progress";"previous_month"===s.filter?r="Last 30 Day's Progress":"custom"===s.filter&&(r=s.lastday.getTime()-s.firstday.getTime()>864e5?t.utils.ms2ts(s.firstday)+" to "+t.utils.ms2ts(s.lastday):t.utils.ms2ts(s.firstday)),r='<div style="width: 100%;font-size: 15px; position:absolute;margin-top: '+("univ"===e.type?"260px":"450px")+';margin-left: 0px;text-align: center;"> '+r+"</div>";var l='<div style="text-transform:capitalize ;transform: rotate(270deg);font-size: 15px; float: left;    position: absolute;top: '+("univ"===e.type?"110px":"150px")+";left: "+("workingon"===s.type?"-170px;":"-150px;")+'"> Number Of Challenges '+("workingon"===s.type?" Started To Work On":e.status)+"</div>";if("univ"===e.type){$.plot(t.dom("#univ_reports_holder").find("#flot-placeholder"),[{color:s.color,data:n.plotData}],o),t.dom(".overallreport_hold").find("#flot-placeholder").find(".flot-y-axis").prepend(l),t.dom(".overallreport_hold").find("#flot-placeholder").find(".flot-x-axis").prepend(r);try{var d={};d.category="University Reports",d.action=window.univName+" - Challenges Complteed",d.label=r,d.value=0,t.utils.pushGA(d)}catch(e){console.log(e)}}else $.plot(t.dom(".flot-user-reports").find("#flot-placeholder"),[{color:s.color,data:n.plotData}],o),$(".flot-y-axis").prepend(l),$(".flot-x-axis").prepend(r);var c=null;$(".flot-placeholder").bind("plothover",function(e,i,s){if($("#x").text(i.x.toFixed(2)),$("#y").text(i.y.toFixed(2)),s){if(c!=s.dataIndex){c=s.dataIndex,$("#tooltip_reports").remove();var n=s.datapoint[0],a=s.datapoint[1];s.datapoint[1]>0&&reports.showTooltip(s.pageX,s.pageY,"<strong> Challenge's count : "+a+"   <br /> Date : "+t.utils.univDateFromat(new Date(n))+"</strong>")}}else $("#tooltip_reports").remove(),c=null})},getCountForYAxis:function(e){var t={},i=0;for(index in e){var s=new Date(e[index].dateApproved);s.setHours(0,0,0,0),e[index].dateApproved=s,t[e[index].dateApproved]?t[e[index].dateApproved]+=1:t[e[index].dateApproved]=1}for(iCount in t)i<t[iCount]&&(i=t[iCount]);return i},showTooltip:function(e,t,i){$('<div id="tooltip_reports">'+i+"</div>").css({position:"absolute",display:"none",top:t+5,left:e+15,border:"1px solid #333",padding:"4px",color:"#fff","border-radius":"3px","background-color":"#333",opacity:.7}).appendTo("body").fadeIn(400)},getDateDiffInDays:function(e,t){return Math.ceil(parseInt((t-e)/864e5))},getPlotDataAccStatus:function(e){var t=new Date(e.firstday).getTime(),i=new Date(e.lastday).getTime(),s=e.result,n=e.type,a=e.filter,o=e.ch,r={},l=reports.getDiffDates(t,i),d=5;if("custom"===a&&reports.getDateDiffInDays(t,i)<3){for(var c=[],h={},u=0;u<l.length;u++){h[l[u]]=0;for(st in s){var p=s[st].dateApproved;if("workingon"===n?p=s[st].dateStarted:"requested"===n&&(p=s[st].dateRequested),u!=l.length&&parseInt(l[u])<p&&parseInt(p)<parseInt(l[u+1])){var f=new Date(p);f.getMinutes()<30?f.setMinutes(15):f.getMinutes()>30&&f.setMinutes(45),f.setSeconds(0),f.setMilliseconds(0),h[f.getTime()]?h[f.getTime()]=h[f.getTime()]+1:h[f.getTime()]=1,d<h[f.getTime()]&&(d=h[f.getTime()])}}}for(index in h)c.push([index,h[index]]);var m={};return m.plotData=c,m.xAxisCh=r,m.max_y_axis=d,m}var g=1;l=reports.getDates(t,i,g),"month"===a&&(g=5,l=reports.getDates(t,i,g));for(var h={},v=0;v<l.length;v++)h[l[v]]=0;for(u in s){var b=new Date(s[u].dateStarted);if("requested"===n?b=new Date(s[u].dateRequested):"completed"===n&&(b=new Date(s[u].dateApproved)),b.setDate(b.getDate()),b.setHours(0),b.setMinutes(0),b.setSeconds(0),b.setMilliseconds(0),r[b.getTime()]){var y=r[b.getTime()];y.push(o[s[u].typeKey].name),r[b.getTime()]=y}else{var y=new Array;y.push(o[s[u].typeKey].name),r[b.getTime()]=y}h[b.getTime()]?h[b.getTime()]=h[b.getTime()]+1:h[b.getTime()]=1,d<h[b.getTime()]&&(d=h[b.getTime()])}var c=[];for(index in h)c.push([index,h[index]]);var m={};return m.plotData=c,m.xAxisCh=r,m.max_y_axis=d,m},getDates:function(e,t,i){var s=new Array,n=new Date(e);for(n.setHours(0),n.setMinutes(0),n.setSeconds(0),n.setMilliseconds(0);n<t;)s.push(n.getTime()),n.setDate(n.getDate()+parseInt(i));return s},getDiffDates:function(e,t){var i=new Date(e);i.setHours(0),i.setMinutes(0),i.setSeconds(0),i.setMilliseconds(0);var s=new Date(t);s.setHours(23),s.setMinutes(59),s.setSeconds(59),s.setMilliseconds(0);var n=parseInt((s.getTime()-i.getTime())/864e5);if(n>7){var a=Math.ceil(parseInt(n/7));return reports.getDates(e,t,a)}if(n>=0&&n<3){var o=new Array;for(o.push(i.getTime());i.getTime()<=s.getTime();)0==n?i.setHours(i.getHours()+2):1==n?i.setHours(i.getHours()+6):2==n&&i.setHours(i.getHours()+12),o.push(i.getTime());return o.push(s.getTime()),o}return reports.getDates(e,t,1)},plotFlotData:function(e,t){var i=e.firstday,s=e.lastday,n=e.count,a=e.color,o=(e.status,e.filter),r=1,l=1,d=0,c=new Date(i),h=new Date(s);c.setHours(0),c.setMinutes(0),c.setSeconds(0),c.setMilliseconds(0),n>5&&(l=Math.ceil(n/5),n+=l);var u,p=new Date(i.getTime());p.setHours(0),p.setMinutes(0),p.setSeconds(0),p.setMilliseconds(0);var f=new Date(s.getTime());if(f.setHours(23),f.setMinutes(59),f.setSeconds(59),f.setMilliseconds(0),"week"===o)u=reports.getDates(p,f,r);else if("month"===o)r=5,u=reports.getDates(p,f,r);else if("previous_month"===o)r=5,u=reports.getDates(p,f,r);else if("custom"===o)if(d=reports.getDateDiffInDays(e.firstday.getTime(),e.lastday.getTime()),d>7){r=parseInt(d/7);var u=reports.getDates(i,s,r)}else u=reports.getDiffDates(p.getTime(),f.getTime());var m="%d-%b-%y";"custom"===o&&d<3&&(m=0==d?"%I:%M %P":"%d-%b-%y %I:%M %P");var t={xaxis:{mode:"time",timeformat:m,timezone:"browser",ticks:u,min:c.getTime(),max:h.getTime()},yaxis:{min:0,max:n,tickSize:l,tickDecimals:0},series:{grow:{active:!0,duration:1e3,reanimate:!0,valueIndex:1},stack:!0,lines:{show:!0,fill:!0},color:a,points:{show:!0}},grid:{hoverable:!0,clickable:!0,borderWidth:{top:0,right:0,bottom:1,left:1}}};return t}},t=e.setReference("reports",reports)}(window),!function(e){function t(){return new Date(Date.UTC.apply(Date,arguments))}var i=function(t,i){var a=this;switch(this.element=e(t),this.language=i.language||this.element.data("date-language")||"en",this.language=this.language in s?this.language:"en",this.isRTL=s[this.language].rtl||!1,this.format=n.parseFormat(i.format||this.element.data("date-format")||"mm/dd/yyyy"),this.isInline=!1,this.isInput=this.element.is("input"),this.component=!!this.element.is(".date")&&this.element.find(".add-on"),this.hasInput=this.component&&this.element.find("input").length,this.component&&0===this.component.length&&(this.component=!1),this._attachEvents(),this.forceParse=!0,"forceParse"in i?this.forceParse=i.forceParse:"dateForceParse"in this.element.data()&&(this.forceParse=this.element.data("date-force-parse")),this.picker=e(n.template).appendTo(this.isInline?this.element:"body").on({click:e.proxy(this.click,this),mousedown:e.proxy(this.mousedown,this)}),this.isInline?this.picker.addClass("datepicker-inline"):this.picker.addClass("datepicker-dropdown dropdown-menu"),this.isRTL&&(this.picker.addClass("datepicker-rtl"),this.picker.find(".prev i, .next i").toggleClass("icon-arrow-left icon-arrow-right")),e(document).on("mousedown",function(t){0===e(t.target).closest(".datepicker").length&&a.hide()}),this.autoclose=!1,"autoclose"in i?this.autoclose=i.autoclose:"dateAutoclose"in this.element.data()&&(this.autoclose=this.element.data("date-autoclose")),this.keyboardNavigation=!0,"keyboardNavigation"in i?this.keyboardNavigation=i.keyboardNavigation:"dateKeyboardNavigation"in this.element.data()&&(this.keyboardNavigation=this.element.data("date-keyboard-navigation")),this.viewMode=this.startViewMode=0,i.startView||this.element.data("date-start-view")){case 2:case"decade":this.viewMode=this.startViewMode=2;break;case 1:case"year":this.viewMode=this.startViewMode=1}this.todayBtn=i.todayBtn||this.element.data("date-today-btn")||!1,this.todayHighlight=i.todayHighlight||this.element.data("date-today-highlight")||!1,this.weekStart=(i.weekStart||this.element.data("date-weekstart")||s[this.language].weekStart||0)%7,this.weekEnd=(this.weekStart+6)%7,this.startDate=-(1/0),this.endDate=1/0,this.daysOfWeekDisabled=[],this.setStartDate(i.startDate||this.element.data("date-startdate")),this.setEndDate(i.endDate||this.element.data("date-enddate")),this.setDaysOfWeekDisabled(i.daysOfWeekDisabled||this.element.data("date-days-of-week-disabled")),this.fillDow(),this.fillMonths(),this.update(),this.showMode(),this.isInline&&this.show()};i.prototype={constructor:i,_events:[],_attachEvents:function(){this._detachEvents(),this.isInput?this._events=[[this.element,{focus:e.proxy(this.show,this),keyup:e.proxy(this.update,this),keydown:e.proxy(this.keydown,this)}]]:this.component&&this.hasInput?this._events=[[this.element.find("input"),{focus:e.proxy(this.show,this),keyup:e.proxy(this.update,this),keydown:e.proxy(this.keydown,this)}],[this.component,{click:e.proxy(this.show,this)}]]:this.element.is("div")?this.isInline=!0:this._events=[[this.element,{click:e.proxy(this.show,this)}]];for(var t,i,s=0;s<this._events.length;s++)t=this._events[s][0],i=this._events[s][1],t.on(i)},_detachEvents:function(){for(var e,t,i=0;i<this._events.length;i++)e=this._events[i][0],t=this._events[i][1],e.off(t);this._events=[]},show:function(t){this.picker.show(),this.height=this.component?this.component.outerHeight():this.element.outerHeight(),this.update(),this.place(),e(window).on("resize",e.proxy(this.place,this)),t&&(t.stopPropagation(),t.preventDefault()),this.element.trigger({type:"show",date:this.date})},hide:function(t){this.isInline||(this.picker.hide(),e(window).off("resize",this.place),this.viewMode=this.startViewMode,this.showMode(),this.isInput||e(document).off("mousedown",this.hide),this.forceParse&&(this.isInput&&this.element.val()||this.hasInput&&this.element.find("input").val())&&this.setValue(),this.element.trigger({type:"hide",date:this.date}))},remove:function(){this._detachEvents(),this.picker.remove(),delete this.element.data().datepicker},getDate:function(){var e=this.getUTCDate();return new Date(e.getTime()+6e4*e.getTimezoneOffset())},getUTCDate:function(){return this.date},setDate:function(e){this.setUTCDate(new Date(e.getTime()-6e4*e.getTimezoneOffset()))},setUTCDate:function(e){this.date=e,this.setValue()},setValue:function(){var e=this.getFormattedDate();this.isInput?this.element.val(e):(this.component&&this.element.find("input").val(e),this.element.data("date",e))},getFormattedDate:function(e){return void 0===e&&(e=this.format),n.formatDate(this.date,e,this.language)},setStartDate:function(e){this.startDate=e||-(1/0),this.startDate!==-(1/0)&&(this.startDate=n.parseDate(this.startDate,this.format,this.language)),this.update(),this.updateNavArrows()},setEndDate:function(e){this.endDate=e||1/0,this.endDate!==1/0&&(this.endDate=n.parseDate(this.endDate,this.format,this.language)),this.update(),this.updateNavArrows()},setDaysOfWeekDisabled:function(t){this.daysOfWeekDisabled=t||[],e.isArray(this.daysOfWeekDisabled)||(this.daysOfWeekDisabled=this.daysOfWeekDisabled.split(/,\s*/)),this.daysOfWeekDisabled=e.map(this.daysOfWeekDisabled,function(e){return parseInt(e,10)}),this.update(),this.updateNavArrows()},place:function(){if(!this.isInline){var t=parseInt(this.element.parents().filter(function(){return"auto"!=e(this).css("z-index")}).first().css("z-index"))+1e4,i=this.component?this.component.offset():this.element.offset(),s=this.component?this.component.outerHeight(!0):this.element.outerHeight(!0);this.picker.css({top:i.top+s,left:i.left,zIndex:t})}},update:function(){var e,t=!1;arguments&&arguments.length&&("string"==typeof arguments[0]||arguments[0]instanceof Date)?(e=arguments[0],t=!0):e=this.isInput?this.element.val():this.element.data("date")||this.element.find("input").val(),this.date=n.parseDate(e,this.format,this.language),t&&this.setValue();
var i=this.viewDate;this.date<this.startDate?this.viewDate=new Date(this.startDate):this.date>this.endDate?this.viewDate=new Date(this.endDate):this.viewDate=new Date(this.date),i&&i.getTime()!=this.viewDate.getTime()&&this.element.trigger({type:"changeDate",date:this.viewDate}),this.fill()},fillDow:function(){for(var e=this.weekStart,t="<tr>";e<this.weekStart+7;)t+='<th class="dow">'+s[this.language].daysMin[e++%7]+"</th>";t+="</tr>",this.picker.find(".datepicker-days thead").append(t)},fillMonths:function(){for(var e="",t=0;t<12;)e+='<span class="month">'+s[this.language].monthsShort[t++]+"</span>";this.picker.find(".datepicker-months td").html(e)},fill:function(){var i=new Date(this.viewDate),a=i.getUTCFullYear(),o=i.getUTCMonth(),r=this.startDate!==-(1/0)?this.startDate.getUTCFullYear():-(1/0),l=this.startDate!==-(1/0)?this.startDate.getUTCMonth():-(1/0),d=this.endDate!==1/0?this.endDate.getUTCFullYear():1/0,c=this.endDate!==1/0?this.endDate.getUTCMonth():1/0,h=this.date&&this.date.valueOf(),u=new Date;this.picker.find(".datepicker-days thead th:eq(1)").text(s[this.language].months[o]+" "+a),this.picker.find("tfoot th.today").text(s[this.language].today).toggle(this.todayBtn!==!1),this.updateNavArrows(),this.fillMonths();var p=t(a,o-1,28,0,0,0,0),f=n.getDaysInMonth(p.getUTCFullYear(),p.getUTCMonth());p.setUTCDate(f),p.setUTCDate(f-(p.getUTCDay()-this.weekStart+7)%7);var m=new Date(p);m.setUTCDate(m.getUTCDate()+42),m=m.valueOf();for(var g,v=[];p.valueOf()<m;)p.getUTCDay()==this.weekStart&&v.push("<tr>"),g="",p.getUTCFullYear()<a||p.getUTCFullYear()==a&&p.getUTCMonth()<o?g+=" old":(p.getUTCFullYear()>a||p.getUTCFullYear()==a&&p.getUTCMonth()>o)&&(g+=" new"),this.todayHighlight&&p.getUTCFullYear()==u.getFullYear()&&p.getUTCMonth()==u.getMonth()&&p.getUTCDate()==u.getDate()&&(g+=" today"),h&&p.valueOf()==h&&(g+=" active"),(p.valueOf()<this.startDate||p.valueOf()>this.endDate||e.inArray(p.getUTCDay(),this.daysOfWeekDisabled)!==-1)&&(g+=" disabled"),v.push('<td class="day'+g+'">'+p.getUTCDate()+"</td>"),p.getUTCDay()==this.weekEnd&&v.push("</tr>"),p.setUTCDate(p.getUTCDate()+1);this.picker.find(".datepicker-days tbody").empty().append(v.join(""));var b=this.date&&this.date.getUTCFullYear(),y=this.picker.find(".datepicker-months").find("th:eq(1)").text(a).end().find("span").removeClass("active");b&&b==a&&y.eq(this.date.getUTCMonth()).addClass("active"),(a<r||a>d)&&y.addClass("disabled"),a==r&&y.slice(0,l).addClass("disabled"),a==d&&y.slice(c+1).addClass("disabled"),v="",a=10*parseInt(a/10,10);var _=this.picker.find(".datepicker-years").find("th:eq(1)").text(a+"-"+(a+9)).end().find("td");a-=1;for(var w=-1;w<11;w++)v+='<span class="year'+(w==-1||10==w?" old":"")+(b==a?" active":"")+(a<r||a>d?" disabled":"")+'">'+a+"</span>",a+=1;_.html(v)},updateNavArrows:function(){var e=new Date(this.viewDate),t=e.getUTCFullYear(),i=e.getUTCMonth();switch(this.viewMode){case 0:this.startDate!==-(1/0)&&t<=this.startDate.getUTCFullYear()&&i<=this.startDate.getUTCMonth()?this.picker.find(".prev").css({visibility:"hidden"}):this.picker.find(".prev").css({visibility:"visible"}),this.endDate!==1/0&&t>=this.endDate.getUTCFullYear()&&i>=this.endDate.getUTCMonth()?this.picker.find(".next").css({visibility:"hidden"}):this.picker.find(".next").css({visibility:"visible"});break;case 1:case 2:this.startDate!==-(1/0)&&t<=this.startDate.getUTCFullYear()?this.picker.find(".prev").css({visibility:"hidden"}):this.picker.find(".prev").css({visibility:"visible"}),this.endDate!==1/0&&t>=this.endDate.getUTCFullYear()?this.picker.find(".next").css({visibility:"hidden"}):this.picker.find(".next").css({visibility:"visible"})}},click:function(i){i.stopPropagation(),i.preventDefault();var s=e(i.target).closest("span, td, th");if(1==s.length)switch(s[0].nodeName.toLowerCase()){case"th":switch(s[0].className){case"switch":this.showMode(1);break;case"prev":case"next":var a=n.modes[this.viewMode].navStep*("prev"==s[0].className?-1:1);switch(this.viewMode){case 0:this.viewDate=this.moveMonth(this.viewDate,a);break;case 1:case 2:this.viewDate=this.moveYear(this.viewDate,a)}this.fill();break;case"today":var o=new Date;o=t(o.getFullYear(),o.getMonth(),o.getDate(),0,0,0),this.showMode(-2);var r="linked"==this.todayBtn?null:"view";this._setDate(o,r)}break;case"span":if(!s.is(".disabled")){if(this.viewDate.setUTCDate(1),s.is(".month")){var l=s.parent().find("span").index(s);this.viewDate.setUTCMonth(l),this.element.trigger({type:"changeMonth",date:this.viewDate})}else{var d=parseInt(s.text(),10)||0;this.viewDate.setUTCFullYear(d),this.element.trigger({type:"changeYear",date:this.viewDate})}this.showMode(-1),this.fill()}break;case"td":if(s.is(".day")&&!s.is(".disabled")){var c=parseInt(s.text(),10)||1,d=this.viewDate.getUTCFullYear(),l=this.viewDate.getUTCMonth();s.is(".old")?0===l?(l=11,d-=1):l-=1:s.is(".new")&&(11==l?(l=0,d+=1):l+=1),this._setDate(t(d,l,c,0,0,0,0))}}},_setDate:function(e,t){t&&"date"!=t||(this.date=e),t&&"view"!=t||(this.viewDate=e),this.fill(),this.setValue(),this.element.trigger({type:"changeDate",date:this.date});var i;this.isInput?i=this.element:this.component&&(i=this.element.find("input")),i&&(i.change(),!this.autoclose||t&&"date"!=t||this.hide())},moveMonth:function(e,t){if(!t)return e;var i,s,n=new Date(e.valueOf()),a=n.getUTCDate(),o=n.getUTCMonth(),r=Math.abs(t);if(t=t>0?1:-1,1==r)s=t==-1?function(){return n.getUTCMonth()==o}:function(){return n.getUTCMonth()!=i},i=o+t,n.setUTCMonth(i),(i<0||i>11)&&(i=(i+12)%12);else{for(var l=0;l<r;l++)n=this.moveMonth(n,t);i=n.getUTCMonth(),n.setUTCDate(a),s=function(){return i!=n.getUTCMonth()}}for(;s();)n.setUTCDate(--a),n.setUTCMonth(i);return n},moveYear:function(e,t){return this.moveMonth(e,12*t)},dateWithinRange:function(e){return e>=this.startDate&&e<=this.endDate},keydown:function(e){if(this.picker.is(":not(:visible)"))return void(27==e.keyCode&&this.show());var t,i,s,n=!1;switch(e.keyCode){case 27:this.hide(),e.preventDefault();break;case 37:case 39:if(!this.keyboardNavigation)break;t=37==e.keyCode?-1:1,e.ctrlKey?(i=this.moveYear(this.date,t),s=this.moveYear(this.viewDate,t)):e.shiftKey?(i=this.moveMonth(this.date,t),s=this.moveMonth(this.viewDate,t)):(i=new Date(this.date),i.setUTCDate(this.date.getUTCDate()+t),s=new Date(this.viewDate),s.setUTCDate(this.viewDate.getUTCDate()+t)),this.dateWithinRange(i)&&(this.date=i,this.viewDate=s,this.setValue(),this.update(),e.preventDefault(),n=!0);break;case 38:case 40:if(!this.keyboardNavigation)break;t=38==e.keyCode?-1:1,e.ctrlKey?(i=this.moveYear(this.date,t),s=this.moveYear(this.viewDate,t)):e.shiftKey?(i=this.moveMonth(this.date,t),s=this.moveMonth(this.viewDate,t)):(i=new Date(this.date),i.setUTCDate(this.date.getUTCDate()+7*t),s=new Date(this.viewDate),s.setUTCDate(this.viewDate.getUTCDate()+7*t)),this.dateWithinRange(i)&&(this.date=i,this.viewDate=s,this.setValue(),this.update(),e.preventDefault(),n=!0);break;case 13:this.hide(),e.preventDefault();break;case 9:this.hide()}if(n){this.element.trigger({type:"changeDate",date:this.date});var a;this.isInput?a=this.element:this.component&&(a=this.element.find("input")),a&&a.change()}},showMode:function(e){e&&(this.viewMode=Math.max(0,Math.min(2,this.viewMode+e))),this.picker.find(">div").hide().filter(".datepicker-"+n.modes[this.viewMode].clsName).css("display","block"),this.updateNavArrows()}},e.fn.datepicker=function(t){var s=Array.apply(null,arguments);return s.shift(),this.each(function(){var n=e(this),a=n.data("datepicker"),o="object"==typeof t&&t;a||n.data("datepicker",a=new i(this,e.extend({},e.fn.datepicker.defaults,o))),"string"==typeof t&&"function"==typeof a[t]&&a[t].apply(a,s)})},e.fn.datepicker.defaults={},e.fn.datepicker.Constructor=i;var s=e.fn.datepicker.dates={en:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],daysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sun"],daysMin:["Su","Mo","Tu","We","Th","Fr","Sa","Su"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],today:"Today"}},n={modes:[{clsName:"days",navFnc:"Month",navStep:1},{clsName:"months",navFnc:"FullYear",navStep:1},{clsName:"years",navFnc:"FullYear",navStep:10}],isLeapYear:function(e){return e%4===0&&e%100!==0||e%400===0},getDaysInMonth:function(e,t){return[31,n.isLeapYear(e)?29:28,31,30,31,30,31,31,30,31,30,31][t]},validParts:/dd?|DD?|mm?|MM?|yy(?:yy)?/g,nonpunctuation:/[^ -\/:-@\[\u3400-\u9fff-`{-~\t\n\r]+/g,parseFormat:function(e){var t=e.replace(this.validParts,"\0").split("\0"),i=e.match(this.validParts);if(!t||!t.length||!i||0===i.length)throw new Error("Invalid date format.");return{separators:t,parts:i}},parseDate:function(n,a,o){if(n instanceof Date)return n;if(/^[\-+]\d+[dmwy]([\s,]+[\-+]\d+[dmwy])*$/.test(n)){var r,l,d=/([\-+]\d+)([dmwy])/,c=n.match(/([\-+]\d+)([dmwy])/g);n=new Date;for(var h=0;h<c.length;h++)switch(r=d.exec(c[h]),l=parseInt(r[1]),r[2]){case"d":n.setUTCDate(n.getUTCDate()+l);break;case"m":n=i.prototype.moveMonth.call(i.prototype,n,l);break;case"w":n.setUTCDate(n.getUTCDate()+7*l);break;case"y":n=i.prototype.moveYear.call(i.prototype,n,l)}return t(n.getUTCFullYear(),n.getUTCMonth(),n.getUTCDate(),0,0,0)}var u,p,r,c=n&&n.match(this.nonpunctuation)||[],n=new Date,f={},m=["yyyy","yy","M","MM","m","mm","d","dd"],g={yyyy:function(e,t){return e.setUTCFullYear(t)},yy:function(e,t){return e.setUTCFullYear(2e3+t)},m:function(e,t){for(t-=1;t<0;)t+=12;for(t%=12,e.setUTCMonth(t);e.getUTCMonth()!=t;)e.setUTCDate(e.getUTCDate()-1);return e},d:function(e,t){return e.setUTCDate(t)}};g.M=g.MM=g.mm=g.m,g.dd=g.d,n=t(n.getFullYear(),n.getMonth(),n.getDate(),0,0,0);var v=a.parts.slice();if(c.length!=v.length&&(v=e(v).filter(function(t,i){return e.inArray(i,m)!==-1}).toArray()),c.length==v.length){for(var h=0,b=v.length;h<b;h++){if(u=parseInt(c[h],10),r=v[h],isNaN(u))switch(r){case"MM":p=e(s[o].months).filter(function(){var e=this.slice(0,c[h].length),t=c[h].slice(0,e.length);return e==t}),u=e.inArray(p[0],s[o].months)+1;break;case"M":p=e(s[o].monthsShort).filter(function(){var e=this.slice(0,c[h].length),t=c[h].slice(0,e.length);return e==t}),u=e.inArray(p[0],s[o].monthsShort)+1}f[r]=u}for(var y,h=0;h<m.length;h++)y=m[h],y in f&&!isNaN(f[y])&&g[y](n,f[y])}return n},formatDate:function(t,i,n){var a={d:t.getUTCDate(),D:s[n].daysShort[t.getUTCDay()],DD:s[n].days[t.getUTCDay()],m:t.getUTCMonth()+1,M:s[n].monthsShort[t.getUTCMonth()],MM:s[n].months[t.getUTCMonth()],yy:t.getUTCFullYear().toString().substring(2),yyyy:t.getUTCFullYear()};a.dd=(a.d<10?"0":"")+a.d,a.mm=(a.m<10?"0":"")+a.m;for(var t=[],o=e.extend([],i.separators),r=0,l=i.parts.length;r<l;r++)o.length&&t.push(o.shift()),t.push(a[i.parts[r]]);return t.join("")},headTemplate:'<thead><tr><th class="prev"><i class="icon-arrow-left"/></th><th colspan="5" class="switch"></th><th class="next"><i class="icon-arrow-right"/></th></tr></thead>',contTemplate:'<tbody><tr><td colspan="7"></td></tr></tbody>',footTemplate:'<tfoot><tr><th colspan="7" class="today"></th></tr></tfoot>'};n.template='<div class="datepicker"><div class="datepicker-days"><table class=" table-condensed">'+n.headTemplate+"<tbody></tbody>"+n.footTemplate+'</table></div><div class="datepicker-months"><table class="table-condensed">'+n.headTemplate+n.contTemplate+n.footTemplate+'</table></div><div class="datepicker-years"><table class="table-condensed">'+n.headTemplate+n.contTemplate+n.footTemplate+"</table></div></div>",e.fn.datepicker.DPGlobal=n}(window.jQuery),!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.moment=t()}(this,function(){"use strict";function e(){return Ai.apply(null,arguments)}function t(e){Ai=e}function i(e){return"[object Array]"===Object.prototype.toString.call(e)}function s(e){return e instanceof Date||"[object Date]"===Object.prototype.toString.call(e)}function n(e,t){var i,s=[];for(i=0;i<e.length;++i)s.push(t(e[i],i));return s}function a(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function o(e,t){for(var i in t)a(t,i)&&(e[i]=t[i]);return a(t,"toString")&&(e.toString=t.toString),a(t,"valueOf")&&(e.valueOf=t.valueOf),e}function r(e,t,i,s){return Se(e,t,i,s,!0).utc()}function l(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1}}function d(e){return null==e._pf&&(e._pf=l()),e._pf}function c(e){if(null==e._isValid){var t=d(e);e._isValid=!isNaN(e._d.getTime())&&t.overflow<0&&!t.empty&&!t.invalidMonth&&!t.nullInput&&!t.invalidFormat&&!t.userInvalidated,e._strict&&(e._isValid=e._isValid&&0===t.charsLeftOver&&0===t.unusedTokens.length&&void 0===t.bigHour)}return e._isValid}function h(e){var t=r(NaN);return null!=e?o(d(t),e):d(t).userInvalidated=!0,t}function u(e,t){var i,s,n;if("undefined"!=typeof t._isAMomentObject&&(e._isAMomentObject=t._isAMomentObject),"undefined"!=typeof t._i&&(e._i=t._i),"undefined"!=typeof t._f&&(e._f=t._f),"undefined"!=typeof t._l&&(e._l=t._l),"undefined"!=typeof t._strict&&(e._strict=t._strict),"undefined"!=typeof t._tzm&&(e._tzm=t._tzm),"undefined"!=typeof t._isUTC&&(e._isUTC=t._isUTC),"undefined"!=typeof t._offset&&(e._offset=t._offset),"undefined"!=typeof t._pf&&(e._pf=d(t)),"undefined"!=typeof t._locale&&(e._locale=t._locale),Ei.length>0)for(i in Ei)s=Ei[i],n=t[s],"undefined"!=typeof n&&(e[s]=n);return e}function p(t){u(this,t),this._d=new Date((+t._d)),Ii===!1&&(Ii=!0,e.updateOffset(this),Ii=!1)}function f(e){return e instanceof p||null!=e&&null!=e._isAMomentObject}function m(e){var t=+e,i=0;return 0!==t&&isFinite(t)&&(i=t>=0?Math.floor(t):Math.ceil(t)),i}function g(e,t,i){var s,n=Math.min(e.length,t.length),a=Math.abs(e.length-t.length),o=0;for(s=0;n>s;s++)(i&&e[s]!==t[s]||!i&&m(e[s])!==m(t[s]))&&o++;return o+a}function v(){}function b(e){return e?e.toLowerCase().replace("_","-"):e}function y(e){for(var t,i,s,n,a=0;a<e.length;){for(n=b(e[a]).split("-"),t=n.length,i=b(e[a+1]),i=i?i.split("-"):null;t>0;){if(s=_(n.slice(0,t).join("-")))return s;if(i&&i.length>=t&&g(n,i,!0)>=t-1)break;t--}a++}return null}function _(e){var t=null;if(!$i[e]&&"undefined"!=typeof module&&module&&module.exports)try{t=Mi._abbr,require("./locale/"+e),w(t)}catch(e){}return $i[e]}function w(e,t){var i;return e&&(i="undefined"==typeof t?C(e):x(e,t),i&&(Mi=i)),Mi._abbr}function x(e,t){return null!==t?(t.abbr=e,$i[e]||($i[e]=new v),$i[e].set(t),w(e),$i[e]):(delete $i[e],null)}function C(e){var t;if(e&&e._locale&&e._locale._abbr&&(e=e._locale._abbr),!e)return Mi;if(!i(e)){if(t=_(e))return t;e=[e]}return y(e)}function k(e,t){var i=e.toLowerCase();Ni[i]=Ni[i+"s"]=Ni[t]=e}function S(e){return"string"==typeof e?Ni[e]||Ni[e.toLowerCase()]:void 0}function D(e){var t,i,s={};for(i in e)a(e,i)&&(t=S(i),t&&(s[t]=e[i]));return s}function T(t,i){return function(s){return null!=s?(A(this,t,s),e.updateOffset(this,i),this):O(this,t)}}function O(e,t){return e._d["get"+(e._isUTC?"UTC":"")+t]()}function A(e,t,i){return e._d["set"+(e._isUTC?"UTC":"")+t](i)}function M(e,t){var i;if("object"==typeof e)for(i in e)this.set(i,e[i]);else if(e=S(e),"function"==typeof this[e])return this[e](t);return this}function E(e,t,i){for(var s=""+Math.abs(e),n=e>=0;s.length<t;)s="0"+s;return(n?i?"+":"":"-")+s}function I(e,t,i,s){var n=s;"string"==typeof s&&(n=function(){return this[s]()}),e&&(ji[e]=n),t&&(ji[t[0]]=function(){return E(n.apply(this,arguments),t[1],t[2])}),i&&(ji[i]=function(){return this.localeData().ordinal(n.apply(this,arguments),e)})}function $(e){return e.match(/\[[\s\S]/)?e.replace(/^\[|\]$/g,""):e.replace(/\\/g,"")}function N(e){var t,i,s=e.match(Pi);for(t=0,i=s.length;i>t;t++)ji[s[t]]?s[t]=ji[s[t]]:s[t]=$(s[t]);return function(n){var a="";for(t=0;i>t;t++)a+=s[t]instanceof Function?s[t].call(n,e):s[t];return a}}function P(e,t){return e.isValid()?(t=H(t,e.localeData()),Li[t]||(Li[t]=N(t)),Li[t](e)):e.localeData().invalidDate()}function H(e,t){function i(e){return t.longDateFormat(e)||e}var s=5;for(Hi.lastIndex=0;s>=0&&Hi.test(e);)e=e.replace(Hi,i),Hi.lastIndex=0,s-=1;return e}function L(e,t,i){Zi[e]="function"==typeof t?t:function(e){return e&&i?i:t}}function j(e,t){return a(Zi,e)?Zi[e](t._strict,t._locale):new RegExp(F(e))}function F(e){return e.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(e,t,i,s,n){return t||i||s||n}).replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function U(e,t){var i,s=t;for("string"==typeof e&&(e=[e]),"number"==typeof t&&(s=function(e,i){i[t]=m(e)}),i=0;i<e.length;i++)es[e[i]]=s}function R(e,t){U(e,function(e,i,s,n){s._w=s._w||{},t(e,s._w,s,n)})}function z(e,t,i){null!=t&&a(es,e)&&es[e](t,i._a,i,e)}function q(e,t){return new Date(Date.UTC(e,t+1,0)).getUTCDate()}function B(e){return this._months[e.month()]}function W(e){return this._monthsShort[e.month()]}function Y(e,t,i){var s,n,a;for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),s=0;12>s;s++){if(n=r([2e3,s]),i&&!this._longMonthsParse[s]&&(this._longMonthsParse[s]=new RegExp("^"+this.months(n,"").replace(".","")+"$","i"),this._shortMonthsParse[s]=new RegExp("^"+this.monthsShort(n,"").replace(".","")+"$","i")),i||this._monthsParse[s]||(a="^"+this.months(n,"")+"|^"+this.monthsShort(n,""),this._monthsParse[s]=new RegExp(a.replace(".",""),"i")),i&&"MMMM"===t&&this._longMonthsParse[s].test(e))return s;if(i&&"MMM"===t&&this._shortMonthsParse[s].test(e))return s;if(!i&&this._monthsParse[s].test(e))return s}}function V(e,t){var i;return"string"==typeof t&&(t=e.localeData().monthsParse(t),"number"!=typeof t)?e:(i=Math.min(e.date(),q(e.year(),t)),e._d["set"+(e._isUTC?"UTC":"")+"Month"](t,i),e)}function K(t){return null!=t?(V(this,t),e.updateOffset(this,!0),this):O(this,"Month")}function G(){return q(this.year(),this.month())}function J(e){var t,i=e._a;return i&&-2===d(e).overflow&&(t=i[is]<0||i[is]>11?is:i[ss]<1||i[ss]>q(i[ts],i[is])?ss:i[ns]<0||i[ns]>24||24===i[ns]&&(0!==i[as]||0!==i[os]||0!==i[rs])?ns:i[as]<0||i[as]>59?as:i[os]<0||i[os]>59?os:i[rs]<0||i[rs]>999?rs:-1,d(e)._overflowDayOfYear&&(ts>t||t>ss)&&(t=ss),d(e).overflow=t),e}function Q(t){e.suppressDeprecationWarnings===!1&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+t)}function X(e,t){var i=!0,s=e+"\n"+(new Error).stack;return o(function(){return i&&(Q(s),i=!1),t.apply(this,arguments)},t)}function Z(e,t){cs[e]||(Q(t),cs[e]=!0)}function ee(e){var t,i,s=e._i,n=hs.exec(s);if(n){for(d(e).iso=!0,t=0,i=us.length;i>t;t++)if(us[t][1].exec(s)){e._f=us[t][0]+(n[6]||" ");break}for(t=0,i=ps.length;i>t;t++)if(ps[t][1].exec(s)){e._f+=ps[t][0];break}s.match(Ji)&&(e._f+="Z"),ye(e)}else e._isValid=!1}function te(t){var i=fs.exec(t._i);return null!==i?void(t._d=new Date((+i[1]))):(ee(t),void(t._isValid===!1&&(delete t._isValid,e.createFromInputFallback(t))))}function ie(e,t,i,s,n,a,o){var r=new Date(e,t,i,s,n,a,o);return 1970>e&&r.setFullYear(e),r}function se(e){var t=new Date(Date.UTC.apply(null,arguments));return 1970>e&&t.setUTCFullYear(e),t}function ne(e){return ae(e)?366:365}function ae(e){return e%4===0&&e%100!==0||e%400===0}function oe(){return ae(this.year())}function re(e,t,i){var s,n=i-t,a=i-e.day();return a>n&&(a-=7),n-7>a&&(a+=7),s=De(e).add(a,"d"),{week:Math.ceil(s.dayOfYear()/7),year:s.year()}}function le(e){return re(e,this._week.dow,this._week.doy).week}function de(){return this._week.dow}function ce(){return this._week.doy}function he(e){var t=this.localeData().week(this);return null==e?t:this.add(7*(e-t),"d")}function ue(e){var t=re(this,1,4).week;return null==e?t:this.add(7*(e-t),"d")}function pe(e,t,i,s,n){var a,o,r=se(e,0,1).getUTCDay();return r=0===r?7:r,i=null!=i?i:n,a=n-r+(r>s?7:0)-(n>r?7:0),o=7*(t-1)+(i-n)+a+1,{year:o>0?e:e-1,dayOfYear:o>0?o:ne(e-1)+o}}function fe(e){var t=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return null==e?t:this.add(e-t,"d")}function me(e,t,i){return null!=e?e:null!=t?t:i}function ge(e){var t=new Date;return e._useUTC?[t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()]:[t.getFullYear(),t.getMonth(),t.getDate()]}function ve(e){var t,i,s,n,a=[];if(!e._d){for(s=ge(e),e._w&&null==e._a[ss]&&null==e._a[is]&&be(e),e._dayOfYear&&(n=me(e._a[ts],s[ts]),e._dayOfYear>ne(n)&&(d(e)._overflowDayOfYear=!0),i=se(n,0,e._dayOfYear),e._a[is]=i.getUTCMonth(),e._a[ss]=i.getUTCDate()),t=0;3>t&&null==e._a[t];++t)e._a[t]=a[t]=s[t];for(;7>t;t++)e._a[t]=a[t]=null==e._a[t]?2===t?1:0:e._a[t];24===e._a[ns]&&0===e._a[as]&&0===e._a[os]&&0===e._a[rs]&&(e._nextDay=!0,e._a[ns]=0),e._d=(e._useUTC?se:ie).apply(null,a),null!=e._tzm&&e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),e._nextDay&&(e._a[ns]=24)}}function be(e){var t,i,s,n,a,o,r;t=e._w,null!=t.GG||null!=t.W||null!=t.E?(a=1,o=4,i=me(t.GG,e._a[ts],re(De(),1,4).year),s=me(t.W,1),n=me(t.E,1)):(a=e._locale._week.dow,o=e._locale._week.doy,i=me(t.gg,e._a[ts],re(De(),a,o).year),s=me(t.w,1),null!=t.d?(n=t.d,a>n&&++s):n=null!=t.e?t.e+a:a),r=pe(i,s,n,o,a),e._a[ts]=r.year,e._dayOfYear=r.dayOfYear}function ye(t){if(t._f===e.ISO_8601)return void ee(t);t._a=[],d(t).empty=!0;var i,s,n,a,o,r=""+t._i,l=r.length,c=0;for(n=H(t._f,t._locale).match(Pi)||[],i=0;i<n.length;i++)a=n[i],s=(r.match(j(a,t))||[])[0],s&&(o=r.substr(0,r.indexOf(s)),o.length>0&&d(t).unusedInput.push(o),r=r.slice(r.indexOf(s)+s.length),c+=s.length),ji[a]?(s?d(t).empty=!1:d(t).unusedTokens.push(a),z(a,s,t)):t._strict&&!s&&d(t).unusedTokens.push(a);d(t).charsLeftOver=l-c,r.length>0&&d(t).unusedInput.push(r),d(t).bigHour===!0&&t._a[ns]<=12&&t._a[ns]>0&&(d(t).bigHour=void 0),t._a[ns]=_e(t._locale,t._a[ns],t._meridiem),ve(t),J(t)}function _e(e,t,i){var s;return null==i?t:null!=e.meridiemHour?e.meridiemHour(t,i):null!=e.isPM?(s=e.isPM(i),s&&12>t&&(t+=12),s||12!==t||(t=0),t):t}function we(e){var t,i,s,n,a;if(0===e._f.length)return d(e).invalidFormat=!0,void(e._d=new Date(NaN));for(n=0;n<e._f.length;n++)a=0,t=u({},e),null!=e._useUTC&&(t._useUTC=e._useUTC),t._f=e._f[n],ye(t),c(t)&&(a+=d(t).charsLeftOver,a+=10*d(t).unusedTokens.length,d(t).score=a,(null==s||s>a)&&(s=a,i=t));o(e,i||t)}function xe(e){if(!e._d){var t=D(e._i);e._a=[t.year,t.month,t.day||t.date,t.hour,t.minute,t.second,t.millisecond],ve(e)}}function Ce(e){var t,n=e._i,a=e._f;return e._locale=e._locale||C(e._l),null===n||void 0===a&&""===n?h({nullInput:!0}):("string"==typeof n&&(e._i=n=e._locale.preparse(n)),f(n)?new p(J(n)):(i(a)?we(e):a?ye(e):s(n)?e._d=n:ke(e),t=new p(J(e)),t._nextDay&&(t.add(1,"d"),t._nextDay=void 0),t))}function ke(t){var a=t._i;void 0===a?t._d=new Date:s(a)?t._d=new Date((+a)):"string"==typeof a?te(t):i(a)?(t._a=n(a.slice(0),function(e){return parseInt(e,10)}),ve(t)):"object"==typeof a?xe(t):"number"==typeof a?t._d=new Date(a):e.createFromInputFallback(t)}function Se(e,t,i,s,n){var a={};return"boolean"==typeof i&&(s=i,i=void 0),a._isAMomentObject=!0,a._useUTC=a._isUTC=n,a._l=i,a._i=e,a._f=t,a._strict=s,Ce(a)}function De(e,t,i,s){return Se(e,t,i,s,!1)}function Te(e,t){var s,n;if(1===t.length&&i(t[0])&&(t=t[0]),!t.length)return De();for(s=t[0],n=1;n<t.length;++n)t[n][e](s)&&(s=t[n]);return s}function Oe(){var e=[].slice.call(arguments,0);return Te("isBefore",e)}function Ae(){var e=[].slice.call(arguments,0);return Te("isAfter",e)}function Me(e){var t=D(e),i=t.year||0,s=t.quarter||0,n=t.month||0,a=t.week||0,o=t.day||0,r=t.hour||0,l=t.minute||0,d=t.second||0,c=t.millisecond||0;this._milliseconds=+c+1e3*d+6e4*l+36e5*r,this._days=+o+7*a,this._months=+n+3*s+12*i,this._data={},this._locale=C(),this._bubble()}function Ee(e){return e instanceof Me}function Ie(e,t){I(e,0,0,function(){var e=this.utcOffset(),i="+";return 0>e&&(e=-e,i="-"),i+E(~~(e/60),2)+t+E(~~e%60,2)})}function $e(e){var t=(e||"").match(Ji)||[],i=t[t.length-1]||[],s=(i+"").match(ys)||["-",0,0],n=+(60*s[1])+m(s[2]);return"+"===s[0]?n:-n}function Ne(t,i){var n,a;return i._isUTC?(n=i.clone(),a=(f(t)||s(t)?+t:+De(t))-+n,n._d.setTime(+n._d+a),e.updateOffset(n,!1),n):De(t).local()}function Pe(e){return 15*-Math.round(e._d.getTimezoneOffset()/15)}function He(t,i){var s,n=this._offset||0;return null!=t?("string"==typeof t&&(t=$e(t)),Math.abs(t)<16&&(t=60*t),!this._isUTC&&i&&(s=Pe(this)),this._offset=t,this._isUTC=!0,null!=s&&this.add(s,"m"),n!==t&&(!i||this._changeInProgress?Xe(this,Ve(t-n,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,e.updateOffset(this,!0),this._changeInProgress=null)),this):this._isUTC?n:Pe(this)}function Le(e,t){return null!=e?("string"!=typeof e&&(e=-e),this.utcOffset(e,t),this):-this.utcOffset()}function je(e){return this.utcOffset(0,e)}function Fe(e){return this._isUTC&&(this.utcOffset(0,e),this._isUTC=!1,e&&this.subtract(Pe(this),"m")),this}function Ue(){return this._tzm?this.utcOffset(this._tzm):"string"==typeof this._i&&this.utcOffset($e(this._i)),this}function Re(e){return e=e?De(e).utcOffset():0,(this.utcOffset()-e)%60===0}function ze(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function qe(){if(this._a){var e=this._isUTC?r(this._a):De(this._a);return this.isValid()&&g(this._a,e.toArray())>0}return!1}function Be(){return!this._isUTC}function We(){return this._isUTC}function Ye(){return this._isUTC&&0===this._offset}function Ve(e,t){var i,s,n,o=e,r=null;return Ee(e)?o={ms:e._milliseconds,d:e._days,M:e._months}:"number"==typeof e?(o={},t?o[t]=e:o.milliseconds=e):(r=_s.exec(e))?(i="-"===r[1]?-1:1,o={y:0,d:m(r[ss])*i,h:m(r[ns])*i,m:m(r[as])*i,s:m(r[os])*i,ms:m(r[rs])*i}):(r=ws.exec(e))?(i="-"===r[1]?-1:1,o={y:Ke(r[2],i),M:Ke(r[3],i),d:Ke(r[4],i),h:Ke(r[5],i),m:Ke(r[6],i),s:Ke(r[7],i),w:Ke(r[8],i)}):null==o?o={}:"object"==typeof o&&("from"in o||"to"in o)&&(n=Je(De(o.from),De(o.to)),o={},o.ms=n.milliseconds,o.M=n.months),s=new Me(o),Ee(e)&&a(e,"_locale")&&(s._locale=e._locale),s}function Ke(e,t){var i=e&&parseFloat(e.replace(",","."));return(isNaN(i)?0:i)*t}function Ge(e,t){var i={milliseconds:0,months:0};return i.months=t.month()-e.month()+12*(t.year()-e.year()),e.clone().add(i.months,"M").isAfter(t)&&--i.months,i.milliseconds=+t-+e.clone().add(i.months,"M"),i}function Je(e,t){var i;return t=Ne(t,e),e.isBefore(t)?i=Ge(e,t):(i=Ge(t,e),i.milliseconds=-i.milliseconds,i.months=-i.months),i}function Qe(e,t){return function(i,s){var n,a;return null===s||isNaN(+s)||(Z(t,"moment()."+t+"(period, number) is deprecated. Please use moment()."+t+"(number, period)."),a=i,i=s,s=a),i="string"==typeof i?+i:i,n=Ve(i,s),Xe(this,n,e),this}}function Xe(t,i,s,n){var a=i._milliseconds,o=i._days,r=i._months;n=null==n||n,a&&t._d.setTime(+t._d+a*s),o&&A(t,"Date",O(t,"Date")+o*s),r&&V(t,O(t,"Month")+r*s),n&&e.updateOffset(t,o||r)}function Ze(e){var t=e||De(),i=Ne(t,this).startOf("day"),s=this.diff(i,"days",!0),n=-6>s?"sameElse":-1>s?"lastWeek":0>s?"lastDay":1>s?"sameDay":2>s?"nextDay":7>s?"nextWeek":"sameElse";return this.format(this.localeData().calendar(n,this,De(t)))}function et(){return new p(this)}function tt(e,t){var i;return t=S("undefined"!=typeof t?t:"millisecond"),"millisecond"===t?(e=f(e)?e:De(e),+this>+e):(i=f(e)?+e:+De(e),i<+this.clone().startOf(t))}function it(e,t){var i;return t=S("undefined"!=typeof t?t:"millisecond"),"millisecond"===t?(e=f(e)?e:De(e),+e>+this):(i=f(e)?+e:+De(e),+this.clone().endOf(t)<i)}function st(e,t,i){return this.isAfter(e,i)&&this.isBefore(t,i)}function nt(e,t){var i;return t=S(t||"millisecond"),"millisecond"===t?(e=f(e)?e:De(e),+this===+e):(i=+De(e),+this.clone().startOf(t)<=i&&i<=+this.clone().endOf(t))}function at(e){return 0>e?Math.ceil(e):Math.floor(e)}function ot(e,t,i){var s,n,a=Ne(e,this),o=6e4*(a.utcOffset()-this.utcOffset());return t=S(t),"year"===t||"month"===t||"quarter"===t?(n=rt(this,a),"quarter"===t?n/=3:"year"===t&&(n/=12)):(s=this-a,n="second"===t?s/1e3:"minute"===t?s/6e4:"hour"===t?s/36e5:"day"===t?(s-o)/864e5:"week"===t?(s-o)/6048e5:s),i?n:at(n)}function rt(e,t){var i,s,n=12*(t.year()-e.year())+(t.month()-e.month()),a=e.clone().add(n,"months");return 0>t-a?(i=e.clone().add(n-1,"months"),s=(t-a)/(a-i)):(i=e.clone().add(n+1,"months"),s=(t-a)/(i-a)),-(n+s)}function lt(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function dt(){var e=this.clone().utc();return 0<e.year()&&e.year()<=9999?"function"==typeof Date.prototype.toISOString?this.toDate().toISOString():P(e,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]"):P(e,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")}function ct(t){var i=P(this,t||e.defaultFormat);return this.localeData().postformat(i)}function ht(e,t){return this.isValid()?Ve({to:this,from:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()}function ut(e){return this.from(De(),e)}function pt(e,t){return this.isValid()?Ve({from:this,to:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()}function ft(e){return this.to(De(),e)}function mt(e){var t;return void 0===e?this._locale._abbr:(t=C(e),null!=t&&(this._locale=t),this)}function gt(){return this._locale}function vt(e){switch(e=S(e)){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===e&&this.weekday(0),"isoWeek"===e&&this.isoWeekday(1),"quarter"===e&&this.month(3*Math.floor(this.month()/3)),this}function bt(e){return e=S(e),void 0===e||"millisecond"===e?this:this.startOf(e).add(1,"isoWeek"===e?"week":e).subtract(1,"ms")}function yt(){return+this._d-6e4*(this._offset||0)}function _t(){return Math.floor(+this/1e3)}function wt(){return this._offset?new Date((+this)):this._d}function xt(){var e=this;return[e.year(),e.month(),e.date(),e.hour(),e.minute(),e.second(),e.millisecond()]}function Ct(){return c(this)}function kt(){return o({},d(this))}function St(){return d(this).overflow}function Dt(e,t){I(0,[e,e.length],0,t)}function Tt(e,t,i){return re(De([e,11,31+t-i]),t,i).week}function Ot(e){var t=re(this,this.localeData()._week.dow,this.localeData()._week.doy).year;return null==e?t:this.add(e-t,"y")}function At(e){var t=re(this,1,4).year;return null==e?t:this.add(e-t,"y")}function Mt(){return Tt(this.year(),1,4)}function Et(){var e=this.localeData()._week;return Tt(this.year(),e.dow,e.doy)}function It(e){return null==e?Math.ceil((this.month()+1)/3):this.month(3*(e-1)+this.month()%3)}function $t(e,t){if("string"==typeof e)if(isNaN(e)){if(e=t.weekdaysParse(e),"number"!=typeof e)return null}else e=parseInt(e,10);return e}function Nt(e){return this._weekdays[e.day()]}function Pt(e){return this._weekdaysShort[e.day()]}function Ht(e){return this._weekdaysMin[e.day()]}function Lt(e){var t,i,s;for(this._weekdaysParse||(this._weekdaysParse=[]),t=0;7>t;t++)if(this._weekdaysParse[t]||(i=De([2e3,1]).day(t),s="^"+this.weekdays(i,"")+"|^"+this.weekdaysShort(i,"")+"|^"+this.weekdaysMin(i,""),this._weekdaysParse[t]=new RegExp(s.replace(".",""),"i")),this._weekdaysParse[t].test(e))return t}function jt(e){var t=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=e?(e=$t(e,this.localeData()),this.add(e-t,"d")):t}function Ft(e){var t=(this.day()+7-this.localeData()._week.dow)%7;return null==e?t:this.add(e-t,"d")}function Ut(e){return null==e?this.day()||7:this.day(this.day()%7?e:e-7)}function Rt(e,t){I(e,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),t)})}function zt(e,t){return t._meridiemParse}function qt(e){return"p"===(e+"").toLowerCase().charAt(0)}function Bt(e,t,i){return e>11?i?"pm":"PM":i?"am":"AM"}function Wt(e){I(0,[e,3],0,"millisecond")}function Yt(){return this._isUTC?"UTC":""}function Vt(){return this._isUTC?"Coordinated Universal Time":""}function Kt(e){return De(1e3*e)}function Gt(){return De.apply(null,arguments).parseZone()}function Jt(e,t,i){var s=this._calendar[e];return"function"==typeof s?s.call(t,i):s}function Qt(e){var t=this._longDateFormat[e];return!t&&this._longDateFormat[e.toUpperCase()]&&(t=this._longDateFormat[e.toUpperCase()].replace(/MMMM|MM|DD|dddd/g,function(e){return e.slice(1);
}),this._longDateFormat[e]=t),t}function Xt(){return this._invalidDate}function Zt(e){return this._ordinal.replace("%d",e)}function ei(e){return e}function ti(e,t,i,s){var n=this._relativeTime[i];return"function"==typeof n?n(e,t,i,s):n.replace(/%d/i,e)}function ii(e,t){var i=this._relativeTime[e>0?"future":"past"];return"function"==typeof i?i(t):i.replace(/%s/i,t)}function si(e){var t,i;for(i in e)t=e[i],"function"==typeof t?this[i]=t:this["_"+i]=t;this._ordinalParseLenient=new RegExp(this._ordinalParse.source+"|"+/\d{1,2}/.source)}function ni(e,t,i,s){var n=C(),a=r().set(s,t);return n[i](a,e)}function ai(e,t,i,s,n){if("number"==typeof e&&(t=e,e=void 0),e=e||"",null!=t)return ni(e,t,i,n);var a,o=[];for(a=0;s>a;a++)o[a]=ni(e,a,i,n);return o}function oi(e,t){return ai(e,t,"months",12,"month")}function ri(e,t){return ai(e,t,"monthsShort",12,"month")}function li(e,t){return ai(e,t,"weekdays",7,"day")}function di(e,t){return ai(e,t,"weekdaysShort",7,"day")}function ci(e,t){return ai(e,t,"weekdaysMin",7,"day")}function hi(){var e=this._data;return this._milliseconds=qs(this._milliseconds),this._days=qs(this._days),this._months=qs(this._months),e.milliseconds=qs(e.milliseconds),e.seconds=qs(e.seconds),e.minutes=qs(e.minutes),e.hours=qs(e.hours),e.months=qs(e.months),e.years=qs(e.years),this}function ui(e,t,i,s){var n=Ve(t,i);return e._milliseconds+=s*n._milliseconds,e._days+=s*n._days,e._months+=s*n._months,e._bubble()}function pi(e,t){return ui(this,e,t,1)}function fi(e,t){return ui(this,e,t,-1)}function mi(){var e,t,i,s=this._milliseconds,n=this._days,a=this._months,o=this._data,r=0;return o.milliseconds=s%1e3,e=at(s/1e3),o.seconds=e%60,t=at(e/60),o.minutes=t%60,i=at(t/60),o.hours=i%24,n+=at(i/24),r=at(gi(n)),n-=at(vi(r)),a+=at(n/30),n%=30,r+=at(a/12),a%=12,o.days=n,o.months=a,o.years=r,this}function gi(e){return 400*e/146097}function vi(e){return 146097*e/400}function bi(e){var t,i,s=this._milliseconds;if(e=S(e),"month"===e||"year"===e)return t=this._days+s/864e5,i=this._months+12*gi(t),"month"===e?i:i/12;switch(t=this._days+Math.round(vi(this._months/12)),e){case"week":return t/7+s/6048e5;case"day":return t+s/864e5;case"hour":return 24*t+s/36e5;case"minute":return 1440*t+s/6e4;case"second":return 86400*t+s/1e3;case"millisecond":return Math.floor(864e5*t)+s;default:throw new Error("Unknown unit "+e)}}function yi(){return this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*m(this._months/12)}function _i(e){return function(){return this.as(e)}}function wi(e){return e=S(e),this[e+"s"]()}function xi(e){return function(){return this._data[e]}}function Ci(){return at(this.days()/7)}function ki(e,t,i,s,n){return n.relativeTime(t||1,!!i,e,s)}function Si(e,t,i){var s=Ve(e).abs(),n=on(s.as("s")),a=on(s.as("m")),o=on(s.as("h")),r=on(s.as("d")),l=on(s.as("M")),d=on(s.as("y")),c=n<rn.s&&["s",n]||1===a&&["m"]||a<rn.m&&["mm",a]||1===o&&["h"]||o<rn.h&&["hh",o]||1===r&&["d"]||r<rn.d&&["dd",r]||1===l&&["M"]||l<rn.M&&["MM",l]||1===d&&["y"]||["yy",d];return c[2]=t,c[3]=+e>0,c[4]=i,ki.apply(null,c)}function Di(e,t){return void 0!==rn[e]&&(void 0===t?rn[e]:(rn[e]=t,!0))}function Ti(e){var t=this.localeData(),i=Si(this,!e,t);return e&&(i=t.pastFuture(+this,i)),t.postformat(i)}function Oi(){var e=ln(this.years()),t=ln(this.months()),i=ln(this.days()),s=ln(this.hours()),n=ln(this.minutes()),a=ln(this.seconds()+this.milliseconds()/1e3),o=this.asSeconds();return o?(0>o?"-":"")+"P"+(e?e+"Y":"")+(t?t+"M":"")+(i?i+"D":"")+(s||n||a?"T":"")+(s?s+"H":"")+(n?n+"M":"")+(a?a+"S":""):"P0D"}var Ai,Mi,Ei=e.momentProperties=[],Ii=!1,$i={},Ni={},Pi=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Q|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|S{1,4}|x|X|zz?|ZZ?|.)/g,Hi=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,Li={},ji={},Fi=/\d/,Ui=/\d\d/,Ri=/\d{3}/,zi=/\d{4}/,qi=/[+-]?\d{6}/,Bi=/\d\d?/,Wi=/\d{1,3}/,Yi=/\d{1,4}/,Vi=/[+-]?\d{1,6}/,Ki=/\d+/,Gi=/[+-]?\d+/,Ji=/Z|[+-]\d\d:?\d\d/gi,Qi=/[+-]?\d+(\.\d{1,3})?/,Xi=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,Zi={},es={},ts=0,is=1,ss=2,ns=3,as=4,os=5,rs=6;I("M",["MM",2],"Mo",function(){return this.month()+1}),I("MMM",0,0,function(e){return this.localeData().monthsShort(this,e)}),I("MMMM",0,0,function(e){return this.localeData().months(this,e)}),k("month","M"),L("M",Bi),L("MM",Bi,Ui),L("MMM",Xi),L("MMMM",Xi),U(["M","MM"],function(e,t){t[is]=m(e)-1}),U(["MMM","MMMM"],function(e,t,i,s){var n=i._locale.monthsParse(e,s,i._strict);null!=n?t[is]=n:d(i).invalidMonth=e});var ls="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ds="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),cs={};e.suppressDeprecationWarnings=!1;var hs=/^\s*(?:[+-]\d{6}|\d{4})-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,us=[["YYYYYY-MM-DD",/[+-]\d{6}-\d{2}-\d{2}/],["YYYY-MM-DD",/\d{4}-\d{2}-\d{2}/],["GGGG-[W]WW-E",/\d{4}-W\d{2}-\d/],["GGGG-[W]WW",/\d{4}-W\d{2}/],["YYYY-DDD",/\d{4}-\d{3}/]],ps=[["HH:mm:ss.SSSS",/(T| )\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss",/(T| )\d\d:\d\d:\d\d/],["HH:mm",/(T| )\d\d:\d\d/],["HH",/(T| )\d\d/]],fs=/^\/?Date\((\-?\d+)/i;e.createFromInputFallback=X("moment construction falls back to js Date. This is discouraged and will be removed in upcoming major release. Please refer to https://github.com/moment/moment/issues/1407 for more info.",function(e){e._d=new Date(e._i+(e._useUTC?" UTC":""))}),I(0,["YY",2],0,function(){return this.year()%100}),I(0,["YYYY",4],0,"year"),I(0,["YYYYY",5],0,"year"),I(0,["YYYYYY",6,!0],0,"year"),k("year","y"),L("Y",Gi),L("YY",Bi,Ui),L("YYYY",Yi,zi),L("YYYYY",Vi,qi),L("YYYYYY",Vi,qi),U(["YYYY","YYYYY","YYYYYY"],ts),U("YY",function(t,i){i[ts]=e.parseTwoDigitYear(t)}),e.parseTwoDigitYear=function(e){return m(e)+(m(e)>68?1900:2e3)};var ms=T("FullYear",!1);I("w",["ww",2],"wo","week"),I("W",["WW",2],"Wo","isoWeek"),k("week","w"),k("isoWeek","W"),L("w",Bi),L("ww",Bi,Ui),L("W",Bi),L("WW",Bi,Ui),R(["w","ww","W","WW"],function(e,t,i,s){t[s.substr(0,1)]=m(e)});var gs={dow:0,doy:6};I("DDD",["DDDD",3],"DDDo","dayOfYear"),k("dayOfYear","DDD"),L("DDD",Wi),L("DDDD",Ri),U(["DDD","DDDD"],function(e,t,i){i._dayOfYear=m(e)}),e.ISO_8601=function(){};var vs=X("moment().min is deprecated, use moment.min instead. https://github.com/moment/moment/issues/1548",function(){var e=De.apply(null,arguments);return this>e?this:e}),bs=X("moment().max is deprecated, use moment.max instead. https://github.com/moment/moment/issues/1548",function(){var e=De.apply(null,arguments);return e>this?this:e});Ie("Z",":"),Ie("ZZ",""),L("Z",Ji),L("ZZ",Ji),U(["Z","ZZ"],function(e,t,i){i._useUTC=!0,i._tzm=$e(e)});var ys=/([\+\-]|\d\d)/gi;e.updateOffset=function(){};var _s=/(\-)?(?:(\d*)\.)?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?)?/,ws=/^(-)?P(?:(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?|([0-9,.]*)W)$/;Ve.fn=Me.prototype;var xs=Qe(1,"add"),Cs=Qe(-1,"subtract");e.defaultFormat="YYYY-MM-DDTHH:mm:ssZ";var ks=X("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(e){return void 0===e?this.localeData():this.locale(e)});I(0,["gg",2],0,function(){return this.weekYear()%100}),I(0,["GG",2],0,function(){return this.isoWeekYear()%100}),Dt("gggg","weekYear"),Dt("ggggg","weekYear"),Dt("GGGG","isoWeekYear"),Dt("GGGGG","isoWeekYear"),k("weekYear","gg"),k("isoWeekYear","GG"),L("G",Gi),L("g",Gi),L("GG",Bi,Ui),L("gg",Bi,Ui),L("GGGG",Yi,zi),L("gggg",Yi,zi),L("GGGGG",Vi,qi),L("ggggg",Vi,qi),R(["gggg","ggggg","GGGG","GGGGG"],function(e,t,i,s){t[s.substr(0,2)]=m(e)}),R(["gg","GG"],function(t,i,s,n){i[n]=e.parseTwoDigitYear(t)}),I("Q",0,0,"quarter"),k("quarter","Q"),L("Q",Fi),U("Q",function(e,t){t[is]=3*(m(e)-1)}),I("D",["DD",2],"Do","date"),k("date","D"),L("D",Bi),L("DD",Bi,Ui),L("Do",function(e,t){return e?t._ordinalParse:t._ordinalParseLenient}),U(["D","DD"],ss),U("Do",function(e,t){t[ss]=m(e.match(Bi)[0],10)});var Ss=T("Date",!0);I("d",0,"do","day"),I("dd",0,0,function(e){return this.localeData().weekdaysMin(this,e)}),I("ddd",0,0,function(e){return this.localeData().weekdaysShort(this,e)}),I("dddd",0,0,function(e){return this.localeData().weekdays(this,e)}),I("e",0,0,"weekday"),I("E",0,0,"isoWeekday"),k("day","d"),k("weekday","e"),k("isoWeekday","E"),L("d",Bi),L("e",Bi),L("E",Bi),L("dd",Xi),L("ddd",Xi),L("dddd",Xi),R(["dd","ddd","dddd"],function(e,t,i){var s=i._locale.weekdaysParse(e);null!=s?t.d=s:d(i).invalidWeekday=e}),R(["d","e","E"],function(e,t,i,s){t[s]=m(e)});var Ds="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),Ts="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),Os="Su_Mo_Tu_We_Th_Fr_Sa".split("_");I("H",["HH",2],0,"hour"),I("h",["hh",2],0,function(){return this.hours()%12||12}),Rt("a",!0),Rt("A",!1),k("hour","h"),L("a",zt),L("A",zt),L("H",Bi),L("h",Bi),L("HH",Bi,Ui),L("hh",Bi,Ui),U(["H","HH"],ns),U(["a","A"],function(e,t,i){i._isPm=i._locale.isPM(e),i._meridiem=e}),U(["h","hh"],function(e,t,i){t[ns]=m(e),d(i).bigHour=!0});var As=/[ap]\.?m?\.?/i,Ms=T("Hours",!0);I("m",["mm",2],0,"minute"),k("minute","m"),L("m",Bi),L("mm",Bi,Ui),U(["m","mm"],as);var Es=T("Minutes",!1);I("s",["ss",2],0,"second"),k("second","s"),L("s",Bi),L("ss",Bi,Ui),U(["s","ss"],os);var Is=T("Seconds",!1);I("S",0,0,function(){return~~(this.millisecond()/100)}),I(0,["SS",2],0,function(){return~~(this.millisecond()/10)}),Wt("SSS"),Wt("SSSS"),k("millisecond","ms"),L("S",Wi,Fi),L("SS",Wi,Ui),L("SSS",Wi,Ri),L("SSSS",Ki),U(["S","SS","SSS","SSSS"],function(e,t){t[rs]=m(1e3*("0."+e))});var $s=T("Milliseconds",!1);I("z",0,0,"zoneAbbr"),I("zz",0,0,"zoneName");var Ns=p.prototype;Ns.add=xs,Ns.calendar=Ze,Ns.clone=et,Ns.diff=ot,Ns.endOf=bt,Ns.format=ct,Ns.from=ht,Ns.fromNow=ut,Ns.to=pt,Ns.toNow=ft,Ns.get=M,Ns.invalidAt=St,Ns.isAfter=tt,Ns.isBefore=it,Ns.isBetween=st,Ns.isSame=nt,Ns.isValid=Ct,Ns.lang=ks,Ns.locale=mt,Ns.localeData=gt,Ns.max=bs,Ns.min=vs,Ns.parsingFlags=kt,Ns.set=M,Ns.startOf=vt,Ns.subtract=Cs,Ns.toArray=xt,Ns.toDate=wt,Ns.toISOString=dt,Ns.toJSON=dt,Ns.toString=lt,Ns.unix=_t,Ns.valueOf=yt,Ns.year=ms,Ns.isLeapYear=oe,Ns.weekYear=Ot,Ns.isoWeekYear=At,Ns.quarter=Ns.quarters=It,Ns.month=K,Ns.daysInMonth=G,Ns.week=Ns.weeks=he,Ns.isoWeek=Ns.isoWeeks=ue,Ns.weeksInYear=Et,Ns.isoWeeksInYear=Mt,Ns.date=Ss,Ns.day=Ns.days=jt,Ns.weekday=Ft,Ns.isoWeekday=Ut,Ns.dayOfYear=fe,Ns.hour=Ns.hours=Ms,Ns.minute=Ns.minutes=Es,Ns.second=Ns.seconds=Is,Ns.millisecond=Ns.milliseconds=$s,Ns.utcOffset=He,Ns.utc=je,Ns.local=Fe,Ns.parseZone=Ue,Ns.hasAlignedHourOffset=Re,Ns.isDST=ze,Ns.isDSTShifted=qe,Ns.isLocal=Be,Ns.isUtcOffset=We,Ns.isUtc=Ye,Ns.isUTC=Ye,Ns.zoneAbbr=Yt,Ns.zoneName=Vt,Ns.dates=X("dates accessor is deprecated. Use date instead.",Ss),Ns.months=X("months accessor is deprecated. Use month instead",K),Ns.years=X("years accessor is deprecated. Use year instead",ms),Ns.zone=X("moment().zone is deprecated, use moment().utcOffset instead. https://github.com/moment/moment/issues/1779",Le);var Ps=Ns,Hs={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},Ls={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY LT",LLLL:"dddd, MMMM D, YYYY LT"},js="Invalid date",Fs="%d",Us=/\d{1,2}/,Rs={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},zs=v.prototype;zs._calendar=Hs,zs.calendar=Jt,zs._longDateFormat=Ls,zs.longDateFormat=Qt,zs._invalidDate=js,zs.invalidDate=Xt,zs._ordinal=Fs,zs.ordinal=Zt,zs._ordinalParse=Us,zs.preparse=ei,zs.postformat=ei,zs._relativeTime=Rs,zs.relativeTime=ti,zs.pastFuture=ii,zs.set=si,zs.months=B,zs._months=ls,zs.monthsShort=W,zs._monthsShort=ds,zs.monthsParse=Y,zs.week=le,zs._week=gs,zs.firstDayOfYear=ce,zs.firstDayOfWeek=de,zs.weekdays=Nt,zs._weekdays=Ds,zs.weekdaysMin=Ht,zs._weekdaysMin=Os,zs.weekdaysShort=Pt,zs._weekdaysShort=Ts,zs.weekdaysParse=Lt,zs.isPM=qt,zs._meridiemParse=As,zs.meridiem=Bt,w("en",{ordinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(e){var t=e%10,i=1===m(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th";return e+i}}),e.lang=X("moment.lang is deprecated. Use moment.locale instead.",w),e.langData=X("moment.langData is deprecated. Use moment.localeData instead.",C);var qs=Math.abs,Bs=_i("ms"),Ws=_i("s"),Ys=_i("m"),Vs=_i("h"),Ks=_i("d"),Gs=_i("w"),Js=_i("M"),Qs=_i("y"),Xs=xi("milliseconds"),Zs=xi("seconds"),en=xi("minutes"),tn=xi("hours"),sn=xi("days"),nn=xi("months"),an=xi("years"),on=Math.round,rn={s:45,m:45,h:22,d:26,M:11},ln=Math.abs,dn=Me.prototype;dn.abs=hi,dn.add=pi,dn.subtract=fi,dn.as=bi,dn.asMilliseconds=Bs,dn.asSeconds=Ws,dn.asMinutes=Ys,dn.asHours=Vs,dn.asDays=Ks,dn.asWeeks=Gs,dn.asMonths=Js,dn.asYears=Qs,dn.valueOf=yi,dn._bubble=mi,dn.get=wi,dn.milliseconds=Xs,dn.seconds=Zs,dn.minutes=en,dn.hours=tn,dn.days=sn,dn.weeks=Ci,dn.months=nn,dn.years=an,dn.humanize=Ti,dn.toISOString=Oi,dn.toString=Oi,dn.toJSON=Oi,dn.locale=mt,dn.localeData=gt,dn.toIsoString=X("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",Oi),dn.lang=ks,I("X",0,0,"unix"),I("x",0,0,"valueOf"),L("x",Gi),L("X",Qi),U("X",function(e,t,i){i._d=new Date(1e3*parseFloat(e,10))}),U("x",function(e,t,i){i._d=new Date(m(e))}),e.version="2.10.3",t(De),e.fn=Ps,e.min=Oe,e.max=Ae,e.utc=r,e.unix=Kt,e.months=oi,e.isDate=s,e.locale=w,e.invalid=h,e.duration=Ve,e.isMoment=f,e.weekdays=li,e.parseZone=Gt,e.localeData=C,e.isDuration=Ee,e.monthsShort=ri,e.weekdaysMin=ci,e.defineLocale=x,e.weekdaysShort=di,e.normalizeUnits=S,e.relativeTimeThreshold=Di;var cn=e;return cn}),!function(e,t){"use strict";"function"==typeof define&&define.amd?define(["moment"],t):"object"==typeof exports?module.exports=t(require("moment")):t(e.moment)}(this,function(e){"use strict";function t(e){return e>96?e-87:e>64?e-29:e-48}function i(e){var i,s=0,n=e.split("."),a=n[0],o=n[1]||"",r=1,l=0,d=1;for(45===e.charCodeAt(0)&&(s=1,d=-1),s;s<a.length;s++)i=t(a.charCodeAt(s)),l=60*l+i;for(s=0;s<o.length;s++)r/=60,i=t(o.charCodeAt(s)),l+=i*r;return l*d}function s(e){for(var t=0;t<e.length;t++)e[t]=i(e[t])}function n(e,t){for(var i=0;t>i;i++)e[i]=Math.round((e[i-1]||0)+6e4*e[i]);e[t-1]=1/0}function a(e,t){var i,s=[];for(i=0;i<t.length;i++)s[i]=e[t[i]];return s}function o(e){var t=e.split("|"),i=t[2].split(" "),o=t[3].split(""),r=t[4].split(" ");return s(i),s(o),s(r),n(r,o.length),{name:t[0],abbrs:a(t[1].split(" "),o),offsets:a(i,o),untils:r}}function r(e){e&&this._set(o(e))}function l(e){return(e||"").toLowerCase().replace(/\//g,"_")}function d(e){var t,i,s;for("string"==typeof e&&(e=[e]),t=0;t<e.length;t++)i=e[t].split("|")[0],s=l(i),w[s]=e[t],C[s]=i}function c(e,t){e=l(e);var i,s=w[e];return s instanceof r?s:"string"==typeof s?(s=new r(s),w[e]=s,s):x[e]&&t!==c&&(i=c(x[e],c))?(s=w[e]=new r,s._set(i),s.name=C[e],s):null}function h(){var e,t=[];for(e in C)C.hasOwnProperty(e)&&(w[e]||w[x[e]])&&C[e]&&t.push(C[e]);return t.sort()}function u(e){var t,i,s,n;for("string"==typeof e&&(e=[e]),t=0;t<e.length;t++)i=e[t].split("|"),s=l(i[0]),n=l(i[1]),x[s]=n,C[s]=i[0],x[n]=s,C[n]=i[1]}function p(e){d(e.zones),u(e.links),v.dataVersion=e.version}function f(e){return f.didShowError||(f.didShowError=!0,g("moment.tz.zoneExists('"+e+"') has been deprecated in favor of !moment.tz.zone('"+e+"')")),!!c(e)}function m(e){return!(!e._a||void 0!==e._tzm)}function g(e){"undefined"!=typeof console&&"function"==typeof console.error&&console.error(e)}function v(t){var i=Array.prototype.slice.call(arguments,0,-1),s=arguments[arguments.length-1],n=c(s),a=e.utc.apply(null,i);return n&&!e.isMoment(t)&&m(a)&&a.add(n.parse(a),"minutes"),a.tz(s),a}function b(e){return function(){return this._z?this._z.abbr(this):e.call(this)}}function y(e){return function(){return this._z=null,e.apply(this,arguments)}}if(void 0!==e.tz)return g("Moment Timezone "+e.tz.version+" was already loaded "+(e.tz.dataVersion?"with data from ":"without any data")+e.tz.dataVersion),e;var _="0.4.0",w={},x={},C={},k=e.version.split("."),S=+k[0],D=+k[1];(2>S||2===S&&6>D)&&g("Moment Timezone requires Moment.js >= 2.6.0. You are using Moment.js "+e.version+". See momentjs.com"),r.prototype={_set:function(e){this.name=e.name,this.abbrs=e.abbrs,this.untils=e.untils,this.offsets=e.offsets},_index:function(e){var t,i=+e,s=this.untils;for(t=0;t<s.length;t++)if(i<s[t])return t},parse:function(e){var t,i,s,n,a=+e,o=this.offsets,r=this.untils,l=r.length-1;for(n=0;l>n;n++)if(t=o[n],i=o[n+1],s=o[n?n-1:n],i>t&&v.moveAmbiguousForward?t=i:t>s&&v.moveInvalidForward&&(t=s),a<r[n]-6e4*t)return o[n];return o[l]},abbr:function(e){return this.abbrs[this._index(e)]},offset:function(e){return this.offsets[this._index(e)]}},v.version=_,v.dataVersion="",v._zones=w,v._links=x,v._names=C,v.add=d,v.link=u,v.load=p,v.zone=c,v.zoneExists=f,v.names=h,v.Zone=r,v.unpack=o,v.unpackBase60=i,v.needsOffset=m,v.moveInvalidForward=!0,v.moveAmbiguousForward=!1;var T=e.fn;e.tz=v,e.defaultZone=null,e.updateOffset=function(t,i){var s,n=e.defaultZone;void 0===t._z&&(n&&m(t)&&!t._isUTC&&(t._d=e.utc(t._a)._d,t.utc().add(n.parse(t),"minutes")),t._z=n),t._z&&(s=t._z.offset(t),Math.abs(s)<16&&(s/=60),void 0!==t.utcOffset?t.utcOffset(-s,i):t.zone(s,i))},T.tz=function(t){return t?(this._z=c(t),this._z?e.updateOffset(this):g("Moment Timezone has no data for "+t+". See http://momentjs.com/timezone/docs/#/data-loading/."),this):this._z?this._z.name:void 0},T.zoneName=b(T.zoneName),T.zoneAbbr=b(T.zoneAbbr),T.utc=y(T.utc),e.tz.setDefault=function(t){return(2>S||2===S&&9>D)&&g("Moment Timezone setDefault() requires Moment.js >= 2.9.0. You are using Moment.js "+e.version+"."),e.defaultZone=t?c(t):null,e};var O=e.momentProperties;return"[object Array]"===Object.prototype.toString.call(O)?(O.push("_z"),O.push("_a")):O&&(O._z=null),e}),function(e,t){if("function"==typeof define&&define.amd)define(["moment","jquery","exports"],function(i,s,n){e.daterangepicker=t(e,n,i,s)});else if("undefined"!=typeof exports){var i=require("moment"),s=window.jQuery;if(void 0===s)try{s=require("jquery")}catch(e){if(!s)throw new Error("jQuery dependency not found")}t(e,exports,i,s)}else e.daterangepicker=t(e,{},e.moment||moment,e.jQuery||e.Zepto||e.ender||e.$)}(this,function(e,t,i,s){var n=function(e,t,n){if(this.parentEl="body",this.element=s(e),this.startDate=i().startOf("day"),this.endDate=i().endOf("day"),this.timeZone=i().utcOffset(),this.minDate=!1,this.maxDate=!1,this.dateLimit=!1,this.autoApply=!1,this.singleDatePicker=!1,this.showDropdowns=!1,this.showWeekNumbers=!1,this.timePicker=!1,this.timePicker24Hour=!1,this.timePickerIncrement=1,this.timePickerSeconds=!1,this.linkedCalendars=!0,this.ranges={},this.opens="right",this.element.hasClass("pull-right")&&(this.opens="left"),this.drops="down",this.element.hasClass("dropup")&&(this.drops="up"),this.buttonClasses="btn btn-sm",this.applyClass="btn-success",this.cancelClass="btn-default",this.locale={format:"MM/DD/YYYY",separator:" - ",applyLabel:"Apply",cancelLabel:"Cancel",weekLabel:"W",customRangeLabel:"Custom Range",daysOfWeek:i.weekdaysMin(),monthNames:i.monthsShort(),firstDay:i.localeData().firstDayOfWeek()},this.callback=function(){},this.isShowing=!1,this.leftCalendar={},this.rightCalendar={},"object"==typeof t&&null!==t||(t={}),t=s.extend(this.element.data(),t),"string"!=typeof t.template&&(t.template='<div class="daterangepicker dropdown-menu"><div class="calendar left"><div class="daterangepicker_input"><input class="input-mini" type="text" name="daterangepicker_start" value="" /><i class="fa fa-calendar glyphicon glyphicon-calendar"></i><div class="calendar-time"><div></div><i class="fa fa-clock-o glyphicon glyphicon-time"></i></div></div><div class="calendar-table"></div></div><div class="calendar right"><div class="daterangepicker_input"><input class="input-mini" type="text" name="daterangepicker_end" value="" /><i class="fa fa-calendar glyphicon glyphicon-calendar"></i><div class="calendar-time"><div></div><i class="fa fa-clock-o glyphicon glyphicon-time"></i></div></div><div class="calendar-table"></div></div><div class="ranges"><div class="range_inputs"><button class="applyBtn" disabled="disabled" type="button"></button> <button class="cancelBtn" type="button"></button></div></div></div>'),this.parentEl=s(t.parentEl&&s(t.parentEl).length?t.parentEl:this.parentEl),this.container=s(t.template).appendTo(this.parentEl),"object"==typeof t.locale&&("string"==typeof t.locale.format&&(this.locale.format=t.locale.format),"string"==typeof t.locale.separator&&(this.locale.separator=t.locale.separator),"object"==typeof t.locale.daysOfWeek&&(this.locale.daysOfWeek=t.locale.daysOfWeek.slice()),"object"==typeof t.locale.monthNames&&(this.locale.monthNames=t.locale.monthNames.slice()),"number"==typeof t.locale.firstDay&&(this.locale.firstDay=t.locale.firstDay),"string"==typeof t.locale.applyLabel&&(this.locale.applyLabel=t.locale.applyLabel),"string"==typeof t.locale.cancelLabel&&(this.locale.cancelLabel=t.locale.cancelLabel),"string"==typeof t.locale.weekLabel&&(this.locale.weekLabel=t.locale.weekLabel),"string"==typeof t.locale.customRangeLabel&&(this.locale.customRangeLabel=t.locale.customRangeLabel)),"string"==typeof t.startDate&&(this.startDate=i(t.startDate,this.locale.format)),"string"==typeof t.endDate&&(this.endDate=i(t.endDate,this.locale.format)),"string"==typeof t.minDate&&(this.minDate=i(t.minDate,this.locale.format)),"string"==typeof t.maxDate&&(this.maxDate=i(t.maxDate,this.locale.format)),"object"==typeof t.startDate&&(this.startDate=i(t.startDate)),"object"==typeof t.endDate&&(this.endDate=i(t.endDate)),"object"==typeof t.minDate&&(this.minDate=i(t.minDate)),"object"==typeof t.maxDate&&(this.maxDate=i(t.maxDate)),this.minDate&&this.startDate.isBefore(this.minDate)&&(this.startDate=this.minDate.clone()),this.maxDate&&this.endDate.isAfter(this.maxDate)&&(this.endDate=this.maxDate.clone()),"string"==typeof t.applyClass&&(this.applyClass=t.applyClass),"string"==typeof t.cancelClass&&(this.cancelClass=t.cancelClass),"object"==typeof t.dateLimit&&(this.dateLimit=t.dateLimit),"string"==typeof t.opens&&(this.opens=t.opens),"string"==typeof t.drops&&(this.drops=t.drops),"boolean"==typeof t.showWeekNumbers&&(this.showWeekNumbers=t.showWeekNumbers),"string"==typeof t.buttonClasses&&(this.buttonClasses=t.buttonClasses),"object"==typeof t.buttonClasses&&(this.buttonClasses=t.buttonClasses.join(" ")),"boolean"==typeof t.showDropdowns&&(this.showDropdowns=t.showDropdowns),"boolean"==typeof t.singleDatePicker&&(this.singleDatePicker=t.singleDatePicker,this.singleDatePicker&&(this.endDate=this.startDate.clone())),"boolean"==typeof t.timePicker&&(this.timePicker=t.timePicker),"boolean"==typeof t.timePickerSeconds&&(this.timePickerSeconds=t.timePickerSeconds),"number"==typeof t.timePickerIncrement&&(this.timePickerIncrement=t.timePickerIncrement),"boolean"==typeof t.timePicker24Hour&&(this.timePicker24Hour=t.timePicker24Hour),"boolean"==typeof t.autoApply&&(this.autoApply=t.autoApply),"boolean"==typeof t.linkedCalendars&&(this.linkedCalendars=t.linkedCalendars),0!=this.locale.firstDay)for(var a=this.locale.firstDay;a>0;)this.locale.daysOfWeek.push(this.locale.daysOfWeek.shift()),a--;var o,r,l;if("undefined"==typeof t.startDate&&"undefined"==typeof t.endDate&&s(this.element).is("input[type=text]")){var d=s(this.element).val(),c=d.split(this.locale.separator);o=r=null,2==c.length?(o=i(c[0],this.locale.format),r=i(c[1],this.locale.format)):this.singleDatePicker&&""!==d&&(o=i(d,this.locale.format),r=i(d,this.locale.format)),null!==o&&null!==r&&(this.setStartDate(o),this.setEndDate(r))}if("string"==typeof t.timeZone||"number"==typeof t.timeZone?("string"==typeof t.timeZone&&"undefined"!=typeof i.tz?this.timeZone=i.tz.zone(t.timeZone).parse(new Date)*-1:this.timeZone=t.timeZone,this.startDate.utcOffset(this.timeZone),this.endDate.utcOffset(this.timeZone)):this.timeZone=i(this.startDate).utcOffset(),"object"==typeof t.ranges){for(l in t.ranges){o="string"==typeof t.ranges[l][0]?i(t.ranges[l][0],this.locale.format):i(t.ranges[l][0]),r="string"==typeof t.ranges[l][1]?i(t.ranges[l][1],this.locale.format):i(t.ranges[l][1]),this.minDate&&o.isBefore(this.minDate)&&(o=this.minDate.clone());var h=this.maxDate;this.dateLimit&&o.clone().add(this.dateLimit).isAfter(h)&&(h=o.clone().add(this.dateLimit)),h&&r.isAfter(h)&&(r=h.clone()),this.minDate&&r.isBefore(this.minDate)||h&&o.isAfter(h)||(this.ranges[l]=[o,r])}var u="<ul>";for(l in this.ranges)u+="<li>"+l+"</li>";u+="<li>"+this.locale.customRangeLabel+"</li>",u+="</ul>",this.container.find(".ranges ul").remove(),this.container.find(".ranges").prepend(u)}"function"==typeof n&&(this.callback=n),this.timePicker||(this.startDate=this.startDate.startOf("day"),this.endDate=this.endDate.endOf("day"),this.container.find(".calendar-time").hide()),this.timePicker&&this.autoApply&&(this.autoApply=!1),this.autoApply&&"object"!=typeof t.ranges?this.container.find(".ranges").hide():this.autoApply&&this.container.find(".applyBtn, .cancelBtn").addClass("hide"),this.singleDatePicker&&(this.container.addClass("single"),this.container.find(".calendar.left").addClass("single"),this.container.find(".calendar.left").show(),this.container.find(".calendar.right").hide(),this.container.find(".daterangepicker_input input, .daterangepicker_input i").hide(),this.timePicker||this.container.find(".ranges").hide()),"undefined"!=typeof t.ranges||this.singleDatePicker||this.container.addClass("show-calendar"),this.container.removeClass("opensleft opensright").addClass("opens"+this.opens),this.container.find(".applyBtn, .cancelBtn").addClass(this.buttonClasses),this.applyClass.length&&this.container.find(".applyBtn").addClass(this.applyClass),this.cancelClass.length&&this.container.find(".cancelBtn").addClass(this.cancelClass),this.container.find(".applyBtn").html(this.locale.applyLabel),this.container.find(".cancelBtn").html(this.locale.cancelLabel),this.container.find(".calendar").on("click.daterangepicker",".prev",s.proxy(this.clickPrev,this)).on("click.daterangepicker",".next",s.proxy(this.clickNext,this)).on("click.daterangepicker","td.available",s.proxy(this.clickDate,this)).on("mouseenter.daterangepicker","td.available",s.proxy(this.hoverDate,this)).on("mouseleave.daterangepicker","td.available",s.proxy(this.updateFormInputs,this)).on("change.daterangepicker","select.yearselect",s.proxy(this.monthOrYearChanged,this)).on("change.daterangepicker","select.monthselect",s.proxy(this.monthOrYearChanged,this)).on("change.daterangepicker","select.hourselect,select.minuteselect,select.secondselect,select.ampmselect",s.proxy(this.timeChanged,this)).on("click.daterangepicker",".daterangepicker_input input",s.proxy(this.showCalendars,this)).on("keyup.daterangepicker",".daterangepicker_input input",s.proxy(this.formInputsChanged,this)).on("change.daterangepicker",".daterangepicker_input input",s.proxy(this.updateFormInputs,this)),this.container.find(".ranges").on("click.daterangepicker","button.applyBtn",s.proxy(this.clickApply,this)).on("click.daterangepicker","button.cancelBtn",s.proxy(this.clickCancel,this)).on("click.daterangepicker","li",s.proxy(this.clickRange,this)).on("mouseenter.daterangepicker","li",s.proxy(this.hoverRange,this)).on("mouseleave.daterangepicker","li",s.proxy(this.updateFormInputs,this)),this.element.is("input")?this.element.on({"click.daterangepicker":s.proxy(this.show,this),"focus.daterangepicker":s.proxy(this.show,this),"keyup.daterangepicker":s.proxy(this.controlChanged,this),"keydown.daterangepicker":s.proxy(this.keydown,this)}):this.element.on("click.daterangepicker",s.proxy(this.toggle,this)),this.element.is("input")&&!this.singleDatePicker?(this.element.val(this.startDate.format(this.locale.format)+this.locale.separator+this.endDate.format(this.locale.format)),this.element.trigger("change")):this.element.is("input")&&(this.element.val(this.startDate.format(this.locale.format)),this.element.trigger("change"))};n.prototype={constructor:n,setStartDate:function(e){"string"==typeof e&&(this.startDate=i(e,this.locale.format).utcOffset(this.timeZone)),"object"==typeof e&&(this.startDate=i(e)),this.timePicker||(this.startDate=this.startDate.startOf("day")),this.timePicker&&this.timePickerIncrement&&this.startDate.minute(Math.round(this.startDate.minute()/this.timePickerIncrement)*this.timePickerIncrement),this.minDate&&this.startDate.isBefore(this.minDate)&&(this.startDate=this.minDate),this.maxDate&&this.startDate.isAfter(this.maxDate)&&(this.startDate=this.maxDate),this.updateMonthsInView()},setEndDate:function(e){"string"==typeof e&&(this.endDate=i(e,this.locale.format).utcOffset(this.timeZone)),"object"==typeof e&&(this.endDate=i(e)),this.timePicker||(this.endDate=this.endDate.endOf("day")),this.timePicker&&this.timePickerIncrement&&this.endDate.minute(Math.round(this.endDate.minute()/this.timePickerIncrement)*this.timePickerIncrement),this.endDate.isBefore(this.startDate)&&(this.endDate=this.startDate.clone()),this.maxDate&&this.endDate.isAfter(this.maxDate)&&(this.endDate=this.maxDate),this.dateLimit&&this.startDate.clone().add(this.dateLimit).isBefore(this.endDate)&&(this.endDate=this.startDate.clone().add(this.dateLimit)),this.updateMonthsInView()},updateView:function(){this.timePicker&&(this.renderTimePicker("left"),this.renderTimePicker("right"),this.endDate?this.container.find(".right .calendar-time select").removeAttr("disabled").removeClass("disabled"):this.container.find(".right .calendar-time select").attr("disabled","disabled").addClass("disabled")),this.endDate?(this.container.find('input[name="daterangepicker_end"]').removeClass("active"),this.container.find('input[name="daterangepicker_start"]').addClass("active")):(this.container.find('input[name="daterangepicker_end"]').addClass("active"),this.container.find('input[name="daterangepicker_start"]').removeClass("active")),this.updateMonthsInView(),this.updateCalendars(),this.updateFormInputs()},updateMonthsInView:function(){this.endDate?(this.leftCalendar.month=this.startDate.clone().date(2),this.linkedCalendars||this.endDate.month()==this.startDate.month()&&this.endDate.year()==this.startDate.year()?this.rightCalendar.month=this.startDate.clone().date(2).add(1,"month"):this.rightCalendar.month=this.endDate.clone().date(2)):this.leftCalendar.month.format("YYYY-MM")!=this.startDate.format("YYYY-MM")&&this.rightCalendar.month.format("YYYY-MM")!=this.startDate.format("YYYY-MM")&&(this.leftCalendar.month=this.startDate.clone().date(2),this.rightCalendar.month=this.startDate.clone().date(2).add(1,"month"))},updateCalendars:function(){if(this.timePicker){var e,t,i;if(this.endDate){if(e=parseInt(this.container.find(".left .hourselect").val(),10),t=parseInt(this.container.find(".left .minuteselect").val(),10),i=this.timePickerSeconds?parseInt(this.container.find(".left .secondselect").val(),10):0,!this.timePicker24Hour){var s=this.container.find(".left .ampmselect").val();"PM"===s&&e<12&&(e+=12),"AM"===s&&12===e&&(e=0)}}else if(e=parseInt(this.container.find(".right .hourselect").val(),10),t=parseInt(this.container.find(".right .minuteselect").val(),10),i=this.timePickerSeconds?parseInt(this.container.find(".right .secondselect").val(),10):0,!this.timePicker24Hour){var s=this.container.find(".left .ampmselect").val();"PM"===s&&e<12&&(e+=12),"AM"===s&&12===e&&(e=0)}this.leftCalendar.month.hour(e).minute(t).second(i),this.rightCalendar.month.hour(e).minute(t).second(i)}if(this.renderCalendar("left"),this.renderCalendar("right"),this.container.find(".ranges li").removeClass("active"),null!=this.endDate){var n=!0,a=0;for(var o in this.ranges){if(this.timePicker){if(this.startDate.isSame(this.ranges[o][0])&&this.endDate.isSame(this.ranges[o][1])){n=!1,this.chosenLabel=this.container.find(".ranges li:eq("+a+")").addClass("active").html();break}}else if(this.startDate.format("YYYY-MM-DD")==this.ranges[o][0].format("YYYY-MM-DD")&&this.endDate.format("YYYY-MM-DD")==this.ranges[o][1].format("YYYY-MM-DD")){
n=!1,this.chosenLabel=this.container.find(".ranges li:eq("+a+")").addClass("active").html();break}a++}n&&(this.chosenLabel=this.container.find(".ranges li:last").addClass("active").html(),this.showCalendars())}},renderCalendar:function(e){var t="left"==e?this.leftCalendar:this.rightCalendar,n=t.month.month(),a=t.month.year(),o=t.month.hour(),r=t.month.minute(),l=t.month.second(),d=i([a,n]).daysInMonth(),c=i([a,n,1]),h=i([a,n,d]),u=i(c).subtract(1,"month").month(),p=i(c).subtract(1,"month").year(),f=i([p,u]).daysInMonth(),m=c.day(),t=[];t.firstDay=c,t.lastDay=h;for(var g=0;g<6;g++)t[g]=[];var v=f-m+this.locale.firstDay+1;v>f&&(v-=7),m==this.locale.firstDay&&(v=f-6);for(var b,y,_=i([p,u,v,12,r,l]).utcOffset(this.timeZone),g=0,b=0,y=0;g<42;g++,b++,_=i(_).add(24,"hour"))g>0&&b%7===0&&(b=0,y++),t[y][b]=_.clone().hour(o).minute(r).second(l),_.hour(12),this.minDate&&t[y][b].format("YYYY-MM-DD")==this.minDate.format("YYYY-MM-DD")&&t[y][b].isBefore(this.minDate)&&"left"==e&&(t[y][b]=this.minDate.clone()),this.maxDate&&t[y][b].format("YYYY-MM-DD")==this.maxDate.format("YYYY-MM-DD")&&t[y][b].isAfter(this.maxDate)&&"right"==e&&(t[y][b]=this.maxDate.clone());"left"==e?this.leftCalendar.calendar=t:this.rightCalendar.calendar=t;var w="left"==e?this.minDate:this.startDate,x=this.maxDate,C=("left"==e?this.startDate:this.endDate,'<table class="table-condensed">');C+="<thead>",C+="<tr>",this.showWeekNumbers&&(C+="<th></th>"),C+=w&&!w.isBefore(t.firstDay)||this.linkedCalendars&&"left"!=e?"<th></th>":'<th class="prev available"><i class="fa fa-chevron-left glyphicon glyphicon-chevron-left"></i></th>';var k=this.locale.monthNames[t[1][1].month()]+t[1][1].format(" YYYY");if(this.showDropdowns){for(var S=t[1][1].month(),D=t[1][1].year(),T=x&&x.year()||D+5,O=w&&w.year()||D-50,A=D==O,M=D==T,E='<select class="monthselect">',I=0;I<12;I++)E+=(!A||I>=w.month())&&(!M||I<=x.month())?"<option value='"+I+"'"+(I===S?" selected='selected'":"")+">"+this.locale.monthNames[I]+"</option>":"<option value='"+I+"'"+(I===S?" selected='selected'":"")+" disabled='disabled'>"+this.locale.monthNames[I]+"</option>";E+="</select>";for(var $='<select class="yearselect">',N=O;N<=T;N++)$+='<option value="'+N+'"'+(N===D?' selected="selected"':"")+">"+N+"</option>";$+="</select>",k=E+$}if(C+='<th colspan="5" class="month">'+k+"</th>",C+=x&&!x.isAfter(t.lastDay)||this.linkedCalendars&&"right"!=e&&!this.singleDatePicker?"<th></th>":'<th class="next available"><i class="fa fa-chevron-right glyphicon glyphicon-chevron-right"></i></th>',C+="</tr>",C+="<tr>",this.showWeekNumbers&&(C+='<th class="week">'+this.locale.weekLabel+"</th>"),s.each(this.locale.daysOfWeek,function(e,t){C+="<th>"+t+"</th>"}),C+="</tr>",C+="</thead>",C+="<tbody>",null==this.endDate&&this.dateLimit){var P=this.startDate.clone().add(this.dateLimit).endOf("day");x&&!P.isBefore(x)||(x=P)}for(var y=0;y<6;y++){C+="<tr>",this.showWeekNumbers&&(C+='<td class="week">'+t[y][0].week()+"</td>");for(var b=0;b<7;b++){var H=[];t[y][b].isSame(new Date,"day")&&H.push("today"),t[y][b].isoWeekday()>5&&H.push("weekend"),t[y][b].month()!=t[1][1].month()&&H.push("off"),this.minDate&&t[y][b].isBefore(this.minDate,"day")&&H.push("off","disabled"),x&&t[y][b].isAfter(x,"day")&&H.push("off","disabled"),t[y][b].format("YYYY-MM-DD")==this.startDate.format("YYYY-MM-DD")&&H.push("active","start-date"),null!=this.endDate&&t[y][b].format("YYYY-MM-DD")==this.endDate.format("YYYY-MM-DD")&&H.push("active","end-date"),null!=this.endDate&&t[y][b]>this.startDate&&t[y][b]<this.endDate&&H.push("in-range");for(var L="",j=!1,g=0;g<H.length;g++)L+=H[g]+" ","disabled"==H[g]&&(j=!0);j||(L+="available"),C+='<td class="'+L.replace(/^\s+|\s+$/g,"")+'" data-title="r'+y+"c"+b+'">'+t[y][b].date()+"</td>"}C+="</tr>"}C+="</tbody>",C+="</table>",this.container.find(".calendar."+e+" .calendar-table").html(C)},renderTimePicker:function(e){var t,i,s=this.maxDate;!this.dateLimit||this.maxDate&&!this.startDate.clone().add(this.dateLimit).isAfter(this.maxDate)||(s=this.startDate.clone().add(this.dateLimit)),"left"==e?(t=this.startDate.clone(),i=this.minDate):"right"==e&&(t=this.endDate?this.endDate.clone():this.startDate.clone(),i=this.startDate),html='<select class="hourselect">';for(var n=this.timePicker24Hour?0:1,a=this.timePicker24Hour?23:12,o=n;o<=a;o++){var r=o;this.timePicker24Hour||(r=t.hour()>=12?12==o?12:o+12:12==o?0:o);var l=t.clone().hour(r),d=!1;i&&l.minute(59).isBefore(i)&&(d=!0),s&&l.minute(0).isAfter(s)&&(d=!0),r!=t.hour()||d?d?html+='<option value="'+o+'" disabled="disabled" class="disabled">'+o+"</option>":html+='<option value="'+o+'">'+o+"</option>":html+='<option value="'+o+'" selected="selected">'+o+"</option>"}html+="</select> ",html+=': <select class="minuteselect">';for(var o=0;o<60;o+=this.timePickerIncrement){var c=o<10?"0"+o:o,l=t.clone().minute(o),d=!1;i&&l.second(59).isBefore(i)&&(d=!0),s&&l.second(0).isAfter(s)&&(d=!0),t.minute()!=o||d?d?html+='<option value="'+o+'" disabled="disabled" class="disabled">'+c+"</option>":html+='<option value="'+o+'">'+c+"</option>":html+='<option value="'+o+'" selected="selected">'+c+"</option>"}if(html+="</select> ",this.timePickerSeconds){html+=': <select class="secondselect">';for(var o=0;o<60;o++){var c=o<10?"0"+o:o,l=t.clone().second(o),d=!1;i&&l.isBefore(i)&&(d=!0),s&&l.isAfter(s)&&(d=!0),t.second()!=o||d?d?html+='<option value="'+o+'" disabled="disabled" class="disabled">'+c+"</option>":html+='<option value="'+o+'">'+c+"</option>":html+='<option value="'+o+'" selected="selected">'+c+"</option>"}html+="</select> "}if(!this.timePicker24Hour){html+='<select class="ampmselect">';var h="",u="";i&&t.clone().hour(12).minute(0).second(0).isBefore(i)&&(h=' disabled="disabled" class="disabled"'),s&&t.clone().hour(0).minute(0).second(0).isAfter(s)&&(u=' disabled="disabled" class="disabled"'),t.hour()>=12?html+='<option value="AM"'+h+'>AM</option><option value="PM" selected="selected"'+u+">PM</option>":html+='<option value="AM" selected="selected"'+h+'>AM</option><option value="PM"'+u+">PM</option>",html+="</select>"}this.container.find(".calendar."+e+" .calendar-time div").html(html)},updateFormInputs:function(){this.container.find("input[name=daterangepicker_start]").val(this.startDate.format(this.locale.format)),this.endDate&&this.container.find("input[name=daterangepicker_end]").val(this.endDate.format(this.locale.format)),this.singleDatePicker||this.endDate&&(this.startDate.isBefore(this.endDate)||this.startDate.isSame(this.endDate))?this.container.find("button.applyBtn").removeAttr("disabled"):this.container.find("button.applyBtn").attr("disabled","disabled")},move:function(){var e,t={top:0,left:0},i=s(window).width();this.parentEl.is("body")||(t={top:this.parentEl.offset().top-this.parentEl.scrollTop(),left:this.parentEl.offset().left-this.parentEl.scrollLeft()},i=this.parentEl[0].clientWidth+this.parentEl.offset().left),e="up"==this.drops?this.element.offset().top-this.container.outerHeight()-t.top:this.element.offset().top+this.element.outerHeight()-t.top,this.container["up"==this.drops?"addClass":"removeClass"]("dropup"),"left"==this.opens?(this.container.css({top:e,right:i-this.element.offset().left-this.element.outerWidth(),left:"auto"}),this.container.offset().left<0&&this.container.css({right:"auto",left:9})):"center"==this.opens?(this.container.css({top:e,left:this.element.offset().left-t.left+this.element.outerWidth()/2-this.container.outerWidth()/2,right:"auto"}),this.container.offset().left<0&&this.container.css({right:"auto",left:9})):(this.container.css({top:e,left:this.element.offset().left-t.left,right:"auto"}),this.container.offset().left+this.container.outerWidth()>s(window).width()&&this.container.css({left:"auto",right:0}))},show:function(e){this.isShowing||(this._outsideClickProxy=s.proxy(function(e){this.outsideClick(e)},this),s(document).on("mousedown.daterangepicker",this._outsideClickProxy).on("touchend.daterangepicker",this._outsideClickProxy).on("click.daterangepicker","[data-toggle=dropdown]",this._outsideClickProxy).on("focusin.daterangepicker",this._outsideClickProxy),this.oldStartDate=this.startDate.clone(),this.oldEndDate=this.endDate.clone(),this.updateView(),this.container.show(),this.move(),this.element.trigger("show.daterangepicker",this),this.isShowing=!0)},hide:function(e){this.isShowing&&(this.endDate||(this.startDate=this.oldStartDate.clone(),this.endDate=this.oldEndDate.clone()),this.startDate.isSame(this.oldStartDate)&&this.endDate.isSame(this.oldEndDate)||this.callback(this.startDate,this.endDate,this.chosenLabel),this.element.is("input")&&!this.singleDatePicker?(this.element.val(this.startDate.format(this.locale.format)+this.locale.separator+this.endDate.format(this.locale.format)),this.element.trigger("change")):this.element.is("input")&&(this.element.val(this.startDate.format(this.locale.format)),this.element.trigger("change")),s(document).off(".daterangepicker"),this.container.hide(),this.element.trigger("hide.daterangepicker",this),this.isShowing=!1)},toggle:function(e){this.isShowing?this.hide():this.show()},outsideClick:function(e){var t=s(e.target);"focusin"==e.type||t.closest(this.element).length||t.closest(this.container).length||t.closest(".calendar-table").length||this.hide()},showCalendars:function(){this.container.addClass("show-calendar"),this.move(),this.element.trigger("showCalendar.daterangepicker",this)},hideCalendars:function(){this.container.removeClass("show-calendar"),this.element.trigger("hideCalendar.daterangepicker",this)},hoverRange:function(e){var t=e.target.innerHTML;if(t==this.locale.customRangeLabel)this.updateView();else{var i=this.ranges[t];this.container.find("input[name=daterangepicker_start]").val(i[0].format(this.locale.format)),this.container.find("input[name=daterangepicker_end]").val(i[1].format(this.locale.format))}},clickRange:function(e){var t=e.target.innerHTML;if(this.chosenLabel=t,t==this.locale.customRangeLabel)this.showCalendars();else{var i=this.ranges[t];this.startDate=i[0],this.endDate=i[1],this.timePicker||(this.startDate.startOf("day"),this.endDate.endOf("day")),this.hideCalendars(),this.clickApply()}},clickPrev:function(e){var t=s(e.target).parents(".calendar");t.hasClass("left")?(this.leftCalendar.month.subtract(1,"month"),this.linkedCalendars&&this.rightCalendar.month.subtract(1,"month")):this.rightCalendar.month.subtract(1,"month"),this.updateCalendars()},clickNext:function(e){var t=s(e.target).parents(".calendar");t.hasClass("left")?this.leftCalendar.month.add(1,"month"):(this.rightCalendar.month.add(1,"month"),this.linkedCalendars&&this.leftCalendar.month.add(1,"month")),this.updateCalendars()},hoverDate:function(e){if(s(e.target).hasClass("available")){var t=s(e.target).attr("data-title"),i=t.substr(1,1),n=t.substr(3,1),a=s(e.target).parents(".calendar"),o=a.hasClass("left")?this.leftCalendar.calendar[i][n]:this.rightCalendar.calendar[i][n];this.endDate?this.container.find("input[name=daterangepicker_start]").val(o.format(this.locale.format)):this.container.find("input[name=daterangepicker_end]").val(o.format(this.locale.format));var r=this.leftCalendar,l=this.rightCalendar,d=this.startDate;this.endDate||this.container.find(".calendar td").each(function(e,t){if(!s(t).hasClass("week")){var i=s(t).attr("data-title"),n=i.substr(1,1),a=i.substr(3,1),c=s(t).parents(".calendar"),h=c.hasClass("left")?r.calendar[n][a]:l.calendar[n][a];h.isAfter(d)&&h.isBefore(o)?s(t).addClass("in-range"):s(t).removeClass("in-range")}})}},clickDate:function(e){if(s(e.target).hasClass("available")){var t=s(e.target).attr("data-title"),i=t.substr(1,1),n=t.substr(3,1),a=s(e.target).parents(".calendar"),o=a.hasClass("left")?this.leftCalendar.calendar[i][n]:this.rightCalendar.calendar[i][n];if(this.endDate||o.isBefore(this.startDate)){if(this.timePicker){var r=parseInt(this.container.find(".left .hourselect").val(),10);if(!this.timePicker24Hour){var l=a.find(".ampmselect").val();"PM"===l&&r<12&&(r+=12),"AM"===l&&12===r&&(r=0)}var d=parseInt(this.container.find(".left .minuteselect").val(),10),c=this.timePickerSeconds?parseInt(this.container.find(".left .secondselect").val(),10):0;o=o.clone().hour(r).minute(d).second(c)}this.endDate=null,this.setStartDate(o.clone())}else{if(this.timePicker){var r=parseInt(this.container.find(".right .hourselect").val(),10);if(!this.timePicker24Hour){var l=this.container.find(".right .ampmselect").val();"PM"===l&&r<12&&(r+=12),"AM"===l&&12===r&&(r=0)}var d=parseInt(this.container.find(".right .minuteselect").val(),10),c=this.timePickerSeconds?parseInt(this.container.find(".right .secondselect").val(),10):0;o=o.clone().hour(r).minute(d).second(c)}this.setEndDate(o.clone()),this.autoApply&&this.clickApply()}this.singleDatePicker&&(this.setEndDate(this.startDate),this.timePicker||this.clickApply()),this.updateView()}},clickApply:function(e){this.hide(),this.element.trigger("apply.daterangepicker",this)},clickCancel:function(e){this.startDate=this.oldStartDate,this.endDate=this.oldEndDate,this.hide(),this.element.trigger("cancel.daterangepicker",this)},monthOrYearChanged:function(e){var t=s(e.target).closest(".calendar").hasClass("left"),i=t?"left":"right",n=this.container.find(".calendar."+i),a=parseInt(n.find(".monthselect").val(),10),o=n.find(".yearselect").val();t||(o<this.startDate.year()||o==this.startDate.year()&&a<this.startDate.month())&&(a=this.startDate.month(),o=this.startDate.year()),this.minDate&&(o<this.minDate.year()||o==this.minDate.year()&&a<this.minDate.month())&&(a=this.minDate.month(),o=this.minDate.year()),this.maxDate&&(o>this.maxDate.year()||o==this.maxDate.year()&&a>this.maxDate.month())&&(a=this.maxDate.month(),o=this.maxDate.year()),t?(this.leftCalendar.month.month(a).year(o),this.linkedCalendars&&(this.rightCalendar.month=this.leftCalendar.month.clone().add(1,"month"))):(this.rightCalendar.month.month(a).year(o),this.linkedCalendars&&(this.leftCalendar.month=this.rightCalendar.month.clone().subtract(1,"month"))),this.updateCalendars()},timeChanged:function(e){var t=s(e.target).closest(".calendar"),i=t.hasClass("left"),n=parseInt(t.find(".hourselect").val(),10),a=parseInt(t.find(".minuteselect").val(),10),o=this.timePickerSeconds?parseInt(t.find(".secondselect").val(),10):0;if(!this.timePicker24Hour){var r=t.find(".ampmselect").val();"PM"===r&&n<12&&(n+=12),"AM"===r&&12===n&&(n=0)}if(i){var l=this.startDate.clone();l.hour(n),l.minute(a),l.second(o),this.setStartDate(l),this.singleDatePicker&&(this.endDate=this.startDate.clone())}else if(this.endDate){var d=this.endDate.clone();d.hour(n),d.minute(a),d.second(o),this.setEndDate(d)}this.updateCalendars(),this.updateFormInputs(),this.renderTimePicker("left"),this.renderTimePicker("right")},formInputsChanged:function(e){var t=s(e.target).closest(".calendar").hasClass("right"),n=i(this.container.find('input[name="daterangepicker_start"]').val(),this.locale.format),a=i(this.container.find('input[name="daterangepicker_end"]').val(),this.locale.format);n.isValid()&&a.isValid()&&(t&&a.isBefore(n)&&(n=a.clone()),this.setStartDate(n),this.setEndDate(a),t?this.container.find('input[name="daterangepicker_start"]').val(this.startDate.format(this.locale.format)):this.container.find('input[name="daterangepicker_end"]').val(this.endDate.format(this.locale.format))),this.updateCalendars(),this.timePicker&&(this.renderTimePicker("left"),this.renderTimePicker("right"))},controlChanged:function(){if(this.element.is("input")&&this.element.val().length){var e=this.element.val().split(this.locale.separator),t=null,s=null;2===e.length&&(t=i(e[0],this.locale.format).utcOffset(this.timeZone),s=i(e[1],this.locale.format).utcOffset(this.timeZone)),(this.singleDatePicker||null===t||null===s)&&(t=i(this.element.val(),this.locale.format).utcOffset(this.timeZone),s=t),this.setStartDate(t),this.setEndDate(s),this.updateView()}},keydown:function(e){9!==e.keyCode&&13!==e.keyCode||this.hide()},remove:function(){this.container.remove(),this.element.off(".daterangepicker"),this.element.removeData()}},s.fn.daterangepicker=function(e,t){return this.each(function(){var i=s(this);i.data("daterangepicker")&&i.data("daterangepicker").remove(),i.data("daterangepicker",new n(i,e,t))}),this}});var jchcomms=function(e){var t=(e("#statusMessage"),e("#voice-box")),s=new Date,n=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],a=function(t){return e("<div/>").text(t).html()},o=function(t){return e("<div/>").html(t).text()},r=function(e){return e},l=function(e,t){try{return t=t.toString(),1===t.length&&(t="0"+t),e>12?(e-=12,t+=" PM"):t+=12===e?" PM":" AM",e=e.toString(),1===e.length&&(e="0"+e),e+":"+t}catch(e){}return""},d=function(e){return e&&(s.setTime(e),e=s.getDate()+" "+n[s.getMonth()]+" "+s.getFullYear()+" "+l(s.getHours(),s.getMinutes())),e},c=function(e,t,i){return i&&e&&t&&(e=e.replace(//g," "),"hE"===String(i)?e=a(e):"hD"===String(i)?e=o(e):"hR"===String(i)&&(e=r(e)),"header"===String(t)&&e.length>35?e=String(e).slice(0,35)+"...":"paragraph"===String(t)&&e.length>50?e=String(e).slice(0,50)+"...":"gp_paragraph"===String(t)&&e.length>80?e=String(e).slice(0,80)+"...":"text"===String(t)&&e.length>10?e=String(e).slice(0,10)+"...":"textLanding"===String(t)&&e.length>20?e=String(e).slice(0,20)+"...":"popup"===String(t)&&e.length>300?e=String(e).slice(0,300)+"...":"other"===String(t)&&(e=String(e))),e},h=function(e){for(;/(\d+)(\d{3})/.test(e);)e=String(e).replace(/(\d+)(\d{3})/,"$1,$2");return e},u=function(e){return parseInt(String(e).replace(/,/g,""))},p=function(e){return e.charAt(0).toUpperCase()+e.slice(1)},f=function(t,s){if(t&&s&&t.indexOf(s)!==-1){if("string"==typeof t)if(0===s.length)t=t.split("");else{tempArr=[];for(i in t)i<t.length-s.length+1&&tempArr.push(t.substr(i,s.length));t=tempArr,delete tempArr}return t=e.grep(t,function(e,t){return s===e}),t.length}return 0},m=function(e){t.find("span#statusMessage").html(e),e=1e3*Math.round(t.width()/180),e<2e3&&(e=2e3),t.fadeIn().attr("status","saved").delay(e).fadeOut("slow")},g=function(e,t){if(e)if(e.profileUpdate&&e.profileUpdate.length>0){if("profilePicture"===String(t)){if(e.socialLogins)if(String(e.profileUpdate).indexOf("googleImage")!==-1)try{return JSON.parse(JSON.parse(e.socialLogins).google).profileImage}catch(t){return JSON.parse(e.socialLogins).google.profileImage}else if(String(e.profileUpdate).indexOf("facebookImage")!==-1)try{return JSON.parse(JSON.parse(e.socialLogins).facebook).profileImage}catch(t){return JSON.parse(e.socialLogins).facebook.profileImage}if(e.profilePicture)return e.profilePicture}else if("profileName"===String(t)){if(e.socialLogins){if(String(e.profileUpdate).indexOf("googleName")!==-1){var i=new Object;try{i=JSON.parse(JSON.parse(e.socialLogins).google)}catch(t){i=JSON.parse(e.socialLogins).google}return i.firstName+" "+i.lastName}if(String(e.profileUpdate).indexOf("facebookName")!==-1){var s=new Object;try{s=JSON.parse(JSON.parse(e.socialLogins).facebook)}catch(t){s=JSON.parse(e.socialLogins).facebook}return s.firstName+" "+s.lastName}}var n="";if(e.firstName&&(n=e.firstName),e.lastName&&(n=n+" "+e.lastName),n)return n}}else{if("profilePicture"===String(t)&&e.profilePicture)return e.profilePicture;if("profileName"===String(t)){var n="";if(e.firstName&&(n=e.firstName),e.lastName&&(n=n+" "+e.lastName),n)return n}}return"profilePicture"===String(t)?"http://lh6.ggpht.com/Pu_oOm8Ulc7U-eTdDB9hireVoQ4y59kCKo7m0M-bMfiq9-jSToRmWH0HoMZ1cVq_Zl9MoP4Ob4gquLsqJsJJX5kffROVHrpTl5c":"profileName"===String(t)?"":void 0},v=function(e,t){if(e&&t&&e.length>0&&t.length>0)for(var i in t)if(t[i]&&e.indexOf(t[i])!==-1)return!0;return!1},b=function(e){var t=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];return t[e]},y=function(e){var t=/^([\w-\.]+)@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.)|(([\w-]+\.)+))([a-zA-Z]{2,4}|[0-9]{1,3})(\]?)$/;return!!t.test(e)},_=function(e,t){if(e)for(var i in e)e[i]&&(e[i]=JSON.parse(e[i]),t[Object.keys(e[i])[0]]=e[i][Object.keys(e[i])[0]]);return t},w=function(e,t){return o2={},tempArr3=Object.keys(e).sort(function(i,s){return e[i][t]=e[i][t]?e[i][t]:"",e[s][t]=e[s][t]?e[s][t]:"",e[i][t].localeCompare(e[s][t])}),tempArr3.forEach(function(t){o2[t]=e[t]}),e=o2,delete o2,e},x=function(t){e.post("/runningAuction/"+t,function(t){t&&(t=parseInt(t),t&&t>0?e(".auction_count").html(t).show():e(".auction_count").html(0).hide())})},C=function(){function e(){return Math.ceil(4294967296*Math.random()).toString(16)}return e()+"-"+e()+"-"+e()+"-"+e()},k=function(t,i,s,n,a){"upload"===i?e.get("/get/session",{data:JSON.stringify({type:"university",service:"upload"})},function(i,s,o){i&&i.code&&200===i.code&&(o=t.elem,s=e("#"+o).find("input.file"),delete t.elem,e.ajaxFileUpload({url:i.data.result,secureuri:!1,fileElementId:s,dataType:"json",data:JSON.stringify({obj:t,id:t.id,crop:t.crop}),success:function(e){"create"===a?univCreate.response(e,n):"landing"===a?univLanding.response(e,t):"initial_setup_create"===a&&(console.log("have to send it back to initial setup"),e.type="save_univ",setup.save(e),console.log("after saving"))}}))}):e.ajax({type:"POST",url:"/University/new",data:{id:s,json:JSON.stringify(t)},success:function(e){console.log("comes here to repsonse after creating university"+a),"create"===a?univCreate.response(e,n):"landing"===a?univLanding.response(e,t):"initial_setup_create"===a&&(console.log("have to send it back to initial setup"),e.type="save_univ",setup.save(e),console.log("after saving"))}})},S=function(t,i,s,n,a){"upload"===i?e.get("/get/session",{data:JSON.stringify({type:"user",service:"upload"})},function(i,n,o){i&&i.code&&200===i.code&&(o=t.elem,n=e("#"+o).find("input.file"),delete t.elem,e.ajaxFileUpload({url:i.data.result,secureuri:!1,fileElementId:n,dataType:"json",data:JSON.stringify({obj:t,id:s,crop:t.crop}),success:function(e){"header"==a?Header.status(e):"landing"==a?univLanding.userResp(e):"success"==e.status?jchcomms.statusmsg("Saved !!"):jchcomms.statusmsg(e.status)}}))}):e.ajax({type:"POST",url:"/profileSettings/"+n+"/"+s,data:"profile="+JSON.stringify(t),success:function(e){"header"==a?Header.status(e):"landing"==a?univLanding.userResp(e):"success"==e.status?jchcomms.statusmsg("Saved !!"):jchcomms.statusmsg(e.status)}})};return{elipses:c,comma:h,nocomma:u,ms2ts:d,captialize:p,frequency:f,statusmsg:m,nri:g,AinA:v,rAc:x,vEmail:y,gMS:b,A2O:_,sortObjects:w,id:C,uUniv:k,uUser:S,mnths:n}}($);!function(e,t,i){i={open:function(e,s){$.ajax({url:"/get/"+t.pageAttr.univ+"/challengePeers",type:"GET",data:{data:JSON.stringify({name:s})},success:function(n){"Success"===n.msg&&(t.utils.setImage(t.dom("#ch_popUp").find("#ch_img"),n.data.challenge.image),t.dom("#ch_popUp").find("#ch_name").html(n.data.challenge.name),t.dom("#ch_popUp").find("#ch_name").data("name",s),t.dom("#ch_popUp").find("#ch_points").html(n.data.challenge.points),i.show("challenge_peers"),setTimeout(function(){t.dom("#ch_popUp").find(".search-other-challenge").focus()},500),n.data.ch_peers_list&&n.data.ch_peers_list.length>0?t.dom("#ch_popUp").find(".already_Ch").show():t.dom("#ch_popUp").find(".already_Ch").hide(),t.dom("#ch_popUp").find("#challengeMsg").attr("placeholder",""+t.utils.localeContentBuffer("CHALLENGE_MSG_PLACEHOLDER")+", "+n.data.challenge.name+"!"),t.dom("#popup").modal({backdrop:"static",keyboard:!1}).children("div#popup-blocks").attr("class",e))}})},alreadyChallenged:function(e){i.show("already_challenged"),t.dom("#ch_popUp").find("#alrdy_ch_usr").append('<img class="ch_peers_loader" src="/images/core/loader.gif" style="height:7px;">');var s=e.parents("div.modal-body:lt(1)").find("#ch_name").data("name");$.ajax({url:"/get/"+t.pageAttr.univ+"/challengePeers",type:"GET",data:{data:JSON.stringify({name:s,details:"true"})},success:function(e){t.dom("#ch_popUp").find("#alrdy_ch_usr").find(".ch_peers_loader").remove();var i=e.data.status_map,s=e.data.user_map;if("Success"===e.status)for(var n in i){var a=t.templates.already_ch_peer.clone(!0,!0);a.find("#usr_img").attr("src",s[i[n].userSemantic].profilePicUrl),a.find("#usr_name").html(s[i[n].userSemantic].firstName+" "+s[i[n].userSemantic].lastName),i[n].status.indexOf("requested")!==-1?(a.find(".progress").attr("class","progress"),a.find(".progress > div").attr("class","bar  bar-warning"),a.find(".progress > div").css("width","100px"),a.find(".progress-wrapper").attr("title",t.utils.localeContentBuffer("REQUESTED"))):i[n].status.indexOf("approved")!==-1?(a.find(".progress").attr("class","progress"),a.find(".progress > div").attr("class","bar  bar-success"),a.find(".progress > div").css("width","100px"),a.find(".progress-wrapper").attr("title",t.utils.localeContentBuffer("COMPLETED"))):i[n].status.indexOf("working on")===-1&&i[n].status.indexOf("dropped")===-1&&i[n].status.indexOf("challenged")===-1||(i[n].status.indexOf("working on")!=-1||i[n].status.indexOf("dropped")!=-1?(a.find(".progress").attr("class","progress"),a.find(".progress > div").attr("class","bar  bar-danger"),a.find(".progress > div").css("width","10px"),a.find(".progress-wrapper").attr("title",t.utils.localeContentBuffer("WORKING_ON"))):i[n].status.indexOf("challenged")!=-1&&a.find(".progress-wrapper").html("No Progress").css("margin","0px")),t.dom(".already-challenged-list").append(a)}}})},back:function(e){t.dom("div#alrdy_ch_usr").hide(),t.dom("div#new_CHP").show()},append:function(e){t.dom("#ch_popUp").find("#search_res").hide(),t.dom("#ch_popUp").find(".search-other-challenge").val("");var i=e.data("search-sel-user"),s=t.templates.selected_user_to_ch.clone(!0,!0);s.attr("id",i.semanticUserName),s.find("#usr_img").attr("src",i.profilePicUrl),s.find("b.name").html(i.firstName+" "+i.lastName);var n=!1;t.dom("#ch_popUp").find("#to-ch").children().each(function(){$(this).attr("id")===i.semanticUserName&&(n||(n=!0))}),n||t.dom("#ch_popUp").find("#to-ch").append(s),t.dom("#ch_popUp").find("#to-ch").show()},show:function(e){"challenge_peers"===e&&(t.dom("#ch_popUp").find("#alrdy_ch_usr").hide(),t.dom("#ch_popUp").find(".other-challenge-list").hide(),t.dom("#ch_popUp").find(".other-challenge-list > li").remove(),t.dom("#ch_popUp").find("#ch_grn_btn").html(t.utils.localeContentBuffer("CHALLENGE")),t.dom("#ch_popUp").find("#ch_grn_btn").removeClass("challenge_again"),t.dom("#ch_popUp").find("#search_res").hide(),t.dom("#ch_popUp").find("#search_res").find("li").remove(),t.dom("#ch_popUp").find("#challengeMsg").val(""),t.dom("#ch_popUp").find(".successful-challenge").hide(),t.dom("#ch_popUp").find(".successful-challenge").find("li").remove(),t.dom("#ch_popUp").find("#new_CHP").show(),t.dom("#ch_popUp").find("#new_CHP").show(),t.dom("#ch_popUp").find("#challengeMsg").html("")),"already_challenged"===e?(t.dom("#ch_popUp").find(".already-challenged-list").find("li").remove(),t.dom("#ch_popUp").find(".already-challenged-list").show(),t.dom("#ch_popUp").find("#alrdy_ch_usr").show("slide",{direction:"right"},1e3),t.dom("#ch_popUp").find(".successful-challenge").hide(),t.dom("#ch_popUp").find(".successful-challenge").find("li").remove(),t.dom("#ch_popUp").find("#new_CHP").hide()):"challenged_result"===e&&(t.dom("#ch_popUp").find(".successful-challenge").show(),t.dom("#ch_popUp").find(".successful-challenge").find("li").remove(),t.dom("#ch_popUp").find("#ch_grn_btn").html("Challenge Again"),t.dom("#ch_popUp").find("#ch_grn_btn").addClass("challenge_again"),t.dom("#ch_popUp").find("#to-ch").hide(),t.dom("#ch_popUp").find("#to-ch").find("li").remove(),t.dom("#ch_popUp").find("#new_CHP").hide())},post:function(e){if(e.hasClass("challenge_again"))return e.removeClass("challenge_again"),e.html(t.utils.localeContentBuffer("CHALLENGE")),void i.show("challenge_peers");var s=t.dom("#ch_popUp").find(".other-challenge-list"),n=e.parents().find("div.modal-body:lt(1)").find("#ch_name").data("name"),a=""!=t.dom("#ch_popUp").find("#challengeMsg").val()?t.dom("#ch_popUp").find("#challengeMsg").val():t.dom("#ch_popUp").find("#challengeMsg").attr("placeholder");if(s.children()&&s.children().length>0){var o=new Array;s.children().each(function(){$(this).attr("id")&&o.indexOf($(this).attr("id"))==-1&&o.push($(this).attr("id"))}),o.length>0?(e.html('<i class="challenge-process-icon icon-spinner icon-spin"></i>'+t.utils.localeContentBuffer("CHALLENGING")),$.ajax({url:"/post/"+t.pageAttr.univ+"/challenge_peers",type:"POST",data:{type:"save_challenge_peers",data:JSON.stringify({tosend:o,name:n,message:a})},success:function(e){if("Success"===e.status){i.show("challenged_result");var s=!0;for(var n in e.data){var a=t.templates.challenged_peer.clone(!0,!0);console.log(e.data[n]),console.log("image ::"+e.data[n].image),a.find("#usr_img").attr("src",e.data[n].image),a.find(".name").html(e.data[n].name),"success"===e.data[n].status?(a.find("#warning").remove(),a.find(".status").remove()):(a.find("#tick_Ok").remove(),a.find(".status").html(e.data[n].message),s&&(s=!1)),t.dom("#ch_popUp").find(".successful-challenge").append(a)}}}})):t.utils.statusMsg(t.utils.localeContentBuffer("SELECT_PEER_TO_CHALLENGE"),!0)}else t.utils.statusMsg(t.utils.localeContentBuffer("SELECT_PEER_TO_CHALLENGE"),!0),t.dom("#ch_popUp").find(".search-other-challenge").focus()},close:function(e){e.parents("li:lt(1)").remove()},search:function(e,i){if(40===i.keyCode)return t.dom("#ch_popUp").find("#search_res > li:first").addClass("select_focus"),!1;if(13===i.keyCode)return t.dom("#ch_popUp").find("#search_res > li.select_focus").trigger("click"),!1;var s="user",n=t.dom(".search-other-challenge").val().trim();t.dom("#ch_popUp").find(".chpeersSearchLoader").show(),n&&""!==n?$.ajax({url:"/post/"+t.pageAttr.univ+"/challenge_peers",type:"POST",data:{data:n,type:s},success:function(e){if(t.dom("#ch_popUp").find(".chpeersSearchLoader").hide(),"success"===e.status&&t.dom(".search-other-challenge").val().trim()===e.data.searchtoken){var i=e.data.result;if(t.dom("#ch_popUp").find("#challengeMsg").val(""),t.dom(".challenge_peers").find("ul#search_res").show(),t.dom(".challenge_peers").find("ul#search_res").find("li").remove(),Object.keys(i).length>0)for(var s in i){var n=t.templates.selected_search_user.clone(!0,!0);n.attr("data-search-sel-user",JSON.stringify(i[s])),n.find("img").attr("src",i[s].profilePicUrl),n.find("span").html(i[s].firstName+" "+i[s].lastName),t.dom(".challenge_peers").find("ul#search_res").append(n)}else t.dom(".challenge_peers").find("ul#search_res").append(t.templates.selected_search_user.clone(!0,!0).css("text-align","center").html(t.utils.localeContentBuffer("NO_SUCH_USER")));t.dom(".challenge_peers").find("ul#search_res").find("li:first").addClass("select_focus")}}}):(t.dom("#ch_popUp").find(".chpeersSearchLoader").hide(),t.dom(".challenge_peers").find("ul#search_res").hide(),t.dom(".challenge_peers").find("ul#search_res").find("li").remove())}},t=e.setReference("chothers",i)}(window),!function(e){"use strict";var t=null,i=function(e){var t=arguments,i=!0,s=1;return e=e.replace(/%s/g,function(){var e=t[s++];return"undefined"==typeof e?(i=!1,""):e}),i?e:""},s=function(t,i,s,n){var a="";return e.each(t,function(e,t){return t[i]!==n||(a=t[s],!1)}),a},n=function(t,i){var s=-1;return e.each(t,function(e,t){return t.field!==i||(s=e,!1)}),s},a=function(t){var i,s,n,a=0,o=[];for(i=0;i<t[0].length;i++)a+=t[0][i].colspan||1;for(i=0;i<t.length;i++)for(o[i]=[],s=0;s<a;s++)o[i][s]=!1;for(i=0;i<t.length;i++)for(s=0;s<t[i].length;s++){var r=t[i][s],l=r.rowspan||1,d=r.colspan||1,c=e.inArray(!1,o[i]);for(1===d&&(r.fieldIndex=c,"undefined"==typeof r.field&&(r.field=c)),n=0;n<l;n++)o[i+n][c]=!0;for(n=0;n<d;n++)o[i][c+n]=!0}},o=function(){if(null===t){var i,s,n=e("<p/>").addClass("fixed-table-scroll-inner"),a=e("<div/>").addClass("fixed-table-scroll-outer");a.append(n),e("body").append(a),i=n[0].offsetWidth,a.css("overflow","scroll"),s=n[0].offsetWidth,i===s&&(s=a[0].clientWidth),a.remove(),t=i-s}return t},r=function(t,s,n,a){var o=s;if("string"==typeof s){var r=s.split(".");r.length>1?(o=window,e.each(r,function(e,t){o=o[t]})):o=window[s]}return"object"==typeof o?o:"function"==typeof o?o.apply(t,n):!o&&"string"==typeof s&&i.apply(this,[s].concat(n))?i.apply(this,[s].concat(n)):a;
},l=function(t,i,s){var n=Object.getOwnPropertyNames(t),a=Object.getOwnPropertyNames(i),o="";if(s&&n.length!=a.length)return!1;for(var r=0;r<n.length;r++)if(o=n[r],e.inArray(o,a)>-1&&t[o]!==i[o])return!1;return!0},d=function(e){return"string"==typeof e?e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;"):e},c=function(t){var i=0;return t.children().each(function(){i<e(this).outerHeight(!0)&&(i=e(this).outerHeight(!0))}),i},h=function(e){for(var t in e){var i=t.split(/(?=[A-Z])/).join("-").toLowerCase();i!==t&&(e[i]=e[t],delete e[t])}return e},u=function(t,i){this.options=i,this.$el=e(t),this.$el_=this.$el.clone(),this.timeoutId_=0,this.timeoutFooter_=0,this.init()};u.DEFAULTS={classes:"table table-hover",locale:void 0,height:void 0,undefinedText:"-",sortName:void 0,sortOrder:"asc",striped:!1,columns:[[]],data:[],method:"get",url:void 0,ajax:void 0,cache:!0,contentType:"application/json",dataType:"json",ajaxOptions:{},queryParams:function(e){return e},queryParamsType:"limit",responseHandler:function(e){return e},pagination:!1,sidePagination:"client",totalRows:0,pageNumber:1,pageSize:10,pageList:[10,25,50,100],paginationHAlign:"right",paginationVAlign:"bottom",paginationDetailHAlign:"left",paginationFirstText:"&laquo;",paginationPreText:"&lsaquo;",paginationNextText:"&rsaquo;",paginationLastText:"&raquo;",search:!1,strictSearch:!1,searchAlign:"right",selectItemName:"btSelectItem",showHeader:!0,showFooter:!1,showColumns:!1,showPaginationSwitch:!1,showRefresh:!1,showToggle:!1,buttonsAlign:"right",smartDisplay:!0,minimumCountColumns:1,idField:void 0,uniqueId:void 0,cardView:!1,detailView:!1,detailFormatter:function(e,t){return""},trimOnSearch:!0,clickToSelect:!1,singleSelect:!1,toolbar:void 0,toolbarAlign:"left",checkboxHeader:!0,sortable:!0,silentSort:!0,maintainSelected:!1,searchTimeOut:500,searchText:"",iconSize:void 0,iconsPrefix:"glyphicon",icons:{paginationSwitchDown:"glyphicon-collapse-down icon-chevron-down",paginationSwitchUp:"glyphicon-collapse-up icon-chevron-up",refresh:"glyphicon-refresh icon-refresh",toggle:"glyphicon-list-alt icon-list-alt",columns:"glyphicon-th icon-th",detailOpen:"glyphicon-plus icon-plus",detailClose:"glyphicon-minus icon-minus"},rowStyle:function(e,t){return{}},rowAttributes:function(e,t){return{}},onAll:function(e,t){return!1},onClickCell:function(e,t,i,s){return!1},onDblClickCell:function(e,t,i,s){return!1},onClickRow:function(e,t){return!1},onDblClickRow:function(e,t){return!1},onSort:function(e,t){return!1},onCheck:function(e){return!1},onUncheck:function(e){return!1},onCheckAll:function(e){return!1},onUncheckAll:function(e){return!1},onCheckSome:function(e){return!1},onUncheckSome:function(e){return!1},onLoadSuccess:function(e){return!1},onLoadError:function(e){return!1},onColumnSwitch:function(e,t){return!1},onPageChange:function(e,t){return!1},onSearch:function(e){return!1},onToggle:function(e){return!1},onPreBody:function(e){return!1},onPostBody:function(){return!1},onPostHeader:function(){return!1},onExpandRow:function(e,t,i){return!1},onCollapseRow:function(e,t){return!1},onRefreshOptions:function(e){return!1},onResetView:function(){return!1}},u.LOCALES=[],u.LOCALES["en-US"]=u.LOCALES.en={formatLoadingMessage:function(){return"Loading, please wait..."},formatRecordsPerPage:function(e){return i("%s records per page",e)},formatShowingRows:function(e,t,s){return i("Showing %s to %s of %s rows",e,t,s)},formatSearch:function(){return"Search"},formatNoMatches:function(){return"No matching records found"},formatPaginationSwitch:function(){return"Hide/Show pagination"},formatRefresh:function(){return"Refresh"},formatToggle:function(){return"Toggle"},formatColumns:function(){return"Columns"},formatAllRows:function(){return"All"}},e.extend(u.DEFAULTS,u.LOCALES["en-US"]),u.COLUMN_DEFAULTS={radio:!1,checkbox:!1,checkboxEnabled:!0,field:void 0,title:void 0,titleTooltip:void 0,class:void 0,align:void 0,halign:void 0,falign:void 0,valign:void 0,width:void 0,sortable:!1,order:"asc",visible:!0,switchable:!0,clickToSelect:!0,formatter:void 0,footerFormatter:void 0,events:void 0,sorter:void 0,sortName:void 0,cellStyle:void 0,searchable:!0,searchFormatter:!0,cardVisible:!0},u.EVENTS={"all.bs.table":"onAll","click-cell.bs.table":"onClickCell","dbl-click-cell.bs.table":"onDblClickCell","click-row.bs.table":"onClickRow","dbl-click-row.bs.table":"onDblClickRow","sort.bs.table":"onSort","check.bs.table":"onCheck","uncheck.bs.table":"onUncheck","check-all.bs.table":"onCheckAll","uncheck-all.bs.table":"onUncheckAll","check-some.bs.table":"onCheckSome","uncheck-some.bs.table":"onUncheckSome","load-success.bs.table":"onLoadSuccess","load-error.bs.table":"onLoadError","column-switch.bs.table":"onColumnSwitch","page-change.bs.table":"onPageChange","search.bs.table":"onSearch","toggle.bs.table":"onToggle","pre-body.bs.table":"onPreBody","post-body.bs.table":"onPostBody","post-header.bs.table":"onPostHeader","expand-row.bs.table":"onExpandRow","collapse-row.bs.table":"onCollapseRow","refresh-options.bs.table":"onRefreshOptions","reset-view.bs.table":"onResetView"},u.prototype.init=function(){this.initLocale(),this.initContainer(),this.initTable(),this.initHeader(),this.initData(),this.initFooter(),this.initToolbar(),this.initPagination(),this.initBody(),this.initServer()},u.prototype.initLocale=function(){if(this.options.locale){var t=this.options.locale.split(/-|_/);t[0].toLowerCase(),t[1]&&t[1].toUpperCase(),e.fn.bootstrapTable.locales[this.options.locale]?e.extend(this.options,e.fn.bootstrapTable.locales[this.options.locale]):e.fn.bootstrapTable.locales[t.join("-")]?e.extend(this.options,e.fn.bootstrapTable.locales[t.join("-")]):e.fn.bootstrapTable.locales[t[0]]&&e.extend(this.options,e.fn.bootstrapTable.locales[t[0]])}},u.prototype.initContainer=function(){this.$container=e(['<div class="bootstrap-table">','<div class="fixed-table-toolbar"></div>',"top"===this.options.paginationVAlign||"both"===this.options.paginationVAlign?'<div class="fixed-table-pagination" style="clear: both;"></div>':"",'<div class="fixed-table-container">','<div class="fixed-table-header"><table></table></div>','<div class="fixed-table-body">','<div class="fixed-table-loading">',this.options.formatLoadingMessage(),"</div>","</div>",'<div class="fixed-table-footer"><table><tr></tr></table></div>',"bottom"===this.options.paginationVAlign||"both"===this.options.paginationVAlign?'<div class="fixed-table-pagination"></div>':"","</div>","</div>"].join("")),this.$container.insertAfter(this.$el),this.$tableContainer=this.$container.find(".fixed-table-container"),this.$tableHeader=this.$container.find(".fixed-table-header"),this.$tableBody=this.$container.find(".fixed-table-body"),this.$tableLoading=this.$container.find(".fixed-table-loading"),this.$tableFooter=this.$container.find(".fixed-table-footer"),this.$toolbar=this.$container.find(".fixed-table-toolbar"),this.$pagination=this.$container.find(".fixed-table-pagination"),this.$tableBody.append(this.$el),this.$container.after('<div class="clearfix"></div>'),this.$el.addClass(this.options.classes),this.options.striped&&this.$el.addClass("table-striped"),e.inArray("table-no-bordered",this.options.classes.split(" "))!==-1&&this.$tableContainer.addClass("table-no-bordered")},u.prototype.initTable=function(){var t=this,i=[],s=[];this.$header=this.$el.find("thead"),this.$header.length||(this.$header=e("<thead></thead>").appendTo(this.$el)),this.$header.find("tr").each(function(){var t=[];e(this).find("th").each(function(){t.push(e.extend({},{title:e(this).html(),class:e(this).attr("class"),titleTooltip:e(this).attr("title"),rowspan:e(this).attr("rowspan")?+e(this).attr("rowspan"):void 0,colspan:e(this).attr("colspan")?+e(this).attr("colspan"):void 0},e(this).data()))}),i.push(t)}),e.isArray(this.options.columns[0])||(this.options.columns=[this.options.columns]),this.options.columns=e.extend(!0,[],i,this.options.columns),this.columns=[],a(this.options.columns),e.each(this.options.columns,function(i,s){e.each(s,function(s,n){n=e.extend({},u.COLUMN_DEFAULTS,n),"undefined"!=typeof n.fieldIndex&&(t.columns[n.fieldIndex]=n),t.options.columns[i][s]=n})}),this.options.data.length||(this.$el.find("tbody tr").each(function(){var i={};i._id=e(this).attr("id"),i._class=e(this).attr("class"),i._data=h(e(this).data()),e(this).find("td").each(function(s){var n=t.columns[s].field;i[n]=e(this).html(),i["_"+n+"_id"]=e(this).attr("id"),i["_"+n+"_class"]=e(this).attr("class"),i["_"+n+"_rowspan"]=e(this).attr("rowspan"),i["_"+n+"_title"]=e(this).attr("title"),i["_"+n+"_data"]=h(e(this).data())}),s.push(i)}),this.options.data=s)},u.prototype.initHeader=function(){var t=this,s={},n=[];this.header={fields:[],styles:[],classes:[],formatters:[],events:[],sorters:[],sortNames:[],cellStyles:[],searchables:[]},e.each(this.options.columns,function(a,o){n.push("<tr>"),0==a&&!t.options.cardView&&t.options.detailView&&n.push(i('<th class="detail" rowspan="%s"><div class="fht-cell"></div></th>',t.options.columns.length)),e.each(o,function(e,a){var o="",r="",l="",d="",c=i(' class="%s"',a.class),h=(t.options.sortOrder||a.order,"px"),u=a.width;if(void 0===a.width||t.options.cardView||"string"==typeof a.width&&a.width.indexOf("%")!==-1&&(h="%"),a.width&&"string"==typeof a.width&&(u=a.width.replace("%","").replace("px","")),r=i("text-align: %s; ",a.halign?a.halign:a.align),l=i("text-align: %s; ",a.align),d=i("vertical-align: %s; ",a.valign),d+=i("width: %s%s; ",a.checkbox||a.radio?36:u,h),"undefined"!=typeof a.fieldIndex){if(t.header.fields[a.fieldIndex]=a.field,t.header.styles[a.fieldIndex]=l+d,t.header.classes[a.fieldIndex]=c,t.header.formatters[a.fieldIndex]=a.formatter,t.header.events[a.fieldIndex]=a.events,t.header.sorters[a.fieldIndex]=a.sorter,t.header.sortNames[a.fieldIndex]=a.sortName,t.header.cellStyles[a.fieldIndex]=a.cellStyle,t.header.searchables[a.fieldIndex]=a.searchable,!a.visible)return;if(t.options.cardView&&!a.cardVisible)return;s[a.field]=a}n.push("<th"+i(' title="%s"',a.titleTooltip),a.checkbox||a.radio?i(' class="bs-checkbox %s"',a.class||""):c,i(' style="%s"',r+d),i(' rowspan="%s"',a.rowspan),i(' colspan="%s"',a.colspan),i(' data-field="%s"',a.field),">"),n.push(i('<div class="th-inner %s">',t.options.sortable&&a.sortable?"sortable both":"")),o=a.title,a.checkbox&&(!t.options.singleSelect&&t.options.checkboxHeader&&(o='<input name="btSelectAll" type="checkbox" />'),t.header.stateField=a.field),a.radio&&(o="",t.header.stateField=a.field,t.options.singleSelect=!0),n.push(o),n.push("</div>"),n.push('<div class="fht-cell"></div>'),n.push("</div>"),n.push("</th>")}),n.push("</tr>")}),this.$header.html(n.join("")),this.$header.find("th[data-field]").each(function(t){e(this).data(s[e(this).data("field")])}),this.$container.off("click",".th-inner").on("click",".th-inner",function(i){t.options.sortable&&e(this).parent().data().sortable&&t.onSort(i)}),!this.options.showHeader||this.options.cardView?(this.$header.hide(),this.$tableHeader.hide(),this.$tableLoading.css("top",0)):(this.$header.show(),this.$tableHeader.show(),this.$tableLoading.css("top",this.$header.outerHeight()+1),this.getCaret()),this.$selectAll=this.$header.find('[name="btSelectAll"]'),this.$container.off("click",'[name="btSelectAll"]').on("click",'[name="btSelectAll"]',function(){var i=e(this).prop("checked");t[i?"checkAll":"uncheckAll"]()})},u.prototype.initFooter=function(){!this.options.showFooter||this.options.cardView?this.$tableFooter.hide():this.$tableFooter.show()},u.prototype.initData=function(e,t){"append"===t?this.data=this.data.concat(e):"prepend"===t?this.data=[].concat(e).concat(this.data):this.data=e||this.options.data,"append"===t?this.options.data=this.options.data.concat(e):"prepend"===t?this.options.data=[].concat(e).concat(this.options.data):this.options.data=this.data,"server"!==this.options.sidePagination&&this.initSort()},u.prototype.initSort=function(){var t=this,i=this.options.sortName,s="desc"===this.options.sortOrder?-1:1,n=e.inArray(this.options.sortName,this.header.fields);n!==-1&&this.data.sort(function(a,o){t.header.sortNames[n]&&(i=t.header.sortNames[n]);var l=a[i],d=o[i],c=r(t.header,t.header.sorters[n],[l,d]);return void 0!==c?s*c:(void 0!==l&&null!==l||(l=""),void 0!==d&&null!==d||(d=""),e.isNumeric(l)&&e.isNumeric(d)?(l=parseFloat(l),d=parseFloat(d),l<d?s*-1:s):l===d?0:("string"!=typeof l&&(l=l.toString()),l.localeCompare(d)===-1?s*-1:s))})},u.prototype.onSort=function(t){var i=e(t.currentTarget).parent(),s=this.$header.find("th").eq(i.index());return this.$header.add(this.$header_).find("span.order").remove(),this.options.sortName===i.data("field")?this.options.sortOrder="asc"===this.options.sortOrder?"desc":"asc":(this.options.sortName=i.data("field"),this.options.sortOrder="asc"===i.data("order")?"desc":"asc"),this.trigger("sort",this.options.sortName,this.options.sortOrder),i.add(s).data("order",this.options.sortOrder),this.getCaret(),"server"===this.options.sidePagination?void this.initServer(this.options.silentSort):(this.initSort(),void this.initBody())},u.prototype.initToolbar=function(){var t,s,a=this,o=[],l=0,d=0;this.$toolbar.html(""),"string"==typeof this.options.toolbar&&e(i('<div class="bars pull-%s"></div>',this.options.toolbarAlign)).appendTo(this.$toolbar).append(e(this.options.toolbar)),o=[i('<div class="columns columns-%s btn-group pull-%s">',this.options.buttonsAlign,this.options.buttonsAlign)],"string"==typeof this.options.icons&&(this.options.icons=r(null,this.options.icons)),this.options.showPaginationSwitch&&o.push(i('<button class="btn btn-default" type="button" name="paginationSwitch" title="%s">',this.options.formatPaginationSwitch()),i('<i class="%s %s"></i>',this.options.iconsPrefix,this.options.icons.paginationSwitchDown),"</button>"),this.options.showRefresh&&o.push(i('<button class="btn btn-default'+(void 0===this.options.iconSize?"":" btn-"+this.options.iconSize)+'" type="button" name="refresh" title="%s">',this.options.formatRefresh()),i('<i class="%s %s"></i>',this.options.iconsPrefix,this.options.icons.refresh),"</button>"),this.options.showToggle&&o.push(i('<button class="btn btn-default'+(void 0===this.options.iconSize?"":" btn-"+this.options.iconSize)+'" type="button" name="toggle" title="%s">',this.options.formatToggle()),i('<i class="%s %s"></i>',this.options.iconsPrefix,this.options.icons.toggle),"</button>"),this.options.showColumns&&(o.push(i('<div class="keep-open btn-group" title="%s">',this.options.formatColumns()),'<button type="button" class="btn btn-default'+(void 0==this.options.iconSize?"":" btn-"+this.options.iconSize)+' dropdown-toggle" data-toggle="dropdown">',i('<i class="%s %s"></i>',this.options.iconsPrefix,this.options.icons.columns),' <span class="caret"></span>',"</button>",'<ul class="dropdown-menu" role="menu">'),e.each(this.columns,function(e,t){if(!t.radio&&!t.checkbox&&(!a.options.cardView||t.cardVisible)){var s=t.visible?' checked="checked"':"";t.switchable&&(o.push(i('<li><label><input type="checkbox" data-field="%s" value="%s"%s> %s</label></li>',t.field,e,s,t.title)),d++)}}),o.push("</ul>","</div>")),o.push("</div>"),(this.showToolbar||o.length>2)&&this.$toolbar.append(o.join("")),this.options.showPaginationSwitch&&this.$toolbar.find('button[name="paginationSwitch"]').off("click").on("click",e.proxy(this.togglePagination,this)),this.options.showRefresh&&this.$toolbar.find('button[name="refresh"]').off("click").on("click",e.proxy(this.refresh,this)),this.options.showToggle&&this.$toolbar.find('button[name="toggle"]').off("click").on("click",function(){a.toggleView()}),this.options.showColumns&&(t=this.$toolbar.find(".keep-open"),d<=this.options.minimumCountColumns&&t.find("input").prop("disabled",!0),t.find("li").off("click").on("click",function(e){e.stopImmediatePropagation()}),t.find("input").off("click").on("click",function(){var t=e(this);a.toggleColumn(n(a.columns,e(this).data("field")),t.prop("checked"),!1),a.trigger("column-switch",e(this).data("field"),t.prop("checked"))})),this.options.search&&(o=[],o.push('<div class="pull-'+this.options.searchAlign+' search">',i('<input class="form-control'+(void 0===this.options.iconSize?"":" input-"+this.options.iconSize)+'" type="text" placeholder="%s">',this.options.formatSearch()),"</div>"),this.$toolbar.append(o.join("")),s=this.$toolbar.find(".search input"),s.off("keyup drop").on("keyup drop",function(e){clearTimeout(l),l=setTimeout(function(){a.onSearch(e)},a.options.searchTimeOut)}),""!==this.options.searchText&&(s.val(this.options.searchText),clearTimeout(l),l=setTimeout(function(){s.trigger("keyup")},a.options.searchTimeOut)))},u.prototype.onSearch=function(t){var i=e.trim(e(t.currentTarget).val());this.options.trimOnSearch&&e(t.currentTarget).val()!==i&&e(t.currentTarget).val(i),i!==this.searchText&&(this.searchText=i,this.options.pageNumber=1,this.initSearch(),this.updatePagination(),this.trigger("search",i))},u.prototype.initSearch=function(){var t=this;if("server"!==this.options.sidePagination){var i=this.searchText&&this.searchText.toLowerCase(),s=e.isEmptyObject(this.filterColumns)?null:this.filterColumns;this.data=s?e.grep(this.options.data,function(e,t){for(var i in s)if(e[i]!==s[i])return!1;return!0}):this.options.data,this.data=i?e.grep(this.data,function(s,a){for(var o in s){o=e.isNumeric(o)?parseInt(o,10):o;var l=s[o],d=t.columns[n(t.columns,o)],c=e.inArray(o,t.header.fields);d&&d.searchFormatter&&(l=r(d,t.header.formatters[c],[l,s,a],l));var h=e.inArray(o,t.header.fields);if(h!==-1&&t.header.searchables[h]&&("string"==typeof l||"number"==typeof l))if(t.options.strictSearch){if((l+"").toLowerCase()===i)return!0}else if((l+"").toLowerCase().indexOf(i)!==-1)return!0}return!1}):this.data}},u.prototype.initPagination=function(){if(!this.options.pagination)return void this.$pagination.hide();this.$pagination.show();var t,s,n,a,o,r,l,d,c,h=this,u=[],p=!1,f=this.getData();if("server"!==this.options.sidePagination&&(this.options.totalRows=f.length),this.totalPages=0,this.options.totalRows){if(this.options.pageSize===this.options.formatAllRows())this.options.pageSize=this.options.totalRows,p=!0;else if(this.options.pageSize===this.options.totalRows){var m="string"==typeof this.options.pageList?this.options.pageList.replace("[","").replace("]","").replace(/ /g,"").toLowerCase().split(","):this.options.pageList;m.indexOf(this.options.formatAllRows().toLowerCase())>-1&&(p=!0)}this.totalPages=~~((this.options.totalRows-1)/this.options.pageSize)+1,this.options.totalPages=this.totalPages}this.totalPages>0&&this.options.pageNumber>this.totalPages&&(this.options.pageNumber=this.totalPages),this.pageFrom=(this.options.pageNumber-1)*this.options.pageSize+1,this.pageTo=this.options.pageNumber*this.options.pageSize,this.pageTo>this.options.totalRows&&(this.pageTo=this.options.totalRows),u.push('<div class="pull-'+this.options.paginationDetailHAlign+' pagination-detail">','<span class="pagination-info">',this.options.formatShowingRows(this.pageFrom,this.pageTo,this.options.totalRows),"</span>"),u.push('<span class="page-list">');var g=[i('<span class="btn-group %s">',"top"===this.options.paginationVAlign||"both"===this.options.paginationVAlign?"dropdown":"dropup"),'<button type="button" class="btn btn-default '+(void 0===this.options.iconSize?"":" btn-"+this.options.iconSize)+' dropdown-toggle" data-toggle="dropdown">','<span class="page-size">',p?this.options.formatAllRows():this.options.pageSize,"</span>",' <span class="caret"></span>',"</button>",'<ul class="dropdown-menu" role="menu">'],v=this.options.pageList;if("string"==typeof this.options.pageList){var b=this.options.pageList.replace("[","").replace("]","").replace(/ /g,"").split(",");v=[],e.each(b,function(e,t){v.push(t.toUpperCase()===h.options.formatAllRows().toUpperCase()?h.options.formatAllRows():+t)})}for(e.each(v,function(e,t){if(!h.options.smartDisplay||0===e||v[e-1]<=h.options.totalRows){var s;s=p?t===h.options.formatAllRows()?' class="active"':"":t===h.options.pageSize?' class="active"':"",g.push(i('<li%s><a href="javascript:void(0)">%s</a></li>',s,t))}}),g.push("</ul></span>"),u.push(this.options.formatRecordsPerPage(g.join(""))),u.push("</span>"),u.push("</div>",'<div class="pull-'+this.options.paginationHAlign+' pagination">','<ul class="pagination'+(void 0===this.options.iconSize?"":" pagination-"+this.options.iconSize)+'">','<li class="page-first"><a href="javascript:void(0)">'+this.options.paginationFirstText+"</a></li>",'<li class="page-pre"><a href="javascript:void(0)">'+this.options.paginationPreText+"</a></li>"),this.totalPages<5?(s=1,n=this.totalPages):(s=this.options.pageNumber-2,n=s+4,s<1&&(s=1,n=5),n>this.totalPages&&(n=this.totalPages,s=n-4)),t=s;t<=n;t++)u.push('<li class="page-number'+(t===this.options.pageNumber?" active":"")+'">','<a href="javascript:void(0)">',t,"</a>","</li>");u.push('<li class="page-next"><a href="javascript:void(0)">'+this.options.paginationNextText+"</a></li>",'<li class="page-last"><a href="javascript:void(0)">'+this.options.paginationLastText+"</a></li>","</ul>","</div>"),this.$pagination.html(u.join("")),a=this.$pagination.find(".page-list a"),o=this.$pagination.find(".page-first"),r=this.$pagination.find(".page-pre"),l=this.$pagination.find(".page-next"),d=this.$pagination.find(".page-last"),c=this.$pagination.find(".page-number"),this.options.pageNumber<=1&&(o.addClass("disabled"),r.addClass("disabled")),this.options.pageNumber>=this.totalPages&&(l.addClass("disabled"),d.addClass("disabled")),this.options.smartDisplay&&(this.totalPages<=1&&this.$pagination.find("div.pagination").hide(),(v.length<2||this.options.totalRows<=v[0])&&this.$pagination.find("span.page-list").hide(),this.$pagination[this.getData().length?"show":"hide"]()),p&&(this.options.pageSize=this.options.formatAllRows()),a.off("click").on("click",e.proxy(this.onPageListChange,this)),o.off("click").on("click",e.proxy(this.onPageFirst,this)),r.off("click").on("click",e.proxy(this.onPagePre,this)),l.off("click").on("click",e.proxy(this.onPageNext,this)),d.off("click").on("click",e.proxy(this.onPageLast,this)),c.off("click").on("click",e.proxy(this.onPageNumber,this))},u.prototype.updatePagination=function(t){t&&e(t.currentTarget).hasClass("disabled")||(this.options.maintainSelected||this.resetRows(),this.initPagination(),"server"===this.options.sidePagination?this.initServer():this.initBody(),this.trigger("page-change",this.options.pageNumber,this.options.pageSize))},u.prototype.onPageListChange=function(t){var i=e(t.currentTarget);i.parent().addClass("active").siblings().removeClass("active"),this.options.pageSize=i.text().toUpperCase()===this.options.formatAllRows().toUpperCase()?this.options.formatAllRows():+i.text(),this.$toolbar.find(".page-size").text(this.options.pageSize),this.updatePagination(t)},u.prototype.onPageFirst=function(e){this.options.pageNumber=1,this.updatePagination(e)},u.prototype.onPagePre=function(e){this.options.pageNumber--,this.updatePagination(e)},u.prototype.onPageNext=function(e){this.options.pageNumber++,this.updatePagination(e)},u.prototype.onPageLast=function(e){this.options.pageNumber=this.totalPages,this.updatePagination(e)},u.prototype.onPageNumber=function(t){this.options.pageNumber!==+e(t.currentTarget).text()&&(this.options.pageNumber=+e(t.currentTarget).text(),this.updatePagination(t))},u.prototype.initBody=function(t){var a=this,o=[],l=this.getData();this.trigger("pre-body",l),this.$body=this.$el.find("tbody"),this.$body.length||(this.$body=e("<tbody></tbody>").appendTo(this.$el)),this.options.pagination&&"server"!==this.options.sidePagination||(this.pageFrom=1,this.pageTo=l.length);for(var c=this.pageFrom-1;c<this.pageTo;c++){var h,u=l[c],p={},f=[],m="",g={},v=[];if(p=r(this.options,this.options.rowStyle,[u,c],p),p&&p.css)for(h in p.css)f.push(h+": "+p.css[h]);if(g=r(this.options,this.options.rowAttributes,[u,c],g))for(h in g)v.push(i('%s="%s"',h,d(g[h])));u._data&&!e.isEmptyObject(u._data)&&e.each(u._data,function(e,t){"index"!==e&&(m+=i(' data-%s="%s"',e,t))}),o.push("<tr",i(" %s",v.join(" ")),i(' id="%s"',e.isArray(u)?void 0:u._id),i(' class="%s"',p.classes||(e.isArray(u)?void 0:u._class)),i(' data-index="%s"',c),i(' data-uniqueid="%s"',u[this.options.uniqueId]),i("%s",m),">"),this.options.cardView&&o.push(i('<td colspan="%s">',this.header.fields.length)),!this.options.cardView&&this.options.detailView&&o.push("<td>",'<a class="detail-icon" href="javascript:">',i('<i class="%s %s"></i>',this.options.iconsPrefix,this.options.icons.detailOpen),"</a>","</td>"),e.each(this.header.fields,function(t,l){var d="",h=u[l],m="",g={},v="",b=a.header.classes[t],y="",_="",w="",x=a.columns[n(a.columns,l)];if(x.visible){if(p=i('style="%s"',f.concat(a.header.styles[t]).join("; ")),h=r(x,a.header.formatters[t],[h,u,c],h),u["_"+l+"_id"]&&(v=i(' id="%s"',u["_"+l+"_id"])),u["_"+l+"_class"]&&(b=i(' class="%s"',u["_"+l+"_class"])),u["_"+l+"_rowspan"]&&(_=i(' rowspan="%s"',u["_"+l+"_rowspan"])),u["_"+l+"_title"]&&(w=i(' title="%s"',u["_"+l+"_title"])),g=r(a.header,a.header.cellStyles[t],[h,u,c],g),g.classes&&(b=i(' class="%s"',g.classes)),g.css){var C=[];for(var k in g.css)C.push(k+": "+g.css[k]);p=i('style="%s"',C.concat(a.header.styles[t]).join("; "))}u["_"+l+"_data"]&&!e.isEmptyObject(u["_"+l+"_data"])&&e.each(u["_"+l+"_data"],function(e,t){"index"!==e&&(y+=i(' data-%s="%s"',e,t))}),x.checkbox||x.radio?(m=x.checkbox?"checkbox":m,m=x.radio?"radio":m,d=[a.options.cardView?'<div class="card-view">':'<td class="bs-checkbox">',"<input"+i(' data-index="%s"',c)+i(' name="%s"',a.options.selectItemName)+i(' type="%s"',m)+i(' value="%s"',u[a.options.idField])+i(' checked="%s"',h===!0||h&&h.checked?"checked":void 0)+i(' disabled="%s"',!x.checkboxEnabled||h&&h.disabled?"disabled":void 0)+" />",a.options.cardView?"</div>":"</td>"].join(""),u[a.header.stateField]=h===!0||h&&h.checked):(h="undefined"==typeof h||null===h?a.options.undefinedText:h,d=a.options.cardView?['<div class="card-view">',a.options.showHeader?i('<span class="title" %s>%s</span>',p,s(a.columns,"field","title",l)):"",i('<span class="value">%s</span>',h),"</div>"].join(""):[i("<td%s %s %s %s %s %s>",v,b,p,y,_,w),h,"</td>"].join(""),a.options.cardView&&a.options.smartDisplay&&""===h&&(d="")),o.push(d)}}),this.options.cardView&&o.push("</td>"),o.push("</tr>")}o.length||o.push('<tr class="no-records-found">',i('<td colspan="%s">%s</td>',this.$header.find("th").length,this.options.formatNoMatches()),"</tr>"),this.$body.html(o.join("")),t||this.scrollTo(0),this.$body.find("> tr[data-index] > td").off("click dblclick").on("click dblclick",function(t){var s=e(this),o=s.parent(),r=a.data[o.data("index")],l=s[0].cellIndex,d=a.header.fields[a.options.detailView&&!a.options.cardView?l-1:l],c=a.columns[n(a.columns,d)],h=r[d];if(!s.find(".detail-icon").length&&(a.trigger("click"===t.type?"click-cell":"dbl-click-cell",d,h,r,s),a.trigger("click"===t.type?"click-row":"dbl-click-row",r,o),"click"===t.type&&a.options.clickToSelect&&c.clickToSelect)){var u=o.find(i('[name="%s"]',a.options.selectItemName));u.length&&u[0].click()}}),this.$body.find("> tr[data-index] > td > .detail-icon").off("click").on("click",function(){var t=e(this),s=t.parent().parent(),n=s.data("index"),o=l[n];s.next().is("tr.detail-view")?(t.find("i").attr("class",i("%s %s",a.options.iconsPrefix,a.options.icons.detailOpen)),s.next().remove(),a.trigger("collapse-row",n,o)):(t.find("i").attr("class",i("%s %s",a.options.iconsPrefix,a.options.icons.detailClose)),s.after(i('<tr class="detail-view"><td colspan="%s">%s</td></tr>',s.find("td").length,r(a.options,a.options.detailFormatter,[n,o],""))),a.trigger("expand-row",n,o,s.next().find("td"))),a.resetView()}),this.$selectItem=this.$body.find(i('[name="%s"]',this.options.selectItemName)),this.$selectItem.off("click").on("click",function(t){t.stopImmediatePropagation();var i=e(this).prop("checked"),s=a.data[e(this).data("index")];s[a.header.stateField]=i,a.options.singleSelect&&(a.$selectItem.not(this).each(function(){a.data[e(this).data("index")][a.header.stateField]=!1}),a.$selectItem.filter(":checked").not(this).prop("checked",!1)),a.updateSelected(),a.trigger(i?"check":"uncheck",s)}),e.each(this.header.events,function(t,i){if(i){"string"==typeof i&&(i=r(null,i));var s=a.header.fields[t],n=e.inArray(s,a.getVisibleFields());a.options.detailView&&!a.options.cardView&&(n+=1);for(var o in i)a.$body.find("tr").each(function(){var t=e(this),r=t.find(a.options.cardView?".card-view":"td").eq(n),l=o.indexOf(" "),d=o.substring(0,l),c=o.substring(l+1),h=i[o];r.find(c).off(d).on(d,function(e){var i=t.data("index"),n=a.data[i],o=n[s];h.apply(this,[e,o,n,i])})})}}),this.updateSelected(),this.resetView(),this.trigger("post-body")},u.prototype.initServer=function(t,i){var s,n=this,a={},o={pageSize:this.options.pageSize===this.options.formatAllRows()?this.options.totalRows:this.options.pageSize,pageNumber:this.options.pageNumber,searchText:this.searchText,sortName:this.options.sortName,sortOrder:this.options.sortOrder};(this.options.url||this.options.ajax)&&("limit"===this.options.queryParamsType&&(o={search:o.searchText,sort:o.sortName,order:o.sortOrder},this.options.pagination&&(o.limit=this.options.pageSize===this.options.formatAllRows()?this.options.totalRows:this.options.pageSize,o.offset=this.options.pageSize===this.options.formatAllRows()?0:this.options.pageSize*(this.options.pageNumber-1))),e.isEmptyObject(this.filterColumnsPartial)||(o.filter=JSON.stringify(this.filterColumnsPartial,null)),a=r(this.options,this.options.queryParams,[o],a),e.extend(a,i||{}),a!==!1&&(t||this.$tableLoading.show(),s=e.extend({},r(null,this.options.ajaxOptions),{type:this.options.method,url:this.options.url,data:"application/json"===this.options.contentType&&"post"===this.options.method?JSON.stringify(a):a,cache:this.options.cache,contentType:this.options.contentType,dataType:this.options.dataType,success:function(e){e=r(n.options,n.options.responseHandler,[e],e),n.load(e),n.trigger("load-success",e)},error:function(e){n.trigger("load-error",e.status)},complete:function(){t||n.$tableLoading.hide()}}),this.options.ajax?r(this,this.options.ajax,[s],null):e.ajax(s)))},u.prototype.getCaret=function(){var t=this;e.each(this.$header.find("th"),function(i,s){e(s).find(".sortable").removeClass("desc asc").addClass(e(s).data("field")===t.options.sortName?t.options.sortOrder:"both")})},u.prototype.updateSelected=function(){var t=this.$selectItem.filter(":enabled").length===this.$selectItem.filter(":enabled").filter(":checked").length;this.$selectAll.add(this.$selectAll_).prop("checked",t),this.$selectItem.each(function(){e(this).closest("tr")[e(this).prop("checked")?"addClass":"removeClass"]("selected")})},u.prototype.updateRows=function(){var t=this;this.$selectItem.each(function(){t.data[e(this).data("index")][t.header.stateField]=e(this).prop("checked")})},u.prototype.resetRows=function(){var t=this;e.each(this.data,function(e,i){t.$selectAll.prop("checked",!1),t.$selectItem.prop("checked",!1),t.header.stateField&&(i[t.header.stateField]=!1)})},u.prototype.trigger=function(t){var i=Array.prototype.slice.call(arguments,1);t+=".bs.table",this.options[u.EVENTS[t]].apply(this.options,i),this.$el.trigger(e.Event(t),i),this.options.onAll(t,i),this.$el.trigger(e.Event("all.bs.table"),[t,i])},u.prototype.resetHeader=function(){clearTimeout(this.timeoutId_),this.timeoutId_=setTimeout(e.proxy(this.fitHeader,this),this.$el.is(":hidden")?100:0)},u.prototype.fitHeader=function(){var t,s,n=this;if(n.$el.is(":hidden"))return void(n.timeoutId_=setTimeout(e.proxy(n.fitHeader,n),100));t=this.$tableBody.get(0),s=t.scrollWidth>t.clientWidth&&t.scrollHeight>t.clientHeight+this.$header.outerHeight()?o():0,this.$el.css("margin-top",-this.$header.outerHeight()),this.$header_=this.$header.clone(!0,!0),this.$selectAll_=this.$header_.find('[name="btSelectAll"]'),this.$tableHeader.css({"margin-right":s}).find("table").css("width",this.$el.outerWidth()).html("").attr("class",this.$el.attr("class")).append(this.$header_),
this.$header.find("th[data-field]").each(function(t){n.$header_.find(i('th[data-field="%s"]',e(this).data("field"))).data(e(this).data())});var a=this.getVisibleFields();this.$body.find("tr:first-child:not(.no-records-found) > *").each(function(t){var s=e(this),o=t;n.options.detailView&&!n.options.cardView&&(0===t&&n.$header_.find("th.detail").find(".fht-cell").width(s.innerWidth()),o=t-1),n.$header_.find(i('th[data-field="%s"]',a[o])).find(".fht-cell").width(s.innerWidth())}),this.$tableBody.off("scroll").on("scroll",function(){n.$tableHeader.scrollLeft(e(this).scrollLeft()),n.options.showFooter&&!n.options.cardView&&n.$tableFooter.scrollLeft(e(this).scrollLeft())}),n.trigger("post-header")},u.prototype.resetFooter=function(){var t=this,s=t.getData(),n=[];this.options.showFooter&&!this.options.cardView&&(!this.options.cardView&&this.options.detailView&&n.push('<td><div class="th-inner">&nbsp;</div><div class="fht-cell"></div></td>'),e.each(this.columns,function(e,a){var o="",l="",d=i(' class="%s"',a.class);a.visible&&(t.options.cardView&&!a.cardVisible||(o=i("text-align: %s; ",a.falign?a.falign:a.align),l=i("vertical-align: %s; ",a.valign),n.push("<td",d,i(' style="%s"',o+l),">"),n.push('<div class="th-inner">'),n.push(r(a,a.footerFormatter,[s],"&nbsp;")||"&nbsp;"),n.push("</div>"),n.push('<div class="fht-cell"></div>'),n.push("</div>"),n.push("</td>")))}),this.$tableFooter.find("tr").html(n.join("")),clearTimeout(this.timeoutFooter_),this.timeoutFooter_=setTimeout(e.proxy(this.fitFooter,this),this.$el.is(":hidden")?100:0))},u.prototype.fitFooter=function(){var t,i,s;return clearTimeout(this.timeoutFooter_),this.$el.is(":hidden")?void(this.timeoutFooter_=setTimeout(e.proxy(this.fitFooter,this),100)):(i=this.$el.css("width"),s=i>this.$tableBody.width()?o():0,this.$tableFooter.css({"margin-right":s}).find("table").css("width",i).attr("class",this.$el.attr("class")),t=this.$tableFooter.find("td"),void this.$body.find("tr:first-child:not(.no-records-found) > *").each(function(i){var s=e(this);t.eq(i).find(".fht-cell").width(s.innerWidth())}))},u.prototype.toggleColumn=function(e,t,s){if(e!==-1&&(this.columns[e].visible=t,this.initHeader(),this.initSearch(),this.initPagination(),this.initBody(),this.options.showColumns)){var n=this.$toolbar.find(".keep-open input").prop("disabled",!1);s&&n.filter(i('[value="%s"]',e)).prop("checked",t),n.filter(":checked").length<=this.options.minimumCountColumns&&n.filter(":checked").prop("disabled",!0)}},u.prototype.toggleRow=function(t,s,n){t!==-1&&e(this.$body[0]).children().filter(i(s?'[data-uniqueid="%s"]':'[data-index="%s"]',t))[n?"show":"hide"]()},u.prototype.getVisibleFields=function(){var t=this,i=[];return e.each(this.header.fields,function(e,s){var a=t.columns[n(t.columns,s)];a.visible&&i.push(s)}),i},u.prototype.resetView=function(e){var t=0;if(e&&e.height&&(this.options.height=e.height),this.$selectAll.prop("checked",this.$selectItem.length>0&&this.$selectItem.length===this.$selectItem.filter(":checked").length),this.options.height){var i=c(this.$toolbar),s=c(this.$pagination),n=this.options.height-i-s;this.$tableContainer.css("height",n+"px")}return this.options.cardView?(this.$el.css("margin-top","0"),void this.$tableContainer.css("padding-bottom","0")):(this.options.showHeader&&this.options.height?(this.$tableHeader.show(),this.resetHeader(),t+=this.$header.outerHeight()):(this.$tableHeader.hide(),this.trigger("post-header")),this.options.showFooter&&(this.resetFooter(),this.options.height&&(t+=this.$tableFooter.outerHeight()+1)),this.getCaret(),this.$tableContainer.css("padding-bottom",t+"px"),void this.trigger("reset-view"))},u.prototype.getData=function(t){return!this.searchText&&e.isEmptyObject(this.filterColumns)&&e.isEmptyObject(this.filterColumnsPartial)?t?this.options.data.slice(this.pageFrom-1,this.pageTo):this.options.data:t?this.data.slice(this.pageFrom-1,this.pageTo):this.data},u.prototype.load=function(t){var i=!1;"server"===this.options.sidePagination?(this.options.totalRows=t.total,i=t.fixedScroll,t=t.rows):e.isArray(t)||(i=t.fixedScroll,t=t.data),this.initData(t),this.initSearch(),this.initPagination(),this.initBody(i)},u.prototype.append=function(e){this.initData(e,"append"),this.initSearch(),this.initPagination(),this.initBody(!0)},u.prototype.prepend=function(e){this.initData(e,"prepend"),this.initSearch(),this.initPagination(),this.initBody(!0)},u.prototype.remove=function(t){var i,s,n=this.options.data.length;if(t.hasOwnProperty("field")&&t.hasOwnProperty("values")){for(i=n-1;i>=0;i--)s=this.options.data[i],s.hasOwnProperty(t.field)&&e.inArray(s[t.field],t.values)!==-1&&this.options.data.splice(i,1);n!==this.options.data.length&&(this.initSearch(),this.initPagination(),this.initBody(!0))}},u.prototype.removeAll=function(){this.options.data.length>0&&(this.options.data.splice(0,this.options.data.length),this.initSearch(),this.initPagination(),this.initBody(!0))},u.prototype.getRowByUniqueId=function(e){var t,i,s=this.options.uniqueId,n=this.options.data.length,a=void 0;for(t=n-1;t>=0;t--)if(i=this.options.data[t],i.hasOwnProperty(s)&&("string"==typeof i[s]?e=e.toString():"number"==typeof i[s]&&(Number(i[s])===i[s]&&i[s]%1===0?e=parseInt(e):i[s]===Number(i[s])&&0!==i[s]&&(e=parseFloat(e))),i[s]===e)){a=i;break}return a},u.prototype.removeByUniqueId=function(e){var t=this.options.data.length,i=this.getRowByUniqueId(e);i&&this.options.data.splice(this.options.data.indexOf(i),1),t!==this.options.data.length&&(this.initSearch(),this.initPagination(),this.initBody(!0))},u.prototype.insertRow=function(e){e.hasOwnProperty("index")&&e.hasOwnProperty("row")&&(this.data.splice(e.index,0,e.row),this.initSearch(),this.initPagination(),this.initSort(),this.initBody(!0))},u.prototype.updateRow=function(t){t.hasOwnProperty("index")&&t.hasOwnProperty("row")&&(e.extend(this.data[t.index],t.row),this.initSort(),this.initBody(!0))},u.prototype.showRow=function(e){e.hasOwnProperty("index")&&this.toggleRow(e.index,void 0!==e.isIdField,!0)},u.prototype.hideRow=function(e){e.hasOwnProperty("index")&&this.toggleRow(e.index,void 0!==e.isIdField,!1)},u.prototype.getRowsHidden=function(t){var i=e(this.$body[0]).children().filter(":hidden"),s=0;if(t)for(;s<i.length;s++)e(i[s]).show();return i},u.prototype.mergeCells=function(t){var i,s,n,a=t.index,o=e.inArray(t.field,this.getVisibleFields()),r=t.rowspan||1,l=t.colspan||1,d=this.$body.find("tr");if(this.options.detailView&&!this.options.cardView&&(o+=1),n=d.eq(a).find("td").eq(o),!(a<0||o<0||a>=this.data.length)){for(i=a;i<a+r;i++)for(s=o;s<o+l;s++)d.eq(i).find("td").eq(s).hide();n.attr("rowspan",r).attr("colspan",l).show()}},u.prototype.updateCell=function(e){e.hasOwnProperty("rowIndex")&&e.hasOwnProperty("fieldName")&&e.hasOwnProperty("fieldValue")&&(this.data[e.rowIndex][e.fieldName]=e.fieldValue,this.initSort(),this.initBody(!0))},u.prototype.getOptions=function(){return this.options},u.prototype.getSelections=function(){var t=this;return e.grep(this.data,function(e){return e[t.header.stateField]})},u.prototype.getAllSelections=function(){var t=this;return e.grep(this.options.data,function(e){return e[t.header.stateField]})},u.prototype.checkAll=function(){this.checkAll_(!0)},u.prototype.uncheckAll=function(){this.checkAll_(!1)},u.prototype.checkAll_=function(e){var t;e||(t=this.getSelections()),this.$selectItem.filter(":enabled").prop("checked",e),this.updateRows(),this.updateSelected(),e&&(t=this.getSelections()),this.trigger(e?"check-all":"uncheck-all",t)},u.prototype.check=function(e){this.check_(!0,e)},u.prototype.uncheck=function(e){this.check_(!1,e)},u.prototype.check_=function(e,t){this.$selectItem.filter(i('[data-index="%s"]',t)).prop("checked",e),this.data[t][this.header.stateField]=e,this.updateSelected(),this.trigger(e?"check":"uncheck",this.data[t])},u.prototype.checkBy=function(e){this.checkBy_(!0,e)},u.prototype.uncheckBy=function(e){this.checkBy_(!1,e)},u.prototype.checkBy_=function(t,s){if(s.hasOwnProperty("field")&&s.hasOwnProperty("values")){var n=this,a=[];e.each(this.options.data,function(o,r){return!!r.hasOwnProperty(s.field)&&void(e.inArray(r[s.field],s.values)!==-1&&(n.$selectItem.filter(i('[data-index="%s"]',o)).prop("checked",t),r[n.header.stateField]=t,a.push(r),n.trigger(t?"check":"uncheck",r)))}),this.updateSelected(),this.trigger(t?"check-some":"uncheck-some",a)}},u.prototype.destroy=function(){this.$el.insertBefore(this.$container),e(this.options.toolbar).insertBefore(this.$el),this.$container.next().remove(),this.$container.remove(),this.$el.html(this.$el_.html()).css("margin-top","0").attr("class",this.$el_.attr("class")||"")},u.prototype.showLoading=function(){this.$tableLoading.show()},u.prototype.hideLoading=function(){this.$tableLoading.hide()},u.prototype.togglePagination=function(){this.options.pagination=!this.options.pagination;var e=this.$toolbar.find('button[name="paginationSwitch"] i');this.options.pagination?e.attr("class",this.options.iconsPrefix+" "+this.options.icons.paginationSwitchDown):e.attr("class",this.options.iconsPrefix+" "+this.options.icons.paginationSwitchUp),this.updatePagination()},u.prototype.refresh=function(e){e&&e.url&&(this.options.url=e.url,this.options.pageNumber=1),this.initServer(e&&e.silent,e&&e.query)},u.prototype.resetWidth=function(){this.options.showHeader&&this.options.height&&this.fitHeader(),this.options.showFooter&&this.fitFooter()},u.prototype.showColumn=function(e){this.toggleColumn(n(this.columns,e),!0,!0)},u.prototype.hideColumn=function(e){this.toggleColumn(n(this.columns,e),!1,!0)},u.prototype.getHiddenColumns=function(){return e.grep(this.columns,function(e){return!e.visible})},u.prototype.filterBy=function(t){this.filterColumns=e.isEmptyObject(t)?{}:t,this.options.pageNumber=1,this.initSearch(),this.updatePagination()},u.prototype.scrollTo=function(e){if("string"==typeof e&&(e="bottom"===e?this.$tableBody[0].scrollHeight:0),"number"==typeof e&&this.$tableBody.scrollTop(e),"undefined"==typeof e)return this.$tableBody.scrollTop()},u.prototype.getScrollPosition=function(){return this.scrollTo()},u.prototype.selectPage=function(e){e>0&&e<=this.options.totalPages&&(this.options.pageNumber=e,this.updatePagination())},u.prototype.prevPage=function(){this.options.pageNumber>1&&(this.options.pageNumber--,this.updatePagination())},u.prototype.nextPage=function(){this.options.pageNumber<this.options.totalPages&&(this.options.pageNumber++,this.updatePagination())},u.prototype.toggleView=function(){this.options.cardView=!this.options.cardView,this.initHeader(),this.initBody(),this.trigger("toggle",this.options.cardView)},u.prototype.refreshOptions=function(t){l(this.options,t,!1)||(this.options=e.extend(this.options,t),this.trigger("refresh-options",this.options),this.destroy(),this.init())};var p=["getOptions","getSelections","getAllSelections","getData","load","append","prepend","remove","removeAll","insertRow","updateRow","updateCell","removeByUniqueId","getRowByUniqueId","showRow","hideRow","getRowsHidden","mergeCells","checkAll","uncheckAll","check","uncheck","checkBy","uncheckBy","refresh","resetView","resetWidth","destroy","showLoading","hideLoading","showColumn","hideColumn","getHiddenColumns","filterBy","scrollTo","getScrollPosition","selectPage","prevPage","nextPage","togglePagination","toggleView","refreshOptions"];e.fn.bootstrapTable=function(t){var i,s=Array.prototype.slice.call(arguments,1);return this.each(function(){var n=e(this),a=n.data("bootstrap.table"),o=e.extend({},u.DEFAULTS,n.data(),"object"==typeof t&&t);if("string"==typeof t){if(e.inArray(t,p)<0)throw new Error("Unknown method: "+t);if(!a)return;i=a[t].apply(a,s),"destroy"===t&&n.removeData("bootstrap.table")}a||n.data("bootstrap.table",a=new u(this,o))}),"undefined"==typeof i?this:i},e.fn.bootstrapTable.Constructor=u,e.fn.bootstrapTable.defaults=u.DEFAULTS,e.fn.bootstrapTable.columnDefaults=u.COLUMN_DEFAULTS,e.fn.bootstrapTable.locales=u.LOCALES,e.fn.bootstrapTable.methods=p,e(function(){e('[data-toggle="table"]').bootstrapTable()})}(jQuery),function(e){"use strict";var t={json:"JSON",xml:"XML",png:"PNG",csv:"CSV",txt:"TXT",sql:"SQL",doc:"MS-Word",excel:"Ms-Excel",powerpoint:"Ms-Powerpoint",pdf:"PDF"};e.extend(e.fn.bootstrapTable.defaults,{showExport:!1,exportDataType:"basic",exportTypes:["json","xml","csv","txt","sql","excel"],exportOptions:{}});var i=e.fn.bootstrapTable.Constructor,s=i.prototype.initToolbar;i.prototype.initToolbar=function(){if(this.showToolbar=this.options.showExport,s.apply(this,Array.prototype.slice.apply(arguments)),this.options.showExport){var i=this,n=this.$toolbar.find(">.btn-group"),a=n.find("div.export");if(!a.length){a=e(['<div class="export btn-group">','<button class="btn btn-default dropdown-toggle" data-toggle="dropdown" type="button">','<i class="fa fa-cloud-download"></i> <i class="fa fa-caret-down"></i>','<!--<span class="caret"></span>-->',"</button>",'<ul class="dropdown-menu" role="menu">',"</ul>","</div>"].join("")).appendTo(n);var o=a.find(".dropdown-menu"),r=this.options.exportTypes;if("string"==typeof this.options.exportTypes){var l=this.options.exportTypes.slice(1,-1).replace(/ /g,"").split(",");r=[],e.each(l,function(e,t){r.push(t.slice(1,-1))})}e.each(r,function(e,i){t.hasOwnProperty(i)&&o.append(['<li data-type="'+i+'">','<a href="javascript:void(0)">',t[i],"</a>","</li>"].join(""))}),o.find("li").click(function(){var t=e(this).data("type"),s=function(){i.$el.tableExport(e.extend({},i.options.exportOptions,{type:t,escape:!1}))};if("all"===i.options.exportDataType&&i.options.pagination)i.togglePagination(),s(),i.togglePagination();else if("selected"===i.options.exportDataType){var n=i.getData(),a=i.getAllSelections();i.load(a),s(),i.load(n)}else s()})}}}}(jQuery);var saveAs=saveAs||function(e){"use strict";if("undefined"==typeof navigator||!/MSIE [1-9]\./.test(navigator.userAgent)){var t=e.document,i=function(){return e.URL||e.webkitURL||e},s=t.createElementNS("http://www.w3.org/1999/xhtml","a"),n="download"in s,a=function(i){var s=t.createEvent("MouseEvents");s.initMouseEvent("click",!0,!1,e,0,0,0,0,0,!1,!1,!1,!1,0,null),i.dispatchEvent(s)},o=e.webkitRequestFileSystem,r=e.requestFileSystem||o||e.mozRequestFileSystem,l=function(t){(e.setImmediate||e.setTimeout)(function(){throw t},0)},d="application/octet-stream",c=0,h=500,u=function(t){var s=function(){"string"==typeof t?i().revokeObjectURL(t):t.remove()};e.chrome?s():setTimeout(s,h)},p=function(e,t,i){t=[].concat(t);for(var s=t.length;s--;){var n=e["on"+t[s]];if("function"==typeof n)try{n.call(e,i||e)}catch(e){l(e)}}},f=function(e){return/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob(["\ufeff",e],{type:e.type}):e},m=function(t,l){t=f(t);var h,m,g,v=this,b=t.type,y=!1,_=function(){p(v,"writestart progress write writeend".split(" "))},w=function(){if((y||!h)&&(h=i().createObjectURL(t)),m)m.location.href=h;else{var s=e.open(h,"_blank");void 0==s&&"undefined"!=typeof safari&&(e.location.href=h)}v.readyState=v.DONE,_(),u(h)},x=function(e){return function(){return v.readyState!==v.DONE?e.apply(this,arguments):void 0}},C={create:!0,exclusive:!1};return v.readyState=v.INIT,l||(l="download"),n?(h=i().createObjectURL(t),s.href=h,s.download=l,a(s),v.readyState=v.DONE,_(),void u(h)):(e.chrome&&b&&b!==d&&(g=t.slice||t.webkitSlice,t=g.call(t,0,t.size,d),y=!0),o&&"download"!==l&&(l+=".download"),(b===d||o)&&(m=e),r?(c+=t.size,void r(e.TEMPORARY,c,x(function(e){e.root.getDirectory("saved",C,x(function(e){var i=function(){e.getFile(l,C,x(function(e){e.createWriter(x(function(i){i.onwriteend=function(t){m.location.href=e.toURL(),v.readyState=v.DONE,p(v,"writeend",t),u(e)},i.onerror=function(){var e=i.error;e.code!==e.ABORT_ERR&&w()},"writestart progress write abort".split(" ").forEach(function(e){i["on"+e]=v["on"+e]}),i.write(t),v.abort=function(){i.abort(),v.readyState=v.DONE},v.readyState=v.WRITING}),w)}),w)};e.getFile(l,{create:!1},x(function(e){e.remove(),i()}),x(function(e){e.code===e.NOT_FOUND_ERR?i():w()}))}),w)}),w)):void w())},g=m.prototype,v=function(e,t){return new m(e,t)};return"undefined"!=typeof navigator&&navigator.msSaveOrOpenBlob?function(e,t){return navigator.msSaveOrOpenBlob(f(e),t)}:(g.abort=function(){var e=this;e.readyState=e.DONE,p(e,"abort")},g.readyState=g.INIT=0,g.WRITING=1,g.DONE=2,g.error=g.onwritestart=g.onprogress=g.onwrite=g.onabort=g.onerror=g.onwriteend=null,v)}}("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||this.content);"undefined"!=typeof module&&module.exports?module.exports.saveAs=saveAs:"undefined"!=typeof define&&null!==define&&null!=define.amd&&define([],function(){return saveAs}),function(e){e.fn.extend({tableExport:function(t){function i(t,i,s,n){-1==p.ignoreRow.indexOf(s)&&e(t).filter(":visible").find(i).each(function(t){if(("always"==e(this).data("tableexport-display")||"none"!=e(this).css("display")&&"hidden"!=e(this).css("visibility")&&"none"!=e(this).data("tableexport-display"))&&-1==p.ignoreColumn.indexOf(t)&&"function"==typeof n){var i=0;if("undefined"!=typeof g[s]&&0<g[s].length)for(c=0;c<=t;c++)"undefined"!=typeof g[s][c]&&(n(null,s,c),delete g[s][c],t++);if(n(this,s,t),e(this).is("[colspan]"))for(i=e(this).attr("colspan"),c=0;c<i-1;c++)n(null,s,t+c);if(e(this).is("[rowspan]")){var a=parseInt(e(this).attr("rowspan"));for(r=1;r<a;r++)for("undefined"==typeof g[s+r]&&(g[s+r]=[]),g[s+r][t]="",c=1;c<i;c++)g[s+r][t+c]=""}}})}function s(e){if(!0===p.consoleLog&&console.log(e.output()),"string"==p.outputMode)return e.output();if("base64"==p.outputMode)return u(e.output());try{var t=e.output("blob");saveAs(t,p.fileName+".pdf")}catch(t){h(p.fileName+".pdf","data:application/pdf;base64,"+u(e.output()))}}function n(e,t,i){var s="";return null!=e&&(t=a(e,t,i),e=null===t||""==t?"":t.toString(),t instanceof Date?s=p.csvEnclosure+t.toLocaleString()+p.csvEnclosure:(t=p.csvEnclosure+p.csvEnclosure,s=e.replace(new RegExp(p.csvEnclosure.replace(/([.*+?^=!:${}()|\[\]\/\\])/g,"\\$1"),"g"),t),(0<=s.indexOf(p.csvSeparator)||/[\r\n ]/g.test(s))&&(s=p.csvEnclosure+s+p.csvEnclosure))),s}function a(t,i,s){var n="";return null!=t&&(t=e(t),n=!0===p.htmlContent?t.html().trim():t.text().trim().replace(/\u00AD/g,""),!0===p.escape&&(n=escape(n)),"function"==typeof p.onCellData&&(n=p.onCellData(t,i,s,n))),n}function o(e,t,i){return t+"-"+i.toLowerCase()}function l(e,t){try{return window.getComputedStyle?(t=t.replace(/([a-z])([A-Z])/,o),window.getComputedStyle(e,null).getPropertyValue(t)):e.currentStyle?e.currentStyle[t]:e.style[t]}catch(e){}return""}function d(e,t,i){if(t=l(e,t).match(/\d+/),null!==t){t=t[0];var s=document.createElement("div");return s.style.overflow="hidden",s.style.visibility="hidden",e.parentElement.appendChild(s),s.style.width=100+i,i=100/s.offsetWidth,e.parentElement.removeChild(s),t*i}return 0}function h(e,t){var i=document.createElement("a");i&&(document.body.appendChild(i),i.style="display: none",i.download=e,i.href=t,document.createEvent?(null==f&&(f=document.createEvent("MouseEvents")),f.initEvent("click",!0,!1),i.dispatchEvent(f)):document.createEventObject?i.fireEvent("onclick"):"function"==typeof i.onclick&&i.onclick(),document.body.removeChild(i))}function u(e){var t,i,s,n,a,o,r="",l=0;for(e=e.replace(/\x0d\x0a/g,"\n"),i="",s=0;s<e.length;s++)n=e.charCodeAt(s),128>n?i+=String.fromCharCode(n):(127<n&&2048>n?i+=String.fromCharCode(n>>6|192):(i+=String.fromCharCode(n>>12|224),i+=String.fromCharCode(n>>6&63|128)),i+=String.fromCharCode(63&n|128));for(e=i;l<e.length;)t=e.charCodeAt(l++),i=e.charCodeAt(l++),s=e.charCodeAt(l++),n=t>>2,t=(3&t)<<4|i>>4,a=(15&i)<<2|s>>6,o=63&s,isNaN(i)?a=o=64:isNaN(s)&&(o=64),r=r+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(n)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(t)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(a)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(o);return r}var p={csvSeparator:",",csvEnclosure:'"',consoleLog:!1,displayTableName:!1,escape:!1,excelstyles:["border-bottom","border-top","border-left","border-right"],fileName:"tableExport",htmlContent:!1,ignoreColumn:[],ignoreRow:[],jspdf:{orientation:"p",unit:"pt",format:"a4",margins:{left:20,right:10,top:10,bottom:10},autotable:{padding:2,lineHeight:12,fontSize:8,tableExport:{onAfterAutotable:null,onBeforeAutotable:null,onTable:null}}},onCellData:null,outputMode:"file",tbodySelector:"tr",theadSelector:"tr",tableName:"myTableName",type:"csv",worksheetName:"xlsWorksheetName"},f=null,m=0,g=[],v="";if(e.extend(!0,p,t),"csv"==p.type||"txt"==p.type){var b="",m=0;if(e(this).find("thead").first().find(p.theadSelector).each(function(){v="",i(this,"th,td",m,function(e,t,i){v+=n(e,t,i)+p.csvSeparator}),v=e.trim(v).substring(0,v.length-1),0<v.length&&(0<b.length&&(b+="\n"),b+=v),m++}),e(this).find("tbody").first().find(p.tbodySelector).each(function(){v="",i(this,"td",m,function(e,t,i){v+=n(e,t,i)+p.csvSeparator}),v=e.trim(v).substring(0,v.length-1),0<v.length&&(0<b.length&&(b+="\n"),b+=v),m++}),b+="\n",!0===p.consoleLog&&console.log(b),"string"===p.outputMode)return b;if("base64"===p.outputMode)return u(b);try{var y=new Blob([("csv"==p.type?"\ufeff":"")+b],{type:"text/"+("csv"==p.type?"csv":"plain")+";charset=utf-8"});saveAs(y,p.fileName+"."+p.type)}catch(e){h(p.fileName+"."+p.type,"data:text/"+("csv"==p.type?"csv":"plain")+";charset=utf-8,"+("csv"==p.type?"\ufeff":"")+encodeURIComponent(b))}}else if("sql"==p.type){var m=0,_="INSERT INTO `"+p.tableName+"` (";if(e(this).find("thead").first().find(p.theadSelector).each(function(){i(this,"th,td",m,function(e,t,i){_+="'"+a(e,t,i)+"',"}),m++,_=e.trim(_),_=e.trim(_).substring(0,_.length-1)}),_+=") VALUES ",e(this).find("tbody").first().find(p.tbodySelector).each(function(){v="",i(this,"td",m,function(e,t,i){v+="'"+a(e,t,i)+"',"}),3<v.length&&(_+="("+v,_=e.trim(_).substring(0,_.length-1),_+="),"),m++}),_=e.trim(_).substring(0,_.length-1),_+=";",!0===p.consoleLog&&console.log(_),"string"==p.outputMode)return _;if("base64"==p.outputMode)return u(_);try{y=new Blob([_],{type:"text/plain;charset=utf-8"}),saveAs(y,p.fileName+".sql")}catch(e){h(p.fileName+".sql","data:application/sql;charset=utf-8,"+encodeURIComponent(_))}}else if("json"==p.type){var w=[];e(this).find("thead").first().find(p.theadSelector).each(function(){var e=[];i(this,"th,td",m,function(t,i,s){e.push(a(t,i,s))}),w.push(e)});var x=[];e(this).find("tbody").first().find(p.tbodySelector).each(function(){var e=[];i(this,"td",m,function(t,i,s){e.push(a(t,i,s))}),0<e.length&&(1!=e.length||""!=e[0])&&x.push(e),m++}),t=[],t.push({header:w,data:x});var C=JSON.stringify(t);if(!0===p.consoleLog&&console.log(C),"string"==p.outputMode)return C;if(t=u(C),"base64"==p.outputMode)return t;try{y=new Blob([C],{type:"application/json;charset=utf-8"}),saveAs(y,p.fileName+".json")}catch(e){h(p.fileName+".json","data:application/json;charset=utf-8;base64,"+t)}}else if("xml"===p.type){var m=0,k='<?xml version="1.0" encoding="utf-8"?>',k=k+"<tabledata><fields>";e(this).find("thead").first().find(p.theadSelector).each(function(){i(this,"th,td",m,function(e,t,i){k+="<field>"+a(e,t,i)+"</field>"}),m++});var k=k+"</fields><data>",S=1;if(e(this).find("tbody").first().find(p.tbodySelector).each(function(){var e=1;v="",i(this,"td",m,function(t,i,s){v+="<column-"+e+">"+a(t,i,s)+"</column-"+e+">",e++}),0<v.length&&"<column-1></column-1>"!=v&&(k+='<row id="'+S+'">'+v+"</row>",S++),m++}),k+="</data></tabledata>",!0===p.consoleLog&&console.log(k),"string"==p.outputMode)return k;if(t=u(k),"base64"==p.outputMode)return t;try{y=new Blob([k],{type:"application/xml;charset=utf-8"}),saveAs(y,p.fileName+".xml")}catch(e){h(p.fileName+".xml","data:application/xml;charset=utf-8;base64,"+t)}}else if("excel"==p.type||"doc"==p.type){var m=0,D="<table>";if(e(this).find("thead").first().find(p.theadSelector).each(function(){v="",i(this,"th,td",m,function(t,i,s){if(null!=t){v+="<td style='";for(var n in p.excelstyles)p.excelstyles.hasOwnProperty(n)&&(v+=p.excelstyles[n]+": "+e(t).css(p.excelstyles[n])+";");v+="'>"+a(t,i,s)+"</td>"}}),0<v.length&&(D+="<tr>"+v+"</tr>"),m++}),e(this).find("tbody").first().find(p.tbodySelector).each(function(){v="",i(this,"td",m,function(t,i,s){if(null!=t){v+="<td style='";for(var n in p.excelstyles)p.excelstyles.hasOwnProperty(n)&&(v+=p.excelstyles[n]+": "+e(t).css(p.excelstyles[n])+";");e(t).is("[colspan]")&&(v+="' colspan='"+e(t).attr("colspan")),e(t).is("[rowspan]")&&(v+="' rowspan='"+e(t).attr("rowspan")),v+="'>"+a(t,i,s)+"</td>"}}),0<v.length&&(D+="<tr>"+v+"</tr>"),m++}),p.displayTableName&&(D+="<tr><td></td></tr><tr><td></td></tr><tr><td>"+a(e("<p>"+p.tableName+"</p>"))+"</td></tr>"),D+="</table>",!0===p.consoleLog&&console.log(D),C="<html xmlns:o='urn:schemas-microsoft-com:office:office' xmlns:x='urn:schemas-microsoft-com:office:"+p.type+"' xmlns='http://www.w3.org/TR/REC-html40'>",C+='<meta http-equiv="content-type" content="application/vnd.ms-'+p.type+'; charset=UTF-8">',C=C+'<meta http-equiv="content-type" content="application/'+("excel"===p.type?"vnd.ms-excel":"msword"),C+='; charset=UTF-8">',C+="<head>","excel"===p.type&&(C+="<!--[if gte mso 9]>",C+="<xml>",C+="<x:ExcelWorkbook>",C+="<x:ExcelWorksheets>",C+="<x:ExcelWorksheet>",C+="<x:Name>",C+=p.worksheetName,C+="</x:Name>",C+="<x:WorksheetOptions>",C+="<x:DisplayGridlines/>",C+="</x:WorksheetOptions>",C+="</x:ExcelWorksheet>",C+="</x:ExcelWorksheets>",C+="</x:ExcelWorkbook>",C+="</xml>",C+="<![endif]-->"),C+="</head>",C+="<body>",C+=D,C+="</body>",C+="</html>","string"==p.outputMode)return C;if(t=u(C),"base64"===p.outputMode)return t;var T="excel"===p.type?"xls":"doc";try{y=new Blob([C],{type:"application/vnd.ms-"+p.type}),saveAs(y,p.fileName+"."+T)}catch(e){h(p.fileName+"."+T,"data:application/vnd.ms-"+p.type+";base64,"+t)}}else if("png"==p.type)html2canvas(e(this),{onrendered:function(e){e=e.toDataURL(),e=e.substring(22);for(var t=atob(e),i=new ArrayBuffer(t.length),s=new Uint8Array(i),n=0;n<t.length;n++)s[n]=t.charCodeAt(n);try{var a=new Blob([i],{type:"image/png"});saveAs(a,p.fileName+".png")}catch(t){h(p.fileName+".png","data:image/png;base64,"+e)}}});else if("pdf"==p.type)if(!1===p.jspdf.autotable){var y={dim:{w:d(e(this).first().get(0),"width","mm"),h:d(e(this).first().get(0),"height","mm")},pagesplit:!1},O=new jsPDF(p.jspdf.orientation,p.jspdf.unit,p.jspdf.format);O.addHTML(e(this).first(),p.jspdf.margins.left,p.jspdf.margins.top,y,function(){s(O)})}else{var A=p.jspdf.autotable.tableExport;if("string"==typeof p.jspdf.format&&"bestfit"===p.jspdf.format.toLowerCase()){var M={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89]},E="",I="",$=0;e(this).filter(":visible").each(function(){if("none"!=e(this).css("display")){var t=d(e(this).get(0),"width","pt");if(t>$){t>M.a0[0]&&(E="a0",I="l");for(var i in M)M.hasOwnProperty(i)&&M[i][1]>t&&(E=i,I="l",M[i][0]>t&&(I="p"));$=t}}}),p.jspdf.format=""==E?"a4":E,p.jspdf.orientation=""==I?"w":I}A.doc=new jsPDF(p.jspdf.orientation,p.jspdf.unit,p.jspdf.format),e(this).filter(":visible").each(function(){if("none"!=e(this).css("display")){var t,s=0,n={};if(A.columns=[],A.rows=[],A.rowoptions={},"function"==typeof A.onTable&&!1===A.onTable(e(this),p))return!0;Object.keys(p.jspdf.autotable).forEach(function(e){n[e]=p.jspdf.autotable[e]}),n.margins={},e.extend(!0,n.margins,p.jspdf.margins),"function"!=typeof n.renderCell&&(n.renderCell=function(e,t,i,s,n,a,o,r){var l=r.tableExport.doc,d=0;l.setFillColor(0===o%2?245:255),l.setTextColor(50),l.rect(e,t,i,s,"F"),t+=r.lineHeight/2+l.autoTableTextHeight()/2-2.5,"undefined"!=typeof r.tableExport.columns[n]&&(s=r.tableExport.columns[n],"undefined"!=typeof s.style&&(s=s.style.align,n=r.tableExport.rowoptions[o+1+":"+n],"undefined"!=typeof n&&(s=n.style.align),"right"==s?d=i-l.getStringUnitWidth(""+a)*l.internal.getFontSize()-r.padding:"center"==s&&(d=(i-l.getStringUnitWidth(""+a)*l.internal.getFontSize())/2))),d<r.padding&&(d=r.padding),l.text(a,e+d,t)}),e(this).find("thead").find(p.theadSelector).each(function(){t=0,i(this,"th,td",s,function(e,i,s){e={title:a(e,i,s),key:t++,style:{align:l(e,"text-align"),bcolor:l(e,"background-color")}},A.columns.push(e)}),s++}),e(this).find("tbody").find(p.tbodySelector).each(function(){var e=[],n=0;t=0,i(this,"td",s,function(i,s,o){var r={style:{align:l(i,"text-align"),bcolor:l(i,"background-color")}};A.rowoptions[n+":"+t++]=r,e.push(a(i,s,o))}),e.length&&(A.rows.push(e),n++),s++}),"function"==typeof A.onBeforeAutotable&&A.onBeforeAutotable(e(this),A.columns,A.rows,n),A.doc.autoTable(A.columns,A.rows,n),"function"==typeof A.onAfterAutotable&&A.onAfterAutotable(e(this),n),p.jspdf.autotable.startY=A.doc.autoTableEndPosY()+n.margins.top}}),s(A.doc),A.columns.length=0,A.rows.length=0,delete A.doc,A.doc=null}return this}})}(jQuery),function(e){e.color={},e.color.make=function(t,i,s,n){var a={};return a.r=t||0,a.g=i||0,a.b=s||0,a.a=null!=n?n:1,a.add=function(e,t){for(var i=0;i<e.length;++i)a[e.charAt(i)]+=t;return a.normalize()},a.scale=function(e,t){for(var i=0;i<e.length;++i)a[e.charAt(i)]*=t;return a.normalize()},a.toString=function(){return a.a>=1?"rgb("+[a.r,a.g,a.b].join(",")+")":"rgba("+[a.r,a.g,a.b,a.a].join(",")+")"},a.normalize=function(){function e(e,t,i){return t<e?e:t>i?i:t}return a.r=e(0,parseInt(a.r),255),a.g=e(0,parseInt(a.g),255),a.b=e(0,parseInt(a.b),255),a.a=e(0,a.a,1),a},a.clone=function(){return e.color.make(a.r,a.b,a.g,a.a)},a.normalize()},e.color.extract=function(t,i){var s;do{if(s=t.css(i).toLowerCase(),""!=s&&"transparent"!=s)break;t=t.parent()}while(t.length&&!e.nodeName(t.get(0),"body"));return"rgba(0, 0, 0, 0)"==s&&(s="transparent"),e.color.parse(s)},e.color.parse=function(i){var s,n=e.color.make;if(s=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(i))return n(parseInt(s[1],10),parseInt(s[2],10),parseInt(s[3],10));if(s=/rgba\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]+(?:\.[0-9]+)?)\s*\)/.exec(i))return n(parseInt(s[1],10),parseInt(s[2],10),parseInt(s[3],10),parseFloat(s[4]));if(s=/rgb\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*\)/.exec(i))return n(2.55*parseFloat(s[1]),2.55*parseFloat(s[2]),2.55*parseFloat(s[3]));if(s=/rgba\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\s*\)/.exec(i))return n(2.55*parseFloat(s[1]),2.55*parseFloat(s[2]),2.55*parseFloat(s[3]),parseFloat(s[4]));if(s=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(i))return n(parseInt(s[1],16),parseInt(s[2],16),parseInt(s[3],16));if(s=/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(i))return n(parseInt(s[1]+s[1],16),parseInt(s[2]+s[2],16),parseInt(s[3]+s[3],16));var a=e.trim(i).toLowerCase();return"transparent"==a?n(255,255,255,0):(s=t[a]||[0,0,0],n(s[0],s[1],s[2]))};var t={aqua:[0,255,255],azure:[240,255,255],beige:[245,245,220],black:[0,0,0],blue:[0,0,255],brown:[165,42,42],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgrey:[169,169,169],darkgreen:[0,100,0],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkviolet:[148,0,211],fuchsia:[255,0,255],gold:[255,215,0],green:[0,128,0],indigo:[75,0,130],khaki:[240,230,140],lightblue:[173,216,230],lightcyan:[224,255,255],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightyellow:[255,255,224],lime:[0,255,0],magenta:[255,0,255],maroon:[128,0,0],navy:[0,0,128],olive:[128,128,0],orange:[255,165,0],pink:[255,192,203],purple:[128,0,128],violet:[128,0,128],red:[255,0,0],silver:[192,192,192],white:[255,255,255],yellow:[255,255,0]}}(jQuery),function(e){function t(t,i){var s=i.children("."+t)[0];if(null==s&&(s=document.createElement("canvas"),s.className=t,e(s).css({direction:"ltr",position:"absolute",left:0,top:0}).appendTo(i),!s.getContext)){if(!window.G_vmlCanvasManager)throw new Error("Canvas is not available. If you're using IE with a fall-back such as Excanvas, then there's either a mistake in your conditional include, or the page has no DOCTYPE and is rendering in Quirks Mode.");
s=window.G_vmlCanvasManager.initElement(s)}this.element=s;var n=this.context=s.getContext("2d"),a=window.devicePixelRatio||1,o=n.webkitBackingStorePixelRatio||n.mozBackingStorePixelRatio||n.msBackingStorePixelRatio||n.oBackingStorePixelRatio||n.backingStorePixelRatio||1;this.pixelRatio=a/o,this.resize(i.width(),i.height()),this.textContainer=null,this.text={},this._textCache={}}function i(i,n,a,o){function r(e,t){t=[ge].concat(t);for(var i=0;i<e.length;++i)e[i].apply(this,t)}function l(){for(var i={Canvas:t},s=0;s<o.length;++s){var n=o[s];n.init(ge,i),n.options&&e.extend(!0,ne,n.options)}}function d(t){e.extend(!0,ne,t),t&&t.colors&&(ne.colors=t.colors),null==ne.xaxis.color&&(ne.xaxis.color=e.color.parse(ne.grid.color).scale("a",.22).toString()),null==ne.yaxis.color&&(ne.yaxis.color=e.color.parse(ne.grid.color).scale("a",.22).toString()),null==ne.xaxis.tickColor&&(ne.xaxis.tickColor=ne.grid.tickColor||ne.xaxis.color),null==ne.yaxis.tickColor&&(ne.yaxis.tickColor=ne.grid.tickColor||ne.yaxis.color),null==ne.grid.borderColor&&(ne.grid.borderColor=ne.grid.color),null==ne.grid.tickColor&&(ne.grid.tickColor=e.color.parse(ne.grid.color).scale("a",.22).toString());var s,n,a,o=i.css("font-size"),l=o?+o.replace("px",""):13,d={style:i.css("font-style"),size:Math.round(.8*l),variant:i.css("font-variant"),weight:i.css("font-weight"),family:i.css("font-family")};for(a=ne.xaxes.length||1,s=0;s<a;++s)n=ne.xaxes[s],n&&!n.tickColor&&(n.tickColor=n.color),n=e.extend(!0,{},ne.xaxis,n),ne.xaxes[s]=n,n.font&&(n.font=e.extend({},d,n.font),n.font.color||(n.font.color=n.color),n.font.lineHeight||(n.font.lineHeight=Math.round(1.15*n.font.size)));for(a=ne.yaxes.length||1,s=0;s<a;++s)n=ne.yaxes[s],n&&!n.tickColor&&(n.tickColor=n.color),n=e.extend(!0,{},ne.yaxis,n),ne.yaxes[s]=n,n.font&&(n.font=e.extend({},d,n.font),n.font.color||(n.font.color=n.color),n.font.lineHeight||(n.font.lineHeight=Math.round(1.15*n.font.size)));for(ne.xaxis.noTicks&&null==ne.xaxis.ticks&&(ne.xaxis.ticks=ne.xaxis.noTicks),ne.yaxis.noTicks&&null==ne.yaxis.ticks&&(ne.yaxis.ticks=ne.yaxis.noTicks),ne.x2axis&&(ne.xaxes[1]=e.extend(!0,{},ne.xaxis,ne.x2axis),ne.xaxes[1].position="top",null==ne.x2axis.min&&(ne.xaxes[1].min=null),null==ne.x2axis.max&&(ne.xaxes[1].max=null)),ne.y2axis&&(ne.yaxes[1]=e.extend(!0,{},ne.yaxis,ne.y2axis),ne.yaxes[1].position="right",null==ne.y2axis.min&&(ne.yaxes[1].min=null),null==ne.y2axis.max&&(ne.yaxes[1].max=null)),ne.grid.coloredAreas&&(ne.grid.markings=ne.grid.coloredAreas),ne.grid.coloredAreasColor&&(ne.grid.markingsColor=ne.grid.coloredAreasColor),ne.lines&&e.extend(!0,ne.series.lines,ne.lines),ne.points&&e.extend(!0,ne.series.points,ne.points),ne.bars&&e.extend(!0,ne.series.bars,ne.bars),null!=ne.shadowSize&&(ne.series.shadowSize=ne.shadowSize),null!=ne.highlightColor&&(ne.series.highlightColor=ne.highlightColor),s=0;s<ne.xaxes.length;++s)g(ce,s+1).options=ne.xaxes[s];for(s=0;s<ne.yaxes.length;++s)g(he,s+1).options=ne.yaxes[s];for(var c in me)ne.hooks[c]&&ne.hooks[c].length&&(me[c]=me[c].concat(ne.hooks[c]));r(me.processOptions,[ne])}function c(e){se=h(e),v(),b()}function h(t){for(var i=[],s=0;s<t.length;++s){var n=e.extend(!0,{},ne.series);null!=t[s].data?(n.data=t[s].data,delete t[s].data,e.extend(!0,n,t[s]),t[s].data=n.data):n.data=t[s],i.push(n)}return i}function u(e,t){var i=e[t+"axis"];return"object"==typeof i&&(i=i.n),"number"!=typeof i&&(i=1),i}function p(){return e.grep(ce.concat(he),function(e){return e})}function f(e){var t,i,s={};for(t=0;t<ce.length;++t)i=ce[t],i&&i.used&&(s["x"+i.n]=i.c2p(e.left));for(t=0;t<he.length;++t)i=he[t],i&&i.used&&(s["y"+i.n]=i.c2p(e.top));return void 0!==s.x1&&(s.x=s.x1),void 0!==s.y1&&(s.y=s.y1),s}function m(e){var t,i,s,n={};for(t=0;t<ce.length;++t)if(i=ce[t],i&&i.used&&(s="x"+i.n,null==e[s]&&1==i.n&&(s="x"),null!=e[s])){n.left=i.p2c(e[s]);break}for(t=0;t<he.length;++t)if(i=he[t],i&&i.used&&(s="y"+i.n,null==e[s]&&1==i.n&&(s="y"),null!=e[s])){n.top=i.p2c(e[s]);break}return n}function g(t,i){return t[i-1]||(t[i-1]={n:i,direction:t==ce?"x":"y",options:e.extend(!0,{},t==ce?ne.xaxis:ne.yaxis)}),t[i-1]}function v(){var t,i=se.length,s=-1;for(t=0;t<se.length;++t){var n=se[t].color;null!=n&&(i--,"number"==typeof n&&n>s&&(s=n))}i<=s&&(i=s+1);var a,o=[],r=ne.colors,l=r.length,d=0;for(t=0;t<i;t++)a=e.color.parse(r[t%l]||"#666"),t%l==0&&t&&(d=d>=0?d<.5?-d-.2:0:-d),o[t]=a.scale("rgb",1+d);var c,h=0;for(t=0;t<se.length;++t){if(c=se[t],null==c.color?(c.color=o[h].toString(),++h):"number"==typeof c.color&&(c.color=o[c.color].toString()),null==c.lines.show){var p,f=!0;for(p in c)if(c[p]&&c[p].show){f=!1;break}f&&(c.lines.show=!0)}null==c.lines.zero&&(c.lines.zero=!!c.lines.fill),c.xaxis=g(ce,u(c,"x")),c.yaxis=g(he,u(c,"y"))}}function b(){function t(e,t,i){t<e.datamin&&t!=-b&&(e.datamin=t),i>e.datamax&&i!=b&&(e.datamax=i)}var i,s,n,a,o,l,d,c,h,u,f,m,g=Number.POSITIVE_INFINITY,v=Number.NEGATIVE_INFINITY,b=Number.MAX_VALUE;for(e.each(p(),function(e,t){t.datamin=g,t.datamax=v,t.used=!1}),i=0;i<se.length;++i)o=se[i],o.datapoints={points:[]},r(me.processRawData,[o,o.data,o.datapoints]);for(i=0;i<se.length;++i){if(o=se[i],f=o.data,m=o.datapoints.format,!m){if(m=[],m.push({x:!0,number:!0,required:!0}),m.push({y:!0,number:!0,required:!0}),o.bars.show||o.lines.show&&o.lines.fill){var y=!!(o.bars.show&&o.bars.zero||o.lines.show&&o.lines.zero);m.push({y:!0,number:!0,required:!1,defaultValue:0,autoscale:y}),o.bars.horizontal&&(delete m[m.length-1].y,m[m.length-1].x=!0)}o.datapoints.format=m}if(null==o.datapoints.pointsize){o.datapoints.pointsize=m.length,d=o.datapoints.pointsize,l=o.datapoints.points;var _=o.lines.show&&o.lines.steps;for(o.xaxis.used=o.yaxis.used=!0,s=n=0;s<f.length;++s,n+=d){u=f[s];var w=null==u;if(!w)for(a=0;a<d;++a)c=u[a],h=m[a],h&&(h.number&&null!=c&&(c=+c,isNaN(c)?c=null:c==1/0?c=b:c==-(1/0)&&(c=-b)),null==c&&(h.required&&(w=!0),null!=h.defaultValue&&(c=h.defaultValue))),l[n+a]=c;if(w)for(a=0;a<d;++a)c=l[n+a],null!=c&&(h=m[a],h.autoscale!==!1&&(h.x&&t(o.xaxis,c,c),h.y&&t(o.yaxis,c,c))),l[n+a]=null;else if(_&&n>0&&null!=l[n-d]&&l[n-d]!=l[n]&&l[n-d+1]!=l[n+1]){for(a=0;a<d;++a)l[n+d+a]=l[n+a];l[n+1]=l[n-d+1],n+=d}}}}for(i=0;i<se.length;++i)o=se[i],r(me.processDatapoints,[o,o.datapoints]);for(i=0;i<se.length;++i){o=se[i],l=o.datapoints.points,d=o.datapoints.pointsize,m=o.datapoints.format;var x=g,C=g,k=v,S=v;for(s=0;s<l.length;s+=d)if(null!=l[s])for(a=0;a<d;++a)c=l[s+a],h=m[a],h&&h.autoscale!==!1&&c!=b&&c!=-b&&(h.x&&(c<x&&(x=c),c>k&&(k=c)),h.y&&(c<C&&(C=c),c>S&&(S=c)));if(o.bars.show){var D;switch(o.bars.align){case"left":D=0;break;case"right":D=-o.bars.barWidth;break;default:D=-o.bars.barWidth/2}o.bars.horizontal?(C+=D,S+=D+o.bars.barWidth):(x+=D,k+=D+o.bars.barWidth)}t(o.xaxis,x,k),t(o.yaxis,C,S)}e.each(p(),function(e,t){t.datamin==g&&(t.datamin=null),t.datamax==v&&(t.datamax=null)})}function y(){i.css("padding",0).children().filter(function(){return!e(this).hasClass("flot-overlay")&&!e(this).hasClass("flot-base")}).remove(),"static"==i.css("position")&&i.css("position","relative"),ae=new t("flot-base",i),oe=new t("flot-overlay",i),le=ae.context,de=oe.context,re=e(oe.element).unbind();var s=i.data("plot");s&&(s.shutdown(),oe.clear()),i.data("plot",ge)}function _(){ne.grid.hoverable&&(re.mousemove(W),re.bind("mouseleave",Y)),ne.grid.clickable&&re.click(V),r(me.bindEvents,[re])}function w(){be&&clearTimeout(be),re.unbind("mousemove",W),re.unbind("mouseleave",Y),re.unbind("click",V),r(me.shutdown,[re])}function x(e){function t(e){return e}var i,s,n=e.options.transform||t,a=e.options.inverseTransform;"x"==e.direction?(i=e.scale=pe/Math.abs(n(e.max)-n(e.min)),s=Math.min(n(e.max),n(e.min))):(i=e.scale=fe/Math.abs(n(e.max)-n(e.min)),i=-i,s=Math.max(n(e.max),n(e.min))),n==t?e.p2c=function(e){return(e-s)*i}:e.p2c=function(e){return(n(e)-s)*i},a?e.c2p=function(e){return a(s+e/i)}:e.c2p=function(e){return s+e/i}}function C(e){for(var t=e.options,i=e.ticks||[],s=t.labelWidth||0,n=t.labelHeight||0,a=s||("x"==e.direction?Math.floor(ae.width/(i.length||1)):null),o=e.direction+"Axis "+e.direction+e.n+"Axis",r="flot-"+e.direction+"-axis flot-"+e.direction+e.n+"-axis "+o,l=t.font||"flot-tick-label tickLabel",d=0;d<i.length;++d){var c=i[d];if(c.label){var h=ae.getTextInfo(r,c.label,l,null,a);s=Math.max(s,h.width),n=Math.max(n,h.height)}}e.labelWidth=t.labelWidth||s,e.labelHeight=t.labelHeight||n}function k(t){var i=t.labelWidth,s=t.labelHeight,n=t.options.position,a="x"===t.direction,o=t.options.tickLength,r=ne.grid.axisMargin,l=ne.grid.labelMargin,d=!0,c=!0,h=!0,u=!1;e.each(a?ce:he,function(e,i){i&&(i.show||i.reserveSpace)&&(i===t?u=!0:i.options.position===n&&(u?c=!1:d=!1),u||(h=!1))}),c&&(r=0),null==o&&(o=h?"full":5),isNaN(+o)||(l+=+o),a?(s+=l,"bottom"==n?(ue.bottom+=s+r,t.box={top:ae.height-ue.bottom,height:s}):(t.box={top:ue.top+r,height:s},ue.top+=s+r)):(i+=l,"left"==n?(t.box={left:ue.left+r,width:i},ue.left+=i+r):(ue.right+=i+r,t.box={left:ae.width-ue.right,width:i})),t.position=n,t.tickLength=o,t.box.padding=l,t.innermost=d}function S(e){"x"==e.direction?(e.box.left=ue.left-e.labelWidth/2,e.box.width=ae.width-ue.left-ue.right+e.labelWidth):(e.box.top=ue.top-e.labelHeight/2,e.box.height=ae.height-ue.bottom-ue.top+e.labelHeight)}function D(){var t,i=ne.grid.minBorderMargin;if(null==i)for(i=0,t=0;t<se.length;++t)i=Math.max(i,2*(se[t].points.radius+se[t].points.lineWidth/2));var s={left:i,right:i,top:i,bottom:i};e.each(p(),function(e,t){t.reserveSpace&&t.ticks&&t.ticks.length&&("x"===t.direction?(s.left=Math.max(s.left,t.labelWidth/2),s.right=Math.max(s.right,t.labelWidth/2)):(s.bottom=Math.max(s.bottom,t.labelHeight/2),s.top=Math.max(s.top,t.labelHeight/2)))}),ue.left=Math.ceil(Math.max(s.left,ue.left)),ue.right=Math.ceil(Math.max(s.right,ue.right)),ue.top=Math.ceil(Math.max(s.top,ue.top)),ue.bottom=Math.ceil(Math.max(s.bottom,ue.bottom))}function T(){var t,i=p(),s=ne.grid.show;for(var n in ue){var a=ne.grid.margin||0;ue[n]="number"==typeof a?a:a[n]||0}r(me.processOffset,[ue]);for(var n in ue)"object"==typeof ne.grid.borderWidth?ue[n]+=s?ne.grid.borderWidth[n]:0:ue[n]+=s?ne.grid.borderWidth:0;if(e.each(i,function(e,t){var i=t.options;t.show=null==i.show?t.used:i.show,t.reserveSpace=null==i.reserveSpace?t.show:i.reserveSpace,O(t)}),s){var o=e.grep(i,function(e){return e.show||e.reserveSpace});for(e.each(o,function(e,t){A(t),M(t),E(t,t.ticks),C(t)}),t=o.length-1;t>=0;--t)k(o[t]);D(),e.each(o,function(e,t){S(t)})}pe=ae.width-ue.left-ue.right,fe=ae.height-ue.bottom-ue.top,e.each(i,function(e,t){x(t)}),s&&H(),q()}function O(e){var t=e.options,i=+(null!=t.min?t.min:e.datamin),s=+(null!=t.max?t.max:e.datamax),n=s-i;if(0==n){var a=0==s?1:.01;null==t.min&&(i-=a),null!=t.max&&null==t.min||(s+=a)}else{var o=t.autoscaleMargin;null!=o&&(null==t.min&&(i-=n*o,i<0&&null!=e.datamin&&e.datamin>=0&&(i=0)),null==t.max&&(s+=n*o,s>0&&null!=e.datamax&&e.datamax<=0&&(s=0)))}e.min=i,e.max=s}function A(t){var i,n=t.options;i="number"==typeof n.ticks&&n.ticks>0?n.ticks:.3*Math.sqrt("x"==t.direction?ae.width:ae.height);var a=(t.max-t.min)/i,o=-Math.floor(Math.log(a)/Math.LN10),r=n.tickDecimals;null!=r&&o>r&&(o=r);var l,d=Math.pow(10,-o),c=a/d;if(c<1.5?l=1:c<3?(l=2,c>2.25&&(null==r||o+1<=r)&&(l=2.5,++o)):l=c<7.5?5:10,l*=d,null!=n.minTickSize&&l<n.minTickSize&&(l=n.minTickSize),t.delta=a,t.tickDecimals=Math.max(0,null!=r?r:o),t.tickSize=n.tickSize||l,"time"==n.mode&&!t.tickGenerator)throw new Error("Time mode requires the flot.time plugin.");if(t.tickGenerator||(t.tickGenerator=function(e){var t,i=[],n=s(e.min,e.tickSize),a=0,o=Number.NaN;do t=o,o=n+a*e.tickSize,i.push(o),++a;while(o<e.max&&o!=t);return i},t.tickFormatter=function(e,t){var i=t.tickDecimals?Math.pow(10,t.tickDecimals):1,s=""+Math.round(e*i)/i;if(null!=t.tickDecimals){var n=s.indexOf("."),a=n==-1?0:s.length-n-1;if(a<t.tickDecimals)return(a?s:s+".")+(""+i).substr(1,t.tickDecimals-a)}return s}),e.isFunction(n.tickFormatter)&&(t.tickFormatter=function(e,t){return""+n.tickFormatter(e,t)}),null!=n.alignTicksWithAxis){var h=("x"==t.direction?ce:he)[n.alignTicksWithAxis-1];if(h&&h.used&&h!=t){var u=t.tickGenerator(t);if(u.length>0&&(null==n.min&&(t.min=Math.min(t.min,u[0])),null==n.max&&u.length>1&&(t.max=Math.max(t.max,u[u.length-1]))),t.tickGenerator=function(e){var t,i,s=[];for(i=0;i<h.ticks.length;++i)t=(h.ticks[i].v-h.min)/(h.max-h.min),t=e.min+t*(e.max-e.min),s.push(t);return s},!t.mode&&null==n.tickDecimals){var p=Math.max(0,-Math.floor(Math.log(t.delta)/Math.LN10)+1),f=t.tickGenerator(t);f.length>1&&/\..*0$/.test((f[1]-f[0]).toFixed(p))||(t.tickDecimals=p)}}}}function M(t){var i=t.options.ticks,s=[];null==i||"number"==typeof i&&i>0?s=t.tickGenerator(t):i&&(s=e.isFunction(i)?i(t):i);var n,a;for(t.ticks=[],n=0;n<s.length;++n){var o=null,r=s[n];"object"==typeof r?(a=+r[0],r.length>1&&(o=r[1])):a=+r,null==o&&(o=t.tickFormatter(a,t)),isNaN(a)||t.ticks.push({v:a,label:o})}}function E(e,t){e.options.autoscaleMargin&&t.length>0&&(null==e.options.min&&(e.min=Math.min(e.min,t[0].v)),null==e.options.max&&t.length>1&&(e.max=Math.max(e.max,t[t.length-1].v)))}function I(){ae.clear(),r(me.drawBackground,[le]);var e=ne.grid;e.show&&e.backgroundColor&&N(),e.show&&!e.aboveData&&P();for(var t=0;t<se.length;++t)r(me.drawSeries,[le,se[t]]),L(se[t]);r(me.draw,[le]),e.show&&e.aboveData&&P(),ae.render(),G()}function $(e,t){for(var i,s,n,a,o=p(),r=0;r<o.length;++r)if(i=o[r],i.direction==t&&(a=t+i.n+"axis",e[a]||1!=i.n||(a=t+"axis"),e[a])){s=e[a].from,n=e[a].to;break}if(e[a]||(i="x"==t?ce[0]:he[0],s=e[t+"1"],n=e[t+"2"]),null!=s&&null!=n&&s>n){var l=s;s=n,n=l}return{from:s,to:n,axis:i}}function N(){le.save(),le.translate(ue.left,ue.top),le.fillStyle=ie(ne.grid.backgroundColor,fe,0,"rgba(255, 255, 255, 0)"),le.fillRect(0,0,pe,fe),le.restore()}function P(){var t,i,s,n;le.save(),le.translate(ue.left,ue.top);var a=ne.grid.markings;if(a)for(e.isFunction(a)&&(i=ge.getAxes(),i.xmin=i.xaxis.min,i.xmax=i.xaxis.max,i.ymin=i.yaxis.min,i.ymax=i.yaxis.max,a=a(i)),t=0;t<a.length;++t){var o=a[t],r=$(o,"x"),l=$(o,"y");if(null==r.from&&(r.from=r.axis.min),null==r.to&&(r.to=r.axis.max),null==l.from&&(l.from=l.axis.min),null==l.to&&(l.to=l.axis.max),!(r.to<r.axis.min||r.from>r.axis.max||l.to<l.axis.min||l.from>l.axis.max)){r.from=Math.max(r.from,r.axis.min),r.to=Math.min(r.to,r.axis.max),l.from=Math.max(l.from,l.axis.min),l.to=Math.min(l.to,l.axis.max);var d=r.from===r.to,c=l.from===l.to;if(!d||!c)if(r.from=Math.floor(r.axis.p2c(r.from)),r.to=Math.floor(r.axis.p2c(r.to)),l.from=Math.floor(l.axis.p2c(l.from)),l.to=Math.floor(l.axis.p2c(l.to)),d||c){var h=o.lineWidth||ne.grid.markingsLineWidth,u=h%2?.5:0;le.beginPath(),le.strokeStyle=o.color||ne.grid.markingsColor,le.lineWidth=h,d?(le.moveTo(r.to+u,l.from),le.lineTo(r.to+u,l.to)):(le.moveTo(r.from,l.to+u),le.lineTo(r.to,l.to+u)),le.stroke()}else le.fillStyle=o.color||ne.grid.markingsColor,le.fillRect(r.from,l.to,r.to-r.from,l.from-l.to)}}i=p(),s=ne.grid.borderWidth;for(var f=0;f<i.length;++f){var m,g,v,b,y=i[f],_=y.box,w=y.tickLength;if(y.show&&0!=y.ticks.length){for(le.lineWidth=1,"x"==y.direction?(m=0,g="full"==w?"top"==y.position?0:fe:_.top-ue.top+("top"==y.position?_.height:0)):(g=0,m="full"==w?"left"==y.position?0:pe:_.left-ue.left+("left"==y.position?_.width:0)),y.innermost||(le.strokeStyle=y.options.color,le.beginPath(),v=b=0,"x"==y.direction?v=pe+1:b=fe+1,1==le.lineWidth&&("x"==y.direction?g=Math.floor(g)+.5:m=Math.floor(m)+.5),le.moveTo(m,g),le.lineTo(m+v,g+b),le.stroke()),le.strokeStyle=y.options.tickColor,le.beginPath(),t=0;t<y.ticks.length;++t){var x=y.ticks[t].v;v=b=0,isNaN(x)||x<y.min||x>y.max||"full"==w&&("object"==typeof s&&s[y.position]>0||s>0)&&(x==y.min||x==y.max)||("x"==y.direction?(m=y.p2c(x),b="full"==w?-fe:w,"top"==y.position&&(b=-b)):(g=y.p2c(x),v="full"==w?-pe:w,"left"==y.position&&(v=-v)),1==le.lineWidth&&("x"==y.direction?m=Math.floor(m)+.5:g=Math.floor(g)+.5),le.moveTo(m,g),le.lineTo(m+v,g+b))}le.stroke()}}s&&(n=ne.grid.borderColor,"object"==typeof s||"object"==typeof n?("object"!=typeof s&&(s={top:s,right:s,bottom:s,left:s}),"object"!=typeof n&&(n={top:n,right:n,bottom:n,left:n}),s.top>0&&(le.strokeStyle=n.top,le.lineWidth=s.top,le.beginPath(),le.moveTo(0-s.left,0-s.top/2),le.lineTo(pe,0-s.top/2),le.stroke()),s.right>0&&(le.strokeStyle=n.right,le.lineWidth=s.right,le.beginPath(),le.moveTo(pe+s.right/2,0-s.top),le.lineTo(pe+s.right/2,fe),le.stroke()),s.bottom>0&&(le.strokeStyle=n.bottom,le.lineWidth=s.bottom,le.beginPath(),le.moveTo(pe+s.right,fe+s.bottom/2),le.lineTo(0,fe+s.bottom/2),le.stroke()),s.left>0&&(le.strokeStyle=n.left,le.lineWidth=s.left,le.beginPath(),le.moveTo(0-s.left/2,fe+s.bottom),le.lineTo(0-s.left/2,0),le.stroke())):(le.lineWidth=s,le.strokeStyle=ne.grid.borderColor,le.strokeRect(-s/2,-s/2,pe+s,fe+s))),le.restore()}function H(){e.each(p(),function(e,t){var i,s,n,a,o,r=t.box,l=t.direction+"Axis "+t.direction+t.n+"Axis",d="flot-"+t.direction+"-axis flot-"+t.direction+t.n+"-axis "+l,c=t.options.font||"flot-tick-label tickLabel";if(ae.removeText(d),t.show&&0!=t.ticks.length)for(var h=0;h<t.ticks.length;++h)i=t.ticks[h],!i.label||i.v<t.min||i.v>t.max||("x"==t.direction?(a="center",s=ue.left+t.p2c(i.v),"bottom"==t.position?n=r.top+r.padding:(n=r.top+r.height-r.padding,o="bottom")):(o="middle",n=ue.top+t.p2c(i.v),"left"==t.position?(s=r.left+r.width-r.padding,a="right"):s=r.left+r.padding),ae.addText(d,s,n,i.label,c,null,null,a,o))})}function L(e){e.lines.show&&j(e),e.bars.show&&R(e),e.points.show&&F(e)}function j(e){function t(e,t,i,s,n){var a=e.points,o=e.pointsize,r=null,l=null;le.beginPath();for(var d=o;d<a.length;d+=o){var c=a[d-o],h=a[d-o+1],u=a[d],p=a[d+1];if(null!=c&&null!=u){if(h<=p&&h<n.min){if(p<n.min)continue;c=(n.min-h)/(p-h)*(u-c)+c,h=n.min}else if(p<=h&&p<n.min){if(h<n.min)continue;u=(n.min-h)/(p-h)*(u-c)+c,p=n.min}if(h>=p&&h>n.max){if(p>n.max)continue;c=(n.max-h)/(p-h)*(u-c)+c,h=n.max}else if(p>=h&&p>n.max){if(h>n.max)continue;u=(n.max-h)/(p-h)*(u-c)+c,p=n.max}if(c<=u&&c<s.min){if(u<s.min)continue;h=(s.min-c)/(u-c)*(p-h)+h,c=s.min}else if(u<=c&&u<s.min){if(c<s.min)continue;p=(s.min-c)/(u-c)*(p-h)+h,u=s.min}if(c>=u&&c>s.max){if(u>s.max)continue;h=(s.max-c)/(u-c)*(p-h)+h,c=s.max}else if(u>=c&&u>s.max){if(c>s.max)continue;p=(s.max-c)/(u-c)*(p-h)+h,u=s.max}c==r&&h==l||le.moveTo(s.p2c(c)+t,n.p2c(h)+i),r=u,l=p,le.lineTo(s.p2c(u)+t,n.p2c(p)+i)}}le.stroke()}function i(e,t,i){for(var s=e.points,n=e.pointsize,a=Math.min(Math.max(0,i.min),i.max),o=0,r=!1,l=1,d=0,c=0;;){if(n>0&&o>s.length+n)break;o+=n;var h=s[o-n],u=s[o-n+l],p=s[o],f=s[o+l];if(r){if(n>0&&null!=h&&null==p){c=o,n=-n,l=2;continue}if(n<0&&o==d+n){le.fill(),r=!1,n=-n,l=1,o=d=c+n;continue}}if(null!=h&&null!=p){if(h<=p&&h<t.min){if(p<t.min)continue;u=(t.min-h)/(p-h)*(f-u)+u,h=t.min}else if(p<=h&&p<t.min){if(h<t.min)continue;f=(t.min-h)/(p-h)*(f-u)+u,p=t.min}if(h>=p&&h>t.max){if(p>t.max)continue;u=(t.max-h)/(p-h)*(f-u)+u,h=t.max}else if(p>=h&&p>t.max){if(h>t.max)continue;f=(t.max-h)/(p-h)*(f-u)+u,p=t.max}if(r||(le.beginPath(),le.moveTo(t.p2c(h),i.p2c(a)),r=!0),u>=i.max&&f>=i.max)le.lineTo(t.p2c(h),i.p2c(i.max)),le.lineTo(t.p2c(p),i.p2c(i.max));else if(u<=i.min&&f<=i.min)le.lineTo(t.p2c(h),i.p2c(i.min)),le.lineTo(t.p2c(p),i.p2c(i.min));else{var m=h,g=p;u<=f&&u<i.min&&f>=i.min?(h=(i.min-u)/(f-u)*(p-h)+h,u=i.min):f<=u&&f<i.min&&u>=i.min&&(p=(i.min-u)/(f-u)*(p-h)+h,f=i.min),u>=f&&u>i.max&&f<=i.max?(h=(i.max-u)/(f-u)*(p-h)+h,u=i.max):f>=u&&f>i.max&&u<=i.max&&(p=(i.max-u)/(f-u)*(p-h)+h,f=i.max),h!=m&&le.lineTo(t.p2c(m),i.p2c(u)),le.lineTo(t.p2c(h),i.p2c(u)),le.lineTo(t.p2c(p),i.p2c(f)),p!=g&&(le.lineTo(t.p2c(p),i.p2c(f)),le.lineTo(t.p2c(g),i.p2c(f)))}}}}le.save(),le.translate(ue.left,ue.top),le.lineJoin="round";var s=e.lines.lineWidth,n=e.shadowSize;if(s>0&&n>0){le.lineWidth=n,le.strokeStyle="rgba(0,0,0,0.1)";var a=Math.PI/18;t(e.datapoints,Math.sin(a)*(s/2+n/2),Math.cos(a)*(s/2+n/2),e.xaxis,e.yaxis),le.lineWidth=n/2,t(e.datapoints,Math.sin(a)*(s/2+n/4),Math.cos(a)*(s/2+n/4),e.xaxis,e.yaxis)}le.lineWidth=s,le.strokeStyle=e.color;var o=z(e.lines,e.color,0,fe);o&&(le.fillStyle=o,i(e.datapoints,e.xaxis,e.yaxis)),s>0&&t(e.datapoints,0,0,e.xaxis,e.yaxis),le.restore()}function F(e){function t(e,t,i,s,n,a,o,r){for(var l=e.points,d=e.pointsize,c=0;c<l.length;c+=d){var h=l[c],u=l[c+1];null==h||h<a.min||h>a.max||u<o.min||u>o.max||(le.beginPath(),h=a.p2c(h),u=o.p2c(u)+s,"circle"==r?le.arc(h,u,t,0,n?Math.PI:2*Math.PI,!1):r(le,h,u,t,n),le.closePath(),i&&(le.fillStyle=i,le.fill()),le.stroke())}}le.save(),le.translate(ue.left,ue.top);var i=e.points.lineWidth,s=e.shadowSize,n=e.points.radius,a=e.points.symbol;if(0==i&&(i=1e-4),i>0&&s>0){var o=s/2;le.lineWidth=o,le.strokeStyle="rgba(0,0,0,0.1)",t(e.datapoints,n,null,o+o/2,!0,e.xaxis,e.yaxis,a),le.strokeStyle="rgba(0,0,0,0.2)",t(e.datapoints,n,null,o/2,!0,e.xaxis,e.yaxis,a)}le.lineWidth=i,le.strokeStyle=e.color,t(e.datapoints,n,z(e.points,e.color),0,!1,e.xaxis,e.yaxis,a),le.restore()}function U(e,t,i,s,n,a,o,r,l,d,c){var h,u,p,f,m,g,v,b,y;d?(b=g=v=!0,m=!1,h=i,u=e,f=t+s,p=t+n,u<h&&(y=u,u=h,h=y,m=!0,g=!1)):(m=g=v=!0,b=!1,h=e+s,u=e+n,p=i,f=t,f<p&&(y=f,f=p,p=y,b=!0,v=!1)),u<o.min||h>o.max||f<r.min||p>r.max||(h<o.min&&(h=o.min,m=!1),u>o.max&&(u=o.max,g=!1),p<r.min&&(p=r.min,b=!1),f>r.max&&(f=r.max,v=!1),h=o.p2c(h),p=r.p2c(p),u=o.p2c(u),f=r.p2c(f),a&&(l.fillStyle=a(p,f),l.fillRect(h,f,u-h,p-f)),c>0&&(m||g||v||b)&&(l.beginPath(),l.moveTo(h,p),m?l.lineTo(h,f):l.moveTo(h,f),v?l.lineTo(u,f):l.moveTo(u,f),g?l.lineTo(u,p):l.moveTo(u,p),b?l.lineTo(h,p):l.moveTo(h,p),l.stroke()))}function R(e){function t(t,i,s,n,a,o){for(var r=t.points,l=t.pointsize,d=0;d<r.length;d+=l)null!=r[d]&&U(r[d],r[d+1],r[d+2],i,s,n,a,o,le,e.bars.horizontal,e.bars.lineWidth)}le.save(),le.translate(ue.left,ue.top),le.lineWidth=e.bars.lineWidth,le.strokeStyle=e.color;var i;switch(e.bars.align){case"left":i=0;break;case"right":i=-e.bars.barWidth;break;default:i=-e.bars.barWidth/2}var s=e.bars.fill?function(t,i){return z(e.bars,e.color,t,i)}:null;t(e.datapoints,i,i+e.bars.barWidth,s,e.xaxis,e.yaxis),le.restore()}function z(t,i,s,n){var a=t.fill;if(!a)return null;if(t.fillColor)return ie(t.fillColor,s,n,i);var o=e.color.parse(i);return o.a="number"==typeof a?a:.4,o.normalize(),o.toString()}function q(){if(null!=ne.legend.container?e(ne.legend.container).html(""):i.find(".legend").remove(),ne.legend.show){for(var t,s,n=[],a=[],o=!1,r=ne.legend.labelFormatter,l=0;l<se.length;++l)t=se[l],t.label&&(s=r?r(t.label,t):t.label,s&&a.push({label:s,color:t.color}));if(ne.legend.sorted)if(e.isFunction(ne.legend.sorted))a.sort(ne.legend.sorted);else if("reverse"==ne.legend.sorted)a.reverse();else{var d="descending"!=ne.legend.sorted;a.sort(function(e,t){return e.label==t.label?0:e.label<t.label!=d?1:-1})}for(var l=0;l<a.length;++l){var c=a[l];l%ne.legend.noColumns==0&&(o&&n.push("</tr>"),n.push("<tr>"),o=!0),n.push('<td class="legendColorBox"><div style="border:1px solid '+ne.legend.labelBoxBorderColor+';padding:1px"><div style="width:4px;height:0;border:5px solid '+c.color+';overflow:hidden"></div></div></td><td class="legendLabel">'+c.label+"</td>")}if(o&&n.push("</tr>"),0!=n.length){var h='<table style="font-size:smaller;color:'+ne.grid.color+'">'+n.join("")+"</table>";if(null!=ne.legend.container)e(ne.legend.container).html(h);else{var u="",p=ne.legend.position,f=ne.legend.margin;null==f[0]&&(f=[f,f]),"n"==p.charAt(0)?u+="top:"+(f[1]+ue.top)+"px;":"s"==p.charAt(0)&&(u+="bottom:"+(f[1]+ue.bottom)+"px;"),"e"==p.charAt(1)?u+="right:"+(f[0]+ue.right)+"px;":"w"==p.charAt(1)&&(u+="left:"+(f[0]+ue.left)+"px;");var m=e('<div class="legend">'+h.replace('style="','style="position:absolute;'+u+";")+"</div>").appendTo(i);if(0!=ne.legend.backgroundOpacity){var g=ne.legend.backgroundColor;null==g&&(g=ne.grid.backgroundColor,g=g&&"string"==typeof g?e.color.parse(g):e.color.extract(m,"background-color"),g.a=1,g=g.toString());var v=m.children();e('<div style="position:absolute;width:'+v.width()+"px;height:"+v.height()+"px;"+u+"background-color:"+g+';"> </div>').prependTo(m).css("opacity",ne.legend.backgroundOpacity)}}}}}function B(e,t,i){var s,n,a,o=ne.grid.mouseActiveRadius,r=o*o+1,l=null;for(s=se.length-1;s>=0;--s)if(i(se[s])){var d=se[s],c=d.xaxis,h=d.yaxis,u=d.datapoints.points,p=c.c2p(e),f=h.c2p(t),m=o/c.scale,g=o/h.scale;if(a=d.datapoints.pointsize,c.options.inverseTransform&&(m=Number.MAX_VALUE),h.options.inverseTransform&&(g=Number.MAX_VALUE),d.lines.show||d.points.show)for(n=0;n<u.length;n+=a){var v=u[n],b=u[n+1];if(null!=v&&!(v-p>m||v-p<-m||b-f>g||b-f<-g)){var y=Math.abs(c.p2c(v)-e),_=Math.abs(h.p2c(b)-t),w=y*y+_*_;w<r&&(r=w,l=[s,n/a])}}if(d.bars.show&&!l){var x,C;switch(d.bars.align){case"left":x=0;break;case"right":x=-d.bars.barWidth;break;default:x=-d.bars.barWidth/2}for(C=x+d.bars.barWidth,n=0;n<u.length;n+=a){var v=u[n],b=u[n+1],k=u[n+2];null!=v&&(se[s].bars.horizontal?p<=Math.max(k,v)&&p>=Math.min(k,v)&&f>=b+x&&f<=b+C:p>=v+x&&p<=v+C&&f>=Math.min(k,b)&&f<=Math.max(k,b))&&(l=[s,n/a])}}}return l?(s=l[0],n=l[1],a=se[s].datapoints.pointsize,{datapoint:se[s].datapoints.points.slice(n*a,(n+1)*a),dataIndex:n,series:se[s],seriesIndex:s}):null}function W(e){ne.grid.hoverable&&K("plothover",e,function(e){return 0!=e.hoverable})}function Y(e){ne.grid.hoverable&&K("plothover",e,function(e){return!1})}function V(e){K("plotclick",e,function(e){return 0!=e.clickable})}function K(e,t,s){var n=re.offset(),a=t.pageX-n.left-ue.left,o=t.pageY-n.top-ue.top,r=f({left:a,top:o});r.pageX=t.pageX,r.pageY=t.pageY;var l=B(a,o,s);if(l&&(l.pageX=parseInt(l.series.xaxis.p2c(l.datapoint[0])+n.left+ue.left,10),l.pageY=parseInt(l.series.yaxis.p2c(l.datapoint[1])+n.top+ue.top,10)),ne.grid.autoHighlight){for(var d=0;d<ve.length;++d){var c=ve[d];c.auto!=e||l&&c.series==l.series&&c.point[0]==l.datapoint[0]&&c.point[1]==l.datapoint[1]||X(c.series,c.point)}l&&Q(l.series,l.datapoint,e)}i.trigger(e,[r,l])}function G(){var e=ne.interaction.redrawOverlayInterval;return e==-1?void J():void(be||(be=setTimeout(J,e)))}function J(){be=null,de.save(),oe.clear(),de.translate(ue.left,ue.top);var e,t;for(e=0;e<ve.length;++e)t=ve[e],t.series.bars.show?te(t.series,t.point):ee(t.series,t.point);de.restore(),r(me.drawOverlay,[de])}function Q(e,t,i){if("number"==typeof e&&(e=se[e]),"number"==typeof t){var s=e.datapoints.pointsize;t=e.datapoints.points.slice(s*t,s*(t+1))}var n=Z(e,t);n==-1?(ve.push({series:e,point:t,auto:i}),G()):i||(ve[n].auto=!1)}function X(e,t){if(null==e&&null==t)return ve=[],void G();if("number"==typeof e&&(e=se[e]),"number"==typeof t){var i=e.datapoints.pointsize;t=e.datapoints.points.slice(i*t,i*(t+1))}var s=Z(e,t);s!=-1&&(ve.splice(s,1),G())}function Z(e,t){for(var i=0;i<ve.length;++i){var s=ve[i];if(s.series==e&&s.point[0]==t[0]&&s.point[1]==t[1])return i}return-1}function ee(t,i){var s=i[0],n=i[1],a=t.xaxis,o=t.yaxis,r="string"==typeof t.highlightColor?t.highlightColor:e.color.parse(t.color).scale("a",.5).toString();if(!(s<a.min||s>a.max||n<o.min||n>o.max)){var l=t.points.radius+t.points.lineWidth/2;de.lineWidth=l,de.strokeStyle=r;var d=1.5*l;s=a.p2c(s),n=o.p2c(n),de.beginPath(),"circle"==t.points.symbol?de.arc(s,n,d,0,2*Math.PI,!1):t.points.symbol(de,s,n,d,!1),de.closePath(),de.stroke()}}function te(t,i){var s,n="string"==typeof t.highlightColor?t.highlightColor:e.color.parse(t.color).scale("a",.5).toString(),a=n;switch(t.bars.align){case"left":s=0;break;case"right":s=-t.bars.barWidth;break;default:s=-t.bars.barWidth/2}de.lineWidth=t.bars.lineWidth,de.strokeStyle=n,U(i[0],i[1],i[2]||0,s,s+t.bars.barWidth,function(){return a},t.xaxis,t.yaxis,de,t.bars.horizontal,t.bars.lineWidth)}function ie(t,i,s,n){if("string"==typeof t)return t;for(var a=le.createLinearGradient(0,s,0,i),o=0,r=t.colors.length;o<r;++o){var l=t.colors[o];if("string"!=typeof l){var d=e.color.parse(n);null!=l.brightness&&(d=d.scale("rgb",l.brightness)),null!=l.opacity&&(d.a*=l.opacity),l=d.toString()}a.addColorStop(o/(r-1),l)}return a}var se=[],ne={colors:["#edc240","#afd8f8","#cb4b4b","#4da74d","#9440ed"],legend:{show:!0,noColumns:1,labelFormatter:null,labelBoxBorderColor:"#ccc",container:null,position:"ne",margin:5,backgroundColor:null,backgroundOpacity:.85,sorted:null},xaxis:{show:null,position:"bottom",mode:null,font:null,color:null,tickColor:null,transform:null,inverseTransform:null,min:null,max:null,autoscaleMargin:null,ticks:null,tickFormatter:null,labelWidth:null,labelHeight:null,reserveSpace:null,tickLength:null,alignTicksWithAxis:null,tickDecimals:null,tickSize:null,minTickSize:null},yaxis:{autoscaleMargin:.02,position:"left"},xaxes:[],yaxes:[],series:{points:{show:!1,radius:3,lineWidth:2,fill:!0,fillColor:"#ffffff",symbol:"circle"},lines:{lineWidth:2,fill:!1,fillColor:null,steps:!1},bars:{show:!1,lineWidth:2,barWidth:1,fill:!0,fillColor:null,align:"left",horizontal:!1,zero:!0},shadowSize:3,highlightColor:null},grid:{show:!0,aboveData:!1,color:"#545454",backgroundColor:null,borderColor:null,tickColor:null,margin:0,labelMargin:5,axisMargin:8,borderWidth:2,minBorderMargin:null,markings:null,markingsColor:"#f4f4f4",markingsLineWidth:2,clickable:!1,hoverable:!1,autoHighlight:!0,mouseActiveRadius:10},interaction:{redrawOverlayInterval:1e3/60},hooks:{}},ae=null,oe=null,re=null,le=null,de=null,ce=[],he=[],ue={left:0,right:0,top:0,bottom:0},pe=0,fe=0,me={processOptions:[],processRawData:[],processDatapoints:[],processOffset:[],drawBackground:[],drawSeries:[],draw:[],bindEvents:[],drawOverlay:[],shutdown:[]},ge=this;ge.setData=c,ge.setupGrid=T,ge.draw=I,ge.getPlaceholder=function(){return i},ge.getCanvas=function(){return ae.element},ge.getPlotOffset=function(){return ue},ge.width=function(){return pe},ge.height=function(){return fe},ge.offset=function(){var e=re.offset();return e.left+=ue.left,e.top+=ue.top,e},ge.getData=function(){return se},ge.getAxes=function(){var t={};return e.each(ce.concat(he),function(e,i){i&&(t[i.direction+(1!=i.n?i.n:"")+"axis"]=i)}),t},ge.getXAxes=function(){return ce},ge.getYAxes=function(){return he},ge.c2p=f,ge.p2c=m,ge.getOptions=function(){return ne},ge.highlight=Q,ge.unhighlight=X,ge.triggerRedrawOverlay=G,ge.pointOffset=function(e){return{left:parseInt(ce[u(e,"x")-1].p2c(+e.x)+ue.left,10),top:parseInt(he[u(e,"y")-1].p2c(+e.y)+ue.top,10)}},ge.shutdown=w,ge.destroy=function(){w(),i.removeData("plot").empty(),se=[],ne=null,ae=null,oe=null,re=null,le=null,de=null,ce=[],he=[],me=null,ve=[],ge=null},ge.resize=function(){var e=i.width(),t=i.height();ae.resize(e,t),oe.resize(e,t)},ge.hooks=me,l(ge),d(a),y(),c(n),T(),I(),_();var ve=[],be=null}function s(e,t){return t*Math.floor(e/t)}var n=Object.prototype.hasOwnProperty;e.fn.detach||(e.fn.detach=function(){return this.each(function(){this.parentNode&&this.parentNode.removeChild(this)})}),t.prototype.resize=function(e,t){if(e<=0||t<=0)throw new Error("Invalid dimensions for plot, width = "+e+", height = "+t);var i=this.element,s=this.context,n=this.pixelRatio;this.width!=e&&(i.width=e*n,i.style.width=e+"px",this.width=e),this.height!=t&&(i.height=t*n,i.style.height=t+"px",this.height=t),s.restore(),s.save(),s.scale(n,n)},t.prototype.clear=function(){this.context.clearRect(0,0,this.width,this.height)},t.prototype.render=function(){var e=this._textCache;for(var t in e)if(n.call(e,t)){var i=this.getTextLayer(t),s=e[t];i.hide();for(var a in s)if(n.call(s,a)){var o=s[a];for(var r in o)if(n.call(o,r)){for(var l,d=o[r].positions,c=0;l=d[c];c++)l.active?l.rendered||(i.append(l.element),l.rendered=!0):(d.splice(c--,1),l.rendered&&l.element.detach());0==d.length&&delete o[r]}}i.show()}},t.prototype.getTextLayer=function(t){var i=this.text[t];return null==i&&(null==this.textContainer&&(this.textContainer=e("<div class='flot-text'></div>").css({position:"absolute",top:0,left:0,bottom:0,right:0,"font-size":"smaller",color:"#545454"}).insertAfter(this.element)),i=this.text[t]=e("<div></div>").addClass(t).css({position:"absolute",top:0,left:0,bottom:0,right:0}).appendTo(this.textContainer)),i},t.prototype.getTextInfo=function(t,i,s,n,a){var o,r,l,d;if(i=""+i,o="object"==typeof s?s.style+" "+s.variant+" "+s.weight+" "+s.size+"px/"+s.lineHeight+"px "+s.family:s,r=this._textCache[t],
null==r&&(r=this._textCache[t]={}),l=r[o],null==l&&(l=r[o]={}),d=l[i],null==d){var c=e("<div></div>").html(i).css({position:"absolute","max-width":a,top:-9999}).appendTo(this.getTextLayer(t));"object"==typeof s?c.css({font:o,color:s.color}):"string"==typeof s&&c.addClass(s),d=l[i]={width:c.outerWidth(!0),height:c.outerHeight(!0),element:c,positions:[]},c.detach()}return d},t.prototype.addText=function(e,t,i,s,n,a,o,r,l){var d=this.getTextInfo(e,s,n,a,o),c=d.positions;"center"==r?t-=d.width/2:"right"==r&&(t-=d.width),"middle"==l?i-=d.height/2:"bottom"==l&&(i-=d.height);for(var h,u=0;h=c[u];u++)if(h.x==t&&h.y==i)return void(h.active=!0);h={active:!0,rendered:!1,element:c.length?d.element.clone():d.element,x:t,y:i},c.push(h),h.element.css({top:Math.round(i),left:Math.round(t),"text-align":r})},t.prototype.removeText=function(e,t,i,s,a,o){if(null==s){var r=this._textCache[e];if(null!=r)for(var l in r)if(n.call(r,l)){var d=r[l];for(var c in d)if(n.call(d,c))for(var h,u=d[c].positions,p=0;h=u[p];p++)h.active=!1}}else for(var h,u=this.getTextInfo(e,s,a,o).positions,p=0;h=u[p];p++)h.x==t&&h.y==i&&(h.active=!1)},e.plot=function(t,s,n){var a=new i(e(t),s,n,e.plot.plugins);return a},e.plot.version="0.8.3",e.plot.plugins=[],e.fn.plot=function(t,i){return this.each(function(){e.plot(this,t,i)})}}(jQuery),function(e){function t(e){function t(e,t){for(var i=null,s=0;s<t.length&&e!=t[s];++s)t[s].stack==e.stack&&(i=t[s]);return i}function i(e,i,s){if(null!=i.stack&&i.stack!==!1){var n=t(i,e.getData());if(n){for(var a,o,r,l,d,c,h,u,p=s.pointsize,f=s.points,m=n.datapoints.pointsize,g=n.datapoints.points,v=[],b=i.lines.show,y=i.bars.horizontal,_=p>2&&(y?s.format[2].x:s.format[2].y),w=b&&i.lines.steps,x=!0,C=y?1:0,k=y?0:1,S=0,D=0;;){if(S>=f.length)break;if(h=v.length,null==f[S]){for(u=0;u<p;++u)v.push(f[S+u]);S+=p}else if(D>=g.length){if(!b)for(u=0;u<p;++u)v.push(f[S+u]);S+=p}else if(null==g[D]){for(u=0;u<p;++u)v.push(null);x=!0,D+=m}else{if(a=f[S+C],o=f[S+k],l=g[D+C],d=g[D+k],c=0,a==l){for(u=0;u<p;++u)v.push(f[S+u]);v[h+k]+=d,c=d,S+=p,D+=m}else if(a>l){if(b&&S>0&&null!=f[S-p]){for(r=o+(f[S-p+k]-o)*(l-a)/(f[S-p+C]-a),v.push(l),v.push(r+d),u=2;u<p;++u)v.push(f[S+u]);c=d}D+=m}else{if(x&&b){S+=p;continue}for(u=0;u<p;++u)v.push(f[S+u]);b&&D>0&&null!=g[D-m]&&(c=d+(g[D-m+k]-d)*(a-l)/(g[D-m+C]-l)),v[h+k]+=c,S+=p}x=!1,h!=v.length&&_&&(v[h+2]+=c)}if(w&&h!=v.length&&h>0&&null!=v[h]&&v[h]!=v[h-p]&&v[h+1]!=v[h-p+1]){for(u=0;u<p;++u)v[h+p+u]=v[h+u];v[h+1]=v[h-p+1]}}s.points=v}}}e.hooks.processDatapoints.push(i)}var i={series:{stack:null}};e.plot.plugins.push({init:t,options:i,name:"stack",version:"1.2"})}(jQuery),function(e){function t(e,t){return t*Math.floor(e/t)}function i(e,t,i,s){if("function"==typeof e.strftime)return e.strftime(t);var n=function(e,t){return e=""+e,t=""+(null==t?"0":t),1==e.length?t+e:e},a=[],o=!1,r=e.getHours(),l=r<12;null==i&&(i=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]),null==s&&(s=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]);var d;d=r>12?r-12:0==r?12:r;for(var c=0;c<t.length;++c){var h=t.charAt(c);if(o){switch(h){case"a":h=""+s[e.getDay()];break;case"b":h=""+i[e.getMonth()];break;case"d":h=n(e.getDate());break;case"e":h=n(e.getDate()," ");break;case"h":case"H":h=n(r);break;case"I":h=n(d);break;case"l":h=n(d," ");break;case"m":h=n(e.getMonth()+1);break;case"M":h=n(e.getMinutes());break;case"q":h=""+(Math.floor(e.getMonth()/3)+1);break;case"S":h=n(e.getSeconds());break;case"y":h=n(e.getFullYear()%100);break;case"Y":h=""+e.getFullYear();break;case"p":h=l?"am":"pm";break;case"P":h=l?"AM":"PM";break;case"w":h=""+e.getDay()}a.push(h),o=!1}else"%"==h?o=!0:a.push(h)}return a.join("")}function s(e){function t(e,t,i,s){e[t]=function(){return i[s].apply(i,arguments)}}var i={date:e};void 0!=e.strftime&&t(i,"strftime",e,"strftime"),t(i,"getTime",e,"getTime"),t(i,"setTime",e,"setTime");for(var s=["Date","Day","FullYear","Hours","Milliseconds","Minutes","Month","Seconds"],n=0;n<s.length;n++)t(i,"get"+s[n],e,"getUTC"+s[n]),t(i,"set"+s[n],e,"setUTC"+s[n]);return i}function n(e,t){if("browser"==t.timezone)return new Date(e);if(t.timezone&&"utc"!=t.timezone){if("undefined"!=typeof timezoneJS&&"undefined"!=typeof timezoneJS.Date){var i=new timezoneJS.Date;return i.setTimezone(t.timezone),i.setTime(e),i}return s(new Date(e))}return s(new Date(e))}function a(s){s.hooks.processOptions.push(function(s,a){e.each(s.getAxes(),function(e,s){var a=s.options;"time"==a.mode&&(s.tickGenerator=function(e){var i=[],s=n(e.min,a),o=0,l=a.tickSize&&"quarter"===a.tickSize[1]||a.minTickSize&&"quarter"===a.minTickSize[1]?c:d;null!=a.minTickSize&&(o="number"==typeof a.tickSize?a.tickSize:a.minTickSize[0]*r[a.minTickSize[1]]);for(var h=0;h<l.length-1&&!(e.delta<(l[h][0]*r[l[h][1]]+l[h+1][0]*r[l[h+1][1]])/2&&l[h][0]*r[l[h][1]]>=o);++h);var u=l[h][0],p=l[h][1];if("year"==p){if(null!=a.minTickSize&&"year"==a.minTickSize[1])u=Math.floor(a.minTickSize[0]);else{var f=Math.pow(10,Math.floor(Math.log(e.delta/r.year)/Math.LN10)),m=e.delta/r.year/f;u=m<1.5?1:m<3?2:m<7.5?5:10,u*=f}u<1&&(u=1)}e.tickSize=a.tickSize||[u,p];var g=e.tickSize[0];p=e.tickSize[1];var v=g*r[p];"second"==p?s.setSeconds(t(s.getSeconds(),g)):"minute"==p?s.setMinutes(t(s.getMinutes(),g)):"hour"==p?s.setHours(t(s.getHours(),g)):"month"==p?s.setMonth(t(s.getMonth(),g)):"quarter"==p?s.setMonth(3*t(s.getMonth()/3,g)):"year"==p&&s.setFullYear(t(s.getFullYear(),g)),s.setMilliseconds(0),v>=r.minute&&s.setSeconds(0),v>=r.hour&&s.setMinutes(0),v>=r.day&&s.setHours(0),v>=4*r.day&&s.setDate(1),v>=2*r.month&&s.setMonth(t(s.getMonth(),3)),v>=2*r.quarter&&s.setMonth(t(s.getMonth(),6)),v>=r.year&&s.setMonth(0);var b,y=0,_=Number.NaN;do if(b=_,_=s.getTime(),i.push(_),"month"==p||"quarter"==p)if(g<1){s.setDate(1);var w=s.getTime();s.setMonth(s.getMonth()+("quarter"==p?3:1));var x=s.getTime();s.setTime(_+y*r.hour+(x-w)*g),y=s.getHours(),s.setHours(0)}else s.setMonth(s.getMonth()+g*("quarter"==p?3:1));else"year"==p?s.setFullYear(s.getFullYear()+g):s.setTime(_+v);while(_<e.max&&_!=b);return i},s.tickFormatter=function(e,t){var s=n(e,t.options);if(null!=a.timeformat)return i(s,a.timeformat,a.monthNames,a.dayNames);var o,l=t.options.tickSize&&"quarter"==t.options.tickSize[1]||t.options.minTickSize&&"quarter"==t.options.minTickSize[1],d=t.tickSize[0]*r[t.tickSize[1]],c=t.max-t.min,h=a.twelveHourClock?" %p":"",u=a.twelveHourClock?"%I":"%H";o=d<r.minute?u+":%M:%S"+h:d<r.day?c<2*r.day?u+":%M"+h:"%b %d "+u+":%M"+h:d<r.month?"%b %d":l&&d<r.quarter||!l&&d<r.year?c<r.year?"%b":"%b %Y":l&&d<r.year?c<r.year?"Q%q":"Q%q %Y":"%Y";var p=i(s,o,a.monthNames,a.dayNames);return p})})})}var o={xaxis:{timezone:null,timeformat:null,twelveHourClock:!1,monthNames:null}},r={second:1e3,minute:6e4,hour:36e5,day:864e5,month:2592e6,quarter:7776e6,year:525949.2*60*1e3},l=[[1,"second"],[2,"second"],[5,"second"],[10,"second"],[30,"second"],[1,"minute"],[2,"minute"],[5,"minute"],[10,"minute"],[30,"minute"],[1,"hour"],[2,"hour"],[4,"hour"],[8,"hour"],[12,"hour"],[1,"day"],[2,"day"],[3,"day"],[.25,"month"],[.5,"month"],[1,"month"],[2,"month"]],d=l.concat([[3,"month"],[6,"month"],[1,"year"]]),c=l.concat([[1,"quarter"],[2,"quarter"],[1,"year"]]);e.plot.plugins.push({init:a,options:o,name:"time",version:"1.0"}),e.plot.formatDate=i,e.plot.dateGenerator=n}(jQuery),function(e){"use strict";function t(t){function s(t){k=t.getOptions();var i=k.series.grow.valueIndex;if(k.series.grow.active===!0){var s=!1,n=0;if(k.series.grow.reanimate&&_===d.PLOTTED_LAST_FRAME){g=!1,_=d.NOT_PLOTTED_YET,b=0,C=t.getData();var a=Math.min(C.length,w.length);for(n=0;n<a;n++)C[n].dataOld=w[n];s=!0,v=!0}if(!g){for(s||(C=t.getData()),_=d.NOT_PLOTTED_YET,b=0|+new Date,w=[],n=0;n<C.length;n++){var o=C[n];if(o.dataOrg=e.extend(!0,[],o.data),w.push(o.dataOrg),!s){i=o.grow.valueIndex;for(var r=0;r<o.data.length;r++)o.data[r][i]=null===o.dataOrg[r][i]?null:0}}t.setData(C),g=!0}}}function o(e){v===!0&&r(e)}function r(e){k=e.getOptions(),k.series.grow.active===!0&&(l(e.getData(),k),b=0|+new Date,m=n(u)),v=!1}function l(e,t){for(var i=t.series.grow.duration,s=0,n=e.length;s<n;s++){var a=e[s].grow.duration;i<a&&(i=a)}t.series.grow.duration=i}function h(e){i("resize")&&e.getPlaceholder().resize(p)}function u(){y=+new Date-b|0;for(var e=0,t=C.length;e<t;e++)for(var i=C[e],s=i.dataOld&&i.dataOld.length>0,a=0,o=i.grow.growings.length;a<o;a++){var r,l=i.grow.growings[a];s&&"reinit"!==l.reanimate?("function"==typeof l.reanimate&&(r=l.reanimate),r="continue"===l.reanimate?c.reanimate:c.none):r="function"==typeof l.stepMode?l.stepMode:c[l.stepMode]||c.none,r(i,y,l,_)}x.setData(C),x.draw(),_===d.NOT_PLOTTED_YET&&(_=d.PLOTTED_SOME_FRAMES),y<k.series.grow.duration?m=n(u):(_=d.PLOTTED_LAST_FRAME,m=null,x.getPlaceholder().trigger("growFinished"))}function p(){if(m){for(var i=0;i<C.length;i++){var s=C[i];s.data=e.extend(!0,[],s.dataOrg)}t.setData(C),t.setupGrid()}}function f(e){e.getPlaceholder().unbind("resize",p),m&&(a(m),m=null)}var m,g=!1,v=!0,b=0,y=0,_=d.NOT_PLOTTED_YET,w=[],x=t,C=null,k=null;t.hooks.drawSeries.push(s),t.hooks.draw.push(o),t.hooks.bindEvents.push(h),t.hooks.shutdown.push(f)}function i(t){for(var i=e.plot.plugins,s=0,n=i.length;s<n;s++){var a=i[s];if(a.name===t)return!0}return!1}function s(){for(var e=window.requestAnimationFrame,t=window.cancelAnimationFrame,i=+new Date,s=["ms","moz","webkit","o"],o=0;o<s.length&&!e;++o)e=window[s[o]+"RequestAnimationFrame"],t=window[s[o]+"CancelAnimationFrame"]||window[s[o]+"CancelRequestAnimationFrame"];e||(e=function(e){var t=+new Date,s=Math.max(0,16-(t-i)),n=window.setTimeout(function(){e(t+s)},s);return i=t+s,n}),t||(t=function(e){clearTimeout(e)}),n=e,a=t}var n,a,o="growraf",r="0.5.0",l={series:{grow:{active:!1,duration:1e3,valueIndex:1,reanimate:!0,growings:[{valueIndex:1,stepMode:"linear",stepDirection:"up",reanimate:"continue"}]}}},d={NOT_PLOTTED_YET:0,PLOTTED_SOME_FRAMES:1,PLOTTED_LAST_FRAME:2},c={none:function(e,t,i,s){if(s===d.NOT_PLOTTED_YET)for(var n=0,a=e.data.length;n<a;n++)e.data[n][i.valueIndex]=e.dataOrg[n][i.valueIndex]},linear:function(e,t,i){var s=Math.min(t/e.grow.duration,1),n=e.yaxis;e.bars&&e.bars.show&&e.bars.horizontal&&(n=e.xaxis);for(var a=0,o=e.data.length;a<o;a++){var r=e.dataOrg[a][i.valueIndex];null!==r?"up"===i.stepDirection?e.data[a][i.valueIndex]=r*s:"down"===i.stepDirection&&(e.data[a][i.valueIndex]=r+(n.max-r)*(1-s)):e.data[a][i.valueIndex]=null}},maximum:function(e,t,i){var s=Math.min(t/e.grow.duration,1),n=e.yaxis;e.bars&&e.bars.show&&e.bars.horizontal&&(n=e.xaxis);for(var a=n.max*s,o=n.min*s,r=n.max*(1-s),l=n.min*(1-s),d=0,c=e.data.length;d<c;d++){var h=e.dataOrg[d][i.valueIndex];null!==h?"up"===i.stepDirection?h>=0?e.data[d][i.valueIndex]=Math.min(h,a):e.data[d][i.valueIndex]=Math.max(h,o):"down"===i.stepDirection&&(h>=0?e.data[d][i.valueIndex]=Math.max(h,r):e.data[d][i.valueIndex]=Math.min(h,l)):e.data[d][i.valueIndex]=null}},delay:function(e,t,i){if(t>=e.grow.duration)for(var s=0,n=e.data.length;s<n;s++)e.data[s][i.valueIndex]=e.dataOrg[s][i.valueIndex]},reanimate:function(e,t,i){for(var s=Math.min(t/e.grow.duration,1),n=0,a=e.data.length;n<a;n++){var o=e.dataOrg[n][i.valueIndex];if(null===o)e.data[n][i.valueIndex]=null;else if(e.dataOld){var r=e.dataOld[n][i.valueIndex];e.data[n][i.valueIndex]=r+(o-r)*s}}}};s(),e.plot.plugins.push({init:t,options:l,name:o,version:r})}(jQuery),$(document).ready(function(){var e=!0;$(document.body).on("click","#send_reset_instr",function(){if($("#send_reset_instr").val("Processing"),$("#lostemail").val()&&null!=$("#lostemail").val()&&""!=$("#lostemail").val().trim()){var t=$("#lostemail").val(),i=/^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,4}$/,s=i.test(t);s&&e?(e=!1,$.ajax({type:"POST",url:"/changePassword",data:{emailId:t},async:!0,success:function(t){if("success"==t.status){$("#statusMessage").html(t.msg),$("#voice-box").fadeIn().delay(1e3).fadeOut();var i='<li><h3 class="forgot_header">Mail Sent!</h3></li><li><p>Password reset instructions has been sent to the given email address.</p></li><li class="last"><span class="back_signin_link">Back to Sign In</span></li>';$(".fg_pw").html(i),$(".back_signin_link").on("click",function(){$("#loginForm,.login_heading").show(),$(".fg_pw").hide()})}else $("#statusMessage").html(t.msg),$("#voice-box").fadeIn().delay(1e3).fadeOut();e=!0}})):($("#statusMessage").html("Please provide a valid email address"),$("#voice-box").fadeIn().delay(1e3).fadeOut(),$("#lostemail").addClass("error_field"))}else $("#statusMessage").html("Please provide a valid email address"),$("#voice-box").fadeIn().delay(1e3).fadeOut(),$("#lostemail").addClass("error_field")}),$(document.body).on("click",".back_signin_link",function(){var e='<li><h3 class="forgot_header">Forget your password?</h3><li><p>No worries, it happens. Just enter your email belowand we\'ll send you reset instructions</p></li><li><label>Email</label></li><li><input class="em" type="text" value="" id="lostemail"name="lostemail" onfocus="removeClass(this);" /></li><li><div class="global_btn2_lt"><input id="send_reset_instr" class="global_btn2_rt signin_btn" type="button" value="Send me reset instructions"  /></div><div class="clear_all"></div></li><li class="last"><span class="back_signin_link">Back to Sign In</span></li>';$(".fg_pw").html(e),$("#loginForm,.login_heading").show(),$(".fg_pw").hide()}),$(document.body).on("click","span.get_pw",function(){$("#loginForm,.login_heading").hide(),$("#lostemail").val(""),$(".fg_pw").show()}),$(document.body).on("click",".signin_btn",function(){login("general_login")}),$(document.body).keypress(function(e){13==e.keyCode&&$(".signin_btn").click()})});var oauthlogin=function(e,t){var i="",s="",n="";if(void 0!==typeof source&&"undefined"!=typeof source&&(s=source),"/"!=window.location.pathname)if("LANDING"===t){var a=window.location.pathname.split("/").filter(function(e){return e.length>0});if(a.length>1)i=window.location.pathname;else if(1==a.length){var o=window.location.pathname;i=("/"===o.substr(o.length-1,o.length-2)?o.substr(0,o.length-1):o.substr(0,o.length))+"/challenges/all"}}else i=window.location.pathname;n="my"!=window.location.hostname.split(".")[0]||"www"!=window.location.hostname.split(".")[0]?window.location.hostname.split(".")[0]:null,window.location="/Oauth/"+e+"?type=signin&redirect="+i+"&from="+t+"&univKey="+s+"&subdomain="+n};login=function(e){var t={};t.email=document.getElementById("email").value,t.password=document.getElementById("password").value;var i=validate(t);i&&(t.from=e,loginProceed(t))};var countryCode,cityCode="";countryCode=$($("#temp > div")[1]).html(),cityCode=$($("#temp > div")[2]).html();var app_mode_temp=""!=$($("#temp > div")[3]).html()?$($("#temp > div")[3]).html():"dev";window.app_mode=app_mode_temp?app_mode_temp:window.app_mode,window.app_mode&&(window.app_mode=window.app_mode.toLowerCase());var isValid=function(e){return null!==e&&""!==$.trim(e)},isValidPassword=function(e){return!($.trim(e).length<8||$.trim(e).length>128)||($.trim(e).length<8?showStatusMessage("Please choose a password of more than 8 characters"):$.trim(e).length>128&&showStatusMessage("Please choose a password of less than 128 characters"),!1)},isValidEmail=function(e){var t=!0;if(null==e&&""==$.trim(e))return!1;var i=/^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,4}$/;return t=i.test(e)},showStatusMessage=function(e){$("#voice-box").show(),document.getElementById("statusMessage").innerHTML=e,document.getElementById("voice-box").setAttribute("status",e),setTimeout("hideStatusMessage()",3e3)},hideStatusMessage=function(){$("#voice-box").fadeOut(3e3)},addErrorClass=function(e){$("#"+e).is(":visible")&&$("#"+e).addClass("loginError")},removeErrorClass=function(e){e.className=""},oauth=function(e,t){var i="";void 0!==typeof source&&"undefined"!=typeof source&&(i=source);var s="";if("/"!=window.location.pathname&&"/signup"!=window.location.pathname&&(s=window.location.pathname),"/"!=window.location.pathname&&"LANDING"===t){var n=window.location.pathname.split("/").filter(function(e){return e.length>0});if(n.length>1)s=window.location.pathname;else if(1==n.length){var a=window.location.pathname;s=("/"===a.substr(a.length-1,a.length-2)?a.substr(0,a.length-1):a.substr(0,a.length))+"/challenges/all"}}subdomain="my"!=window.location.hostname.split(".")[0]||"www"!=window.location.hostname.split(".")[0]?window.location.hostname.split(".")[0]:null,window.location="/Oauth/"+e+"?type=signup&redirect="+s+"&from="+t+"&univKey="+i+"&subdomain="+subdomain};pushGoogleAnalytics=function(e){if("live"!==app_mode&&"mint"!==app_mode||$("body").append('<script type="text/javascript">(function() {var stag = document.createElement(\'script\'); stag.type = "text/javascript"; stag.async = true; stag.src="https://webchat.voicecurve.com/livechat/script/1930005895"; var s = document.getElementsByTagName(\'script\')[0]; s.parentNode.insertBefore(stag,s);})();</script>'),"dev"!==app_mode&&"staging"!==app_mode){var t=e.category,i=e.action,s=e.label,n=0;e.value&&(n=parseInt(e.value)),0===n?ga("send","event",t,i,s):n>0&&ga("send","event",t,i,s,n)}};var swfobject=function(){function e(){if(!q){try{var e=H.getElementsByTagName("body")[0].appendChild(g("span"));e.parentNode.removeChild(e)}catch(e){return}q=!0;for(var t=F.length,i=0;i<t;i++)F[i]()}}function t(e){q?e():F[F.length]=e}function i(e){if(typeof P.addEventListener!=O)P.addEventListener("load",e,!1);else if(typeof H.addEventListener!=O)H.addEventListener("load",e,!1);else if(typeof P.attachEvent!=O)v(P,"onload",e);else if("function"==typeof P.onload){var t=P.onload;P.onload=function(){t(),e()}}else P.onload=e}function s(){j?n():a()}function n(){var e=H.getElementsByTagName("body")[0],t=g(A);t.setAttribute("type",I);var i=e.appendChild(t);if(i){var s=0;!function(){if(typeof i.GetVariable!=O){var n=i.GetVariable("$version");n&&(n=n.split(" ")[1].split(","),Y.pv=[parseInt(n[0],10),parseInt(n[1],10),parseInt(n[2],10)])}else if(s<10)return s++,void setTimeout(arguments.callee,10);e.removeChild(t),i=null,a()}()}else a()}function a(){var e=U.length;if(e>0)for(var t=0;t<e;t++){var i=U[t].id,s=U[t].callbackFn,n={success:!1,id:i};if(Y.pv[0]>0){var a=m(i);if(a)if(!b(U[t].swfVersion)||Y.wk&&Y.wk<312)if(U[t].expressInstall&&r()){var c={};c.data=U[t].expressInstall,c.width=a.getAttribute("width")||"0",c.height=a.getAttribute("height")||"0",a.getAttribute("class")&&(c.styleclass=a.getAttribute("class")),a.getAttribute("align")&&(c.align=a.getAttribute("align"));for(var h={},u=a.getElementsByTagName("param"),p=u.length,f=0;f<p;f++)"movie"!=u[f].getAttribute("name").toLowerCase()&&(h[u[f].getAttribute("name")]=u[f].getAttribute("value"));l(c,h,i,s)}else d(a),s&&s(n);else _(i,!0),s&&(n.success=!0,n.ref=o(i),s(n))}else if(_(i,!0),s){var g=o(i);g&&typeof g.SetVariable!=O&&(n.success=!0,n.ref=g),s(n)}}}function o(e){var t=null,i=m(e);if(i&&"OBJECT"==i.nodeName)if(typeof i.SetVariable!=O)t=i;else{var s=i.getElementsByTagName(A)[0];s&&(t=s)}return t}function r(){return!B&&b("6.0.65")&&(Y.win||Y.mac)&&!(Y.wk&&Y.wk<312)}function l(e,t,i,s){B=!0,k=s||null,S={success:!1,id:i};var n=m(i);if(n){"OBJECT"==n.nodeName?(x=c(n),C=null):(x=n,C=i),e.id=$,(typeof e.width==O||!/%$/.test(e.width)&&parseInt(e.width,10)<310)&&(e.width="310"),(typeof e.height==O||!/%$/.test(e.height)&&parseInt(e.height,10)<137)&&(e.height="137"),H.title=H.title.slice(0,47)+" - Flash Player Installation";var a=Y.ie&&Y.win?"ActiveX":"PlugIn",o="MMredirectURL="+P.location.toString().replace(/&/g,"%26")+"&MMplayerType="+a+"&MMdoctitle="+H.title;if(typeof t.flashvars!=O?t.flashvars+="&"+o:t.flashvars=o,Y.ie&&Y.win&&4!=n.readyState){var r=g("div");i+="SWFObjectNew",r.setAttribute("id",i),n.parentNode.insertBefore(r,n),n.style.display="none",function(){4==n.readyState?n.parentNode.removeChild(n):setTimeout(arguments.callee,10)}()}h(e,t,i)}}function d(e){if(Y.ie&&Y.win&&4!=e.readyState){var t=g("div");e.parentNode.insertBefore(t,e),t.parentNode.replaceChild(c(e),t),e.style.display="none",function(){4==e.readyState?e.parentNode.removeChild(e):setTimeout(arguments.callee,10)}()}else e.parentNode.replaceChild(c(e),e)}function c(e){var t=g("div");if(Y.win&&Y.ie)t.innerHTML=e.innerHTML;else{var i=e.getElementsByTagName(A)[0];if(i){var s=i.childNodes;if(s)for(var n=s.length,a=0;a<n;a++)1==s[a].nodeType&&"PARAM"==s[a].nodeName||8==s[a].nodeType||t.appendChild(s[a].cloneNode(!0))}}return t}function h(e,t,i){var s,n=m(i);if(Y.wk&&Y.wk<312)return s;if(n)if(typeof e.id==O&&(e.id=i),Y.ie&&Y.win){var a="";for(var o in e)e[o]!=Object.prototype[o]&&("data"==o.toLowerCase()?t.movie=e[o]:"styleclass"==o.toLowerCase()?a+=' class="'+e[o]+'"':"classid"!=o.toLowerCase()&&(a+=" "+o+'="'+e[o]+'"'));var r="";for(var l in t)t[l]!=Object.prototype[l]&&(r+='<param name="'+l+'" value="'+t[l]+'" />');n.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+a+">"+r+"</object>",R[R.length]=e.id,s=m(e.id)}else{var d=g(A);d.setAttribute("type",I);for(var c in e)e[c]!=Object.prototype[c]&&("styleclass"==c.toLowerCase()?d.setAttribute("class",e[c]):"classid"!=c.toLowerCase()&&d.setAttribute(c,e[c]));for(var h in t)t[h]!=Object.prototype[h]&&"movie"!=h.toLowerCase()&&u(d,h,t[h]);n.parentNode.replaceChild(d,n),s=d}return s}function u(e,t,i){var s=g("param");s.setAttribute("name",t),s.setAttribute("value",i),e.appendChild(s)}function p(e){var t=m(e);t&&"OBJECT"==t.nodeName&&(Y.ie&&Y.win?(t.style.display="none",function(){4==t.readyState?f(e):setTimeout(arguments.callee,10)}()):t.parentNode.removeChild(t))}function f(e){var t=m(e);if(t){for(var i in t)"function"==typeof t[i]&&(t[i]=null);t.parentNode.removeChild(t)}}function m(e){var t=null;try{t=H.getElementById(e)}catch(e){}return t}function g(e){return H.createElement(e)}function v(e,t,i){e.attachEvent(t,i),z[z.length]=[e,t,i]}function b(e){var t=Y.pv,i=e.split(".");return i[0]=parseInt(i[0],10),i[1]=parseInt(i[1],10)||0,i[2]=parseInt(i[2],10)||0,t[0]>i[0]||t[0]==i[0]&&t[1]>i[1]||t[0]==i[0]&&t[1]==i[1]&&t[2]>=i[2]}function y(e,t,i,s){if(!Y.ie||!Y.mac){var n=H.getElementsByTagName("head")[0];if(n){var a=i&&"string"==typeof i?i:"screen";if(s&&(D=null,T=null),!D||T!=a){var o=g("style");o.setAttribute("type","text/css"),o.setAttribute("media",a),D=n.appendChild(o),Y.ie&&Y.win&&typeof H.styleSheets!=O&&H.styleSheets.length>0&&(D=H.styleSheets[H.styleSheets.length-1]),T=a}Y.ie&&Y.win?D&&typeof D.addRule==A&&D.addRule(e,t):D&&typeof H.createTextNode!=O&&D.appendChild(H.createTextNode(e+" {"+t+"}"))}}}function _(e,t){if(W){var i=t?"visible":"hidden";q&&m(e)?m(e).style.visibility=i:y("#"+e,"visibility:"+i)}}function w(e){var t=/[\\\"<>\.;]/,i=null!=t.exec(e);return i&&typeof encodeURIComponent!=O?encodeURIComponent(e):e}var x,C,k,S,D,T,O="undefined",A="object",M="Shockwave Flash",E="ShockwaveFlash.ShockwaveFlash",I="application/x-shockwave-flash",$="SWFObjectExprInst",N="onreadystatechange",P=window,H=document,L=navigator,j=!1,F=[s],U=[],R=[],z=[],q=!1,B=!1,W=!0,Y=function(){var e=typeof H.getElementById!=O&&typeof H.getElementsByTagName!=O&&typeof H.createElement!=O,t=L.userAgent.toLowerCase(),i=L.platform.toLowerCase(),s=i?/win/.test(i):/win/.test(t),n=i?/mac/.test(i):/mac/.test(t),a=!!/webkit/.test(t)&&parseFloat(t.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")),o=!1,r=[0,0,0],l=null;if(typeof L.plugins!=O&&typeof L.plugins[M]==A)l=L.plugins[M].description,!l||typeof L.mimeTypes!=O&&L.mimeTypes[I]&&!L.mimeTypes[I].enabledPlugin||(j=!0,o=!1,l=l.replace(/^.*\s+(\S+\s+\S+$)/,"$1"),r[0]=parseInt(l.replace(/^(.*)\..*$/,"$1"),10),r[1]=parseInt(l.replace(/^.*\.(.*)\s.*$/,"$1"),10),r[2]=/[a-zA-Z]/.test(l)?parseInt(l.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0);else if(typeof P.ActiveXObject!=O)try{var d=new ActiveXObject(E);d&&(l=d.GetVariable("$version"),l&&(o=!0,l=l.split(" ")[1].split(","),r=[parseInt(l[0],10),parseInt(l[1],10),parseInt(l[2],10)]))}catch(e){}return{w3:e,pv:r,wk:a,ie:o,win:s,mac:n}}();(function(){Y.w3&&((typeof H.readyState!=O&&"complete"==H.readyState||typeof H.readyState==O&&(H.getElementsByTagName("body")[0]||H.body))&&e(),q||(typeof H.addEventListener!=O&&H.addEventListener("DOMContentLoaded",e,!1),Y.ie&&Y.win&&(H.attachEvent(N,function(){"complete"==H.readyState&&(H.detachEvent(N,arguments.callee),e())}),P==top&&!function(){if(!q){try{H.documentElement.doScroll("left")}catch(e){return void setTimeout(arguments.callee,0)}e()}}()),Y.wk&&!function(){if(!q)return/loaded|complete/.test(H.readyState)?void e():void setTimeout(arguments.callee,0)}(),i(e)))})(),function(){Y.ie&&Y.win&&window.attachEvent("onunload",function(){for(var e=z.length,t=0;t<e;t++)z[t][0].detachEvent(z[t][1],z[t][2]);for(var i=R.length,s=0;s<i;s++)p(R[s]);for(var n in Y)Y[n]=null;Y=null;for(var a in swfobject)swfobject[a]=null;swfobject=null})}();return{registerObject:function(e,t,i,s){if(Y.w3&&e&&t){var n={};n.id=e,n.swfVersion=t,n.expressInstall=i,n.callbackFn=s,U[U.length]=n,_(e,!1)}else s&&s({success:!1,id:e})},getObjectById:function(e){if(Y.w3)return o(e)},embedSWF:function(e,i,s,n,a,o,d,c,u,p){var f={success:!1,id:i};Y.w3&&!(Y.wk&&Y.wk<312)&&e&&i&&s&&n&&a?(_(i,!1),t(function(){s+="",n+="";var t={};if(u&&typeof u===A)for(var m in u)t[m]=u[m];t.data=e,t.width=s,t.height=n;var g={};if(c&&typeof c===A)for(var v in c)g[v]=c[v];if(d&&typeof d===A)for(var y in d)typeof g.flashvars!=O?g.flashvars+="&"+y+"="+d[y]:g.flashvars=y+"="+d[y];if(b(a)){var w=h(t,g,i);t.id==i&&_(i,!0),f.success=!0,f.ref=w}else{if(o&&r())return t.data=o,void l(t,g,i,p);_(i,!0)}p&&p(f)})):p&&p(f)},switchOffAutoHideShow:function(){W=!1},ua:Y,getFlashPlayerVersion:function(){return{major:Y.pv[0],minor:Y.pv[1],release:Y.pv[2]}},hasFlashPlayerVersion:b,createSWF:function(e,t,i){return Y.w3?h(e,t,i):void 0},showExpressInstall:function(e,t,i,s){Y.w3&&r()&&l(e,t,i,s)},removeSWF:function(e){Y.w3&&p(e)},createCSS:function(e,t,i,s){Y.w3&&y(e,t,i,s)},addDomLoadEvent:t,addLoadEvent:i,getQueryParamValue:function(e){var t=H.location.search||H.location.hash;if(t){if(/\?/.test(t)&&(t=t.split("?")[1]),null==e)return w(t);for(var i=t.split("&"),s=0;s<i.length;s++)if(i[s].substring(0,i[s].indexOf("="))==e)return w(i[s].substring(i[s].indexOf("=")+1))}return""},expressInstallCallback:function(){if(B){var e=m($);e&&x&&(e.parentNode.replaceChild(x,e),C&&(_(C,!0),Y.ie&&Y.win&&(x.style.display="block")),k&&k(S)),B=!1}}}}(),bkExtend=function(){var e=arguments;1==e.length&&(e=[this,e[0]]);for(var t in e[1])e[0][t]=e[1][t];return e[0]};bkClass.prototype.construct=function(){},bkClass.extend=function(e){var t=function(){if(arguments[0]!==bkClass)return this.construct.apply(this,arguments)},i=new this(bkClass);return bkExtend(i,e),t.prototype=i,t.extend=this.extend,t};var bkElement=bkClass.extend({construct:function(e,t){return"string"==typeof e&&(e=(t||document).createElement(e)),e=$BK(e)},appendTo:function(e){return e.appendChild(this),this},appendBefore:function(e){return e.parentNode.insertBefore(this,e),this},addEvent:function(e,t){return bkLib.addEvent(this,e,t),this},setContent:function(e){return this.innerHTML=e,this},pos:function(){var e=curtop=0;obj=this;if(obj.offsetParent)do e+=obj.offsetLeft,curtop+=obj.offsetTop;while(obj=obj.offsetParent);var t=window.opera?0:parseInt(this.getStyle("border-width")||this.style.border)||0;return[e+t,curtop+t+this.offsetHeight]},noSelect:function(){return bkLib.noSelect(this),this},parentTag:function(e){var t=this;do{if(t&&t.nodeName&&t.nodeName.toUpperCase()==e)return t;t=t.parentNode}while(t);return!1},hasClass:function(e){return this.className.match(new RegExp("(\\s|^)nicEdit-"+e+"(\\s|$)"))},addClass:function(e){return this.hasClass(e)||(this.className+=" nicEdit-"+e),this},removeClass:function(e){return this.hasClass(e)&&(this.className=this.className.replace(new RegExp("(\\s|^)nicEdit-"+e+"(\\s|$)")," ")),this},setStyle:function(e){var t=this.style;for(var i in e)switch(i){case"float":t.cssFloat=t.styleFloat=e[i];break;case"opacity":t.opacity=e[i],t.filter="alpha(opacity="+Math.round(100*e[i])+")";break;case"className":this.className=e[i];break;default:t[i]=e[i]}return this},getStyle:function(e,t){var i=t?t:document.defaultView;if(1==this.nodeType)return i&&i.getComputedStyle?i.getComputedStyle(this,null).getPropertyValue(e):this.currentStyle[bkLib.camelize(e)]},remove:function(){return this.parentNode.removeChild(this),this},setAttributes:function(e){for(var t in e)this[t]=e[t];return this}}),bkLib={isMSIE:navigator.appVersion.indexOf("MSIE")!=-1,addEvent:function(e,t,i){e.addEventListener?e.addEventListener(t,i,!1):e.attachEvent("on"+t,i)},toArray:function(e){for(var t=e.length,i=new Array(t);t--;)i[t]=e[t];return i},noSelect:function(e){e.setAttribute&&"input"!=e.nodeName.toLowerCase()&&"textarea"!=e.nodeName.toLowerCase()&&e.setAttribute("unselectable","on");for(var t=0;t<e.childNodes.length;t++)bkLib.noSelect(e.childNodes[t])},camelize:function(e){return e.replace(/\-(.)/g,function(e,t){return t.toUpperCase()})},inArray:function(e,t){return null!=bkLib.search(e,t)},search:function(e,t){for(var i=0;i<e.length;i++)if(e[i]==t)return i;return null},cancelEvent:function(e){return e=e||window.event,e.preventDefault&&e.stopPropagation&&(e.preventDefault(),e.stopPropagation()),!1},domLoad:[],domLoaded:function(){if(!arguments.callee.done)for(arguments.callee.done=!0,i=0;i<bkLib.domLoad.length;i++)bkLib.domLoad[i]()},onDomLoaded:function(e){this.domLoad.push(e),document.addEventListener?document.addEventListener("DOMContentLoaded",bkLib.domLoaded,null):bkLib.isMSIE&&(document.write("<style>.nicEdit-main p { margin: 0; }</style><script id=__ie_onload defer "+("https:"==location.protocol?"src='javascript:void(0)'":"src=//0")+"></script>"),$BK("__ie_onload").onreadystatechange=function(){"complete"==this.readyState&&bkLib.domLoaded()}),window.onload=bkLib.domLoaded}},bkEvent={addEvent:function(e,t){return t&&(this.eventList=this.eventList||{},this.eventList[e]=this.eventList[e]||[],this.eventList[e].push(t)),this},fireEvent:function(){var e=bkLib.toArray(arguments),t=e.shift();if(this.eventList&&this.eventList[t])for(var i=0;i<this.eventList[t].length;i++)this.eventList[t][i].apply(this,e)}};Function.prototype.closure=function(){var e=this,t=bkLib.toArray(arguments),i=t.shift();return function(){if("undefined"!=typeof bkLib)return e.apply(i,t.concat(bkLib.toArray(arguments)))}},Function.prototype.closureListener=function(){var e=this,t=bkLib.toArray(arguments),i=t.shift();return function(s){if(s=s||window.event,s.target)var n=s.target;else var n=s.srcElement;return e.apply(i,[s,n].concat(t))}};var nicEditorConfig=bkClass.extend({buttons:{bold:{name:__("Click to Bold"),command:"Bold",tags:["B","STRONG"],css:{"font-weight":"bold"},key:"b"},italic:{name:__("Click to Italic"),command:"Italic",tags:["EM","I"],css:{"font-style":"italic"},key:"i"},underline:{name:__("Click to Underline"),command:"Underline",tags:["U"],css:{"text-decoration":"underline"},key:"u"},left:{name:__("Left Align"),command:"justifyleft",noActive:!0},center:{name:__("Center Align"),command:"justifycenter",noActive:!0},right:{name:__("Right Align"),command:"justifyright",noActive:!0},justify:{name:__("Justify Align"),command:"justifyfull",noActive:!0},ol:{name:__("Insert Ordered List"),command:"insertorderedlist",tags:["OL"]},ul:{name:__("Insert Unordered List"),command:"insertunorderedlist",tags:["UL"]},subscript:{name:__("Click to Subscript"),command:"subscript",tags:["SUB"]},superscript:{name:__("Click to Superscript"),command:"superscript",tags:["SUP"]},strikethrough:{name:__("Click to Strike Through"),command:"strikeThrough",css:{"text-decoration":"line-through"}},removeformat:{name:__("Remove Formatting"),command:"removeformat",noActive:!0},indent:{name:__("Indent Text"),command:"indent",noActive:!0},outdent:{name:__("Remove Indent"),command:"outdent",noActive:!0},hr:{name:__("Horizontal Rule"),command:"insertHorizontalRule",noActive:!0}},iconsPath:"../nicEditorIcons.gif",buttonList:["save","bold","italic","underline","left","center","right","justify","ol","ul","fontSize","fontFamily","fontFormat","indent","outdent","image","upload","link","unlink","forecolor","bgcolor"],iconList:{
bgcolor:1,forecolor:2,bold:3,center:4,hr:5,indent:6,italic:7,justify:8,left:9,ol:10,outdent:11,removeformat:12,right:13,save:14,strikethrough:15,subscript:16,superscript:17,ul:18,underline:19,link:20,unlink:21,close:22,arrow:23}}),nicEditors={nicPlugins:[],editors:[],registerPlugin:function(e,t){this.nicPlugins.push({p:e,o:t})},allTextAreas:function(e){for(var t=document.getElementsByTagName("textarea"),i=0;i<t.length;i++)nicEditors.editors.push(new nicEditor(e).panelInstance(t[i]));return nicEditors.editors},findEditor:function(e){for(var t=nicEditors.editors,i=0;i<t.length;i++)if(t[i].instanceById(e))return t[i].instanceById(e)}},nicEditor=bkClass.extend({construct:function(e){this.options=new nicEditorConfig,bkExtend(this.options,e),this.nicInstances=new Array,this.loadedPlugins=new Array;for(var t=nicEditors.nicPlugins,i=0;i<t.length;i++)this.loadedPlugins.push(new t[i].p(this,t[i].o));nicEditors.editors.push(this),bkLib.addEvent(document.body,"mousedown",this.selectCheck.closureListener(this))},panelInstance:function(e,t){e=this.checkReplace($BK(e));var i=new bkElement("DIV").setStyle({width:(parseInt(e.getStyle("width"))||e.clientWidth)+"px"}).appendBefore(e);return this.setPanel(i),this.addInstance(e,t)},checkReplace:function(e){var t=nicEditors.findEditor(e);return t&&(t.removeInstance(e),t.removePanel()),e},addInstance:function(e,t){if(e=this.checkReplace($BK(e)),e.contentEditable||window.opera)var i=new nicEditorInstance(e,t,this);else var i=new nicEditorIFrameInstance(e,t,this);return this.nicInstances.push(i),this},removeInstance:function(e){e=$BK(e);for(var t=this.nicInstances,i=0;i<t.length;i++)t[i].e==e&&(t[i].remove(),this.nicInstances.splice(i,1))},removePanel:function(e){this.nicPanel&&(this.nicPanel.remove(),this.nicPanel=null)},instanceById:function(e){e=$BK(e);for(var t=this.nicInstances,i=0;i<t.length;i++)if(t[i].e==e)return t[i]},setPanel:function(e){return this.nicPanel=new nicEditorPanel($BK(e),this.options,this),this.fireEvent("panel",this.nicPanel),this},nicCommand:function(e,t){this.selectedInstance&&this.selectedInstance.nicCommand(e,t)},getIcon:function(e,t){var i=this.options.iconList[e],s=t.iconFiles?t.iconFiles[e]:"";return{backgroundImage:"url('"+(i?this.options.iconsPath:s)+"')",backgroundPosition:(i?(i-1)*-18:0)+"px 0px"}},selectCheck:function(e,t){do if(t.className&&t.className.indexOf("nicEdit")!=-1)return!1;while(t=t.parentNode);return this.fireEvent("blur",this.selectedInstance,t),this.lastSelectedInstance=this.selectedInstance,this.selectedInstance=null,!1}});nicEditor=nicEditor.extend(bkEvent);var nicEditorInstance=bkClass.extend({isSelected:!1,construct:function(e,t,i){this.ne=i,this.elm=this.e=e,this.options=t||{},newX=parseInt(e.getStyle("width"))||e.clientWidth,newY=parseInt(e.getStyle("height"))||e.clientHeight,this.initialHeight=newY-8;var s="textarea"==e.nodeName.toLowerCase();if(s||this.options.hasPanel){var n=bkLib.isMSIE&&!("undefined"!=typeof document.body.style.maxHeight&&"CSS1Compat"==document.compatMode),a={width:newX+"px",border:"1px solid #ccc",borderTop:0,overflowY:"auto",overflowX:"hidden"};a[n?"height":"maxHeight"]=this.ne.options.maxHeight?this.ne.options.maxHeight+"px":null,this.editorContain=new bkElement("DIV").setStyle(a).appendBefore(e);var o=new bkElement("DIV").setStyle({width:newX-8+"px",margin:"4px",minHeight:newY+"px"}).addClass("main").appendTo(this.editorContain);if(e.setStyle({display:"none"}),o.innerHTML=e.innerHTML,s){o.setContent(e.value),this.copyElm=e;var r=e.parentTag("FORM");r&&bkLib.addEvent(r,"submit",this.saveContent.closure(this))}o.setStyle(n?{height:newY+"px"}:{overflow:"hidden"}),this.elm=o}this.ne.addEvent("blur",this.blur.closure(this)),this.init(),this.blur()},init:function(){this.elm.setAttribute("contentEditable","true"),""==this.getContent()&&this.setContent("<br />"),this.instanceDoc=document.defaultView,this.elm.addEvent("mousedown",this.selected.closureListener(this)).addEvent("keypress",this.keyDown.closureListener(this)).addEvent("focus",this.selected.closure(this)).addEvent("blur",this.blur.closure(this)).addEvent("keyup",this.selected.closure(this)),this.ne.fireEvent("add",this)},remove:function(){this.saveContent(),(this.copyElm||this.options.hasPanel)&&(this.editorContain.remove(),this.e.setStyle({display:"block"}),this.ne.removePanel()),this.disable(),this.ne.fireEvent("remove",this)},disable:function(){this.elm.setAttribute("contentEditable","false")},getSel:function(){return window.getSelection?window.getSelection():document.selection},getRng:function(){var e=this.getSel();if(e&&0!==e.rangeCount)return e.rangeCount>0?e.getRangeAt(0):e.createRange()},selRng:function(e,t){window.getSelection?(t.removeAllRanges(),t.addRange(e)):e.select()},selElm:function(){var e=this.getRng();if(e){if(e.startContainer){var t=e.startContainer;if(1==e.cloneContents().childNodes.length)for(var i=0;i<t.childNodes.length;i++){var s=t.childNodes[i].ownerDocument.createRange();if(s.selectNode(t.childNodes[i]),1!=e.compareBoundaryPoints(Range.START_TO_START,s)&&e.compareBoundaryPoints(Range.END_TO_END,s)!=-1)return $BK(t.childNodes[i])}return $BK(t)}return $BK("Control"==this.getSel().type?e.item(0):e.parentElement())}},saveRng:function(){this.savedRange=this.getRng(),this.savedSel=this.getSel()},restoreRng:function(){this.savedRange&&this.selRng(this.savedRange,this.savedSel)},keyDown:function(e,t){e.ctrlKey&&this.ne.fireEvent("key",this,e)},selected:function(e,t){if(t||(t=this.selElm)||(t=this.selElm()),!e.ctrlKey){var i=this.ne.selectedInstance;i!=this&&(i&&this.ne.fireEvent("blur",i,t),this.ne.selectedInstance=this,this.ne.fireEvent("focus",i,t)),this.ne.fireEvent("selected",i,t),this.isFocused=!0,this.elm.addClass("selected")}return!1},blur:function(){this.isFocused=!1,this.elm.removeClass("selected")},saveContent:function(){(this.copyElm||this.options.hasPanel)&&(this.ne.fireEvent("save",this),this.copyElm?this.copyElm.value=this.getContent():this.e.innerHTML=this.getContent())},getElm:function(){return this.elm},getContent:function(){return this.content=this.getElm().innerHTML,this.ne.fireEvent("get",this),this.content},setContent:function(e){this.content=e,this.ne.fireEvent("set",this),this.elm.innerHTML=this.content},nicCommand:function(e,t){document.execCommand(e,!1,t)}}),nicEditorIFrameInstance=nicEditorInstance.extend({savedStyles:[],init:function(){var e=this.elm.innerHTML.replace(/^\s+|\s+$/g,"");this.elm.innerHTML="",e?e:e="<br />",this.initialContent=e,this.elmFrame=new bkElement("iframe").setAttributes({src:"javascript:;",frameBorder:0,allowTransparency:"true",scrolling:"no"}).setStyle({height:"100px",width:"100%"}).addClass("frame").appendTo(this.elm),this.copyElm&&this.elmFrame.setStyle({width:this.elm.offsetWidth-4+"px"});var t=["font-size","font-family","font-weight","color"];for(itm in t)this.savedStyles[bkLib.camelize(itm)]=this.elm.getStyle(itm);setTimeout(this.initFrame.closure(this),50)},disable:function(){this.elm.innerHTML=this.getContent()},initFrame:function(){var e=$BK(this.elmFrame.contentWindow.document);e.designMode="on",e.open();var t=this.ne.options.externalCSS;e.write("<html><head>"+(t?'<link href="'+t+'" rel="stylesheet" type="text/css" />':"")+'</head><body id="nicEditContent" style="margin: 0 !important; background-color: transparent !important;">'+this.initialContent+"</body></html>"),e.close(),this.frameDoc=e,this.frameWin=$BK(this.elmFrame.contentWindow),this.frameContent=$BK(this.frameWin.document.body).setStyle(this.savedStyles),this.instanceDoc=this.frameWin.document.defaultView,this.heightUpdate(),this.frameDoc.addEvent("mousedown",this.selected.closureListener(this)).addEvent("keyup",this.heightUpdate.closureListener(this)).addEvent("keydown",this.keyDown.closureListener(this)).addEvent("keyup",this.selected.closure(this)),this.ne.fireEvent("add",this)},getElm:function(){return this.frameContent},setContent:function(e){this.content=e,this.ne.fireEvent("set",this),this.frameContent.innerHTML=this.content,this.heightUpdate()},getSel:function(){return this.frameWin?this.frameWin.getSelection():this.frameDoc.selection},heightUpdate:function(){this.elmFrame.style.height=Math.max(this.frameContent.offsetHeight,this.initialHeight)+"px"},nicCommand:function(e,t){this.frameDoc.execCommand(e,!1,t),setTimeout(this.heightUpdate.closure(this),100)}}),nicEditorPanel=bkClass.extend({construct:function(e,t,i){this.elm=e,this.options=t,this.ne=i,this.panelButtons=new Array,this.buttonList=bkExtend([],this.ne.options.buttonList),this.panelContain=new bkElement("DIV").setStyle({overflow:"hidden",width:"100%",border:"1px solid #cccccc",backgroundColor:"#efefef"}).addClass("panelContain"),this.panelElm=new bkElement("DIV").setStyle({margin:"2px",marginTop:"0px",zoom:1,overflow:"hidden"}).addClass("panel").appendTo(this.panelContain),this.panelContain.appendTo(e);var s=this.ne.options,n=s.buttons;for(button in n)this.addButton(button,s,!0);this.reorder(),e.noSelect()},addButton:function(buttonName,options,noOrder){var button=options.buttons[buttonName],type=button.type?eval("(typeof("+button.type+') == "undefined") ? null : '+button.type+";"):nicEditorButton,hasButton=bkLib.inArray(this.buttonList,buttonName);type&&(hasButton||this.ne.options.fullPanel)&&(this.panelButtons.push(new type(this.panelElm,buttonName,options,this.ne)),hasButton||this.buttonList.push(buttonName))},findButton:function(e){for(var t=0;t<this.panelButtons.length;t++)if(this.panelButtons[t].name==e)return this.panelButtons[t]},reorder:function(){for(var e=this.buttonList,t=0;t<e.length;t++){var i=this.findButton(e[t]);i&&this.panelElm.appendChild(i.margin)}},remove:function(){this.elm.remove()}}),nicEditorButton=bkClass.extend({construct:function(e,t,i,s){this.options=i.buttons[t],this.name=t,this.ne=s,this.elm=e,this.margin=new bkElement("DIV").setStyle({float:"left",marginTop:"2px"}).appendTo(e),this.contain=new bkElement("DIV").setStyle({width:"20px",height:"20px"}).addClass("buttonContain").appendTo(this.margin),this.border=new bkElement("DIV").setStyle({backgroundColor:"#efefef",border:"1px solid #efefef"}).appendTo(this.contain),this.button=new bkElement("DIV").setStyle({width:"18px",height:"18px",overflow:"hidden",zoom:1,cursor:"pointer"}).addClass("button").setStyle(this.ne.getIcon(t,i)).appendTo(this.border),this.button.addEvent("mouseover",this.hoverOn.closure(this)).addEvent("mouseout",this.hoverOff.closure(this)).addEvent("mousedown",this.mouseClick.closure(this)).noSelect(),window.opera||(this.button.onmousedown=this.button.onclick=bkLib.cancelEvent),s.addEvent("selected",this.enable.closure(this)).addEvent("blur",this.disable.closure(this)).addEvent("key",this.key.closure(this)),this.disable(),this.init()},init:function(){},hide:function(){this.contain.setStyle({display:"none"})},updateState:function(){this.isDisabled?this.setBg():this.isHover?this.setBg("hover"):this.isActive?this.setBg("active"):this.setBg()},setBg:function(e){switch(e){case"hover":var t={border:"1px solid #666",backgroundColor:"#ddd"};break;case"active":var t={border:"1px solid #666",backgroundColor:"#ccc"};break;default:var t={border:"1px solid #efefef",backgroundColor:"#efefef"}}this.border.setStyle(t).addClass("button-"+e)},checkNodes:function(e){var t=e;do if(this.options.tags&&bkLib.inArray(this.options.tags,t.nodeName))return this.activate(),!0;while(t=t.parentNode&&"nicEdit"!=t.className);for(t=$BK(e);3==t.nodeType;)t=$BK(t.parentNode);if(this.options.css)for(itm in this.options.css)if(t.getStyle(itm,this.ne.selectedInstance.instanceDoc)==this.options.css[itm])return this.activate(),!0;return this.deactivate(),!1},activate:function(){this.isDisabled||(this.isActive=!0,this.updateState(),this.ne.fireEvent("buttonActivate",this))},deactivate:function(){this.isActive=!1,this.updateState(),this.isDisabled||this.ne.fireEvent("buttonDeactivate",this)},enable:function(e,t){this.isDisabled=!1,this.contain.setStyle({opacity:1}).addClass("buttonEnabled"),this.updateState(),this.checkNodes(t)},disable:function(e,t){this.isDisabled=!0,this.contain.setStyle({opacity:.6}).removeClass("buttonEnabled"),this.updateState()},toggleActive:function(){this.isActive?this.deactivate():this.activate()},hoverOn:function(){this.isDisabled||(this.isHover=!0,this.updateState(),this.ne.fireEvent("buttonOver",this))},hoverOff:function(){this.isHover=!1,this.updateState(),this.ne.fireEvent("buttonOut",this)},mouseClick:function(){this.options.command&&(this.ne.nicCommand(this.options.command,this.options.commandArgs),this.options.noActive||this.toggleActive()),this.ne.fireEvent("buttonClick",this)},key:function(e,t){this.options.key&&t.ctrlKey&&String.fromCharCode(t.keyCode||t.charCode).toLowerCase()==this.options.key&&(this.mouseClick(),t.preventDefault&&t.preventDefault())}}),nicPlugin=bkClass.extend({construct:function(e,t){this.options=t,this.ne=e,this.ne.addEvent("panel",this.loadPanel.closure(this)),this.init()},loadPanel:function(e){var t=this.options.buttons;for(var i in t)e.addButton(i,this.options);e.reorder()},init:function(){}}),nicPaneOptions={},nicEditorPane=bkClass.extend({construct:function(e,t,i,s){this.ne=t,this.elm=e,this.pos=e.pos(),this.contain=new bkElement("div").setStyle({zIndex:"99999",overflow:"hidden",position:"absolute",left:this.pos[0]+"px",top:this.pos[1]+"px"}),this.pane=new bkElement("div").setStyle({fontSize:"12px",border:"1px solid #ccc",overflow:"hidden",padding:"4px",textAlign:"left",backgroundColor:"#ffffc9"}).addClass("pane").setStyle(i).appendTo(this.contain),s&&!s.options.noClose&&(this.close=new bkElement("div").setStyle({float:"right",height:"16px",width:"16px",cursor:"pointer"}).setStyle(this.ne.getIcon("close",nicPaneOptions)).addEvent("mousedown",s.removePane.closure(this)).appendTo(this.pane)),this.contain.noSelect().appendTo(document.body),this.position(),this.init()},init:function(){},position:function(){if(this.ne.nicPanel){var e=this.ne.nicPanel.elm,t=e.pos(),i=t[0]+parseInt(e.getStyle("width"))-(parseInt(this.pane.getStyle("width"))+8);i<this.pos[0]&&this.contain.setStyle({left:i+"px"})}},toggle:function(){this.isVisible=!this.isVisible,this.contain.setStyle({display:this.isVisible?"block":"none"})},remove:function(){this.contain&&(this.contain.remove(),this.contain=null)},append:function(e){e.appendTo(this.pane)},setContent:function(e){this.pane.setContent(e)}}),nicEditorAdvancedButton=nicEditorButton.extend({init:function(){this.ne.addEvent("selected",this.removePane.closure(this)).addEvent("blur",this.removePane.closure(this))},mouseClick:function(){$(".nicEdit-main").focus(),this.isDisabled||(this.pane&&this.pane.pane?this.removePane():(this.pane=new nicEditorPane(this.contain,this.ne,{width:this.width||"270px",backgroundColor:"#fff"},this),this.addPane(),this.ne.selectedInstance.saveRng()))},addForm:function(e,t){this.form=new bkElement("form").addEvent("submit",this.submit.closureListener(this)),this.pane.append(this.form),this.inputs={};for(itm in e){var i=e[itm],s="";t&&(s=t.getAttribute(itm)),s||(s=i.value||"");var n=e[itm].type;if("title"==n)new bkElement("div").setContent(i.txt).setStyle({fontSize:"14px",fontWeight:"bold",padding:"0px",margin:"2px 0"}).appendTo(this.form);else{var a=new bkElement("div").setStyle({overflow:"hidden",clear:"both"}).appendTo(this.form);switch(i.txt&&new bkElement("label").setAttributes({for:itm}).setContent(i.txt).setStyle({margin:"2px 4px",fontSize:"13px",width:"50px",lineHeight:"20px",textAlign:"right",float:"left"}).appendTo(a),n){case"text":this.inputs[itm]=new bkElement("input").setAttributes({id:itm,value:s,type:"text"}).setStyle({margin:"2px 0",fontSize:"13px",float:"left",height:"20px",border:"1px solid #ccc",overflow:"hidden"}).setStyle(i.style).appendTo(a);break;case"select":this.inputs[itm]=new bkElement("select").setAttributes({id:itm}).setStyle({border:"1px solid #ccc",float:"left",margin:"2px 0"}).appendTo(a);for(opt in i.options)var o=new bkElement("option").setAttributes({value:opt,selected:opt==s?"selected":""}).setContent(i.options[opt]).appendTo(this.inputs[itm]);break;case"content":this.inputs[itm]=new bkElement("textarea").setAttributes({id:itm}).setStyle({border:"1px solid #ccc",float:"left"}).setStyle(i.style).appendTo(a),this.inputs[itm].value=s}}}new bkElement("input").setAttributes({type:"submit"}).setStyle({backgroundColor:"#efefef",border:"1px solid #ccc",margin:"3px 0",float:"left",clear:"both"}).appendTo(this.form),this.form.onsubmit=bkLib.cancelEvent},submit:function(){},findElm:function(e,t,i){for(var s=this.ne.selectedInstance.getElm().getElementsByTagName(e),n=0;n<s.length;n++)if(s[n].getAttribute(t)==i)return $BK(s[n])},removePane:function(){this.pane&&(this.pane.remove(),this.pane=null,this.ne.selectedInstance.restoreRng())}}),nicButtonTips=bkClass.extend({construct:function(e){this.ne=e,e.addEvent("buttonOver",this.show.closure(this)).addEvent("buttonOut",this.hide.closure(this))},show:function(e){this.timer=setTimeout(this.create.closure(this,e),400)},create:function(e){this.timer=null,this.pane||(this.pane=new nicEditorPane(e.button,this.ne,{fontSize:"12px",marginTop:"5px"}),this.pane.setContent(e.options.name))},hide:function(e){this.timer&&clearTimeout(this.timer),this.pane&&(this.pane=this.pane.remove())}});nicEditors.registerPlugin(nicButtonTips);var nicSelectOptions={buttons:{fontSize:{name:__("Select Font Size"),type:"nicEditorFontSizeSelect",command:"fontsize"},fontFamily:{name:__("Select Font Family"),type:"nicEditorFontFamilySelect",command:"fontname"},fontFormat:{name:__("Select Font Format"),type:"nicEditorFontFormatSelect",command:"formatBlock"}}},nicEditorSelect=bkClass.extend({construct:function(e,t,i,s){this.options=i.buttons[t],this.elm=e,this.ne=s,this.name=t,this.selOptions=new Array,this.margin=new bkElement("div").setStyle({float:"left",margin:"2px 1px 0 1px"}).appendTo(this.elm),this.contain=new bkElement("div").setStyle({width:"90px",height:"20px",cursor:"pointer",overflow:"hidden"}).addClass("selectContain").addEvent("click",this.toggle.closure(this)).appendTo(this.margin),this.items=new bkElement("div").setStyle({overflow:"hidden",zoom:1,border:"1px solid #ccc",paddingLeft:"3px",backgroundColor:"#fff"}).appendTo(this.contain),this.control=new bkElement("div").setStyle({overflow:"hidden",float:"right",height:"18px",width:"16px"}).addClass("selectControl").setStyle(this.ne.getIcon("arrow",i)).appendTo(this.items),this.txt=new bkElement("div").setStyle({overflow:"hidden",float:"left",width:"66px",height:"14px",marginTop:"1px",fontFamily:"sans-serif",textAlign:"center",fontSize:"12px"}).addClass("selectTxt").appendTo(this.items),window.opera||(this.contain.onmousedown=this.control.onmousedown=this.txt.onmousedown=bkLib.cancelEvent),this.margin.noSelect(),this.ne.addEvent("selected",this.enable.closure(this)).addEvent("blur",this.disable.closure(this)),this.disable(),this.init()},disable:function(){this.isDisabled=!0,this.close(),this.contain.setStyle({opacity:.6})},enable:function(e){this.isDisabled=!1,this.close(),this.contain.setStyle({opacity:1})},setDisplay:function(e){this.txt.setContent(e)},toggle:function(){this.isDisabled||(this.pane?this.close():this.open())},open:function(){this.pane=new nicEditorPane(this.items,this.ne,{width:"88px",padding:"0px",borderTop:0,borderLeft:"1px solid #ccc",borderRight:"1px solid #ccc",borderBottom:"0px",backgroundColor:"#fff"});for(var e=0;e<this.selOptions.length;e++){var t=this.selOptions[e],i=new bkElement("div").setStyle({overflow:"hidden",borderBottom:"1px solid #ccc",width:"88px",textAlign:"left",overflow:"hidden",cursor:"pointer"}),s=new bkElement("div").setStyle({padding:"0px 4px"}).setContent(t[1]).appendTo(i).noSelect();s.addEvent("click",this.update.closure(this,t[0])).addEvent("mouseover",this.over.closure(this,s)).addEvent("mouseout",this.out.closure(this,s)).setAttributes("id",t[0]),this.pane.append(i),window.opera||(s.onmousedown=bkLib.cancelEvent)}},close:function(){this.pane&&(this.pane=this.pane.remove())},over:function(e){e.setStyle({backgroundColor:"#ccc"})},out:function(e){e.setStyle({backgroundColor:"#fff"})},add:function(e,t){this.selOptions.push(new Array(e,t))},update:function(e){this.ne.nicCommand(this.options.command,e),this.close()}}),nicEditorFontSizeSelect=nicEditorSelect.extend({sel:{1:"1&nbsp;(8pt)",2:"2&nbsp;(10pt)",3:"3&nbsp;(12pt)",4:"4&nbsp;(14pt)",5:"5&nbsp;(18pt)",6:"6&nbsp;(24pt)"},init:function(){this.setDisplay("Font&nbsp;Size...");for(itm in this.sel)this.add(itm,'<font size="'+itm+'">'+this.sel[itm]+"</font>")}}),nicEditorFontFamilySelect=nicEditorSelect.extend({sel:{arial:"Arial","comic sans ms":"Comic Sans","courier new":"Courier New",georgia:"Georgia",helvetica:"Helvetica",impact:"Impact","times new roman":"Times","trebuchet ms":"Trebuchet",verdana:"Verdana"},init:function(){this.setDisplay("Font&nbsp;Family...");for(itm in this.sel)this.add(itm,'<font face="'+itm+'">'+this.sel[itm]+"</font>")}}),nicEditorFontFormatSelect=nicEditorSelect.extend({sel:{p:"Paragraph",pre:"Pre",h6:"Heading&nbsp;6",h5:"Heading&nbsp;5",h4:"Heading&nbsp;4",h3:"Heading&nbsp;3",h2:"Heading&nbsp;2",h1:"Heading&nbsp;1"},init:function(){this.setDisplay("Font&nbsp;Format...");for(itm in this.sel){var e=itm.toUpperCase();this.add("<"+e+">","<"+itm+' style="padding: 0px; margin: 0px;">'+this.sel[itm]+"</"+e+">")}}});nicEditors.registerPlugin(nicPlugin,nicSelectOptions);var nicLinkOptions={buttons:{link:{name:"Add Link",type:"nicLinkButton",tags:["A"]},unlink:{name:"Remove Link",command:"unlink",noActive:!0}}},nicLinkButton=nicEditorAdvancedButton.extend({addPane:function(){this.ln=this.ne.selectedInstance.selElm().parentTag("A"),this.addForm({"":{type:"title",txt:"Add/Edit Link"},href:{type:"text",txt:"URL",value:"http://",style:{width:"150px"}},title:{type:"text",txt:"Title"},target:{type:"select",txt:"Open In",options:{"":"Current Window",_blank:"New Window"},style:{width:"100px"}}},this.ln)},submit:function(e){var t=this.inputs.href.value;if("http://"==t||""==t)return alert("You must enter a URL to Create a Link"),!1;if(this.removePane(),!this.ln){var i="javascript:nicTemp();";this.ne.nicCommand("createlink",i),this.ln=this.findElm("A","href",i)}this.ln&&(this.ln.innerHTML=this.inputs.title.value,this.ln.setAttributes({href:this.inputs.href.value,title:this.inputs.title.value,target:this.inputs.target.options[this.inputs.target.selectedIndex].value}))}});nicEditors.registerPlugin(nicPlugin,nicLinkOptions);var nicColorOptions={buttons:{forecolor:{name:__("Change Text Color"),type:"nicEditorColorButton",noClose:!0},bgcolor:{name:__("Change Background Color"),type:"nicEditorBgColorButton",noClose:!0}}},nicEditorColorButton=nicEditorAdvancedButton.extend({addPane:function(){var e={0:"00",1:"33",2:"66",3:"99",4:"CC",5:"FF"},t=new bkElement("DIV").setStyle({width:"270px"});for(var i in e)for(var s in e)for(var n in e){var a="#"+e[i]+e[n]+e[s],o=new bkElement("DIV").setStyle({cursor:"pointer",height:"15px",float:"left"}).appendTo(t),r=new bkElement("DIV").setStyle({border:"2px solid "+a}).appendTo(o),l=new bkElement("DIV").setStyle({backgroundColor:a,overflow:"hidden",width:"11px",height:"11px"}).addEvent("click",this.colorSelect.closure(this,a)).addEvent("mouseover",this.on.closure(this,r)).addEvent("mouseout",this.off.closure(this,r,a)).appendTo(r);window.opera||(o.onmousedown=l.onmousedown=bkLib.cancelEvent)}this.pane.append(t.noSelect())},colorSelect:function(e){this.ne.nicCommand("foreColor",e),this.removePane()},on:function(e){e.setStyle({border:"2px solid #000"})},off:function(e,t){e.setStyle({border:"2px solid "+t})}}),nicEditorBgColorButton=nicEditorColorButton.extend({colorSelect:function(e){this.ne.nicCommand("hiliteColor",e),this.removePane()}});nicEditors.registerPlugin(nicPlugin,nicColorOptions),function(e,t,i,s,n){t={choosedrive:function(e){i.dom(".drive-loader-center").show(),i.dom(".drive_file_ul").find("li").remove(),i.dom("#popup").modal({backdrop:"static",keyboard:!1}).children("div#popup-blocks").attr("class",e),$.ajax({url:"/get/"+i.pageAttr.univ+"/google_drive",type:"POST",data:{data:JSON.stringify({type:"get_all_files"})},success:function(e,t){i.dom(".drive-loader-center").hide();var s=e.data.files_list;for(var n in s)if("application/vnd.google-apps.folder"!==s[n].mimeType){t={id:s[n].id,name:s[n].title,mime:s[n].mimeType};var a=i.templates.drive_file_list.clone(!0,!0);a.attr("data-details",JSON.stringify(t)).data(),a.removeAttr("data-details"),s[n].thumbnailLink&&""!=s[n].thumbnailLink?a.find(".file_src").attr("src",s[n].thumbnailLink):a.find(".file_src").attr("src","/images/core/preview-image.png"),a.find(".file_name").html(s[n].title),i.dom(".drive_file_ul").append(a)}}})},checkfile:function(e,t,s){var n=!1;e.hasClass("active")?e.removeClass("active"):$("ul.drive_file_ul > li").find("a.active").length<3?(n=!0,e.addClass("active")):i.utils.statusMsg(i.utils.localeContentBuffer("SELECT_THREE_FILES"),!0)},getfile:function(e,t,i){$(e.parents()[0]).attr("id")},closedrive:function(e,t,s){i.dom("#popup-blocks").attr("class","challenges-create")},choose:function(e,a,o){n=!0,t.node=document.createElement("input"),t.node.type="file",t.node.name="file",t.node.style.display="none",t.node.setAttribute("class","file"),t.node.setAttribute("multiple",!0),o=a.data.callback,a.data.data.accept&&(t.node.accept=a.data.data.accept),t.node.onchange=function(n,a,r,l){if(n.target.files&&n.target.files[0])if(o){if(r=n.target.files[0].name,a=n.target.files[0].name.substring(n.target.files[0].name.lastIndexOf(".")+1),window.FileReader&&n.target.files[0].type.indexOf("image")!==-1)return s||(s=new FileReader,s.onload=function(e){l=e,i.cropping.setImage(l.target.result,s.origin,s.callback)},s.callback=function(e,i){e&&(e.name=s.name,e.mime=s.mime,t.node.dataset.coords=JSON.stringify(e),t.node.removeAttribute("accept"),s.returnBack(s.origin,t.node,a,s.name,i,l.target.result)),delete t.node}),s.name=r,s.mime=a,s.origin=e,s.returnBack=i[o[0]][o[1]],void s.readAsDataURL(n.target.files[0]);t.node.dataset.coords=JSON.stringify({name:r,mime:a}),i[o[0]][o[1]](e,t.node,a,r,void 0)}else console.error("Callback function is not defined!")},t.node.click()},extractMime:function(e){return e.indexOf("image")!==-1?"image":e.indexOf("mp4")!==-1?"mp4":e.indexOf("pdf")!==-1?"pdf":e.indexOf("word")!==-1?"word":e.indexOf("excel")!==-1?"excel":e.indexOf("mp3")!==-1||e.indexOf("mpeg3")!==-1?"mp3":e.indexOf("html")!==-1?"html":e.indexOf("application/x-shockwave-flash")!==-1?"swf":e.indexOf("html")!==-1?"ppt":"text"},image:function(e,t,i,s,n,a,o){o=e.find("input"),o&&o.remove(),e.append(t),o=e.find("img.item-image"),o.attr("src",a),o.css(n)},handler:function(e,s,n,a,o,r,l){t.sampleBuilder(),l=t.editingSample?t.editingSample:t.sample.cloneNode(!0),t.builder(e,s,n,a,o,r,l),e.data().upload&&(s=i.dom(s,!0).first(),s.parents("div.single-attachment-enclosure").find("span.single-attachment-close").remove(),l=i["challenges-service"].level2?i["challenges-service"].level2:i["challenges-service"].level1,o={k:l,crop:s.data().coords},o["step-index"]=s.parents("div.accordion-group:lt(1)").index(),o["file-index"]=s.parents("div.single-attachment-enclosure").index(),i["common-service"].upload("requireattachment",o,s)),delete t.editingSample},sampleBuilder:function(e){t.sample||(t.sample=document.createElement("div"),t.sample.setAttribute("class","single-attachment-enclosure"),e=document.createElement("span"),e.setAttribute("class","single-attachment-enclosure"),t.sample.appendChild(e),e=document.createElement("span"),e.setAttribute("class","single-attachment-name"),t.sample.appendChild(e),e=document.createElement("span"),e.innerHTML='<i class="fa fa-close"></i>',e.setAttribute("class","single-attachment-close"),t.sample.appendChild(e))},builder:function(e,s,n,a,o,r,l,d){l.querySelector("span.single-attachment-name").innerHTML=a,d=l.querySelector("span.single-attachment-enclosure"),d.innerHTML="",n&&(d.innerHTML+='<span class="edit-attachment"></span>',d.querySelector("span.edit-attachment").onclick=function(){t.editingSample=this.parentNode.parentNode.parentNode,t.editingSample.parentNode.parentNode.querySelector("div.more-attachments").click()}),t.editingSample||(l=e[0].parentNode.querySelector("div.attachments-holder").appendChild(l),l.querySelector("span.single-attachment-close").onclick=function(e,t,s){e=this.parentNode,e.className.indexOf("indexed")!==-1&&(e=i.dom(e,!0),s=e.index(),t=e.parents("li.single-step:lt(1)").index(),i["challenges-create"].removableFiles||(i["challenges-create"].removableFiles={}),i["challenges-create"].removableFiles[t]||(i["challenges-create"].removableFiles[t]=[]),i["challenges-create"].removableFiles[t].push(s)),e.remove()}),s&&l.querySelector("span.single-attachment-enclosure").appendChild(s)}},i=e.setReference("attachments",t),i.listeners(e,"focus",function(){n&&(n=!1)})}(window,{},{}),function(e){e.Jcrop=function(t,i){function s(e){return Math.round(e)+"px"}function n(e){return P.baseClass+"-"+e}function a(){return e.fx.step.hasOwnProperty("backgroundColor")}function o(t){var i=e(t).offset();return[i.left,i.top]}function r(e){return[e.pageX-N[0],e.pageY-N[1]]}function l(t){"object"!=typeof t&&(t={}),P=e.extend(P,t),e.each(["onChange","onSelect","onRelease","onDblClick"],function(e,t){"function"!=typeof P[t]&&(P[t]=function(){})})}function d(e,t,i){if(N=o(q),fe.setCursor("move"===e?e:e+"-resize"),"move"===e)return fe.activateHandlers(h(t),g,i);var s=he.getFixed(),n=u(e),a=he.getCorner(u(n));he.setPressed(he.getCorner(n)),he.setCurrent(a),fe.activateHandlers(c(e,s),g,i)}function c(e,t){return function(i){if(P.aspectRatio)switch(e){case"e":i[1]=t.y+1;break;case"w":i[1]=t.y+1;break;case"n":i[0]=t.x+1;break;case"s":i[0]=t.x+1}else switch(e){case"e":i[1]=t.y2;break;case"w":i[1]=t.y2;break;case"n":i[0]=t.x2;break;case"s":i[0]=t.x2}he.setCurrent(i),pe.update()}}function h(e){var t=e;return me.watchKeys(),function(e){he.moveOffset([e[0]-t[0],e[1]-t[1]]),t=e,pe.update()}}function u(e){switch(e){case"n":return"sw";case"s":return"nw";case"e":return"nw";case"w":return"ne";case"ne":return"sw";case"nw":return"se";case"se":return"nw";case"sw":return"ne"}}function p(e){return function(t){return!P.disabled&&(!("move"===e&&!P.allowMove)&&(N=o(q),se=!0,d(e,r(t)),t.stopPropagation(),t.preventDefault(),!1))}}function f(e,t,i){var s=e.width(),n=e.height();s>t&&t>0&&(s=t,n=t/e.width()*e.height()),n>i&&i>0&&(n=i,s=i/e.height()*e.width()),te=e.width()/s,ie=e.height()/n,e.width(s).height(n)}function m(e){return{x:e.x*te,y:e.y*ie,x2:e.x2*te,y2:e.y2*ie,w:e.w*te,h:e.h*ie}}function g(e){var t=he.getFixed();t.w>P.minSelect[0]&&t.h>P.minSelect[1]?(pe.enableHandles(),pe.done()):pe.release(),fe.setCursor(P.allowSelect?"crosshair":"default")}function v(e){if(P.disabled)return!1;if(!P.allowSelect)return!1;se=!0,N=o(q),pe.disableHandles(),fe.setCursor("crosshair");var t=r(e);return he.setPressed(t),pe.update(),fe.activateHandlers(b,g,"touch"===e.type.substring(0,5)),me.watchKeys(),e.stopPropagation(),e.preventDefault(),!1}function b(e){he.setCurrent(e),pe.update()}function y(){var t=e("<div></div>").addClass(n("tracker"));return L&&t.css({opacity:0,backgroundColor:"white"}),t}function _(e){Y.removeClass().addClass(n("holder")).addClass(e)}function w(e,t){function i(){window.setTimeout(b,h)}var s=e[0]/te,n=e[1]/ie,a=e[2]/te,o=e[3]/ie;if(!ne){var r=he.flipCoords(s,n,a,o),l=he.getFixed(),d=[l.x,l.y,l.x2,l.y2],c=d,h=P.animationDelay,u=r[0]-d[0],p=r[1]-d[1],f=r[2]-d[2],m=r[3]-d[3],g=0,v=P.swingSpeed;s=c[0],n=c[1],a=c[2],o=c[3],pe.animMode(!0);var b=function(){return function(){g+=(100-g)/v,c[0]=Math.round(s+g/100*u),c[1]=Math.round(n+g/100*p),c[2]=Math.round(a+g/100*f),c[3]=Math.round(o+g/100*m),g>=99.8&&(g=100),g<100?(C(c),i()):(pe.done(),pe.animMode(!1),"function"==typeof t&&t.call(ge))}}();i()}}function x(e){C([e[0]/te,e[1]/ie,e[2]/te,e[3]/ie]),P.onSelect.call(ge,m(he.getFixed())),pe.enableHandles()}function C(e){he.setPressed([e[0],e[1]]),he.setCurrent([e[2],e[3]]),pe.update()}function k(){return m(he.getFixed())}function S(){return he.getFixed()}function D(e){l(e),$()}function T(){P.disabled=!0,
pe.disableHandles(),pe.setCursor("default"),fe.setCursor("default")}function O(){P.disabled=!1,$()}function A(){pe.done(),fe.activateHandlers(null,null)}function M(){Y.remove(),U.show(),U.css("visibility","visible"),e(t).removeData("Jcrop")}function E(e,t){pe.release(),T();var i=new Image;i.onload=function(){var s=i.width,n=i.height,a=P.boxWidth,o=P.boxHeight;q.width(s).height(n),q.attr("src",e),V.attr("src",e),f(q,a,o),B=q.width(),W=q.height(),V.width(B).height(W),re.width(B+2*oe).height(W+2*oe),Y.width(B).height(W),ue.resize(B,W),O(),"function"==typeof t&&t.call(ge)},i.src=e}function I(e,t,i){var s=t||P.bgColor;P.bgFade&&a()&&P.fadeTime&&!i?e.animate({backgroundColor:s},{queue:!1,duration:P.fadeTime}):e.css("backgroundColor",s)}function $(e){P.allowResize?e?pe.enableOnly():pe.enableHandles():pe.disableHandles(),fe.setCursor(P.allowSelect?"crosshair":"default"),pe.setCursor(P.allowMove?"move":"default"),P.hasOwnProperty("trueSize")&&(te=P.trueSize[0]/B,ie=P.trueSize[1]/W),P.hasOwnProperty("setSelect")&&(x(P.setSelect),pe.done(),delete P.setSelect),ue.refresh(),P.bgColor!=le&&(I(P.shade?ue.getShades():Y,P.shade?P.shadeColor||P.bgColor:P.bgColor),le=P.bgColor),de!=P.bgOpacity&&(de=P.bgOpacity,P.shade?ue.refresh():pe.setBgOpacity(de)),Q=P.maxSize[0]||0,X=P.maxSize[1]||0,Z=P.minSize[0]||0,ee=P.minSize[1]||0,P.hasOwnProperty("outerImage")&&(q.attr("src",P.outerImage),delete P.outerImage),pe.refresh()}var N,P=e.extend({},e.Jcrop.defaults),H=navigator.userAgent.toLowerCase(),L=/msie/.test(H),j=/msie [1-6]\./.test(H);"object"!=typeof t&&(t=e(t)[0]),"object"!=typeof i&&(i={}),l(i);var F={border:"none",visibility:"visible",margin:0,padding:0,position:"absolute",top:0,left:0},U=e(t),R=!0;if("IMG"==t.tagName){if(0!=U[0].width&&0!=U[0].height)U.width(U[0].width),U.height(U[0].height);else{var z=new Image;z.src=U[0].src,U.width(z.width),U.height(z.height)}var q=U.clone().removeAttr("id").css(F).show();q.width(U.width()),q.height(U.height()),U.after(q).hide()}else q=U.css(F).show(),R=!1,null===P.shade&&(P.shade=!0);f(q,P.boxWidth,P.boxHeight);var B=q.width(),W=q.height(),Y=e("<div />").width(B).height(W).addClass(n("holder")).css({position:"relative",backgroundColor:P.bgColor}).insertAfter(U).append(q);P.addClass&&Y.addClass(P.addClass);var V=e("<div />"),K=e("<div />").width("100%").height("100%").css({zIndex:310,position:"absolute",overflow:"hidden"}),G=e("<div />").width("100%").height("100%").css("zIndex",320),J=e("<div />").css({position:"absolute",zIndex:600}).dblclick(function(){var e=he.getFixed();P.onDblClick.call(ge,e)}).insertBefore(q).append(K,G);R&&(V=e("<img />").attr("src",q.attr("src")).css(F).width(B).height(W),K.append(V)),j&&J.css({overflowY:"hidden"});var Q,X,Z,ee,te,ie,se,ne,ae,oe=P.boundary,re=y().width(B+2*oe).height(W+2*oe).css({position:"absolute",top:s(-oe),left:s(-oe),zIndex:290}).mousedown(v),le=P.bgColor,de=P.bgOpacity;N=o(q);var ce=function(){function e(){var e,t={},i=["touchstart","touchmove","touchend"],s=document.createElement("div");try{for(e=0;e<i.length;e++){var n=i[e];n="on"+n;var a=n in s;a||(s.setAttribute(n,"return;"),a="function"==typeof s[n]),t[i[e]]=a}return t.touchstart&&t.touchend&&t.touchmove}catch(e){return!1}}function t(){return P.touchSupport===!0||P.touchSupport===!1?P.touchSupport:e()}return{createDragger:function(e){return function(t){return!P.disabled&&(!("move"===e&&!P.allowMove)&&(N=o(q),se=!0,d(e,r(ce.cfilter(t)),!0),t.stopPropagation(),t.preventDefault(),!1))}},newSelection:function(e){return v(ce.cfilter(e))},cfilter:function(e){return e.pageX=e.originalEvent.changedTouches[0].pageX,e.pageY=e.originalEvent.changedTouches[0].pageY,e},isSupported:e,support:t()}}(),he=function(){function e(e){e=o(e),f=u=e[0],m=p=e[1]}function t(e){e=o(e),c=e[0]-f,h=e[1]-m,f=e[0],m=e[1]}function i(){return[c,h]}function s(e){var t=e[0],i=e[1];0>u+t&&(t-=t+u),0>p+i&&(i-=i+p),W<m+i&&(i+=W-(m+i)),B<f+t&&(t+=B-(f+t)),u+=t,f+=t,p+=i,m+=i}function n(e){var t=a();switch(e){case"ne":return[t.x2,t.y];case"nw":return[t.x,t.y];case"se":return[t.x2,t.y2];case"sw":return[t.x,t.y2]}}function a(){if(!P.aspectRatio)return l();var e,t,i,s,n=P.aspectRatio,a=P.minSize[0]/te,o=P.maxSize[0]/te,c=P.maxSize[1]/ie,h=f-u,g=m-p,v=Math.abs(h),b=Math.abs(g),y=v/b;return 0===o&&(o=10*B),0===c&&(c=10*W),y<n?(t=m,i=b*n,e=h<0?u-i:i+u,e<0?(e=0,s=Math.abs((e-u)/n),t=g<0?p-s:s+p):e>B&&(e=B,s=Math.abs((e-u)/n),t=g<0?p-s:s+p)):(e=f,s=v/n,t=g<0?p-s:p+s,t<0?(t=0,i=Math.abs((t-p)*n),e=h<0?u-i:i+u):t>W&&(t=W,i=Math.abs(t-p)*n,e=h<0?u-i:i+u)),e>u?(e-u<a?e=u+a:e-u>o&&(e=u+o),t=t>p?p+(e-u)/n:p-(e-u)/n):e<u&&(u-e<a?e=u-a:u-e>o&&(e=u-o),t=t>p?p+(u-e)/n:p-(u-e)/n),e<0?(u-=e,e=0):e>B&&(u-=e-B,e=B),t<0?(p-=t,t=0):t>W&&(p-=t-W,t=W),d(r(u,p,e,t))}function o(e){return e[0]<0&&(e[0]=0),e[1]<0&&(e[1]=0),e[0]>B&&(e[0]=B),e[1]>W&&(e[1]=W),[Math.round(e[0]),Math.round(e[1])]}function r(e,t,i,s){var n=e,a=i,o=t,r=s;return i<e&&(n=i,a=e),s<t&&(o=s,r=t),[n,o,a,r]}function l(){var e,t=f-u,i=m-p;return Q&&Math.abs(t)>Q&&(f=t>0?u+Q:u-Q),X&&Math.abs(i)>X&&(m=i>0?p+X:p-X),ee/ie&&Math.abs(i)<ee/ie&&(m=i>0?p+ee/ie:p-ee/ie),Z/te&&Math.abs(t)<Z/te&&(f=t>0?u+Z/te:u-Z/te),u<0&&(f-=u,u-=u),p<0&&(m-=p,p-=p),f<0&&(u-=f,f-=f),m<0&&(p-=m,m-=m),f>B&&(e=f-B,u-=e,f-=e),m>W&&(e=m-W,p-=e,m-=e),u>B&&(e=u-W,m-=e,p-=e),p>W&&(e=p-W,m-=e,p-=e),d(r(u,p,f,m))}function d(e){return{x:e[0],y:e[1],x2:e[2],y2:e[3],w:e[2]-e[0],h:e[3]-e[1]}}var c,h,u=0,p=0,f=0,m=0;return{flipCoords:r,setPressed:e,setCurrent:t,getOffset:i,moveOffset:s,getCorner:n,getFixed:a}}(),ue=function(){function t(e,t){f.left.css({height:s(t)}),f.right.css({height:s(t)})}function i(){return n(he.getFixed())}function n(e){f.top.css({left:s(e.x),width:s(e.w),height:s(e.y)}),f.bottom.css({top:s(e.y2),left:s(e.x),width:s(e.w),height:s(W-e.y2)}),f.right.css({left:s(e.x2),width:s(B-e.x2)}),f.left.css({width:s(e.x)})}function a(){return e("<div />").css({position:"absolute",backgroundColor:P.shadeColor||P.bgColor}).appendTo(p)}function o(){u||(u=!0,p.insertBefore(q),i(),pe.setBgOpacity(1,0,1),V.hide(),r(P.shadeColor||P.bgColor,1),pe.isAwake()?d(P.bgOpacity,1):d(1,1))}function r(e,t){I(h(),e,t)}function l(){u&&(p.remove(),V.show(),u=!1,pe.isAwake()?pe.setBgOpacity(P.bgOpacity,1,1):(pe.setBgOpacity(1,1,1),pe.disableHandles()),I(Y,0,1))}function d(e,t){u&&(P.bgFade&&!t?p.animate({opacity:1-e},{queue:!1,duration:P.fadeTime}):p.css({opacity:1-e}))}function c(){P.shade?o():l(),pe.isAwake()&&d(P.bgOpacity)}function h(){return p.children()}var u=!1,p=e("<div />").css({position:"absolute",zIndex:240,opacity:0}),f={top:a(),left:a().height(W),right:a().height(W),bottom:a()};return{update:i,updateRaw:n,getShades:h,setBgColor:r,enable:o,disable:l,resize:t,refresh:c,opacity:d}}(),pe=function(){function t(t){var i=e("<div />").css({position:"absolute",opacity:P.borderOpacity}).addClass(n(t));return K.append(i),i}function i(t,i){var s=e("<div />").mousedown(p(t)).css({cursor:t+"-resize",position:"absolute",zIndex:i}).addClass("ord-"+t);return ce.support&&s.bind("touchstart.jcrop",ce.createDragger(t)),G.append(s),s}function a(e){var t=P.handleSize,s=i(e,T++).css({opacity:P.handleOpacity}).addClass(n("handle"));return t&&s.width(t).height(t),s}function o(e){return i(e,T++).addClass("jcrop-dragbar")}function r(e){var t;for(t=0;t<e.length;t++)M[e[t]]=o(e[t])}function l(e){var i,s;for(s=0;s<e.length;s++){switch(e[s]){case"n":i="hline";break;case"s":i="hline bottom";break;case"e":i="vline right";break;case"w":i="vline"}O[e[s]]=t(i)}}function d(e){var t;for(t=0;t<e.length;t++)A[e[t]]=a(e[t])}function c(e,t){P.shade||V.css({top:s(-t),left:s(-e)}),J.css({top:s(t),left:s(e)})}function h(e,t){J.width(Math.round(e)).height(Math.round(t))}function u(){var e=he.getFixed();he.setPressed([e.x,e.y]),he.setCurrent([e.x2,e.y2]),f()}function f(e){if(D)return g(e)}function g(e){var t=he.getFixed();h(t.w,t.h),c(t.x,t.y),P.shade&&ue.updateRaw(t),D||b(),e?P.onSelect.call(ge,m(t)):P.onChange.call(ge,m(t))}function v(e,t,i){(D||t)&&(P.bgFade&&!i?q.animate({opacity:e},{queue:!1,duration:P.fadeTime}):q.css("opacity",e))}function b(){J.show(),P.shade?ue.opacity(de):v(de,!0),D=!0}function _(){C(),J.hide(),P.shade?ue.opacity(1):v(1),D=!1,P.onRelease.call(ge)}function w(){E&&G.show()}function x(){if(E=!0,P.allowResize)return G.show(),!0}function C(){E=!1,G.hide()}function k(e){e?(ne=!0,C()):(ne=!1,x())}function S(){k(!1),u()}var D,T=370,O={},A={},M={},E=!1;P.dragEdges&&e.isArray(P.createDragbars)&&r(P.createDragbars),e.isArray(P.createHandles)&&d(P.createHandles),P.drawBorders&&e.isArray(P.createBorders)&&l(P.createBorders),e(document).bind("touchstart.jcrop-ios",function(t){e(t.currentTarget).hasClass("jcrop-tracker")&&t.stopPropagation()});var I=y().mousedown(p("move")).css({cursor:"move",position:"absolute",zIndex:360});return ce.support&&I.bind("touchstart.jcrop",ce.createDragger("move")),K.append(I),C(),{updateVisible:f,update:g,release:_,refresh:u,isAwake:function(){return D},setCursor:function(e){I.css("cursor",e)},enableHandles:x,enableOnly:function(){E=!0},showHandles:w,disableHandles:C,animMode:k,setBgOpacity:v,done:S}}(),fe=function(){function t(t){re.css({zIndex:450}),t?e(document).bind("touchmove.jcrop",o).bind("touchend.jcrop",l):u&&e(document).bind("mousemove.jcrop",s).bind("mouseup.jcrop",n)}function i(){re.css({zIndex:290}),e(document).unbind(".jcrop")}function s(e){return c(r(e)),!1}function n(e){return e.preventDefault(),e.stopPropagation(),se&&(se=!1,h(r(e)),pe.isAwake()&&P.onSelect.call(ge,m(he.getFixed())),i(),c=function(){},h=function(){}),!1}function a(e,i,s){return se=!0,c=e,h=i,t(s),!1}function o(e){return c(r(ce.cfilter(e))),!1}function l(e){return n(ce.cfilter(e))}function d(e){re.css("cursor",e)}var c=function(){},h=function(){},u=P.trackDocument;return u||re.mousemove(s).mouseup(n).mouseout(n),q.before(re),{activateHandlers:a,setCursor:d}}(),me=function(){function t(){P.keySupport&&(a.show(),a.focus())}function i(e){a.hide()}function s(e,t,i){P.allowMove&&(he.moveOffset([t,i]),pe.updateVisible(!0)),e.preventDefault(),e.stopPropagation()}function n(e){if(e.ctrlKey||e.metaKey)return!0;ae=!!e.shiftKey;var t=ae?10:1;switch(e.keyCode){case 37:s(e,-t,0);break;case 39:s(e,t,0);break;case 38:s(e,0,-t);break;case 40:s(e,0,t);break;case 27:P.allowSelect&&pe.release();break;case 9:return!0}return!1}var a=e('<input type="radio" />').css({position:"fixed",left:"-120px",width:"12px"}).addClass("jcrop-keymgr"),o=e("<div />").css({position:"absolute",overflow:"hidden"}).append(a);return P.keySupport&&(a.keydown(n).blur(i),j||!P.fixedSupport?(a.css({position:"absolute",left:"-20px"}),o.append(a).insertBefore(q)):a.insertBefore(q)),{watchKeys:t}}();ce.support&&re.bind("touchstart.jcrop",ce.newSelection),G.hide(),$(!0);var ge={setImage:E,animateTo:w,setSelect:x,setOptions:D,tellSelect:k,tellScaled:S,setClass:_,disable:T,enable:O,cancel:A,release:pe.release,destroy:M,focus:me.watchKeys,getBounds:function(){return[B*te,W*ie]},getWidgetSize:function(){return[B,W]},getScaleFactor:function(){return[te,ie]},getOptions:function(){return P},ui:{holder:Y,selection:J}};return L&&Y.bind("selectstart",function(){return!1}),U.data("Jcrop",ge),ge},e.fn.Jcrop=function(t,i){var s;return this.each(function(){if(e(this).data("Jcrop")){if("api"===t)return e(this).data("Jcrop");e(this).data("Jcrop").setOptions(t)}else"IMG"==this.tagName?e.Jcrop.Loader(this,function(){e(this).css({display:"block",visibility:"hidden"}),s=e.Jcrop(this,t),e.isFunction(i)&&i.call(s)}):(e(this).css({display:"block",visibility:"hidden"}),s=e.Jcrop(this,t),e.isFunction(i)&&i.call(s))}),this},e.Jcrop.Loader=function(t,i,s){function n(){o.complete?(a.unbind(".jcloader"),e.isFunction(i)&&i.call(o)):window.setTimeout(n,50)}var a=e(t),o=a[0];a.bind("load.jcloader",n).bind("error.jcloader",function(t){a.unbind(".jcloader"),e.isFunction(s)&&s.call(o)}),o.complete&&e.isFunction(i)&&(a.unbind(".jcloader"),i.call(o))},e.Jcrop.defaults={allowSelect:!0,allowMove:!0,allowResize:!0,trackDocument:!0,baseClass:"jcrop",addClass:null,bgColor:"black",bgOpacity:.6,bgFade:!1,borderOpacity:.4,handleOpacity:.5,handleSize:null,aspectRatio:0,keySupport:!0,createHandles:["n","s","e","w","nw","ne","se","sw"],createDragbars:["n","s","e","w"],createBorders:["n","s","e","w"],drawBorders:!0,dragEdges:!0,fixedSupport:!0,touchSupport:null,shade:null,boxWidth:0,boxHeight:0,boundary:2,fadeTime:400,animationDelay:20,swingSpeed:3,minSelect:[0,0],maxSize:[0,0],minSize:[0,0],onChange:function(){},onSelect:function(){},onDblClick:function(){},onRelease:function(){}}}(jQuery),function(e,t,i,s){function n(e,t,i){i={onSelect:a,onChange:a,bgColor:"#ccc",bgOpacity:.4,minSize:[135,135],setSelect:[0,0,t,e]},s.chosen.attr("width")&&s.chosen.attr("height")&&(i.aspectRatio=s.chosen.attr("width")/s.chosen.attr("height")),s.sample.Jcrop(i,function(){s.crop["org-h"]=e,s.crop["org-w"]=t,s.crop=$.extend(!0,s.crop,this)})}function a(e){parseInt(e.w)>0&&(s.crop["co-ord"]=e)}function o(){s.modal.children().children("div.jcrop-holder").remove(),s.sample.attr("src","").removeAttr("style height width").css({"max-height":"426px","max-width":"554px",position:"relative"}),s.crop&&s.crop.destroy&&s.crop.destroy()}i={setImage:function(e,t,i){s.callback=i,s.chosen=t,s.sample.attr("src",e)}},t=e.setReference("cropping",i),s={crop:{},cache:$("div#cropping-holder"),modal:$("div#cropping-holder").find("div.body"),sample:$("div#cropping-holder").find("img.sample"),background:$("div#cropping-bg")},s.sample.on("load",function(e,i,a,o){return i=s.chosen,o=i.data().width?i.data().width:i.attr("width"),a=i.data().height?i.data().height:i.attr("height"),e.currentTarget.height<a||e.currentTarget.width<o?void t.utils.statusMsg(t.utils.localeContentBuffer("IMAGE_DIMENSIONS")+a+"(h) x "+o+"(w)",!0):((this.height>426||this.width>554)&&(e={},this.width>this.height?e.ratio=Math.round(this.width/554*10)/10:e.ratio=Math.round(this.height/426*10)/10,e["r-h"]=Math.round(this.height/e.ratio),e["r-w"]=Math.round(this.width/e.ratio),this.width=e["r-w"],this.height=e["r-h"]),n(this.height,this.width),s.modal.children().children("div.jcrop-holder").css({position:"absolute",left:Math.round((s.modal.width()-this.width)/2)+1,top:Math.round((s.modal.height()-this.height)/2)+1}).children().children("div").first().css("border-radius",i.hasClass("circle-tracker")?"100%":"3px"),s.cache.fadeIn(),void s.background.fadeIn())}),$(e).resize(function(e,t){e=Math.round(.7*self.innerHeight),t=Math.round(.7*self.innerWidth),s.cache.css({width:t,"margin-left":Math.round(.15*self.innerWidth),left:"0",height:e+73}),s.modal.css({height:e,width:t}),s.modal.children().css({left:Math.round((s.modal-554)/2),top:Math.round((s.modal-426)/2)})}),$(e).resize(),s.cache.find("div.footer > a").each(function(e){e={},$(this).on("click",{action:$(this).data().action},function(t,i){t.data.action&&("crop"===t.data.action&&(e.width=Math.round(s.crop["org-w"]*s.chosen.find("img").data("width")/s.crop["co-ord"].w)+"px",e.height=Math.round(s.crop["org-h"]*s.chosen.find("img").data("height")/s.crop["co-ord"].h)+"px",e.marginLeft="-"+Math.round(s.crop["co-ord"].x*s.chosen.find("img").data("width")/s.crop["co-ord"].w)+"px",e.marginTop="-"+Math.round(s.crop["co-ord"].y*s.chosen.find("img").data("height")/s.crop["co-ord"].h)+"px",e["max-width"]="none",e["object-fit"]="cover",s.crop["co-ord"].w1=s.crop["co-ord"].w,s.crop["co-ord"].h1=s.crop["co-ord"].h,s.crop["co-ord"].w2=s.crop["org-w"],s.crop["co-ord"].h2=s.crop["org-h"],s.crop["co-ord"].x=s.crop["co-ord"].x,s.crop["co-ord"].y=s.crop["co-ord"].y,i=$.extend({"org-h":s.crop["org-h"],"org-w":s.crop["org-w"]},s.crop["co-ord"])),o(),s.crop={}),s.cache.fadeOut(),s.background.fadeOut(),s.callback(i,e)})})}(window),jQuery.extend({handleError:function(e,t,i,s){$(".modal-backdrop.fade.in").trigger("click")},createUploadIframe:function(e,t){var i="jUploadFrame"+e,s='<iframe id="'+i+'" name="'+i+'" style="position:absolute; top:-9999px; left:-9999px"';return window.ActiveXObject&&("boolean"==typeof t?s+=' src="javascript:false"':"string"==typeof t&&(s+=' src="'+t+'"')),s+=" />",jQuery(s).appendTo(document.body),jQuery("#"+i).get(0)},createUploadForm:function(e,t,i){var s="jUploadForm"+e,n="jUploadFile"+e,a=jQuery('<form  action="" method="POST" name="'+s+'" id="'+s+'" enctype="multipart/form-data"></form>');i&&jQuery('<input type="hidden" name="data" value="'+encodeURIComponent(i)+'" />').appendTo(a);var o=jQuery(t).clone();return jQuery(t).attr("id",n),jQuery(t).before(o),jQuery(t).appendTo(a),jQuery(a).css("position","absolute"),jQuery(a).css("top","-1200px"),jQuery(a).css("left","-1200px"),jQuery(a).appendTo("body"),a},ajaxFileUpload:function(e){e=jQuery.extend({},jQuery.ajaxSettings,e);var t=(new Date).getTime(),i=jQuery.createUploadForm(t,e.fileElementId,"undefined"!=typeof e.data&&e.data),s=(jQuery.createUploadIframe(t,e.secureuri),"jUploadFrame"+t),n="jUploadForm"+t;e.global&&!jQuery.active++&&jQuery.event.trigger("ajaxStart");var a=!1,o={};e.global&&jQuery.event.trigger("ajaxSend",[o,e]);var r=function(t){var n=document.getElementById(s);try{n.contentWindow?(o.responseText=n.contentWindow.document.body?n.contentWindow.document.body.innerHTML:null,o.responseXML=n.contentWindow.document.XMLDocument?n.contentWindow.document.XMLDocument:n.contentWindow.document,imageurl2=o.responseText):n.contentDocument&&(o.responseText=n.contentDocument.document.body?n.contentDocument.document.body.innerHTML:null,o.responseXML=n.contentDocument.document.XMLDocument?n.contentDocument.document.XMLDocument:n.contentDocument.document)}catch(t){jQuery.handleError(e,o,null,t)}if(o||"timeout"==t){a=!0;var r;try{if(r="timeout"!=t?"success":"error","error"!=r){var l=JSON.parse($("<div/>").html(o.responseText).text());e.success&&e.success(l,r),e.global&&jQuery.event.trigger("ajaxSuccess",[o,e])}else jQuery.handleError(e,o,r)}catch(t){r="error",jQuery.handleError(e,o,r,t)}e.global&&jQuery.event.trigger("ajaxComplete",[o,e]),e.global&&!--jQuery.active&&jQuery.event.trigger("ajaxStop"),e.complete&&e.complete(o,r),jQuery(n).unbind(),setTimeout(function(){try{jQuery(n).remove(),jQuery(i).remove()}catch(t){jQuery.handleError(e,o,null,t)}},100),o=null}};e.timeout>0&&setTimeout(function(){a||r("timeout")},e.timeout);try{var i=jQuery("#"+n);jQuery(i).attr("action",e.url),jQuery(i).attr("method","POST"),jQuery(i).attr("target",s),i.encoding?jQuery(i).attr("encoding","multipart/form-data"):jQuery(i).attr("enctype","multipart/form-data"),jQuery(i).submit()}catch(t){jQuery.handleError(e,o,null,t)}return jQuery("#"+s).load(r),{abort:function(){}}},uploadHttpData:function(r,type){var data=!type;return data="xml"==type||data?r.responseXML:r.responseText,"script"==type&&jQuery.globalEval(data),"json"==type&&eval("data = "+data),"html"==type&&jQuery("<div>").html(data).evalScripts(),data}}),function(e,t,i,s){function n(e,t){t=e.attr("name"),e.removeAttr("name"),e.attr("class",e.attr("class").replace(" sub-templates","").replace(" templates","")).removeAttr("style"),i[t]=e.clone(!0,!0),e.remove()}t=location.pathname.replace("/","").split("/"),t={univ:t[0],page:t[1],category:t[2]?t[2]:"me"===t[1]?"learning":"all",level1:t[3]?t[3]:"",level2:t[4]?t[4]:"",hash:location.hash?String(location.hash).replace("#",""):location.href.indexOf("?action")!==-1||location.href.indexOf("#action")!==-1?/action=([^&]+)/.exec(location.href)[1]:"",userCount:{},navigated:0,set:function(e,i,n,a){return s.history.isPopTriggered=!1,t.navigated>0&&(s["common-service"].clearLevels(),s["common-service"].clearChallengeLevels()),a=i.originalEvent,i=i.data.data,s.pageAttr.page=i.page,n=s.utils.getConstraints(s.pageAttr.page,a?i.category:t.category),"activity"===s.pageAttr.page&&(n.offset=0),"EL"===window.locale&&"all"===n.category?s.dom("#header-name").html("Todo"):s.dom("#header-name").html("activity"===s.pageAttr.page?"activity board":"me"===s.pageAttr.page&&n.filter?"workingon"===n.filter?"Working on":n.filter:n.category.replace(/-/g," ")),s.dom("#inProfChat").hide(),s.dom("#requestCount").hide(),s.dom("#chsteps").html(""),s.dom("#sidebar").show(),s.dom("#view-type").attr("class",s.pageAttr.page),"admin"===s.pageAttr.page&&(s.dom("div.admin-content").attr("class","admin-content "+i.category),s.history.isPopTriggered||"reports"!==i.category||s.history.push({},s.pageAttr.page.toUpperCase(),"/"+s.pageAttr.univ+"/admin/"+i.category),s["userRequest-service"].hideEmpty(),"challengeRequests"===i.category?"EN"===window.locale?s.dom("#adminTitle").html("Challenge Requests- "):s.dom("#adminTitle").html("Solicitud de retos- "):"stuffRequests"===i.category?"EN"===window.locale?s.dom("#adminTitle").html("Stuff Requests- "):s.dom("#adminTitle").html("Solicitudes Cosas- "):"reports"===i.category&&s.dom("#sidebar").hide(),s.pageAttr.category=i.category,s.dom("#request-search").val(""),a=s.dom("#search-request-type").html(i.category.replace("Requests","")).parent().parent().find("input"),s.dom("#srch_optn input").each(function(e){e=s.dom(this,!0),e.is(":checked")&&e.trigger("click")})),s.pageAttr.category=void 0,s.dom(".nav.header_tabs").attr("class","nav header_tabs "+s.pageAttr.page),s.pageAttr[n.context]||(s.pageAttr[n.context]={}),s.pageAttr[n.context].canLoad=!0,s["common-service"].loadpage(n),t.navigated++,!1},switchUnivs:function(e,t,i,n){e.parent().attr("class").indexOf("open")==-1?(s.dom(".dropdown, .btn-group").removeClass("open"),e.parent().attr("class","univ-name dropdown open")):e.parent().attr("class","univ-name dropdown")},loadedPages:{}},s=e.setReference("pageAttr",t),sessionExist===!1&&s.dom("#no_Login").css("display","block"),s.setHandler(s.dom(".handler")),i={};for(var a=0,o=s.dom(".sub-templates",!1),r=o.length;a<r;a++)n($(o[a]));for(var a=0,o=s.dom(".templates",!1),r=o.length;a<r;a++)n($(o[a]));e.setReference("templates",i),s.dom("#group-creator .bootstrap-select.show-tick").on("click",function(){setTimeout(function(){s.dom("#group-creator .bootstrap-select.show-tick").parent().addClass("dropup")},5)});for(var a=0,o=s.dom(".wysiwyg-textarea",!1),r=o.length;a<r;a++)o[a]=s.dom(o[a],!0),new nicEditor({buttonList:["bold","italic","underline","left","center","right","justify","ol","ul","indent","outdent","link","unlink"],iconsPath:"/images/core/editor.gif",maxHeight:250}).panelInstance(o[a].attr("id")),o[a].parent().find("div.nicEdit-main").attr("placeholder",o[a].attr("placeholder")).html("").parent().css({border:"none",padding:"5px 0px"});var l=s.dom("div.nicEdit-button"),d=["bold","italic","underline","align-left","align-center","align-right","align-justify","list-ol","list-ul","indent","outdent","link","unlink"];l.each(function(e,t,i){t=s.dom(t,!0),e=d[t.parents("div.nicEdit-buttonContain:lt(1)").parent().index()],t.css({"background-image":"none","background-position":"center center"}).html('<i class="fa fa-'+e+'" style="padding:2px 3px; width:12px; text-align:center;"></i>').attr("title",e.replace("-"," ").toCamelCase()).tooltip(),"link"===e&&(t.parents("div.nicEdit-panel:lt(1)").append('<div class="nicEdit-link"><span class="close"><i class="icon-remove"></i></span><div><span class="lbl-url">URL</span> <input class="nicEdit-url" type="text" placeholder="http://www.example.com"></div><div><span class="lbl-title">TITLE</span> <input class="nicEdit-title" type="text" placeholder="Example"></div><div><span style="width:18%" class="lbl-openIn">OPEN IN</span> <span class="tab-radio"><input class="new-tab" id="new-tab-'+a+'" type="radio" name="tab-action" value="1" /> <label class="nic-newTab" for="new-tab-'+a+'">NEW TAB</label></span> <span class="tab-radio"><input class="current-tab" id="current-tab-'+a+'" type="radio" name="tab-action" value="0" /> <label class="nic-currentTab" for="current-tab-'+a+'">CURRENT TAB</label></span></div><div class="add-link" style=" background-color: #00a9da ; border-color: #0094bf;"><span class="submit">Add</span></div></div>'),e=t.parents("div.nicEdit-panel:lt(1)").children("div.nicEdit-link"),e.children("span.close")[0].onclick=function(){e.fadeOut()},e.children("div.add-link").children("span.submit")[0].onclick=function(n,a,o,r,l){return n=e.find("input.nicEdit-url").val().trim(),s.utils.isValidURL(n)?(n=n.indexOf("://")===-1?"http://"+n:n,(a=e.find("input.nicEdit-title").val().trim())?(o=e.find('input:radio[name="tab-action"]:checked').val(),i?(i.innerHTML=a,i.setAttribute("href",n),1==o?i.setAttribute("target","_blank"):i.removeAttribute("target")):(r=s.dom("div.nicEdit-pane",!0).children("form"),r.find("#href").val(n),r.find("#title").val(a),r.find("#target").val(r.find("#target option:eq("+o+")").val()),r.find("input:submit").trigger("click")),void t.trigger("click")):void s.utils.statusMsg(s.utils.localeContentBuffer("ENTER_TITLE"),!0)):void s.utils.statusMsg(s.utils.localeContentBuffer("ENTER_VALID_URL"),!0)},t[0].onclick=function(t,n,a,o,r){e.is(":visible")?e.children("span.close").trigger("click"):(n=s.utils.getSelectedNode(),r=n.anchorNode.parentNode.tagName,"A"===r||"a"===r?(a=n.anchorNode.parentNode.getAttribute("href").trim(),i=n.anchorNode.parentNode):i=null,o="#text"===n.anchorNode.nodeName?n.toString().trim():"",o||(a=""),s.utils.isValidURL(o)&&(a=o,o=""),e.find("input.nicEdit-url").val(a),e.find("input.nicEdit-title").val(o),setTimeout(function(){a?e.find("input.nicEdit-title").focus():e.find("input.nicEdit-url").focus()},200),e.find("input.new-tab").attr("checked",!0),i&&!i.getAttribute("target")&&e.find("input.current-tab").attr("checked",!0),e.fadeIn())})}),s.dom(".title",!0).tooltip().removeClass("title"),s.getContent(),s["common-service"].buildUnivs(),s["common-service"].gHC(),0!=isUnivActive&&1!=isUnivActive||("admin"===t.page?s.dom("#"+t.category).trigger("click"):s.dom("#"+t.page).trigger("click"),1==isUnivActive&&(s.dom(".upgrade_plan").attr("class","upgrade_plan card "+window.plan).show().find(".pricing_back").css("visibility","hidden"),s.dom(".pricing").find(".pricing_"+window.plan).find(".upgrade_button").trigger("click"),"premium"===window.plan&&s.dom(".header-pay").show().siblings(".header-upgrade").hide())),"free"===plan||isUnivActive!=-1&&"paynow"!==t.hash||(isUnivActive==-1?s.dom(".upgrade_plan").attr("class","upgrade_plan card "+window.plan+" block").show().find(".pricing_back").css("visibility","hidden"):s.dom(".upgrade_plan").attr("class","upgrade_plan card "+window.plan).show().find(".pricing_back").css("visibility","hidden"),s.dom(".pricing").find(".pricing_"+window.plan).find(".upgrade_button").trigger("click"),"premium"===window.plan&&s.dom(".header-pay").show().sibiling(".header-upgrade").hide())}(window),function(e,t,i,s){i={open:function(e){s||"localhost"===window.location.hostname||(s=new goog.appengine.Channel(e.trim()).open(),s.onopen=i.onSocketOpen,s.onmessage=i.onSocketMessage,s.onerror=i.onSocketError)},onSocketOpen:function(){console.log("Socket Opened.")},onSocketError:function(e){},onSocketClose:function(){},requestToken:function(){t.xhr({url:"/_ah/channel/requestToken",type:"POST",success:function(e){200===e.code&&e.data.token&&i.open(e.data.token)}})},onSocketMessage:function(e,i){e=JSON.parse(e.data),t.pageAttr.univ===e["univ-semantic-name"]&&(i=JSON.parse(e.data).data,e.action.indexOf("store")!=-1?e.action.indexOf("added")!=-1?((i.sidebarcount||i.sidebarcount>=0)&&t["store-service"].sideBarCount(i.sidebarcount),t["store-service"].build(t.templates["single-stuff"].clone(!0,!0),i.data,"prepend",!0)):e.action.indexOf("updated")!=-1?t["store-service"].afterEdit(i.data):e.action.indexOf("remove")!=-1&&((i.sidebarcount||i.sidebarcount>=0)&&t["store-service"].sideBarCount(i.sidebarcount),t["store-service"].removeElement(i.data.key,i.data.isDeleted===!0?"delete":i.data.status)):e.action.indexOf("activity")!=-1?(e.data=i,t["activity-service"].populate(e,"prepend")):e.action.indexOf("review")!=-1&&(console.log(i),console.log(t.pageAttr.level1),t.pageAttr.level1&&t.pageAttr.level1===i["ch-semantic-name"]&&t["challenges-service"].buildRatings(i))),e.action.indexOf("notifications")!=-1&&(i=JSON.parse(e.data).data,i&&(t.notifications.updateCount(i.notifCount),t.notifications.buildNotification(i.status,i.type,i.user,i.univ,"prepend"),i.userPoints&&+i.userPoints!==+t.dom(".overall_points > span").html()&&t.utils.counter(t.dom(".overall_points > span"),t.dom(".overall_points > span").html(),i.userPoints)))}},t=e.setReference("channel",i),i.requestToken(),window.onbeforeunload=function(){s&&s.close()}}(window),function(e){delete e.setReference,"live"===window.app_mode&&(console.log=function(){})